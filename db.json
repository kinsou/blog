{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/img/20140812122118.png","path":"img/20140812122118.png","modified":0,"renderable":0},{"_id":"source/img/20151217111715.png","path":"img/20151217111715.png","modified":0,"renderable":0},{"_id":"source/img/20151228100517.png","path":"img/20151228100517.png","modified":0,"renderable":0},{"_id":"source/img/avatar.jpg","path":"img/avatar.jpg","modified":0,"renderable":0},{"_id":"source/img/20151217111031.png","path":"img/20151217111031.png","modified":0,"renderable":0},{"_id":"themes/yilia/source/mobile.d238ee.js","path":"mobile.d238ee.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/main.2d7529.css","path":"main.2d7529.css","modified":0,"renderable":1},{"_id":"themes/yilia/source/slider.885efe.js","path":"slider.885efe.js","modified":0,"renderable":1},{"_id":"source/img/20140812122250.png","path":"img/20140812122250.png","modified":0,"renderable":0},{"_id":"source/img/深度学习---之pooling层的作用与缺陷1.png","path":"img/深度学习---之pooling层的作用与缺陷1.png","modified":0,"renderable":0},{"_id":"source/img/深度学习---之pooling层的作用与缺陷3.png","path":"img/深度学习---之pooling层的作用与缺陷3.png","modified":0,"renderable":0},{"_id":"source/img/深度学习---之pooling层的作用与缺陷2.png","path":"img/深度学习---之pooling层的作用与缺陷2.png","modified":0,"renderable":0},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.b7ae25.ttf","path":"fonts/iconfont.b7ae25.ttf","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.59e68b.eot","path":"fonts/iconfont.59e68b.eot","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.dba24b.svg","path":"fonts/iconfont.dba24b.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.ca3627.woff","path":"fonts/iconfont.ca3627.woff","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/main.2d7529.js","path":"main.2d7529.js","modified":0,"renderable":1},{"_id":"source/img/深度学习---之pooling层的作用与缺陷4.png","path":"img/深度学习---之pooling层的作用与缺陷4.png","modified":0,"renderable":0},{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0}],"Cache":[{"_id":"themes/yilia/.babelrc","hash":"db600d40e93e6d8023737a65d58d3be7370e5e30","modified":1544689475614},{"_id":"themes/yilia/.eslintignore","hash":"ed9d8911ca08c3dd5072c48dd0be4d06f8897730","modified":1544689475617},{"_id":"themes/yilia/.editorconfig","hash":"daaa8757fac18f8735fadd0a37a42c06f421ca14","modified":1544689475615},{"_id":"themes/yilia/.gitattributes","hash":"758cfbecfa7919e99abddf3297f37cde7e3d8d4e","modified":1544689475619},{"_id":"themes/yilia/.gitignore","hash":"d5fc575329853ff620b50fc62ad4b18fa09a308a","modified":1544689475620},{"_id":"themes/yilia/.eslintrc.js","hash":"303d25adf02ad65720e537a16a4a137d14bb755f","modified":1544689475618},{"_id":"themes/yilia/_config.yml","hash":"667e5f7dcc361ffce35ed49f2b1384d8d8d1a750","modified":1578458811931},{"_id":"themes/yilia/package.json","hash":"4631f9013f0b1c5fc5d73af4c3624375bfe4d109","modified":1544689475920},{"_id":"themes/yilia/webpack.config.js","hash":"14fe482547b12b15bc78cb981c42a4ca5b6ba770","modified":1544689476881},{"_id":"source/img/20140812122118.png","hash":"2abb64f433528b82cb03d8209347b7f3eefc2c71","modified":1544689475370},{"_id":"themes/yilia/README.md","hash":"0becd9c18f9d44fc364788a34a4f3ec82ca7940a","modified":1544689475621},{"_id":"source/img/20151217111715.png","hash":"b288e019727f7c7c618922d9e885faa55dc3e2a6","modified":1544689475379},{"_id":"source/img/20151228100517.png","hash":"708b8ba976dcb69c0881c226e9ff17b4e3dc83fd","modified":1544689475382},{"_id":"source/img/alipay.png","hash":"729f9a4217912115ac5449364ffaa13d4c341712","modified":1544689475385},{"_id":"source/img/avatar.jpg","hash":"bfbdbe07ff064e8ff6aabb631364493a988464e6","modified":1544689475388},{"_id":"source/img/20151217111031.png","hash":"36010ae507bbfb8cbf4b14083baee2e2a6487484","modified":1544689475377},{"_id":"source/_posts/Centos scp 拷贝文件.md","hash":"22c0eeee31e77d83cfacdbeb8a2581aab9deca5b","modified":1544689474047},{"_id":"source/img/weixin.png","hash":"ed3eb57f4b987b3c34445cba59d0f6f255bd6dd8","modified":1544689475391},{"_id":"source/_posts/Centos安装gcc gcc-c++.md","hash":"756f4c0153021731827b85b9533f5d0f7dbab075","modified":1544689474050},{"_id":"source/_posts/Centos安装setup.md","hash":"9af27f91f80ea935461b701a3d333dcd3986a05a","modified":1544689474051},{"_id":"source/_posts/Centos开机自启动.md","hash":"f109b480c4c36ac03a495cc861c8ecc86c3451de","modified":1544689474052},{"_id":"source/_posts/Centos设置自动获取IP.md","hash":"6dd08d461543ebbcdf799243a7bd6ed74ed7a062","modified":1544689474053},{"_id":"source/_posts/Centos安装JDK.md","hash":"d2ad314f3627a6d4b3d0978a65e7fc206b6d32ae","modified":1544689474049},{"_id":"source/_posts/Centos配置nfs.md","hash":"e17dc8c75882fd8955499da780997829d98a2118","modified":1544689474054},{"_id":"source/_posts/Docker-容器镜像删除.md","hash":"32fc3ab8c570f6a024f40e1c71ff0b18ab52d3e3","modified":1544689474056},{"_id":"source/_posts/Eclipse使用Maven插件异常.md","hash":"3bcb7f3c26b9cded26b065d1bf650588a661a7e0","modified":1544689474058},{"_id":"source/_posts/LKL一键包-BBR（适用Openvz）.md","hash":"74fea0b7fc9df73e1376853dc66ab878e01c6c74","modified":1544689474059},{"_id":"source/_posts/Clojure例子（编译后java调用与.clj形式调用）.md","hash":"b496fb5db222dcde3231c97efb43a455137b0aa5","modified":1544689474055},{"_id":"source/_posts/Openvz-改版-BBR.md","hash":"2297672e609d31da830b6f822796116a13ab09d1","modified":1544689474062},{"_id":"source/_posts/Ubuntu-安装-SSR-一键脚本.md","hash":"38e01249430cce40cbfde59f9e726e0530dca275","modified":1544689474066},{"_id":"source/_posts/Springboot注册linux服务.md","hash":"5ab60a84b44da7d3c34d0d8e721ecf03a5f57569","modified":1544689474063},{"_id":"source/_posts/Ubuntu下安装Shadowsocks.md","hash":"9988c4e90cc87c118cca5b767a9a0a3e3041d655","modified":1544689474067},{"_id":"source/_posts/Ubuntu安装JDK.md","hash":"5fbc17f0a16c0a4a05fd95bb34109b099ae279a3","modified":1544689474068},{"_id":"source/_posts/Ubuntu安装nodejs.md","hash":"6e1d3954a6d6ae863fcef4e90e04b0ada274d035","modified":1544689474045},{"_id":"source/_posts/Ubuntu安装vsftpd.md","hash":"73b837371ab33cebd5be1262e6b03c0756f9b1ee","modified":1544689474069},{"_id":"source/_posts/Ubuntu定时任务.md","hash":"a84c32ac2a614c0ecf2d257390a3088a2f64d7f3","modified":1544689474070},{"_id":"source/_posts/cygwin 的vim 退格键 方向键混乱.md","hash":"75337fe740f48f6a25436f068fdfc947f2870069","modified":1544689474071},{"_id":"source/_posts/MarkdownPad2.5 注册码.md","hash":"aa4c3cdb2249c998b9938acdb0f6548b2eed5584","modified":1544689474060},{"_id":"source/_posts/Nginx安装.md","hash":"337d74b8a10d79e9c771362e70a204f85e344842","modified":1544689474061},{"_id":"source/_posts/Ubuntu-安装-SVN.md","hash":"066f5b2c1035cb61302166d7fbf15226c815ec0a","modified":1544690131251},{"_id":"source/_posts/google_voice_register.md","hash":"9d7b15531565744c9594dea478ef384f7be1be20","modified":1544689474072},{"_id":"source/_posts/linux 常用命令.md","hash":"ea7e3e78f8b7923d38493ddbccad765ead910c81","modified":1544689474076},{"_id":"source/_posts/maven debug 断点定位 source jar.md","hash":"c51a0133e08dd98e7796a0bbd225671aa0cd81c9","modified":1544689474078},{"_id":"source/_posts/hexo更换电脑.md","hash":"d11611c02117877398698aa7fe64309e471a47f1","modified":1544689474046},{"_id":"source/_posts/mysql-utf8mb4-的问题.md","hash":"b837a78ccfd38bd222f9f4ae091ce7de80274503","modified":1544689474079},{"_id":"source/_posts/orkflow-视频解析地址.md","hash":"d33b9820743fcce987aae209f435cd267ca4f798","modified":1544689474080},{"_id":"source/_posts/pring多事务绑定同时开启.md","hash":"889fd2cd98270b8775d90d1888c5aecb56ccc6cb","modified":1544689474081},{"_id":"source/_posts/ubuntu dnsmasq配置.md","hash":"c538080d7cdbf484325ca39d2e45ed4dddf25720","modified":1544689474083},{"_id":"source/_posts/ubuntu使用ssh-keygen设置ssh无密码登录.md","hash":"7952ccf5e5917f355092c662b55bb58f4e7d9598","modified":1544689474084},{"_id":"source/_posts/hexo+gitcafe 搭建博客.md","hash":"6f8d4b4a8dfe11de7c26c19d9e7b52e33427903b","modified":1544689474074},{"_id":"source/_posts/xkcptun_install.md","hash":"77116dae1aeb7e01b1ff503db43e7d4b00f13b00","modified":1544689474086},{"_id":"source/_posts/java内存解压带密码zip.md","hash":"e182aa558b23ea579c170041e352268a09ff0edc","modified":1544689474075},{"_id":"source/_posts/tomcat memcached-session-manager使用spring security序列化问题.md","hash":"b3fdacc5bf758a0e5409f259581c2785ff5db4ae","modified":1544689474082},{"_id":"source/_posts/wechat-javax.net.ssl.SSLException异常.md","hash":"325060e8270c0bff0d4540d2393fadd988e63d99","modified":1544689474085},{"_id":"source/_posts/极路由安装shadowsocks插件.md","hash":"a6dfa98e903ad6052ebfd5976ca6c0bdfba20cf6","modified":1544689474092},{"_id":"source/_posts/安装Hadoop2.5.0.md","hash":"c8f90587bef91a7d1a3bc9e678082edeac33a94a","modified":1544689474090},{"_id":"themes/yilia/languages/default.yml","hash":"f26a34a7983d4bc17c65c7f0f14da598e62ce66d","modified":1544689475623},{"_id":"themes/yilia/languages/fr.yml","hash":"b4be1c1592a72012e48df2b3ec41cc9685573e50","modified":1544689475624},{"_id":"themes/yilia/languages/nl.yml","hash":"3d82ec703d0b3287739d7cb4750a715ae83bfcb3","modified":1544689475625},{"_id":"themes/yilia/languages/ru.yml","hash":"2a476b4c6e04900914c81378941640ac5d58a1f0","modified":1544689475627},{"_id":"themes/yilia/languages/no.yml","hash":"ddf2035e920a5ecb9076138c184257d9f51896a7","modified":1544689475626},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"b057f389c6713010f97d461e48ec959b0b6f3b44","modified":1544689475628},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"f5f0ca88185da7a8457760d84bf221781473bd7c","modified":1544689475629},{"_id":"source/_posts/深度学习---之pooling层的作用与缺陷.md","hash":"dfba16fe63e3415b14d812e3aa5be753defd422e","modified":1544689474094},{"_id":"source/_posts/安装-pip-配置服务器端-shadowsocks.md","hash":"5af545dfbcca902790c5986c683996e956042d11","modified":1544689474088},{"_id":"source/_posts/开启Docker远程访问.md","hash":"345c0495d7524373499b575df306f0a6df0ab6fb","modified":1544689474091},{"_id":"themes/yilia/source/mobile.d238ee.js","hash":"a054884092af1cc5c2c14e5e11a4dac6d9254481","modified":1544689475986},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1544689475861},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1544689475863},{"_id":"themes/yilia/layout/index.ejs","hash":"ec498c6c0606acde997ce195dad97b267418d980","modified":1544689475864},{"_id":"themes/yilia/source/main.2d7529.css","hash":"2eef112e365f9b00664302ba98b517662c75d411","modified":1544689475982},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1544689475866},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1544689475868},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1544689475869},{"_id":"themes/yilia/source-src/css.ejs","hash":"cf7eab48d626433120d1ef9697f719a359817018","modified":1544689476833},{"_id":"themes/yilia/source/slider.885efe.js","hash":"41a76cb10a2b344d54a15ffac68d17331fc6f3d6","modified":1544689475987},{"_id":"source/img/20140812122250.png","hash":"f627441801812a2fa8148467ddfc1d32d71612c7","modified":1544689475374},{"_id":"source/img/深度学习---之pooling层的作用与缺陷1.png","hash":"83dcdfe2152cdf6f4d4a89b33e833e58d0b91c7e","modified":1544689475393},{"_id":"source/img/深度学习---之pooling层的作用与缺陷3.png","hash":"6bb395d215ab324b9821bf7d63a5caca3ef15df5","modified":1544689475396},{"_id":"source/img/深度学习---之pooling层的作用与缺陷2.png","hash":"1faf94e7c32f2ec207cb13320fec1df4a04c93a6","modified":1544689475395},{"_id":"themes/yilia/layout/layout.ejs","hash":"b471ab706d48e0be3f783eab1c94bf5878ef5a94","modified":1544689475865},{"_id":"themes/yilia/source-src/script.ejs","hash":"28abac2426761d7e715b38aadd86ce6549c8ae77","modified":1544689476869},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1544689475922},{"_id":"themes/yilia/source/fonts/iconfont.b7ae25.ttf","hash":"697449e7790edd12e208706ecaa8d5d0eed44cde","modified":1544689475924},{"_id":"themes/yilia/source/fonts/iconfont.59e68b.eot","hash":"b7f28dc802d6e32281e8fe7930d4dd2022d00717","modified":1544689475923},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1544689475927},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1544689475951},{"_id":"themes/yilia/source/fonts/iconfont.dba24b.svg","hash":"f6c8d119c14f2124f4362acd6c8e00f209af5613","modified":1544689475926},{"_id":"themes/yilia/source/fonts/iconfont.ca3627.woff","hash":"cda0ea1dc25dc3d329d7637afe2cd6aec37e351b","modified":1544689475925},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"61c95c49baa2c1bfd99cf88c55ba205b44bf3d97","modified":1544689475767},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"edc0154b30a4127acda10297bec6aacf754b4ac4","modified":1544689475769},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1544689475953},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"155327c23607f69989b58845f24d842a54e504b8","modified":1544689475772},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"f75e48f5dfde1b17e53a4303c22ef577fa802dea","modified":1564122839021},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1544689475953},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a4eacc2bc1278095a0ef99f904b0634c78f980eb","modified":1544689475770},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"1ccc627d7697e68fddc367c73ac09920457e5b35","modified":1544689475775},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"4767e666849ac2600c7a1cbf94c54cf702864f80","modified":1544689475771},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"913826fb939fca9990a76b1c5674a043261d7e1a","modified":1544689475774},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"11550a418921d330e6553be0569a94ab5a217967","modified":1544689475780},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"e2b3f2b3631ef211a4d98d11f0da2d285340f10e","modified":1544689475779},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"b69855e07b65117769adc515cb64b803932068c9","modified":1544689475777},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"ccec1fc70f021cb50ac85b524e7949878ab93a18","modified":1544689475781},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"12ca7d8dba56bc767b9309dda9526dcbaffc1614","modified":1545993496359},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"cc1c39903aed0a0601d104238d2bbd13ad2a36f3","modified":1544689475816},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"5b6514830b35a852e957dc1e6910316af3849317","modified":1564122839023},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"29ba600e98ed55f7af4ade8038272c84cba21188","modified":1544689476072},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"ce227b6f5a9af194fd5d455200630f32c05e151f","modified":1544689476074},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"8a0ae8ee6af8df3f215f1cd4ecc10145a5b92cf0","modified":1544689476075},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"9069371dcc65eee63081a21e8a56a9f3dbf64c08","modified":1544689476078},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"4115c4518cca3f5cf461018aa7a7321138d017cc","modified":1544689476076},{"_id":"themes/yilia/source-src/css/duoshuo.scss","hash":"aa265cb85a6c9ba78a76fb4697d0260d10445abe","modified":1544689476115},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"1577a2336b3ad122f49f60dff2bc1a97d4e7b18b","modified":1544689476077},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7ca837a4cc34db1c35f01baec85eb10ccc64ea86","modified":1544689476194},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1544689476196},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"538b6d35b25cbdba7dc77feec638336625c8ef8b","modified":1544689475815},{"_id":"themes/yilia/source-src/css/article.scss","hash":"55d082fec4c6bb341725567acaa29ce37d50320a","modified":1544689476080},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"f53ea8270752b5919ec5d79224d22af91f2eda12","modified":1544689476197},{"_id":"themes/yilia/source-src/css/main.scss","hash":"b63c0f9b3bf68efc3bcd7c816bcac6f2fb827528","modified":1544689476299},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"5dc23be94451d54f0757de85747fd75061e8cf52","modified":1544689476191},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"40e5aa5056dc0b3b9f51c5b387370b612e265d4e","modified":1544689476198},{"_id":"themes/yilia/source-src/css/page.scss","hash":"244c4d75c375978ff9edb74acc68825e63c6b235","modified":1544689476303},{"_id":"themes/yilia/source-src/css/left.scss","hash":"1ee3dd6fa50186af5bedb09d4a0e6b47ddb1b57b","modified":1544689476297},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"19f10fd2f0c3377aa4b165b3c2291ecf86dd9351","modified":1544689476300},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"a557a9ed244c82b8b71e9da9de3339d92783499f","modified":1544689476304},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"2495f7e4e3b055735c531f944b5f40a118a351ec","modified":1544689476305},{"_id":"themes/yilia/source-src/css/share.scss","hash":"9d6f6884f40c191882e56a1e1e1192400944a515","modified":1544689476306},{"_id":"themes/yilia/source-src/css/social.scss","hash":"70c2e36b7161717feed1f231271ed693c36407d1","modified":1544689476307},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"399744e98e7c67939ed9b23c2670d8baad044eda","modified":1544689476308},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"28a01c3d85ec3194095f96988642a16d461f1077","modified":1544689476301},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"f5bed08765a8f0a344af5d4781ff822a57028148","modified":1544689476310},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"915c93edd67c5326695cc7dc84b14c5f154dbcc8","modified":1544689476309},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"b81cedbe31accca82e597801186911a7b5e6841c","modified":1544689476312},{"_id":"themes/yilia/source-src/js/main.js","hash":"93ca570a646c6087821d7b14cb1646bb2a0274f4","modified":1544689476842},{"_id":"themes/yilia/source-src/js/anm.js","hash":"d18f6276a352b871390a4112d479b9e58b8cdbbe","modified":1544689476838},{"_id":"themes/yilia/source-src/js/browser.js","hash":"4dc04845cf27f350922b63f1813a9c82e6e33b05","modified":1544689476839},{"_id":"themes/yilia/source-src/js/fix.js","hash":"eccdcc7ee79adebf450bc655b2e80eb6801421a6","modified":1544689476841},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"461c08ffcbc724d74ec7e0ff38e171eefe0f89fd","modified":1544689476844},{"_id":"themes/yilia/source-src/js/report.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1564122839064},{"_id":"themes/yilia/source-src/js/Q.js","hash":"e56d9710afa79b31ca6b9fbd845f6d1895f5214b","modified":1544689476835},{"_id":"themes/yilia/source-src/js/util.js","hash":"3bcdeb95072b85600874424e6929e3e22cfddaa0","modified":1544689476854},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"3e0fd4479a40ddbd1571c6c953df7e23637b61f5","modified":1544689476855},{"_id":"themes/yilia/source/main.2d7529.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1564122839045},{"_id":"source/img/深度学习---之pooling层的作用与缺陷4.png","hash":"88b4cacab7c02a8d9df905d834799fa4e7eb99a3","modified":1544689475397},{"_id":"themes/yilia/source-src/js/share.js","hash":"d4ccff8266c37363b3904226f5d035b7db882c61","modified":1544689476850},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"f75b236818b6c0ec0e5e6c12a517825d6230d756","modified":1544689475782},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"aae96de18d48cd3b9b7bf6fed0100e15b53cca97","modified":1544689475783},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"b6a97043f9ec37e571aacacfedcda1d4d75e3c7c","modified":1544689475786},{"_id":"themes/yilia/source-src/js/slider.js","hash":"707842efee006e3ea9b6765d7460f4ef4f08e41f","modified":1544689476852},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2c4e4ca36c9bb4318506c38aca7127f1f44d827f","modified":1544689475788},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"d4a460a35e2112d0c7414fd5e19b3a16093f1caf","modified":1544689475789},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"34093dc3eb987955e4507e6f0cd1e25396793124","modified":1544689475784},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs.bak","hash":"4eb408c6b4f0b1fdd64955de339b8bc6471447e8","modified":1544689475785},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"06a2dd18ac9a43fbc9a59c61e6f795f9326e9927","modified":1544689475787},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"91db061c9c17628291a005e5bd4936cf9d35a6c4","modified":1544689476083},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"262ffcd88775080b7f511db37f58d2bcb1b2bfc7","modified":1544689476082},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"b7f28dc802d6e32281e8fe7930d4dd2022d00717","modified":1544689476116},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"f6c8d119c14f2124f4362acd6c8e00f209af5613","modified":1544689476117},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"6e75bdaa46de83094ba0873099c6e7d656a22453","modified":1544689476085},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1544689476199},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"cda0ea1dc25dc3d329d7637afe2cd6aec37e351b","modified":1544689476120},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1544689476201},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"1834c3ed8560716e63bb3a50be94cac87fbbeaf3","modified":1544689476081},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"398a49913b4a47d928103562b1ce94520be4026a","modified":1544689476084},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1544689476200},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"697449e7790edd12e208706ecaa8d5d0eed44cde","modified":1544689476118},{"_id":"public/js/pikaday.js","hash":"ed96983c39755404034474911e7241065598452a","modified":1585813737832},{"_id":"public/atom.xml","hash":"3170a3444714381b650bc4c3ced5a63dce5adae3","modified":1585813831408},{"_id":"public/content.json","hash":"31cdea75ec3dfcf22ff627e6ad5dbe4c84f07850","modified":1585813831409},{"_id":"public/sitemap.xml","hash":"0e6d0b57577d19c46d96e3ce6dc18c0184863b1a","modified":1585813832989},{"_id":"public/2018/12/13/Ubuntu-安装-SVN/index.html","hash":"02ca83b449dd5ad6f8d7a378d20d85af965f1a29","modified":1584695041894},{"_id":"public/2018/08/20/深度学习---之pooling层的作用与缺陷/index.html","hash":"28559260df68abf0c4433f7c219f2735200cebdf","modified":1584695041894},{"_id":"public/2018/10/30/Ubuntu安装nodejs/index.html","hash":"30b48d64c00c41769b20d70c24d908ef0122fd5f","modified":1584695041894},{"_id":"public/2018/10/30/hexo更换电脑/index.html","hash":"c1a22eb533eb81ce27d9ee5345923ef6a002b6c9","modified":1584695041894},{"_id":"public/2017/10/24/google_voice_register/index.html","hash":"27d541027d47a9745cf63bfe645c23130cb89e31","modified":1584695041894},{"_id":"public/2017/10/18/xkcptun_install/index.html","hash":"60b004c2e33d1505ae236a771cbdf3644c6e3898","modified":1584695041894},{"_id":"public/2017/08/16/pring多事务绑定同时开启/index.html","hash":"616cac2871dbc0f7b6204615c653058f7baa9156","modified":1584695041894},{"_id":"public/2017/08/07/Nginx安装/index.html","hash":"90eee819d279e366ff021a7489eabc89f62033c9","modified":1584695041894},{"_id":"public/2017/08/03/Springboot注册linux服务/index.html","hash":"791fe30028d450f7e3adadc6601681b3b87c8920","modified":1584695041894},{"_id":"public/2017/07/27/开启Docker远程访问/index.html","hash":"4140ca4362035eec59ef711aa45df46e9a2b66b5","modified":1584695041895},{"_id":"public/2017/07/27/Docker-容器镜像删除/index.html","hash":"2417900f81001dc4a5eb2949257e3bebba1c205f","modified":1584695041895},{"_id":"public/2017/07/19/Openvz-改版-BBR/index.html","hash":"fcd63cf07945028b2738863afee1ab9d92294bc8","modified":1584695041895},{"_id":"public/2017/03/30/orkflow-视频解析地址/index.html","hash":"ff8869a0982c4cce54b64bd79901b5a84bebf81f","modified":1584695041895},{"_id":"public/2017/04/19/Ubuntu-安装-SSR-一键脚本/index.html","hash":"a6b96684bc88e76c278a825165bad32b8065c3c8","modified":1584695041895},{"_id":"public/2016/07/18/极路由安装shadowsocks插件/index.html","hash":"d0e39f5359c2a72726c884615332d4fcfca43ca0","modified":1584695041895},{"_id":"public/2016/05/17/mysql-utf8mb4-的问题/index.html","hash":"550535641e2dd0158936210babd4b6c79dafd3fe","modified":1584695041895},{"_id":"public/2016/05/19/Ubuntu安装vsftpd/index.html","hash":"51f71045b4a58ab207a68550a90723badcc74602","modified":1584695041895},{"_id":"public/2017/04/10/LKL一键包-BBR（适用Openvz）/index.html","hash":"5e3c2bebacb45fca7b1e229015982d95881e4acd","modified":1584695041895},{"_id":"public/2017/04/10/安装-pip-配置服务器端-shadowsocks/index.html","hash":"7e48f48a4b20dc1154737c1f15df222fea45d0bc","modified":1584695041895},{"_id":"public/2016/03/10/Ubuntu安装JDK/index.html","hash":"942c8a388afbaf58b7199ffe153c6cecd3238331","modified":1584695041895},{"_id":"public/2015/12/28/Eclipse使用Maven插件异常/index.html","hash":"c7f86b3ceef1240a1bf9b69f156184636c4856ea","modified":1584695041895},{"_id":"public/2015/12/18/Ubuntu定时任务/index.html","hash":"40da14ca29e13926e063fc6ee9d9be9f0d39890b","modified":1584695041896},{"_id":"public/2015/12/17/hexo+gitcafe 搭建博客/index.html","hash":"826f41b2755c770f471ca1113cbf23149d3903e8","modified":1584695041895},{"_id":"public/2015/12/17/Ubuntu下安装Shadowsocks/index.html","hash":"e6ca2a4993bde2150b2ba0b4ead8b1959d2517c2","modified":1584695041896},{"_id":"public/2015/12/17/MarkdownPad2.5 注册码/index.html","hash":"6197f68aac8d80cb9b0ffab30717c7223eb8b55c","modified":1584695041896},{"_id":"public/2015/02/02/wechat-javax.net.ssl.SSLException异常/index.html","hash":"828fcb06b579acb15c4c466a8cfaab61235bf66b","modified":1584695041897},{"_id":"public/2014/10/16/linux 常用命令/index.html","hash":"6b4b05efffb4eae82855bea1faa8392b17e03e90","modified":1584695041896},{"_id":"public/2014/10/14/ubuntu dnsmasq配置/index.html","hash":"2032999fd0fb04ea0133663535dce70ab373a7f7","modified":1584695041896},{"_id":"public/2014/08/27/安装Hadoop2.5.0/index.html","hash":"4194635d15ae4c43c131a3c857d0c8db3e14493f","modified":1584695041896},{"_id":"public/2014/08/27/ubuntu使用ssh-keygen设置ssh无密码登录/index.html","hash":"09c1f44f7fc6e8613e25ab144eb9507e601839ae","modified":1584695041896},{"_id":"public/2014/08/27/cygwin 的vim 退格键 方向键混乱/index.html","hash":"779f44968cbcf69e1c164c61bab3f42918c86a69","modified":1584695041896},{"_id":"public/2014/08/04/maven debug 断点定位 source jar/index.html","hash":"d2d827c3e7fa5b8aa839d7b36eaf2a44d183c380","modified":1584695041896},{"_id":"public/2014/06/05/java内存解压带密码zip/index.html","hash":"685f237eae53400a4c1af2781618b6c05f00e30b","modified":1584695041896},{"_id":"public/2013/05/13/Centos安装gcc gcc-c++/index.html","hash":"0eb6a7a69c9d191ba0d3b437a4686711443da44a","modified":1584695041896},{"_id":"public/2013/05/13/Centos配置nfs/index.html","hash":"e233d6312e86ba6eec5d3e7f8af9a421530a7d28","modified":1584695041897},{"_id":"public/2013/05/11/Centos安装JDK/index.html","hash":"b0e10c667d78090e4007aad0818dffda97a15734","modified":1584695041897},{"_id":"public/2013/05/10/Centos scp 拷贝文件/index.html","hash":"02e6b90b883ee866ee98d0698f2a973d451f9cc2","modified":1584695041897},{"_id":"public/2013/05/09/tomcat memcached-session-manager使用spring security序列化问题/index.html","hash":"71cf88ee7a8ed3e48fa79381b0a2a82c4da89a84","modified":1584695041897},{"_id":"public/2013/05/08/Centos安装setup/index.html","hash":"6a5cd0a4a1bad4b608333b1d9bcadf658cd09964","modified":1584695041897},{"_id":"public/2013/05/08/Centos开机自启动/index.html","hash":"a64255eaa31d918559609d38e35c35908843be2a","modified":1584695041897},{"_id":"public/2013/05/08/Clojure例子（编译后java调用与.clj形式调用）/index.html","hash":"c0a450b80687f76aa7e7c0665e5b677e2ed82155","modified":1584695041897},{"_id":"public/2013/05/05/Centos设置自动获取IP/index.html","hash":"cd74392864aa41281211e2584f08a950849ed5c6","modified":1584695041897},{"_id":"public/archives/index.html","hash":"81fd8d4d2766e9012152a68ff36682760af3b7ae","modified":1585813833052},{"_id":"public/archives/2013/index.html","hash":"c2ffcacc8a881bc790df42ccf9aba7384ccdde73","modified":1584695041897},{"_id":"public/archives/2013/05/index.html","hash":"f39b30228a613bbba20fbc305bc7529887c7ade5","modified":1584695041898},{"_id":"public/archives/2014/index.html","hash":"8decfad5c500e2c219e5429e11f880fbf654f610","modified":1584695041898},{"_id":"public/archives/2014/06/index.html","hash":"ebca9683a136a6b1447a199f2315fa1d7f974e18","modified":1584695041898},{"_id":"public/archives/2014/08/index.html","hash":"1a55d05253c088941670350a96b92e50504f6cdf","modified":1584695041898},{"_id":"public/archives/2014/10/index.html","hash":"fe630ca8fb94adfdec1f89869631f5f2ca6d8489","modified":1584695041898},{"_id":"public/archives/2015/index.html","hash":"8f0276a99bede5d30940db626e5bd86c10e5a97f","modified":1584695041898},{"_id":"public/archives/2015/02/index.html","hash":"8518af76831ae7752734c32b7396346cb27e7ad4","modified":1584695041898},{"_id":"public/archives/2015/12/index.html","hash":"5b5cd66817fd3531baf75b453fc5d49c8d9eccfb","modified":1584695041898},{"_id":"public/archives/2016/index.html","hash":"fecdbb76ca998f60bdcf264291b2f32033fd40a1","modified":1584695041898},{"_id":"public/archives/2016/03/index.html","hash":"df9fa2611f081568c018cf2fda93dcb64b5bf235","modified":1584695041899},{"_id":"public/archives/2016/05/index.html","hash":"e8450e3048b3c31b7dec36eaabd2d75d75dcc73d","modified":1584695041899},{"_id":"public/archives/2016/07/index.html","hash":"2788f73dae9e8c4a2902ada9f60bb52fca599df8","modified":1584695041899},{"_id":"public/archives/2017/index.html","hash":"c8c6fc2ae693ad6d8d8acd37956c159141a22a5a","modified":1584695041899},{"_id":"public/archives/2017/03/index.html","hash":"e743578bf2ac1908af65b1de52171e6b6b5dd7e1","modified":1584695041899},{"_id":"public/archives/2017/04/index.html","hash":"d8bb4f7c522442f47c5bd9ea82520e2cedd893bf","modified":1584695041899},{"_id":"public/archives/2017/07/index.html","hash":"fd8f6e4da3f5f64c2ab63c7ce1f8a5f4aa71aa6c","modified":1584695041899},{"_id":"public/archives/2017/08/index.html","hash":"57f5d2bcb8e592ec7526a8d23684bd1ad3b415d3","modified":1584695041899},{"_id":"public/archives/2017/10/index.html","hash":"bcdaf8a106d6674e6555966807f9b4c26c239bd6","modified":1584695041900},{"_id":"public/archives/2018/index.html","hash":"990794c82bd4478830d49ffe5457ac96c22577b4","modified":1584695041899},{"_id":"public/archives/2018/08/index.html","hash":"2523fd3a06ef26071e934b4f2e9a1015649c5cde","modified":1584695041900},{"_id":"public/archives/2018/10/index.html","hash":"e5a8a6f88047dadc74fa0ca70c280df4587bd07e","modified":1584695041900},{"_id":"public/archives/2018/12/index.html","hash":"cbfb506d682a4e3c9cfcca1f5569256ede03055e","modified":1584695041900},{"_id":"public/categories/Centos/index.html","hash":"a95f62e75c9290b4f99ee2655f9c3c1eefb5d933","modified":1584695041901},{"_id":"public/categories/Eclipse/index.html","hash":"50148cc031bb78505eb40512e6f92f46fbb6f20f","modified":1584695041901},{"_id":"public/categories/Clojure/index.html","hash":"e70dd1fa46cafa4f506f0acf474a334944c0b8ea","modified":1584695041901},{"_id":"public/categories/Ubuntu/index.html","hash":"ed4857ab538873fe522f06e084e7c0bf4f5037c1","modified":1584695041901},{"_id":"public/categories/注册码/index.html","hash":"da0fb81945541e82c926a21ab8b2ec05ac7fd36c","modified":1584695041901},{"_id":"public/categories/google/index.html","hash":"51d6e874f60eeb5010bec285546c83a03b815568","modified":1584695041901},{"_id":"public/categories/Mysql/index.html","hash":"863f5033835e7bb51a7b686b8a91b0b391debf28","modified":1584695041901},{"_id":"public/categories/Hexo/index.html","hash":"0f028b667ecaa41320906305bb9664fa922d224a","modified":1584695041901},{"_id":"public/categories/Java/index.html","hash":"16f765b986d21c95a47bed9c2cbd538c084b1718","modified":1584695041902},{"_id":"public/categories/Shadowsocks/index.html","hash":"aabf587de0671dd26038c9dd7d7387d9a18b4994","modified":1584695041902},{"_id":"public/index.html","hash":"ee9956ff43bfd654552183ac95c6a39ece125c30","modified":1585813833052},{"_id":"public/page/2/index.html","hash":"bb8253bb5c964679bfa9ec4aa876eff1eb3c859f","modified":1585813739462},{"_id":"public/page/3/index.html","hash":"536ae2e9311a6f95f94d9dd7d54bba5c1ee5917e","modified":1585813739462},{"_id":"public/page/4/index.html","hash":"436bc646ae899470739616836fd2d15f8e2f4c10","modified":1585813739462},{"_id":"public/page/5/index.html","hash":"4526f919fea96f81c04685ac6c7c32b93fb8608b","modified":1585813739463},{"_id":"public/page/6/index.html","hash":"02639f61859729b31ebcb424a1854cf60b645fea","modified":1585813739463},{"_id":"public/tags/Centos/index.html","hash":"5a1212b8148d84b254faaa4af3b0e32c98ec6f1a","modified":1584695041903},{"_id":"public/tags/JDK/index.html","hash":"cdd8f5755737c93310dd9dd223e7d6096ef155ac","modified":1584695041903},{"_id":"public/tags/Docker/index.html","hash":"acd5f8cb8acba4b737a07679ba086587f358f786","modified":1584695041903},{"_id":"public/tags/Ubuntu/index.html","hash":"1c1632b28c3047f6ad4112c66c7e0bd01a03e97e","modified":1585813833052},{"_id":"public/tags/Ubuntu/page/2/index.html","hash":"5ab9e62e0469b057aadb3c3e15a4fab1f7f90670","modified":1585813739463},{"_id":"public/tags/bbr/index.html","hash":"8350774251d421343702d433526627299de2d1cd","modified":1584695041904},{"_id":"public/tags/搬瓦工/index.html","hash":"c44d36d63539c16be6d13ce29de6c2561ddf93cb","modified":1584695041904},{"_id":"public/tags/Eclipse/index.html","hash":"cc723368de0ce90bfb7d2631dc691dff7f80a3d5","modified":1584695041904},{"_id":"public/tags/Maven/index.html","hash":"e54efe4b9a09efd64de4cd8658ddd8abb8c894fb","modified":1584695041904},{"_id":"public/tags/Clojure/index.html","hash":"34641979760144daed95eb492df6fc14d480cb8f","modified":1584695041904},{"_id":"public/tags/shadowsocks/index.html","hash":"ddd462947e19e4df6e0056807453217d8104eafb","modified":1584695041904},{"_id":"public/tags/ssr/index.html","hash":"f6912a60d1006ee9d4a92421b67d395552fdaab1","modified":1584695041904},{"_id":"public/tags/SpringBoot/index.html","hash":"5d3866aeb31c56e0c7e6fbb2ec9926b1fce565da","modified":1584695041904},{"_id":"public/tags/Spring/index.html","hash":"77046c9da079abe9e33ce6f470009fa7e9394818","modified":1584695041904},{"_id":"public/tags/nodejs/index.html","hash":"33fe3ab689739660314eeb61adc16403dbbdac3c","modified":1584695041904},{"_id":"public/tags/Crontab/index.html","hash":"522b99b8cc8f4fe1e05c38a23c4c5bfa955ceb57","modified":1584695041904},{"_id":"public/tags/注册码/index.html","hash":"b3a3b3e20eef6f2be656935ecd1a358f1d6cb6b8","modified":1584695041904},{"_id":"public/tags/MarkdownPad/index.html","hash":"ed424c267f5f6ef8c6b3d2179be408afc6b869e5","modified":1584695041904},{"_id":"public/tags/Cygwin/index.html","hash":"433a094c3c0d0133d7e143bba085469421ab2f05","modified":1584695041904},{"_id":"public/tags/Nginx/index.html","hash":"bca9c48c7f16b3e311ed8521a4d35957c8af3f98","modified":1584695041905},{"_id":"public/tags/SSL/index.html","hash":"89dff2b4240bcb5c89eb7ba0e4994977f4c74cf5","modified":1584695041905},{"_id":"public/tags/google-voice/index.html","hash":"3db61a2cdbd1875a88877f6f92a3b7930181d541","modified":1584695041905},{"_id":"public/tags/SVN/index.html","hash":"c8d7d34034f831e35cef8fd3238f92b3b7eb07d1","modified":1584695041905},{"_id":"public/tags/svn/index.html","hash":"20214b7a925ac7959574715e59a35bd9cfe5971b","modified":1584695041905},{"_id":"public/tags/hexo/index.html","hash":"7270661b0940b2cb97907c9d83b87830ded7ca6b","modified":1584695041905},{"_id":"public/tags/Linux/index.html","hash":"a62113c84eee5027097eaa99cb3e02eea2b72d48","modified":1584695041905},{"_id":"public/tags/Mysql/index.html","hash":"745353ccce3a3d1ce2ba74d98d4f51210d20421b","modified":1584695041905},{"_id":"public/tags/Java/index.html","hash":"be57a3e2bde159663f88a85938f9e697c2edaf27","modified":1584695041905},{"_id":"public/tags/workflow/index.html","hash":"56b8fd1c60b64295bf143b96d69c98dac8af1e50","modified":1584695041905},{"_id":"public/tags/ios/index.html","hash":"a6394ff7703e98c4afb6ca37c2886912975be33c","modified":1584695041906},{"_id":"public/tags/DNSmasq/index.html","hash":"ed90af056aba1a178a00caeee4ddc1b36850e165","modified":1584695041906},{"_id":"public/tags/Git/index.html","hash":"c63b98ca4afff2f85fdff7ab2cdcddf6f10ca502","modified":1584695041906},{"_id":"public/tags/Hexo/index.html","hash":"89e58d8f8539a534258e5f91584f6e51b85f16e3","modified":1584695041906},{"_id":"public/tags/Tomcat/index.html","hash":"cf003ed95d711dfa5e38eb02c12cb6f6f65c35b4","modified":1584695041906},{"_id":"public/tags/Wechat/index.html","hash":"3a9e25fcdb7ea75dd18499a1fdafabf3cd405ee4","modified":1584695041906},{"_id":"public/tags/Hadoop/index.html","hash":"168ef1fa3a031c9ca5f2add8a7f2510f65afc557","modified":1584695041906},{"_id":"public/tags/kcptun/index.html","hash":"acffc0a9e5860248e61b04d43ce55622d7c5d743","modified":1584695041906},{"_id":"public/tags/xkcptun/index.html","hash":"1b86c3335d2b163021a14a6c404386d544328367","modified":1584695041906},{"_id":"public/tags/极路由/index.html","hash":"efc348c75b9525d2db017c0a55528e8508378666","modified":1584695041906},{"_id":"public/tags/深度学习/index.html","hash":"10938fa0c0119f2b1f5938cfbf3efbaad9c52629","modified":1584695041907},{"_id":"public/tags/Zip/index.html","hash":"81d780f578367c1d53a4f5553caff0c8112a87f4","modified":1584695041907},{"_id":"public/img/20151217111715.png","hash":"b288e019727f7c7c618922d9e885faa55dc3e2a6","modified":1544691693442},{"_id":"public/img/alipay.png","hash":"729f9a4217912115ac5449364ffaa13d4c341712","modified":1544691693442},{"_id":"public/img/avatar.jpg","hash":"bfbdbe07ff064e8ff6aabb631364493a988464e6","modified":1544691693443},{"_id":"public/img/20151217111031.png","hash":"36010ae507bbfb8cbf4b14083baee2e2a6487484","modified":1544691693443},{"_id":"public/img/weixin.png","hash":"ed3eb57f4b987b3c34445cba59d0f6f255bd6dd8","modified":1544691693443},{"_id":"public/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1544691693443},{"_id":"public/fonts/iconfont.b7ae25.ttf","hash":"697449e7790edd12e208706ecaa8d5d0eed44cde","modified":1544691693443},{"_id":"public/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1544691693443},{"_id":"public/fonts/iconfont.59e68b.eot","hash":"b7f28dc802d6e32281e8fe7930d4dd2022d00717","modified":1544691693443},{"_id":"public/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1544691693443},{"_id":"public/fonts/iconfont.dba24b.svg","hash":"f6c8d119c14f2124f4362acd6c8e00f209af5613","modified":1544691693443},{"_id":"public/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1544691693443},{"_id":"public/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1544691693443},{"_id":"public/img/20140812122118.png","hash":"2abb64f433528b82cb03d8209347b7f3eefc2c71","modified":1544691693465},{"_id":"public/img/20140812122250.png","hash":"f627441801812a2fa8148467ddfc1d32d71612c7","modified":1544691693465},{"_id":"public/fonts/iconfont.ca3627.woff","hash":"cda0ea1dc25dc3d329d7637afe2cd6aec37e351b","modified":1544691693466},{"_id":"public/img/20151228100517.png","hash":"708b8ba976dcb69c0881c226e9ff17b4e3dc83fd","modified":1544691693474},{"_id":"public/img/深度学习---之pooling层的作用与缺陷1.png","hash":"83dcdfe2152cdf6f4d4a89b33e833e58d0b91c7e","modified":1544691693474},{"_id":"public/img/深度学习---之pooling层的作用与缺陷3.png","hash":"6bb395d215ab324b9821bf7d63a5caca3ef15df5","modified":1544691693488},{"_id":"public/mobile.d238ee.js","hash":"a054884092af1cc5c2c14e5e11a4dac6d9254481","modified":1544691693491},{"_id":"public/img/深度学习---之pooling层的作用与缺陷2.png","hash":"1faf94e7c32f2ec207cb13320fec1df4a04c93a6","modified":1544691693491},{"_id":"public/img/深度学习---之pooling层的作用与缺陷4.png","hash":"88b4cacab7c02a8d9df905d834799fa4e7eb99a3","modified":1544691693498},{"_id":"public/slider.885efe.js","hash":"1f1a6548c6016cc132bf65a1701cc8421a1f8414","modified":1544691693516},{"_id":"public/main.2d7529.css","hash":"2eef112e365f9b00664302ba98b517662c75d411","modified":1544691693517},{"_id":"public/main.2d7529.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1564458242734},{"_id":"source/_posts/eclipse安装插件慢.md","hash":"bb6e8fe0e99b9ff4ce0787fa79531de3c27a736a","modified":1545993174037},{"_id":"public/2018/12/28/eclipse安装插件慢/index.html","hash":"23ac96f842b1d06f44ffab8179e04cdc436ba13e","modified":1584695041893},{"_id":"public/categories/eclipse/index.html","hash":"9ae67e2b37136b28901f004f5d43d335bf4042e5","modified":1584695041901},{"_id":"public/tags/eclipse/index.html","hash":"c74e5ff85f3a39961243b9d211233b09318d6ba4","modified":1584695041907},{"_id":"public/tags/java/index.html","hash":"1cc7383e9dbde3645b97199127abe1312bb5907b","modified":1584695041907},{"_id":"source/_posts/google+chrome+User+Data默认目录配置.md","hash":"15cd2a13c5fc79fb1b6bdd75d5291b3121623e51","modified":1550462655277},{"_id":"public/2019/02/18/google+chrome+User+Data默认目录配置/index.html","hash":"349dd73e689a07dcff582c4fe18fd79fc3102bf8","modified":1584695041893},{"_id":"public/archives/2019/index.html","hash":"51f8c87fd4f3819ea62b5736796b8d362409c254","modified":1584695041900},{"_id":"public/archives/2019/02/index.html","hash":"e5631817d4c7fef9e14020a41e8fd5e33444b7aa","modified":1584695041900},{"_id":"public/tags/Chrome/index.html","hash":"86b54b31c542fe5e04e0100d35e3b89a8487d58d","modified":1584695041907},{"_id":"public/tags/Google/index.html","hash":"24a88867209f77fcc94a782bb8a100871991ccf9","modified":1584695041907},{"_id":"source/_posts/Jetty9配置说明.md","hash":"e1368166654c26d39ed934443ec6e2c4072ab629","modified":1570515414207},{"_id":"public/2019/10/08/Jetty9配置说明/index.html","hash":"ea037dcd284c99436c767a33563c8ed05a1353e8","modified":1584695041894},{"_id":"public/archives/2019/10/index.html","hash":"d6a1cf3483ccfa1cd1356bfcb5fa06dfecc75865","modified":1584695041907},{"_id":"public/tags/Ubuntu/page/3/index.html","hash":"8c4dde1dd108db9b6dc9454c2404e9c0b841f68a","modified":1585813739463},{"_id":"public/tags/jetty/index.html","hash":"54eae24dbd8a2f803c47987c701eddb609d76dd6","modified":1584695041908},{"_id":"public/tags/jetty9/index.html","hash":"0717c521456af026445ffe2bffcdccbb19dfeb35","modified":1584695041907},{"_id":"source/_posts/SoftEtherVPN不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。.md","hash":"878b5e0e73dcb9a791c57a74eaa393d7c3c09c9b","modified":1577953664453},{"_id":"public/2019/12/19/SoftEtherVPN不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。/index.html","hash":"6214fac558cc14512c9cdadec49670d39ad7806d","modified":1584695041894},{"_id":"public/archives/2019/12/index.html","hash":"c64384b9e583bce6b7b7de546d003285a128f05f","modified":1584695041900},{"_id":"public/categories/SoftEtherVPN/index.html","hash":"576d4225cb907e064494ccf3bc95145118fe4772","modified":1584695041902},{"_id":"public/tags/VPM/index.html","hash":"561c276a030b337e5a933d363ccfbf6e1d3a5e90","modified":1584695041907},{"_id":"source/_posts/SoftEtherVPN不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。.md.bak","hash":"67bde4649d07398dda6ac9ce3f1048b6d4aa7bc5","modified":1577953050682},{"_id":"source/_posts/SecureCRT找回密码.md","hash":"e0925fad0436a28de3e098c4d6db4b93afbf041c","modified":1578361701541},{"_id":"public/2020/01/06/SecureCRT找回密码/index.html","hash":"20fdd2447091f4d1d9fe4ff9278088350787e6f7","modified":1585813739462},{"_id":"public/archives/2020/index.html","hash":"689b94a257662f058989bde7d62958d8133374bd","modified":1585813833052},{"_id":"public/archives/2020/01/index.html","hash":"d2182c308396051edc478dc6ee02a5cbdf8d095e","modified":1585813739462},{"_id":"public/categories/SecureCRT/index.html","hash":"82dbe12bc70785e0de1023b38680bb66f154c455","modified":1584695041902},{"_id":"public/tags/SSH/index.html","hash":"85500749e1441863e658d7b8edd646fc115bb495","modified":1584695041907},{"_id":"public/tags/SecureCRT/index.html","hash":"2e34936b0ebd26e8c8b9bcf2946ff9a18ba42aa5","modified":1584695041907},{"_id":"source/_posts/deepin wine 安装QQ 微信.md","hash":"f06d4a31477e9cc765731d419f1f37fd71ac3962","modified":1578362193905},{"_id":"public/tags/wechat/index.html","hash":"7a334c8c0cdfd4cc3b4e9c32370800994ac3b44d","modified":1584695041908},{"_id":"public/2020/01/07/deepin wine 安装QQ 微信/index.html","hash":"276bd056f51fa2014fb5717890d17b77eb516720","modified":1585813739461},{"_id":"public/categories/deepin-wine-qq-wechat/index.html","hash":"dd3a82b247cfc7f84f39c3d1b37bcb08050bf0d6","modified":1584695041902},{"_id":"public/tags/deepin/index.html","hash":"f309913f8c99698c0de7e73b3829fcf8518e3f56","modified":1584695041908},{"_id":"public/tags/wine/index.html","hash":"85672f06cfcb247485ebd9a1855d7c1b1cc5631c","modified":1584695041908},{"_id":"public/tags/qq/index.html","hash":"60dc916a06577695a4220a27fbf9c00656d3f761","modified":1584695041908},{"_id":"source/_posts/github收藏项目.md","hash":"ebf809cc6c4bbef707d9f7900ec9efde63097b42","modified":1585551057189},{"_id":"public/2020/01/07/github收藏项目/index.html","hash":"62bd6c107fd960d35b6459cf7613c898247462d2","modified":1585813739438},{"_id":"public/categories/github/index.html","hash":"0e165a910a486fb95dc9fbd347b8af96ec186e22","modified":1584695041902},{"_id":"public/page/7/index.html","hash":"71fabc64b68b8fd25f8765a0de006e67aa48b139","modified":1585813739463},{"_id":"public/tags/github/index.html","hash":"9fae2b97ca5c53a81b4d3ac183756e5c60449c95","modified":1584695041908},{"_id":"source/_posts/Debian9安装vim和vim无法右键鼠标粘贴解决方法.md","hash":"bfb3488ea68e04a4b8b2a924954cdd41fc21a1ea","modified":1578457726693},{"_id":"public/2020/01/08/Debian9安装vim和vim无法右键鼠标粘贴解决方法/index.html","hash":"97ec9368f8c23397128c5c321aa8d2c0eaa3ad66","modified":1585813739461},{"_id":"public/categories/Debian/index.html","hash":"35d107ef39f734abddb0ffd2e40125eff8b03bdd","modified":1584695041902},{"_id":"public/tags/Debian/index.html","hash":"e43f49ef51855f4a6f44f0f01d0914e3c4f6fac8","modified":1584695041908},{"_id":"source/_posts/Ubuntu搭建NTP服务器.md","hash":"ada10e26a453a99c4dd60115c51362097fad01ad","modified":1585813789029},{"_id":"public/2020/03/20/Ubuntu搭建NTP服务器/index.html","hash":"c3a4edfff219e9bd4dd99ea7f0c6619af2eb4683","modified":1585813803377},{"_id":"public/archives/2020/03/index.html","hash":"b831b69f0e8b3c01fc03d044dc57b814588c8f2f","modified":1584695041909},{"_id":"public/tags/NTP/index.html","hash":"f947d4e721be5323906ec52df41f4173d502d333","modified":1584695041909},{"_id":"source/CNAME","hash":"65a730319cfcfc7b5e3c3797596c52a8c62713cf","modified":1585552562511},{"_id":"public/CNAME","hash":"65a730319cfcfc7b5e3c3797596c52a8c62713cf","modified":1585552588485},{"_id":"source/_posts/Ubuntu18.04开机启动脚本.md","hash":"1cca1769b47698bf8500fa3b81ebeb41084bef68","modified":1585813820482},{"_id":"public/2020/04/02/Ubuntu18.04开机启动脚本/index.html","hash":"19b7954f615b75bdccd6c06fc41c24da58a4cf39","modified":1585813833051},{"_id":"public/archives/2020/04/index.html","hash":"8293fa976402caa33b0a30d23d27c810cb42aab9","modified":1585813833052}],"Category":[{"name":"Centos","_id":"cjpmdjsnv0002i85n6qwivc2c"},{"name":"Eclipse","_id":"cjpmdjsoo000xi85ni60mvrlq"},{"name":"Clojure","_id":"cjpmdjsos0014i85nak9m7tx6"},{"name":"Ubuntu","_id":"cjpmdjsou0018i85nzsrklzgf"},{"name":"注册码","_id":"cjpmdjspm002ci85nk524j6i0"},{"name":"google","_id":"cjpmdjspt002oi85nj954ix2q"},{"name":"Mysql","_id":"cjpmdjspy002zi85n1cgw7ena"},{"name":"Hexo","_id":"cjpmdjsq5003di85nofc1e2ms"},{"name":"Java","_id":"cjpmdjsq8003mi85nj2kdea3m"},{"name":"Shadowsocks","_id":"cjpmdjsqg0041i85ntxc581t0"},{"name":"eclipse","_id":"cjq7wc0mi0001ck5n8lohy3hy"},{"name":"SoftEtherVPN","_id":"ck4ch9c750001f0tw3pi0czcq"},{"name":"SecureCRT","_id":"ck52bfy7a00010gtw8grg5tuc"},{"name":"deepin wine qq wechat","_id":"ck53843g80001jotwfjgoznzn"},{"name":"github","_id":"ck539iicx0001g8twjjrmnvru"},{"name":"Debian","_id":"ck54t038n0001ggtwvlvjek89"}],"Data":[],"Page":[],"Post":[{"title":"Centos scp 拷贝文件","date":"2013-05-10T01:49:00.000Z","_content":"## 复制文件或目录命令\n### 复制文件：\n#### （1）将本地文件拷贝到远程\nscp 文件名 用户名@计算机IP或者计算机名称:远程路径\n```shell\nscp /root/jdk-6u24-linux-x64.bin  root@192.168.0.65:/root/jdk-6u24-linux-x64.bin\n```\n#### （2）从远程将文件拷回本地\nscp 用户名@计算机IP或者计算机名称:文件名 本地路径\n```shell\nscp root@192.168.0.65:/root/jdk-6u24-linux-x64.bin /root/jdk-6u24-linux-x64.bin\n```\n\n### 复制目录：\n#### （1）将本地目录拷贝到远程\nscp -r 目录名 用户名@计算机IP或者计算机名称:远程路径\n```shell\nscp -r /app/jetty  root@192.168.0.65:/app/jetty\n```\n#### （2）从远程将目录拷回本地\nscp -r   用户名@计算机IP或者计算机名称:目录名 本地路径\n```shell\nscp -r root@192.168.0.65:/app/jetty  /app/jetty\n```","source":"_posts/Centos scp 拷贝文件.md","raw":"title: Centos scp 拷贝文件\ntags:\n  - Centos\ncategories:\n  - Centos\ndate: 2013-05-10 09:49:00\n---\n## 复制文件或目录命令\n### 复制文件：\n#### （1）将本地文件拷贝到远程\nscp 文件名 用户名@计算机IP或者计算机名称:远程路径\n```shell\nscp /root/jdk-6u24-linux-x64.bin  root@192.168.0.65:/root/jdk-6u24-linux-x64.bin\n```\n#### （2）从远程将文件拷回本地\nscp 用户名@计算机IP或者计算机名称:文件名 本地路径\n```shell\nscp root@192.168.0.65:/root/jdk-6u24-linux-x64.bin /root/jdk-6u24-linux-x64.bin\n```\n\n### 复制目录：\n#### （1）将本地目录拷贝到远程\nscp -r 目录名 用户名@计算机IP或者计算机名称:远程路径\n```shell\nscp -r /app/jetty  root@192.168.0.65:/app/jetty\n```\n#### （2）从远程将目录拷回本地\nscp -r   用户名@计算机IP或者计算机名称:目录名 本地路径\n```shell\nscp -r root@192.168.0.65:/app/jetty  /app/jetty\n```","slug":"Centos scp 拷贝文件","published":1,"updated":"2018-12-13T08:24:34.047Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsnk0000i85ncbvlpo53","content":"<h2 id=\"复制文件或目录命令\"><a href=\"#复制文件或目录命令\" class=\"headerlink\" title=\"复制文件或目录命令\"></a>复制文件或目录命令</h2><h3 id=\"复制文件：\"><a href=\"#复制文件：\" class=\"headerlink\" title=\"复制文件：\"></a>复制文件：</h3><h4 id=\"（1）将本地文件拷贝到远程\"><a href=\"#（1）将本地文件拷贝到远程\" class=\"headerlink\" title=\"（1）将本地文件拷贝到远程\"></a>（1）将本地文件拷贝到远程</h4><p>scp 文件名 用户名@计算机IP或者计算机名称:远程路径<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp /root/jdk-6u24-linux-x64.bin  root@192.168.0.65:/root/jdk-6u24-linux-x64.bin</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"（2）从远程将文件拷回本地\"><a href=\"#（2）从远程将文件拷回本地\" class=\"headerlink\" title=\"（2）从远程将文件拷回本地\"></a>（2）从远程将文件拷回本地</h4><p>scp 用户名@计算机IP或者计算机名称:文件名 本地路径<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp root@192.168.0.65:/root/jdk-6u24-linux-x64.bin /root/jdk-6u24-linux-x64.bin</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"复制目录：\"><a href=\"#复制目录：\" class=\"headerlink\" title=\"复制目录：\"></a>复制目录：</h3><h4 id=\"（1）将本地目录拷贝到远程\"><a href=\"#（1）将本地目录拷贝到远程\" class=\"headerlink\" title=\"（1）将本地目录拷贝到远程\"></a>（1）将本地目录拷贝到远程</h4><p>scp -r 目录名 用户名@计算机IP或者计算机名称:远程路径<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -r /app/jetty  root@192.168.0.65:/app/jetty</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"（2）从远程将目录拷回本地\"><a href=\"#（2）从远程将目录拷回本地\" class=\"headerlink\" title=\"（2）从远程将目录拷回本地\"></a>（2）从远程将目录拷回本地</h4><p>scp -r   用户名@计算机IP或者计算机名称:目录名 本地路径<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -r root@192.168.0.65:/app/jetty  /app/jetty</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"复制文件或目录命令\"><a href=\"#复制文件或目录命令\" class=\"headerlink\" title=\"复制文件或目录命令\"></a>复制文件或目录命令</h2><h3 id=\"复制文件：\"><a href=\"#复制文件：\" class=\"headerlink\" title=\"复制文件：\"></a>复制文件：</h3><h4 id=\"（1）将本地文件拷贝到远程\"><a href=\"#（1）将本地文件拷贝到远程\" class=\"headerlink\" title=\"（1）将本地文件拷贝到远程\"></a>（1）将本地文件拷贝到远程</h4><p>scp 文件名 用户名@计算机IP或者计算机名称:远程路径<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp /root/jdk-6u24-linux-x64.bin  root@192.168.0.65:/root/jdk-6u24-linux-x64.bin</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"（2）从远程将文件拷回本地\"><a href=\"#（2）从远程将文件拷回本地\" class=\"headerlink\" title=\"（2）从远程将文件拷回本地\"></a>（2）从远程将文件拷回本地</h4><p>scp 用户名@计算机IP或者计算机名称:文件名 本地路径<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp root@192.168.0.65:/root/jdk-6u24-linux-x64.bin /root/jdk-6u24-linux-x64.bin</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"复制目录：\"><a href=\"#复制目录：\" class=\"headerlink\" title=\"复制目录：\"></a>复制目录：</h3><h4 id=\"（1）将本地目录拷贝到远程\"><a href=\"#（1）将本地目录拷贝到远程\" class=\"headerlink\" title=\"（1）将本地目录拷贝到远程\"></a>（1）将本地目录拷贝到远程</h4><p>scp -r 目录名 用户名@计算机IP或者计算机名称:远程路径<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -r /app/jetty  root@192.168.0.65:/app/jetty</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"（2）从远程将目录拷回本地\"><a href=\"#（2）从远程将目录拷回本地\" class=\"headerlink\" title=\"（2）从远程将目录拷回本地\"></a>（2）从远程将目录拷回本地</h4><p>scp -r   用户名@计算机IP或者计算机名称:目录名 本地路径<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -r root@192.168.0.65:/app/jetty  /app/jetty</span><br></pre></td></tr></table></figure></p>\n"},{"title":"Centos安装gcc gcc-c++","date":"2013-05-13T01:50:00.000Z","_content":"```shell\nyum -y install gcc gcc-c++\n```","source":"_posts/Centos安装gcc gcc-c++.md","raw":"title: Centos安装gcc gcc-c++\ntags:\n  - Centos\ncategories:\n  - Centos\ndate: 2013-05-13 09:50:00\n---\n```shell\nyum -y install gcc gcc-c++\n```","slug":"Centos安装gcc gcc-c++","published":1,"updated":"2018-12-13T08:24:34.050Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsns0001i85nc8xv7enu","content":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc gcc-c++</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc gcc-c++</span><br></pre></td></tr></table></figure>"},{"title":"Centos 安装 setup","date":"2013-05-08T15:59:00.000Z","_content":"## 安装setuptool\n```shell\nyum install setuptool\n```\n## 可以发现执行setup后不全，再安装一个用于系统服务管理\n```shell\nyum install ntsysv\n```\n## 再安装个防火墙，以及setup中配套的防火墙设置、网络设置\n```shell\nyum install iptables\n```\n## 安装setup中配套的防火墙设置\n```shell\nyum install system-config-securitylevel-tui\n```\n## 安装setup中配套的网络设置\n```shell\nyum install system-config-network-tui\n```","source":"_posts/Centos安装setup.md","raw":"title: Centos 安装 setup\ntags:\n  - Centos\ncategories:\n  - Centos\ndate: 2013-05-08 23:59:00\n---\n## 安装setuptool\n```shell\nyum install setuptool\n```\n## 可以发现执行setup后不全，再安装一个用于系统服务管理\n```shell\nyum install ntsysv\n```\n## 再安装个防火墙，以及setup中配套的防火墙设置、网络设置\n```shell\nyum install iptables\n```\n## 安装setup中配套的防火墙设置\n```shell\nyum install system-config-securitylevel-tui\n```\n## 安装setup中配套的网络设置\n```shell\nyum install system-config-network-tui\n```","slug":"Centos安装setup","published":1,"updated":"2018-12-13T08:24:34.051Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsnz0004i85nq530t17b","content":"<h2 id=\"安装setuptool\"><a href=\"#安装setuptool\" class=\"headerlink\" title=\"安装setuptool\"></a>安装setuptool</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install setuptool</span><br></pre></td></tr></table></figure>\n<h2 id=\"可以发现执行setup后不全，再安装一个用于系统服务管理\"><a href=\"#可以发现执行setup后不全，再安装一个用于系统服务管理\" class=\"headerlink\" title=\"可以发现执行setup后不全，再安装一个用于系统服务管理\"></a>可以发现执行setup后不全，再安装一个用于系统服务管理</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install ntsysv</span><br></pre></td></tr></table></figure>\n<h2 id=\"再安装个防火墙，以及setup中配套的防火墙设置、网络设置\"><a href=\"#再安装个防火墙，以及setup中配套的防火墙设置、网络设置\" class=\"headerlink\" title=\"再安装个防火墙，以及setup中配套的防火墙设置、网络设置\"></a>再安装个防火墙，以及setup中配套的防火墙设置、网络设置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install iptables</span><br></pre></td></tr></table></figure>\n<h2 id=\"安装setup中配套的防火墙设置\"><a href=\"#安装setup中配套的防火墙设置\" class=\"headerlink\" title=\"安装setup中配套的防火墙设置\"></a>安装setup中配套的防火墙设置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install system-config-securitylevel-tui</span><br></pre></td></tr></table></figure>\n<h2 id=\"安装setup中配套的网络设置\"><a href=\"#安装setup中配套的网络设置\" class=\"headerlink\" title=\"安装setup中配套的网络设置\"></a>安装setup中配套的网络设置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install system-config-network-tui</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"安装setuptool\"><a href=\"#安装setuptool\" class=\"headerlink\" title=\"安装setuptool\"></a>安装setuptool</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install setuptool</span><br></pre></td></tr></table></figure>\n<h2 id=\"可以发现执行setup后不全，再安装一个用于系统服务管理\"><a href=\"#可以发现执行setup后不全，再安装一个用于系统服务管理\" class=\"headerlink\" title=\"可以发现执行setup后不全，再安装一个用于系统服务管理\"></a>可以发现执行setup后不全，再安装一个用于系统服务管理</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install ntsysv</span><br></pre></td></tr></table></figure>\n<h2 id=\"再安装个防火墙，以及setup中配套的防火墙设置、网络设置\"><a href=\"#再安装个防火墙，以及setup中配套的防火墙设置、网络设置\" class=\"headerlink\" title=\"再安装个防火墙，以及setup中配套的防火墙设置、网络设置\"></a>再安装个防火墙，以及setup中配套的防火墙设置、网络设置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install iptables</span><br></pre></td></tr></table></figure>\n<h2 id=\"安装setup中配套的防火墙设置\"><a href=\"#安装setup中配套的防火墙设置\" class=\"headerlink\" title=\"安装setup中配套的防火墙设置\"></a>安装setup中配套的防火墙设置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install system-config-securitylevel-tui</span><br></pre></td></tr></table></figure>\n<h2 id=\"安装setup中配套的网络设置\"><a href=\"#安装setup中配套的网络设置\" class=\"headerlink\" title=\"安装setup中配套的网络设置\"></a>安装setup中配套的网络设置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install system-config-network-tui</span><br></pre></td></tr></table></figure>"},{"title":"Centos 开机自启动","date":"2013-05-08T15:57:00.000Z","_content":"## 添加启动执行：\n```shell\nvi /etc/rc.d/rc.local\n```","source":"_posts/Centos开机自启动.md","raw":"title: Centos 开机自启动\ntags:\n  - Centos\ncategories:\n  - Centos\ndate: 2013-05-08 23:57:00\n---\n## 添加启动执行：\n```shell\nvi /etc/rc.d/rc.local\n```","slug":"Centos开机自启动","published":1,"updated":"2018-12-13T08:24:34.052Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjso00005i85n9b73mrsu","content":"<h2 id=\"添加启动执行：\"><a href=\"#添加启动执行：\" class=\"headerlink\" title=\"添加启动执行：\"></a>添加启动执行：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"添加启动执行：\"><a href=\"#添加启动执行：\" class=\"headerlink\" title=\"添加启动执行：\"></a>添加启动执行：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure>"},{"title":"Centos设置自动获取IP","date":"2013-05-05T03:51:00.000Z","_content":"## 编辑文件：\n```shell\nvi /etc/sysconfig/network-scripts/ifcfg-eth0\n```\n## 修改：\n```shell\nONBOOT=yes\nBOOTPROTO=dhcp\n```\n## 重启网络:\n```shell\nservice network restart\n```","source":"_posts/Centos设置自动获取IP.md","raw":"title: Centos设置自动获取IP\ntags:\n  - Centos\ncategories:\n  - Centos\ndate: 2013-05-05 11:51:00\n---\n## 编辑文件：\n```shell\nvi /etc/sysconfig/network-scripts/ifcfg-eth0\n```\n## 修改：\n```shell\nONBOOT=yes\nBOOTPROTO=dhcp\n```\n## 重启网络:\n```shell\nservice network restart\n```","slug":"Centos设置自动获取IP","published":1,"updated":"2018-12-13T08:24:34.053Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsoc000ii85n1q8ad8n0","content":"<h2 id=\"编辑文件：\"><a href=\"#编辑文件：\" class=\"headerlink\" title=\"编辑文件：\"></a>编辑文件：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><br></pre></td></tr></table></figure>\n<h2 id=\"修改：\"><a href=\"#修改：\" class=\"headerlink\" title=\"修改：\"></a>修改：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ONBOOT=yes</span><br><span class=\"line\">BOOTPROTO=dhcp</span><br></pre></td></tr></table></figure>\n<h2 id=\"重启网络\"><a href=\"#重启网络\" class=\"headerlink\" title=\"重启网络:\"></a>重启网络:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service network restart</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"编辑文件：\"><a href=\"#编辑文件：\" class=\"headerlink\" title=\"编辑文件：\"></a>编辑文件：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><br></pre></td></tr></table></figure>\n<h2 id=\"修改：\"><a href=\"#修改：\" class=\"headerlink\" title=\"修改：\"></a>修改：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ONBOOT=yes</span><br><span class=\"line\">BOOTPROTO=dhcp</span><br></pre></td></tr></table></figure>\n<h2 id=\"重启网络\"><a href=\"#重启网络\" class=\"headerlink\" title=\"重启网络:\"></a>重启网络:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service network restart</span><br></pre></td></tr></table></figure>"},{"title":"Centos安装JDK","date":"2013-05-11T09:27:00.000Z","_content":"## 一.jdk1.6安装\n### 1. 从网站上下载jdk1.6包(jdk-6u10-linux-i586-rpm.bin )\n上传到linux系统的/usr/local/目录下\n\n### 2.在linux中切换到 /usr/local/目录下，\n修改jdk1.6的使用权限：\n```shell\n#chmod  u+x  jdk-6u10-linux-i586-rpm.bin\n```\n\n### 3.解压并安装：\n```shell\n#./jdk-6u10-linux-i586-rpm.bin\n```\n (默认安装在/usr/java中) 注：.rpm 文件执行 \n```shell\n#rpm -ivh jdk-6u10-linux-i586.rpm\n```\n### 4.环境变量配置：\n (/etc/profile文件中添加：)\n```shell\n #vi  /etc/profile\n JAVA_HOME=/usr/local/jdk1.6.0_13\n PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin\n CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n export JAVA_HOME PATH CLASSPATH\n ```\n 添加完毕保存退出\n```shell\n #source /etc/profile\n #java -version\n```\n 显示 java version \"1.6.0_10\" (jdk1.6安装成功)\n \n## 二、卸载jdk\n```shell\n#rpm -qa|grep jdk  (查看安装的JDK)\n显示：jdk-1.6.0_10-fcs\n卸载：#rpm -e  --nodeps  jdk-1.6.0_10-fcs\n```","source":"_posts/Centos安装JDK.md","raw":"title: Centos安装JDK\ntags:\n  - Centos\n  - JDK\ncategories:\n  - Centos\ndate: 2013-05-11 17:27:00\n---\n## 一.jdk1.6安装\n### 1. 从网站上下载jdk1.6包(jdk-6u10-linux-i586-rpm.bin )\n上传到linux系统的/usr/local/目录下\n\n### 2.在linux中切换到 /usr/local/目录下，\n修改jdk1.6的使用权限：\n```shell\n#chmod  u+x  jdk-6u10-linux-i586-rpm.bin\n```\n\n### 3.解压并安装：\n```shell\n#./jdk-6u10-linux-i586-rpm.bin\n```\n (默认安装在/usr/java中) 注：.rpm 文件执行 \n```shell\n#rpm -ivh jdk-6u10-linux-i586.rpm\n```\n### 4.环境变量配置：\n (/etc/profile文件中添加：)\n```shell\n #vi  /etc/profile\n JAVA_HOME=/usr/local/jdk1.6.0_13\n PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin\n CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n export JAVA_HOME PATH CLASSPATH\n ```\n 添加完毕保存退出\n```shell\n #source /etc/profile\n #java -version\n```\n 显示 java version \"1.6.0_10\" (jdk1.6安装成功)\n \n## 二、卸载jdk\n```shell\n#rpm -qa|grep jdk  (查看安装的JDK)\n显示：jdk-1.6.0_10-fcs\n卸载：#rpm -e  --nodeps  jdk-1.6.0_10-fcs\n```","slug":"Centos安装JDK","published":1,"updated":"2018-12-13T08:24:34.049Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsod000ji85nqg2duvev","content":"<h2 id=\"一-jdk1-6安装\"><a href=\"#一-jdk1-6安装\" class=\"headerlink\" title=\"一.jdk1.6安装\"></a>一.jdk1.6安装</h2><h3 id=\"1-从网站上下载jdk1-6包-jdk-6u10-linux-i586-rpm-bin\"><a href=\"#1-从网站上下载jdk1-6包-jdk-6u10-linux-i586-rpm-bin\" class=\"headerlink\" title=\"1. 从网站上下载jdk1.6包(jdk-6u10-linux-i586-rpm.bin )\"></a>1. 从网站上下载jdk1.6包(jdk-6u10-linux-i586-rpm.bin )</h3><p>上传到linux系统的/usr/local/目录下</p>\n<h3 id=\"2-在linux中切换到-usr-local-目录下，\"><a href=\"#2-在linux中切换到-usr-local-目录下，\" class=\"headerlink\" title=\"2.在linux中切换到 /usr/local/目录下，\"></a>2.在linux中切换到 /usr/local/目录下，</h3><p>修改jdk1.6的使用权限：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>chmod  u+x  jdk-6u10-linux-i586-rpm.bin</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3-解压并安装：\"><a href=\"#3-解压并安装：\" class=\"headerlink\" title=\"3.解压并安装：\"></a>3.解压并安装：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>./jdk-6u10-linux-i586-rpm.bin</span><br></pre></td></tr></table></figure>\n<p> (默认安装在/usr/java中) 注：.rpm 文件执行<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>rpm -ivh jdk-6u10-linux-i586.rpm</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"4-环境变量配置：\"><a href=\"#4-环境变量配置：\" class=\"headerlink\" title=\"4.环境变量配置：\"></a>4.环境变量配置：</h3><p> (/etc/profile文件中添加：)<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>vi  /etc/profile</span><br><span class=\"line\">JAVA_HOME=/usr/local/jdk1.6.0_13</span><br><span class=\"line\">PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin</span><br><span class=\"line\">CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class=\"line\">export JAVA_HOME PATH CLASSPATH</span><br></pre></td></tr></table></figure></p>\n<p> 添加完毕保存退出<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>source /etc/profile</span><br><span class=\"line\"><span class=\"meta\">#</span>java -version</span><br></pre></td></tr></table></figure></p>\n<p> 显示 java version “1.6.0_10” (jdk1.6安装成功)</p>\n<h2 id=\"二、卸载jdk\"><a href=\"#二、卸载jdk\" class=\"headerlink\" title=\"二、卸载jdk\"></a>二、卸载jdk</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>rpm -qa|grep jdk  (查看安装的JDK)</span><br><span class=\"line\">显示：jdk-1.6.0_10-fcs</span><br><span class=\"line\">卸载：#rpm -e  --nodeps  jdk-1.6.0_10-fcs</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"一-jdk1-6安装\"><a href=\"#一-jdk1-6安装\" class=\"headerlink\" title=\"一.jdk1.6安装\"></a>一.jdk1.6安装</h2><h3 id=\"1-从网站上下载jdk1-6包-jdk-6u10-linux-i586-rpm-bin\"><a href=\"#1-从网站上下载jdk1-6包-jdk-6u10-linux-i586-rpm-bin\" class=\"headerlink\" title=\"1. 从网站上下载jdk1.6包(jdk-6u10-linux-i586-rpm.bin )\"></a>1. 从网站上下载jdk1.6包(jdk-6u10-linux-i586-rpm.bin )</h3><p>上传到linux系统的/usr/local/目录下</p>\n<h3 id=\"2-在linux中切换到-usr-local-目录下，\"><a href=\"#2-在linux中切换到-usr-local-目录下，\" class=\"headerlink\" title=\"2.在linux中切换到 /usr/local/目录下，\"></a>2.在linux中切换到 /usr/local/目录下，</h3><p>修改jdk1.6的使用权限：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>chmod  u+x  jdk-6u10-linux-i586-rpm.bin</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3-解压并安装：\"><a href=\"#3-解压并安装：\" class=\"headerlink\" title=\"3.解压并安装：\"></a>3.解压并安装：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>./jdk-6u10-linux-i586-rpm.bin</span><br></pre></td></tr></table></figure>\n<p> (默认安装在/usr/java中) 注：.rpm 文件执行<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>rpm -ivh jdk-6u10-linux-i586.rpm</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"4-环境变量配置：\"><a href=\"#4-环境变量配置：\" class=\"headerlink\" title=\"4.环境变量配置：\"></a>4.环境变量配置：</h3><p> (/etc/profile文件中添加：)<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>vi  /etc/profile</span><br><span class=\"line\">JAVA_HOME=/usr/local/jdk1.6.0_13</span><br><span class=\"line\">PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin</span><br><span class=\"line\">CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class=\"line\">export JAVA_HOME PATH CLASSPATH</span><br></pre></td></tr></table></figure></p>\n<p> 添加完毕保存退出<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>source /etc/profile</span><br><span class=\"line\"><span class=\"meta\">#</span>java -version</span><br></pre></td></tr></table></figure></p>\n<p> 显示 java version “1.6.0_10” (jdk1.6安装成功)</p>\n<h2 id=\"二、卸载jdk\"><a href=\"#二、卸载jdk\" class=\"headerlink\" title=\"二、卸载jdk\"></a>二、卸载jdk</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>rpm -qa|grep jdk  (查看安装的JDK)</span><br><span class=\"line\">显示：jdk-1.6.0_10-fcs</span><br><span class=\"line\">卸载：#rpm -e  --nodeps  jdk-1.6.0_10-fcs</span><br></pre></td></tr></table></figure>"},{"title":"Centos配置nfs","date":"2013-05-13T01:43:00.000Z","_content":"## 1、配置：\n### 服务端：\n```shell\n#vi /etc/exports \n增加例如：\n/opt/storage　192.168.0.*(rw)　　 (IP)就是客户端允许访问ip地址(rw) 权限\n```\n### 客户端：\n```shell\n#mount -t nfs 192.168.1.152:/opt/storage/  /152  （/152）为共享本地映射\n#showmount –export 192.168.1.152   查看NFS所发布的目录\n权限配置：\n#chown -R user /152\n```\n## 2、启动命令：\n```shell\n#service portmap start\n#service nfslock start\n#service nfs start\n```\n## 3、卸载共享：\n```shell\n#umount -l /152  （/152）为共享本地映射\n```\n##4、端口：\n```shell\n1. portmap 端口 111 udp/tcp；\n2. nfsd 端口 2049 udp/tcp；\n```\n## 5、开机启动配置：\n```shell\nvi /etc/auto.nas 在文件中添加一行:\n/152 -rw,rsize=32768,wsize=32768,soft,intr 192.168.1.152:/opt/storage\nvi /etc/auto.master,添加一行:\n/nas /etc/auto.nas –timeout=0\n```\n注 意：–timeout=0表明一旦挂载就不会自动被卸载（umount）。也可以指定一个别的正数，比如600，那么如果600秒之内没有使用nfs就 会自动被卸载。如果没有–timeout参数部分，则默认为600秒（10分钟），这个参数在/etc/sysconfig/autofs文件中可以用 TIMEOUT项指定。\n------------------------------------------------------------\n\n将autofs服务设置为开机自启动\n先使用chkconfig –list autofs检查一下autofs服务是否已经设置为自启动了。\n```shell\n[root@~]# chkconfig –list autofs\nautofs     0:off   1:off   2:off   3:on    4:on    5:on    6:off\n```\n如果你发现输出中全部为off，使用chkconfig autofs on设置为开机自启动。\n```shell\n[root@~]# chkconfig autofs on\n```\n注：autofs实际上是使用automount命令来处理的。","source":"_posts/Centos配置nfs.md","raw":"title: Centos配置nfs\ntags:\n  - Centos\ncategories:\n  - Centos\ndate: 2013-05-13 09:43:00\n---\n## 1、配置：\n### 服务端：\n```shell\n#vi /etc/exports \n增加例如：\n/opt/storage　192.168.0.*(rw)　　 (IP)就是客户端允许访问ip地址(rw) 权限\n```\n### 客户端：\n```shell\n#mount -t nfs 192.168.1.152:/opt/storage/  /152  （/152）为共享本地映射\n#showmount –export 192.168.1.152   查看NFS所发布的目录\n权限配置：\n#chown -R user /152\n```\n## 2、启动命令：\n```shell\n#service portmap start\n#service nfslock start\n#service nfs start\n```\n## 3、卸载共享：\n```shell\n#umount -l /152  （/152）为共享本地映射\n```\n##4、端口：\n```shell\n1. portmap 端口 111 udp/tcp；\n2. nfsd 端口 2049 udp/tcp；\n```\n## 5、开机启动配置：\n```shell\nvi /etc/auto.nas 在文件中添加一行:\n/152 -rw,rsize=32768,wsize=32768,soft,intr 192.168.1.152:/opt/storage\nvi /etc/auto.master,添加一行:\n/nas /etc/auto.nas –timeout=0\n```\n注 意：–timeout=0表明一旦挂载就不会自动被卸载（umount）。也可以指定一个别的正数，比如600，那么如果600秒之内没有使用nfs就 会自动被卸载。如果没有–timeout参数部分，则默认为600秒（10分钟），这个参数在/etc/sysconfig/autofs文件中可以用 TIMEOUT项指定。\n------------------------------------------------------------\n\n将autofs服务设置为开机自启动\n先使用chkconfig –list autofs检查一下autofs服务是否已经设置为自启动了。\n```shell\n[root@~]# chkconfig –list autofs\nautofs     0:off   1:off   2:off   3:on    4:on    5:on    6:off\n```\n如果你发现输出中全部为off，使用chkconfig autofs on设置为开机自启动。\n```shell\n[root@~]# chkconfig autofs on\n```\n注：autofs实际上是使用automount命令来处理的。","slug":"Centos配置nfs","published":1,"updated":"2018-12-13T08:24:34.054Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsof000li85njwp64orb","content":"<h2 id=\"1、配置：\"><a href=\"#1、配置：\" class=\"headerlink\" title=\"1、配置：\"></a>1、配置：</h2><h3 id=\"服务端：\"><a href=\"#服务端：\" class=\"headerlink\" title=\"服务端：\"></a>服务端：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>vi /etc/exports </span><br><span class=\"line\">增加例如：</span><br><span class=\"line\">/opt/storage　192.168.0.*(rw)　　 (IP)就是客户端允许访问ip地址(rw) 权限</span><br></pre></td></tr></table></figure>\n<h3 id=\"客户端：\"><a href=\"#客户端：\" class=\"headerlink\" title=\"客户端：\"></a>客户端：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>mount -t nfs 192.168.1.152:/opt/storage/  /152  （/152）为共享本地映射</span><br><span class=\"line\"><span class=\"meta\">#</span>showmount –export 192.168.1.152   查看NFS所发布的目录</span><br><span class=\"line\">权限配置：</span><br><span class=\"line\"><span class=\"meta\">#</span>chown -R user /152</span><br></pre></td></tr></table></figure>\n<h2 id=\"2、启动命令：\"><a href=\"#2、启动命令：\" class=\"headerlink\" title=\"2、启动命令：\"></a>2、启动命令：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>service portmap start</span><br><span class=\"line\"><span class=\"meta\">#</span>service nfslock start</span><br><span class=\"line\"><span class=\"meta\">#</span>service nfs start</span><br></pre></td></tr></table></figure>\n<h2 id=\"3、卸载共享：\"><a href=\"#3、卸载共享：\" class=\"headerlink\" title=\"3、卸载共享：\"></a>3、卸载共享：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>umount -l /152  （/152）为共享本地映射</span><br></pre></td></tr></table></figure>\n<p>##4、端口：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. portmap 端口 111 udp/tcp；</span><br><span class=\"line\">2. nfsd 端口 2049 udp/tcp；</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"5、开机启动配置：\"><a href=\"#5、开机启动配置：\" class=\"headerlink\" title=\"5、开机启动配置：\"></a>5、开机启动配置：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/auto.nas 在文件中添加一行:</span><br><span class=\"line\">/152 -rw,rsize=32768,wsize=32768,soft,intr 192.168.1.152:/opt/storage</span><br><span class=\"line\">vi /etc/auto.master,添加一行:</span><br><span class=\"line\">/nas /etc/auto.nas –timeout=0</span><br></pre></td></tr></table></figure>\n<h2 id=\"注-意：–timeout-0表明一旦挂载就不会自动被卸载（umount）。也可以指定一个别的正数，比如600，那么如果600秒之内没有使用nfs就-会自动被卸载。如果没有–timeout参数部分，则默认为600秒（10分钟），这个参数在-etc-sysconfig-autofs文件中可以用-TIMEOUT项指定。\"><a href=\"#注-意：–timeout-0表明一旦挂载就不会自动被卸载（umount）。也可以指定一个别的正数，比如600，那么如果600秒之内没有使用nfs就-会自动被卸载。如果没有–timeout参数部分，则默认为600秒（10分钟），这个参数在-etc-sysconfig-autofs文件中可以用-TIMEOUT项指定。\" class=\"headerlink\" title=\"注 意：–timeout=0表明一旦挂载就不会自动被卸载（umount）。也可以指定一个别的正数，比如600，那么如果600秒之内没有使用nfs就 会自动被卸载。如果没有–timeout参数部分，则默认为600秒（10分钟），这个参数在/etc/sysconfig/autofs文件中可以用 TIMEOUT项指定。\"></a>注 意：–timeout=0表明一旦挂载就不会自动被卸载（umount）。也可以指定一个别的正数，比如600，那么如果600秒之内没有使用nfs就 会自动被卸载。如果没有–timeout参数部分，则默认为600秒（10分钟），这个参数在/etc/sysconfig/autofs文件中可以用 TIMEOUT项指定。</h2><p>将autofs服务设置为开机自启动<br>先使用chkconfig –list autofs检查一下autofs服务是否已经设置为自启动了。<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@~]# chkconfig –list autofs</span><br><span class=\"line\">autofs     0:off   1:off   2:off   3:on    4:on    5:on    6:off</span><br></pre></td></tr></table></figure></p>\n<p>如果你发现输出中全部为off，使用chkconfig autofs on设置为开机自启动。<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@~]# chkconfig autofs on</span><br></pre></td></tr></table></figure></p>\n<p>注：autofs实际上是使用automount命令来处理的。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1、配置：\"><a href=\"#1、配置：\" class=\"headerlink\" title=\"1、配置：\"></a>1、配置：</h2><h3 id=\"服务端：\"><a href=\"#服务端：\" class=\"headerlink\" title=\"服务端：\"></a>服务端：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>vi /etc/exports </span><br><span class=\"line\">增加例如：</span><br><span class=\"line\">/opt/storage　192.168.0.*(rw)　　 (IP)就是客户端允许访问ip地址(rw) 权限</span><br></pre></td></tr></table></figure>\n<h3 id=\"客户端：\"><a href=\"#客户端：\" class=\"headerlink\" title=\"客户端：\"></a>客户端：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>mount -t nfs 192.168.1.152:/opt/storage/  /152  （/152）为共享本地映射</span><br><span class=\"line\"><span class=\"meta\">#</span>showmount –export 192.168.1.152   查看NFS所发布的目录</span><br><span class=\"line\">权限配置：</span><br><span class=\"line\"><span class=\"meta\">#</span>chown -R user /152</span><br></pre></td></tr></table></figure>\n<h2 id=\"2、启动命令：\"><a href=\"#2、启动命令：\" class=\"headerlink\" title=\"2、启动命令：\"></a>2、启动命令：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>service portmap start</span><br><span class=\"line\"><span class=\"meta\">#</span>service nfslock start</span><br><span class=\"line\"><span class=\"meta\">#</span>service nfs start</span><br></pre></td></tr></table></figure>\n<h2 id=\"3、卸载共享：\"><a href=\"#3、卸载共享：\" class=\"headerlink\" title=\"3、卸载共享：\"></a>3、卸载共享：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>umount -l /152  （/152）为共享本地映射</span><br></pre></td></tr></table></figure>\n<p>##4、端口：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. portmap 端口 111 udp/tcp；</span><br><span class=\"line\">2. nfsd 端口 2049 udp/tcp；</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"5、开机启动配置：\"><a href=\"#5、开机启动配置：\" class=\"headerlink\" title=\"5、开机启动配置：\"></a>5、开机启动配置：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/auto.nas 在文件中添加一行:</span><br><span class=\"line\">/152 -rw,rsize=32768,wsize=32768,soft,intr 192.168.1.152:/opt/storage</span><br><span class=\"line\">vi /etc/auto.master,添加一行:</span><br><span class=\"line\">/nas /etc/auto.nas –timeout=0</span><br></pre></td></tr></table></figure>\n<h2 id=\"注-意：–timeout-0表明一旦挂载就不会自动被卸载（umount）。也可以指定一个别的正数，比如600，那么如果600秒之内没有使用nfs就-会自动被卸载。如果没有–timeout参数部分，则默认为600秒（10分钟），这个参数在-etc-sysconfig-autofs文件中可以用-TIMEOUT项指定。\"><a href=\"#注-意：–timeout-0表明一旦挂载就不会自动被卸载（umount）。也可以指定一个别的正数，比如600，那么如果600秒之内没有使用nfs就-会自动被卸载。如果没有–timeout参数部分，则默认为600秒（10分钟），这个参数在-etc-sysconfig-autofs文件中可以用-TIMEOUT项指定。\" class=\"headerlink\" title=\"注 意：–timeout=0表明一旦挂载就不会自动被卸载（umount）。也可以指定一个别的正数，比如600，那么如果600秒之内没有使用nfs就 会自动被卸载。如果没有–timeout参数部分，则默认为600秒（10分钟），这个参数在/etc/sysconfig/autofs文件中可以用 TIMEOUT项指定。\"></a>注 意：–timeout=0表明一旦挂载就不会自动被卸载（umount）。也可以指定一个别的正数，比如600，那么如果600秒之内没有使用nfs就 会自动被卸载。如果没有–timeout参数部分，则默认为600秒（10分钟），这个参数在/etc/sysconfig/autofs文件中可以用 TIMEOUT项指定。</h2><p>将autofs服务设置为开机自启动<br>先使用chkconfig –list autofs检查一下autofs服务是否已经设置为自启动了。<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@~]# chkconfig –list autofs</span><br><span class=\"line\">autofs     0:off   1:off   2:off   3:on    4:on    5:on    6:off</span><br></pre></td></tr></table></figure></p>\n<p>如果你发现输出中全部为off，使用chkconfig autofs on设置为开机自启动。<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@~]# chkconfig autofs on</span><br></pre></td></tr></table></figure></p>\n<p>注：autofs实际上是使用automount命令来处理的。</p>\n"},{"title":"Docker 容器镜像删除","author":"ZkName","date":"2017-07-27T02:17:00.000Z","_content":"###### 1.停止所有的container，这样才能够删除其中的images：\n```shell\ndocker stop $(docker ps -a -q)\n```\n如果想要删除所有container的话再加一个指令：\n```shell\ndocker rm $(docker ps -a -q)\n```\n###### 2.查看当前有些什么images\n```shell\ndocker images\n```\n###### 3.删除images，通过image的id来指定删除谁\n```shell\ndocker rmi <image id>\n```\n想要删除untagged images，也就是那些id为<None>的image的话可以用\n```shell\ndocker rmi $(docker images -f \"dangling=true\" -q)\n```\n要删除全部image的话\n```shell\ndocker rmi $(docker images -q)\n```","source":"_posts/Docker-容器镜像删除.md","raw":"title: Docker 容器镜像删除\nauthor: ZkName\ntags:\n  - Docker\ncategories: []\ndate: 2017-07-27 10:17:00\n---\n###### 1.停止所有的container，这样才能够删除其中的images：\n```shell\ndocker stop $(docker ps -a -q)\n```\n如果想要删除所有container的话再加一个指令：\n```shell\ndocker rm $(docker ps -a -q)\n```\n###### 2.查看当前有些什么images\n```shell\ndocker images\n```\n###### 3.删除images，通过image的id来指定删除谁\n```shell\ndocker rmi <image id>\n```\n想要删除untagged images，也就是那些id为<None>的image的话可以用\n```shell\ndocker rmi $(docker images -f \"dangling=true\" -q)\n```\n要删除全部image的话\n```shell\ndocker rmi $(docker images -q)\n```","slug":"Docker-容器镜像删除","published":1,"updated":"2018-12-13T08:24:34.056Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsog000ni85nk9k1c9c7","content":"<h6 id=\"1-停止所有的container，这样才能够删除其中的images：\"><a href=\"#1-停止所有的container，这样才能够删除其中的images：\" class=\"headerlink\" title=\"1.停止所有的container，这样才能够删除其中的images：\"></a>1.停止所有的container，这样才能够删除其中的images：</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stop $(docker ps -a -q)</span><br></pre></td></tr></table></figure>\n<p>如果想要删除所有container的话再加一个指令：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm $(docker ps -a -q)</span><br></pre></td></tr></table></figure></p>\n<h6 id=\"2-查看当前有些什么images\"><a href=\"#2-查看当前有些什么images\" class=\"headerlink\" title=\"2.查看当前有些什么images\"></a>2.查看当前有些什么images</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n<h6 id=\"3-删除images，通过image的id来指定删除谁\"><a href=\"#3-删除images，通过image的id来指定删除谁\" class=\"headerlink\" title=\"3.删除images，通过image的id来指定删除谁\"></a>3.删除images，通过image的id来指定删除谁</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi &lt;image id&gt;</span><br></pre></td></tr></table></figure>\n<p>想要删除untagged images，也就是那些id为<none>的image的话可以用<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi $(docker images -f \"dangling=true\" -q)</span><br></pre></td></tr></table></figure></none></p>\n<p>要删除全部image的话<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi $(docker images -q)</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h6 id=\"1-停止所有的container，这样才能够删除其中的images：\"><a href=\"#1-停止所有的container，这样才能够删除其中的images：\" class=\"headerlink\" title=\"1.停止所有的container，这样才能够删除其中的images：\"></a>1.停止所有的container，这样才能够删除其中的images：</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stop $(docker ps -a -q)</span><br></pre></td></tr></table></figure>\n<p>如果想要删除所有container的话再加一个指令：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm $(docker ps -a -q)</span><br></pre></td></tr></table></figure></p>\n<h6 id=\"2-查看当前有些什么images\"><a href=\"#2-查看当前有些什么images\" class=\"headerlink\" title=\"2.查看当前有些什么images\"></a>2.查看当前有些什么images</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n<h6 id=\"3-删除images，通过image的id来指定删除谁\"><a href=\"#3-删除images，通过image的id来指定删除谁\" class=\"headerlink\" title=\"3.删除images，通过image的id来指定删除谁\"></a>3.删除images，通过image的id来指定删除谁</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi &lt;image id&gt;</span><br></pre></td></tr></table></figure>\n<p>想要删除untagged images，也就是那些id为<none>的image的话可以用<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi $(docker images -f \"dangling=true\" -q)</span><br></pre></td></tr></table></figure></none></p>\n<p>要删除全部image的话<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi $(docker images -q)</span><br></pre></td></tr></table></figure></p>\n"},{"title":"LKL一键包 BBR（适用Openvz）","author":"ZkName","date":"2017-04-10T10:17:00.000Z","_content":"### LKL使用前置需求\n1. LKL要求ldd的版本至少在2.14，目前我测试下来，如果不想折腾建议直接安装CentOS7，Debian8和Ubuntu16\n2. 安装包只使用64bit的系统。\n3. 默认的端口转发只转发了9000-9999的端口，如果你不想费心修改，请把ssr等应用的端口设在这个范围\n4. 只适用openvz，请他虚拟请参考原帖自己折腾。。\n\n### 安装LKL一键包命令：\n```shle\nwget --no-check-certificate https://github.com/91yun/uml/raw/master/lkl/install.sh && bash install.sh\n```\n### 如何判断是否安装成功\n```shle\nping 10.0.0.2\n```\n如果10.0.0.2能ping通说明成功，ping不通说明失败\n\n### 如果修改转发端口\n1. 修改/root/lkl/run.sh，查找9000-9999，改成你想要的端口段\n2. 修改/root/lkl/haproxy.cfg查找9000-9999，改成你想要的端口段\n3. 重启vps\n\n### 91yun论坛转发","source":"_posts/LKL一键包-BBR（适用Openvz）.md","raw":"title: LKL一键包 BBR（适用Openvz）\nauthor: ZkName\ntags:\n  - Ubuntu\n  - bbr\n  - 搬瓦工\ncategories: []\ndate: 2017-04-10 18:17:00\n---\n### LKL使用前置需求\n1. LKL要求ldd的版本至少在2.14，目前我测试下来，如果不想折腾建议直接安装CentOS7，Debian8和Ubuntu16\n2. 安装包只使用64bit的系统。\n3. 默认的端口转发只转发了9000-9999的端口，如果你不想费心修改，请把ssr等应用的端口设在这个范围\n4. 只适用openvz，请他虚拟请参考原帖自己折腾。。\n\n### 安装LKL一键包命令：\n```shle\nwget --no-check-certificate https://github.com/91yun/uml/raw/master/lkl/install.sh && bash install.sh\n```\n### 如何判断是否安装成功\n```shle\nping 10.0.0.2\n```\n如果10.0.0.2能ping通说明成功，ping不通说明失败\n\n### 如果修改转发端口\n1. 修改/root/lkl/run.sh，查找9000-9999，改成你想要的端口段\n2. 修改/root/lkl/haproxy.cfg查找9000-9999，改成你想要的端口段\n3. 重启vps\n\n### 91yun论坛转发","slug":"LKL一键包-BBR（适用Openvz）","published":1,"updated":"2018-12-13T08:24:34.059Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsoi000qi85n9kft8ui9","content":"<h3 id=\"LKL使用前置需求\"><a href=\"#LKL使用前置需求\" class=\"headerlink\" title=\"LKL使用前置需求\"></a>LKL使用前置需求</h3><ol>\n<li>LKL要求ldd的版本至少在2.14，目前我测试下来，如果不想折腾建议直接安装CentOS7，Debian8和Ubuntu16</li>\n<li>安装包只使用64bit的系统。</li>\n<li>默认的端口转发只转发了9000-9999的端口，如果你不想费心修改，请把ssr等应用的端口设在这个范围</li>\n<li>只适用openvz，请他虚拟请参考原帖自己折腾。。</li>\n</ol>\n<h3 id=\"安装LKL一键包命令：\"><a href=\"#安装LKL一键包命令：\" class=\"headerlink\" title=\"安装LKL一键包命令：\"></a>安装LKL一键包命令：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget --no-check-certificate https://github.com/91yun/uml/raw/master/lkl/install.sh &amp;&amp; bash install.sh</span><br></pre></td></tr></table></figure>\n<h3 id=\"如何判断是否安装成功\"><a href=\"#如何判断是否安装成功\" class=\"headerlink\" title=\"如何判断是否安装成功\"></a>如何判断是否安装成功</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping 10.0.0.2</span><br></pre></td></tr></table></figure>\n<p>如果10.0.0.2能ping通说明成功，ping不通说明失败</p>\n<h3 id=\"如果修改转发端口\"><a href=\"#如果修改转发端口\" class=\"headerlink\" title=\"如果修改转发端口\"></a>如果修改转发端口</h3><ol>\n<li>修改/root/lkl/run.sh，查找9000-9999，改成你想要的端口段</li>\n<li>修改/root/lkl/haproxy.cfg查找9000-9999，改成你想要的端口段</li>\n<li>重启vps</li>\n</ol>\n<h3 id=\"91yun论坛转发\"><a href=\"#91yun论坛转发\" class=\"headerlink\" title=\"91yun论坛转发\"></a>91yun论坛转发</h3>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"LKL使用前置需求\"><a href=\"#LKL使用前置需求\" class=\"headerlink\" title=\"LKL使用前置需求\"></a>LKL使用前置需求</h3><ol>\n<li>LKL要求ldd的版本至少在2.14，目前我测试下来，如果不想折腾建议直接安装CentOS7，Debian8和Ubuntu16</li>\n<li>安装包只使用64bit的系统。</li>\n<li>默认的端口转发只转发了9000-9999的端口，如果你不想费心修改，请把ssr等应用的端口设在这个范围</li>\n<li>只适用openvz，请他虚拟请参考原帖自己折腾。。</li>\n</ol>\n<h3 id=\"安装LKL一键包命令：\"><a href=\"#安装LKL一键包命令：\" class=\"headerlink\" title=\"安装LKL一键包命令：\"></a>安装LKL一键包命令：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget --no-check-certificate https://github.com/91yun/uml/raw/master/lkl/install.sh &amp;&amp; bash install.sh</span><br></pre></td></tr></table></figure>\n<h3 id=\"如何判断是否安装成功\"><a href=\"#如何判断是否安装成功\" class=\"headerlink\" title=\"如何判断是否安装成功\"></a>如何判断是否安装成功</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping 10.0.0.2</span><br></pre></td></tr></table></figure>\n<p>如果10.0.0.2能ping通说明成功，ping不通说明失败</p>\n<h3 id=\"如果修改转发端口\"><a href=\"#如果修改转发端口\" class=\"headerlink\" title=\"如果修改转发端口\"></a>如果修改转发端口</h3><ol>\n<li>修改/root/lkl/run.sh，查找9000-9999，改成你想要的端口段</li>\n<li>修改/root/lkl/haproxy.cfg查找9000-9999，改成你想要的端口段</li>\n<li>重启vps</li>\n</ol>\n<h3 id=\"91yun论坛转发\"><a href=\"#91yun论坛转发\" class=\"headerlink\" title=\"91yun论坛转发\"></a>91yun论坛转发</h3>"},{"title":"Eclipse使用Maven插件异常","date":"2015-12-28T02:35:00.000Z","_content":"1. eclipse中使用maven插件的时候，运行run as maven build的时候报错：\n```\n-Dmaven.multiModuleProjectDirectory system propery is not set. Check $M2_HOME environment variable and mvn script match.\n```\n可以设一个环境变量M2_HOME指向你的maven安装目录\nM2_HOME=H:\\Java\\tools\\apache-maven-3.3.9\n然后在Window->Preference->Java->Installed JREs->Edit\n在Default VM arguments中设置\n```\n-Dmaven.multiModuleProjectDirectory=$M2_HOME\n```\n![eclipse jdk配置](/img/20151228100517.png)","source":"_posts/Eclipse使用Maven插件异常.md","raw":"title: Eclipse使用Maven插件异常\ntags:\n  - Eclipse\n  - Maven\ncategories:\n  - Eclipse\ndate: 2015-12-28 10:35:00\n---\n1. eclipse中使用maven插件的时候，运行run as maven build的时候报错：\n```\n-Dmaven.multiModuleProjectDirectory system propery is not set. Check $M2_HOME environment variable and mvn script match.\n```\n可以设一个环境变量M2_HOME指向你的maven安装目录\nM2_HOME=H:\\Java\\tools\\apache-maven-3.3.9\n然后在Window->Preference->Java->Installed JREs->Edit\n在Default VM arguments中设置\n```\n-Dmaven.multiModuleProjectDirectory=$M2_HOME\n```\n![eclipse jdk配置](/img/20151228100517.png)","slug":"Eclipse使用Maven插件异常","published":1,"updated":"2018-12-13T08:24:34.058Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsok000si85nuy16hjq5","content":"<ol>\n<li>eclipse中使用maven插件的时候，运行run as maven build的时候报错：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Dmaven.multiModuleProjectDirectory system propery is not set. Check $M2_HOME environment variable and mvn script match.</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>可以设一个环境变量M2_HOME指向你的maven安装目录<br>M2_HOME=H:\\Java\\tools\\apache-maven-3.3.9<br>然后在Window-&gt;Preference-&gt;Java-&gt;Installed JREs-&gt;Edit<br>在Default VM arguments中设置<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Dmaven.multiModuleProjectDirectory=$M2_HOME</span><br></pre></td></tr></table></figure></p>\n<p><img src=\"/img/20151228100517.png\" alt=\"eclipse jdk配置\"></p>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>eclipse中使用maven插件的时候，运行run as maven build的时候报错：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Dmaven.multiModuleProjectDirectory system propery is not set. Check $M2_HOME environment variable and mvn script match.</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>可以设一个环境变量M2_HOME指向你的maven安装目录<br>M2_HOME=H:\\Java\\tools\\apache-maven-3.3.9<br>然后在Window-&gt;Preference-&gt;Java-&gt;Installed JREs-&gt;Edit<br>在Default VM arguments中设置<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Dmaven.multiModuleProjectDirectory=$M2_HOME</span><br></pre></td></tr></table></figure></p>\n<p><img src=\"/img/20151228100517.png\" alt=\"eclipse jdk配置\"></p>\n"},{"title":"Clojure 例子（编译后java调用与.clj形式调用）","date":"2013-05-08T15:14:00.000Z","_content":"在网上找了好久没找到 clojure 入门例子，自己写一个分享一下吧。\n## eclipse插件：\nURL [http://ccw.cgrand.net/updatesite](http://ccw.cgrand.net/updatesite)\n## 一、clojure 代码：\n\ncom/test/Demo.clj \n------------------------------------------\n```clojure\n(require ['com.demo.StringOp]);引入文件 \n\n(ns com.test.Demo ;命名空间\n  (:gen-class \n   :name com.test.Demo ;java类\n   :methods [#^{:static true} [getStr [String] String]]) ;java 方法类型声明\n  );定义头文件\n\n ;定义方法 getStr 参数 name\n(defn -getStr [name](str(com.demo.StringOp/getStr name) \" 结束！\"))\n```\ncom/demo/StringOp.clj\n---------------------------------------------------\n```clojure\n(ns com.demo.StringOp)\n(defn getStr [value] (str \"测试字符串：'\" value \"'\"))\n```\n## 二、java 代码：\n```java\npackage com.kinsou;\n \nimport java.io.IOException;\nimport org.junit.Test;\nimport clojure.lang.RT;\nimport clojure.lang.Var;\nimport com.test.Demo;\nimport static org.junit.Assert.*;\n \n/**\n * @author kinsou@gmail.com\n * @version\n * @since Ver 1.1\n * @Date 2012-12-5\n */\npublic class Main {\n \n    /**\n     * getStrTest1(class 调用)\n     */\n    private static String getStrTest1(String value) {\n        Object obj = Demo.getStr(value);\n        System.out.println(obj);\n        return obj.toString();\n    }\n \n    /**\n     * getStrTest2(.clj 调用)\n     */\n    private static String getStrTest2(String value) throws IOException {\n        RT.loadResourceScript(\"com/test/Demo.clj\");\n        Var var = RT.var(\"com.test.Demo\", \"-getStr\");\n        Object obj = var.invoke(value);\n        System.out.println(obj);\n        return obj.toString();\n    }\n \n    @Test\n    public void test() throws IOException {\n        String value1=\"测试1\";\n        assertEquals(getStrTest1(value1),\"测试字符串：'\"+value1+\"' 结束！\");\n        String value2=\"测试2\";\n        assertEquals(getStrTest2(value2),\"测试字符串：'\"+value2+\"' 结束！\");\n    }\n \n}\n```","source":"_posts/Clojure例子（编译后java调用与.clj形式调用）.md","raw":"title: Clojure 例子（编译后java调用与.clj形式调用）\ntags:\n  - Clojure\ncategories:\n  - Clojure\ndate: 2013-05-08 23:14:00\n---\n在网上找了好久没找到 clojure 入门例子，自己写一个分享一下吧。\n## eclipse插件：\nURL [http://ccw.cgrand.net/updatesite](http://ccw.cgrand.net/updatesite)\n## 一、clojure 代码：\n\ncom/test/Demo.clj \n------------------------------------------\n```clojure\n(require ['com.demo.StringOp]);引入文件 \n\n(ns com.test.Demo ;命名空间\n  (:gen-class \n   :name com.test.Demo ;java类\n   :methods [#^{:static true} [getStr [String] String]]) ;java 方法类型声明\n  );定义头文件\n\n ;定义方法 getStr 参数 name\n(defn -getStr [name](str(com.demo.StringOp/getStr name) \" 结束！\"))\n```\ncom/demo/StringOp.clj\n---------------------------------------------------\n```clojure\n(ns com.demo.StringOp)\n(defn getStr [value] (str \"测试字符串：'\" value \"'\"))\n```\n## 二、java 代码：\n```java\npackage com.kinsou;\n \nimport java.io.IOException;\nimport org.junit.Test;\nimport clojure.lang.RT;\nimport clojure.lang.Var;\nimport com.test.Demo;\nimport static org.junit.Assert.*;\n \n/**\n * @author kinsou@gmail.com\n * @version\n * @since Ver 1.1\n * @Date 2012-12-5\n */\npublic class Main {\n \n    /**\n     * getStrTest1(class 调用)\n     */\n    private static String getStrTest1(String value) {\n        Object obj = Demo.getStr(value);\n        System.out.println(obj);\n        return obj.toString();\n    }\n \n    /**\n     * getStrTest2(.clj 调用)\n     */\n    private static String getStrTest2(String value) throws IOException {\n        RT.loadResourceScript(\"com/test/Demo.clj\");\n        Var var = RT.var(\"com.test.Demo\", \"-getStr\");\n        Object obj = var.invoke(value);\n        System.out.println(obj);\n        return obj.toString();\n    }\n \n    @Test\n    public void test() throws IOException {\n        String value1=\"测试1\";\n        assertEquals(getStrTest1(value1),\"测试字符串：'\"+value1+\"' 结束！\");\n        String value2=\"测试2\";\n        assertEquals(getStrTest2(value2),\"测试字符串：'\"+value2+\"' 结束！\");\n    }\n \n}\n```","slug":"Clojure例子（编译后java调用与.clj形式调用）","published":1,"updated":"2018-12-13T08:24:34.055Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjson000wi85nqm34d7pk","content":"<p>在网上找了好久没找到 clojure 入门例子，自己写一个分享一下吧。</p>\n<h2 id=\"eclipse插件：\"><a href=\"#eclipse插件：\" class=\"headerlink\" title=\"eclipse插件：\"></a>eclipse插件：</h2><p>URL <a href=\"http://ccw.cgrand.net/updatesite\" target=\"_blank\" rel=\"noopener\">http://ccw.cgrand.net/updatesite</a></p>\n<h2 id=\"一、clojure-代码：\"><a href=\"#一、clojure-代码：\" class=\"headerlink\" title=\"一、clojure 代码：\"></a>一、clojure 代码：</h2><h2 id=\"com-test-Demo-clj\"><a href=\"#com-test-Demo-clj\" class=\"headerlink\" title=\"com/test/Demo.clj \"></a>com/test/Demo.clj </h2><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"name\">require</span> ['com.demo.StringOp])<span class=\"comment\">;引入文件 </span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"name\"><span class=\"builtin-name\">ns</span></span> com.test.Demo <span class=\"comment\">;命名空间</span></span><br><span class=\"line\">  (<span class=\"symbol\">:gen-class</span> </span><br><span class=\"line\">   <span class=\"symbol\">:name</span> com.test.Demo <span class=\"comment\">;java类</span></span><br><span class=\"line\">   <span class=\"symbol\">:methods</span> [#<span class=\"comment\">^&#123;:static true&#125;</span> [getStr [String] String]]) <span class=\"comment\">;java 方法类型声明</span></span><br><span class=\"line\">  )<span class=\"comment\">;定义头文件</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">;定义方法 getStr 参数 name</span></span><br><span class=\"line\">(<span class=\"name\"><span class=\"builtin-name\">defn</span></span> -getStr [name](<span class=\"name\"><span class=\"builtin-name\">str</span></span>(<span class=\"name\">com.demo.StringOp/getStr</span> name) <span class=\"string\">\" 结束！\"</span>))</span><br></pre></td></tr></table></figure>\n<h2 id=\"com-demo-StringOp-clj\"><a href=\"#com-demo-StringOp-clj\" class=\"headerlink\" title=\"com/demo/StringOp.clj\"></a>com/demo/StringOp.clj</h2><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"name\"><span class=\"builtin-name\">ns</span></span> com.demo.StringOp)</span><br><span class=\"line\">(<span class=\"name\"><span class=\"builtin-name\">defn</span></span> getStr [value] (<span class=\"name\"><span class=\"builtin-name\">str</span></span> <span class=\"string\">\"测试字符串：'\"</span> value <span class=\"string\">\"'\"</span>))</span><br></pre></td></tr></table></figure>\n<h2 id=\"二、java-代码：\"><a href=\"#二、java-代码：\" class=\"headerlink\" title=\"二、java 代码：\"></a>二、java 代码：</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.kinsou;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> clojure.lang.RT;</span><br><span class=\"line\"><span class=\"keyword\">import</span> clojure.lang.Var;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.test.Demo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.*;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> kinsou@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@since</span> Ver 1.1</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2012-12-5</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Main</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * getStrTest1(class 调用)</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getStrTest1</span><span class=\"params\">(String value)</span> </span>&#123;</span><br><span class=\"line\">        Object obj = Demo.getStr(value);</span><br><span class=\"line\">        System.out.println(obj);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj.toString();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * getStrTest2(.clj 调用)</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getStrTest2</span><span class=\"params\">(String value)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        RT.loadResourceScript(<span class=\"string\">\"com/test/Demo.clj\"</span>);</span><br><span class=\"line\">        Var <span class=\"keyword\">var</span> = RT.<span class=\"keyword\">var</span>(<span class=\"string\">\"com.test.Demo\"</span>, <span class=\"string\">\"-getStr\"</span>);</span><br><span class=\"line\">        Object obj = <span class=\"keyword\">var</span>.invoke(value);</span><br><span class=\"line\">        System.out.println(obj);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj.toString();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        String value1=<span class=\"string\">\"测试1\"</span>;</span><br><span class=\"line\">        assertEquals(getStrTest1(value1),<span class=\"string\">\"测试字符串：'\"</span>+value1+<span class=\"string\">\"' 结束！\"</span>);</span><br><span class=\"line\">        String value2=<span class=\"string\">\"测试2\"</span>;</span><br><span class=\"line\">        assertEquals(getStrTest2(value2),<span class=\"string\">\"测试字符串：'\"</span>+value2+<span class=\"string\">\"' 结束！\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>在网上找了好久没找到 clojure 入门例子，自己写一个分享一下吧。</p>\n<h2 id=\"eclipse插件：\"><a href=\"#eclipse插件：\" class=\"headerlink\" title=\"eclipse插件：\"></a>eclipse插件：</h2><p>URL <a href=\"http://ccw.cgrand.net/updatesite\" target=\"_blank\" rel=\"noopener\">http://ccw.cgrand.net/updatesite</a></p>\n<h2 id=\"一、clojure-代码：\"><a href=\"#一、clojure-代码：\" class=\"headerlink\" title=\"一、clojure 代码：\"></a>一、clojure 代码：</h2><h2 id=\"com-test-Demo-clj\"><a href=\"#com-test-Demo-clj\" class=\"headerlink\" title=\"com/test/Demo.clj \"></a>com/test/Demo.clj </h2><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"name\">require</span> ['com.demo.StringOp])<span class=\"comment\">;引入文件 </span></span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"name\"><span class=\"builtin-name\">ns</span></span> com.test.Demo <span class=\"comment\">;命名空间</span></span><br><span class=\"line\">  (<span class=\"symbol\">:gen-class</span> </span><br><span class=\"line\">   <span class=\"symbol\">:name</span> com.test.Demo <span class=\"comment\">;java类</span></span><br><span class=\"line\">   <span class=\"symbol\">:methods</span> [#<span class=\"comment\">^&#123;:static true&#125;</span> [getStr [String] String]]) <span class=\"comment\">;java 方法类型声明</span></span><br><span class=\"line\">  )<span class=\"comment\">;定义头文件</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">;定义方法 getStr 参数 name</span></span><br><span class=\"line\">(<span class=\"name\"><span class=\"builtin-name\">defn</span></span> -getStr [name](<span class=\"name\"><span class=\"builtin-name\">str</span></span>(<span class=\"name\">com.demo.StringOp/getStr</span> name) <span class=\"string\">\" 结束！\"</span>))</span><br></pre></td></tr></table></figure>\n<h2 id=\"com-demo-StringOp-clj\"><a href=\"#com-demo-StringOp-clj\" class=\"headerlink\" title=\"com/demo/StringOp.clj\"></a>com/demo/StringOp.clj</h2><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"name\"><span class=\"builtin-name\">ns</span></span> com.demo.StringOp)</span><br><span class=\"line\">(<span class=\"name\"><span class=\"builtin-name\">defn</span></span> getStr [value] (<span class=\"name\"><span class=\"builtin-name\">str</span></span> <span class=\"string\">\"测试字符串：'\"</span> value <span class=\"string\">\"'\"</span>))</span><br></pre></td></tr></table></figure>\n<h2 id=\"二、java-代码：\"><a href=\"#二、java-代码：\" class=\"headerlink\" title=\"二、java 代码：\"></a>二、java 代码：</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.kinsou;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> clojure.lang.RT;</span><br><span class=\"line\"><span class=\"keyword\">import</span> clojure.lang.Var;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.test.Demo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.*;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> kinsou@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@version</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@since</span> Ver 1.1</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2012-12-5</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Main</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * getStrTest1(class 调用)</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getStrTest1</span><span class=\"params\">(String value)</span> </span>&#123;</span><br><span class=\"line\">        Object obj = Demo.getStr(value);</span><br><span class=\"line\">        System.out.println(obj);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj.toString();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * getStrTest2(.clj 调用)</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getStrTest2</span><span class=\"params\">(String value)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        RT.loadResourceScript(<span class=\"string\">\"com/test/Demo.clj\"</span>);</span><br><span class=\"line\">        Var <span class=\"keyword\">var</span> = RT.<span class=\"keyword\">var</span>(<span class=\"string\">\"com.test.Demo\"</span>, <span class=\"string\">\"-getStr\"</span>);</span><br><span class=\"line\">        Object obj = <span class=\"keyword\">var</span>.invoke(value);</span><br><span class=\"line\">        System.out.println(obj);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj.toString();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        String value1=<span class=\"string\">\"测试1\"</span>;</span><br><span class=\"line\">        assertEquals(getStrTest1(value1),<span class=\"string\">\"测试字符串：'\"</span>+value1+<span class=\"string\">\"' 结束！\"</span>);</span><br><span class=\"line\">        String value2=<span class=\"string\">\"测试2\"</span>;</span><br><span class=\"line\">        assertEquals(getStrTest2(value2),<span class=\"string\">\"测试字符串：'\"</span>+value2+<span class=\"string\">\"' 结束！\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"Openvz 改版 BBR","author":"ZkName","date":"2017-07-19T09:26:00.000Z","_content":"### github 项目地址\n\n[https://github.com/linhua55/lkl_study](https://github.com/linhua55/lkl_study \"https://github.com/linhua55/lkl_study\")\n\n### 安装命令：\n```shle\ncurl https://raw.githubusercontent.com/linhua55/lkl_study/master/get-rinetd.sh | bash\n```\n##### 修改配置文件：vi /etc/rinetd-bbr.conf\n```shle\n# bindadress bindport connectaddress connectport\n0.0.0.0 443 0.0.0.0 443\n0.0.0.0 80 0.0.0.0 80\n```\n\n### iptables\n```shle\niptables -A INPUT -p tcp --destination-port 443 -j DROP\niptables -A INPUT -p tcp --destination-port 80 -j DROP\n```\n\n### 查看是否成功 rinetd-bbr \n暂时只能使用top 命令查看cpu占用率\n```shle\ntop - 17:39:34 up 45 min,  2 users,  load average: 0.00, 0.01, 0.00\nTasks:  23 total,   1 running,  22 sleeping,   0 stopped,   0 zombie\n%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\nKiB Mem:    524288 total,   131240 used,   393048 free,        0 buffers\nKiB Swap:    65536 total,        0 used,    65536 free.    41152 cached Mem\n\n  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                                                                                                                                                       \n  294 root      20   0  518592  11792   2524 S  1.3  2.2   0:44.73 rinetd-bbr                                                                                                                                                    \n    1 root      20   0   37060   3612   2352 S  0.0  0.7   0:00.25 systemd                                                                                                                                                       \n    2 root      20   0       0      0      0 S  0.0  0.0   0:00.00 kthreadd/120973                                                                                                                                               \n    3 root      20   0       0      0      0 S  0.0  0.0   0:00.00 khelper/120973                                                                                                                                                \n   59 root      20   0   41464   1800   1316 S  0.0  0.3   0:00.00 systemd-udevd                                                                                                                                                 \n   60 root      20   0   31108   2028   1728 S  0.0  0.4   0:00.09 systemd-journal                                                                                                                                               \n  289 systemd+  20   0   26520   1608   1344 S  0.0  0.3   0:00.04 systemd-network                                                                                                                                               \n  290 root      20   0   25988   1180    948 S  0.0  0.2   0:00.00 cron                                                                                                                                                          \n  299 root      20   0   69872   3344   2604 S  0.0  0.6   0:00.00 sshd                                                                                                                                                                   \n  377 root      20   0   56932  11860   1760 S  0.0  2.3   0:00.33 supervisord                                                                                                                                                   \n  379 root      20   0   60860  12120   2292 S  0.0  2.3   0:16.00 python                                                                                                                                                        \n  386 kcptun    20   0    9420   3900   2908 S  0.0  0.7   0:00.01 server_linux_am                                                                                                                                               \n  571 root      20   0   97404   4124   3116 S  0.0  0.8   0:00.11 sshd                                                                                                                                                          \n  582 root      20   0   18240   2116   1556 S  0.0  0.4   0:00.00 bash                                                                                                                                                          \n  716 root      20   0   97404   4080   3120 S  0.0  0.8   0:00.01 sshd                                                                                                                                                          \n  727 root      20   0   18240   2084   1524 S  0.0  0.4   0:00.00 bash                                                                                                                                                          \n  738 root      20   0   20000   1604   1080 R  0.0  0.3   0:00.02 top \n  \n  ```","source":"_posts/Openvz-改版-BBR.md","raw":"title: Openvz 改版 BBR\nauthor: ZkName\ntags:\n  - bbr\n  - Ubuntu\ncategories: []\ndate: 2017-07-19 17:26:00\n---\n### github 项目地址\n\n[https://github.com/linhua55/lkl_study](https://github.com/linhua55/lkl_study \"https://github.com/linhua55/lkl_study\")\n\n### 安装命令：\n```shle\ncurl https://raw.githubusercontent.com/linhua55/lkl_study/master/get-rinetd.sh | bash\n```\n##### 修改配置文件：vi /etc/rinetd-bbr.conf\n```shle\n# bindadress bindport connectaddress connectport\n0.0.0.0 443 0.0.0.0 443\n0.0.0.0 80 0.0.0.0 80\n```\n\n### iptables\n```shle\niptables -A INPUT -p tcp --destination-port 443 -j DROP\niptables -A INPUT -p tcp --destination-port 80 -j DROP\n```\n\n### 查看是否成功 rinetd-bbr \n暂时只能使用top 命令查看cpu占用率\n```shle\ntop - 17:39:34 up 45 min,  2 users,  load average: 0.00, 0.01, 0.00\nTasks:  23 total,   1 running,  22 sleeping,   0 stopped,   0 zombie\n%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\nKiB Mem:    524288 total,   131240 used,   393048 free,        0 buffers\nKiB Swap:    65536 total,        0 used,    65536 free.    41152 cached Mem\n\n  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                                                                                                                                                       \n  294 root      20   0  518592  11792   2524 S  1.3  2.2   0:44.73 rinetd-bbr                                                                                                                                                    \n    1 root      20   0   37060   3612   2352 S  0.0  0.7   0:00.25 systemd                                                                                                                                                       \n    2 root      20   0       0      0      0 S  0.0  0.0   0:00.00 kthreadd/120973                                                                                                                                               \n    3 root      20   0       0      0      0 S  0.0  0.0   0:00.00 khelper/120973                                                                                                                                                \n   59 root      20   0   41464   1800   1316 S  0.0  0.3   0:00.00 systemd-udevd                                                                                                                                                 \n   60 root      20   0   31108   2028   1728 S  0.0  0.4   0:00.09 systemd-journal                                                                                                                                               \n  289 systemd+  20   0   26520   1608   1344 S  0.0  0.3   0:00.04 systemd-network                                                                                                                                               \n  290 root      20   0   25988   1180    948 S  0.0  0.2   0:00.00 cron                                                                                                                                                          \n  299 root      20   0   69872   3344   2604 S  0.0  0.6   0:00.00 sshd                                                                                                                                                                   \n  377 root      20   0   56932  11860   1760 S  0.0  2.3   0:00.33 supervisord                                                                                                                                                   \n  379 root      20   0   60860  12120   2292 S  0.0  2.3   0:16.00 python                                                                                                                                                        \n  386 kcptun    20   0    9420   3900   2908 S  0.0  0.7   0:00.01 server_linux_am                                                                                                                                               \n  571 root      20   0   97404   4124   3116 S  0.0  0.8   0:00.11 sshd                                                                                                                                                          \n  582 root      20   0   18240   2116   1556 S  0.0  0.4   0:00.00 bash                                                                                                                                                          \n  716 root      20   0   97404   4080   3120 S  0.0  0.8   0:00.01 sshd                                                                                                                                                          \n  727 root      20   0   18240   2084   1524 S  0.0  0.4   0:00.00 bash                                                                                                                                                          \n  738 root      20   0   20000   1604   1080 R  0.0  0.3   0:00.02 top \n  \n  ```","slug":"Openvz-改版-BBR","published":1,"updated":"2018-12-13T08:24:34.062Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsop000zi85n5a73fp4o","content":"<h3 id=\"github-项目地址\"><a href=\"#github-项目地址\" class=\"headerlink\" title=\"github 项目地址\"></a>github 项目地址</h3><p><a href=\"https://github.com/linhua55/lkl_study\" title=\"https://github.com/linhua55/lkl_study\" target=\"_blank\" rel=\"noopener\">https://github.com/linhua55/lkl_study</a></p>\n<h3 id=\"安装命令：\"><a href=\"#安装命令：\" class=\"headerlink\" title=\"安装命令：\"></a>安装命令：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https://raw.githubusercontent.com/linhua55/lkl_study/master/get-rinetd.sh | bash</span><br></pre></td></tr></table></figure>\n<h5 id=\"修改配置文件：vi-etc-rinetd-bbr-conf\"><a href=\"#修改配置文件：vi-etc-rinetd-bbr-conf\" class=\"headerlink\" title=\"修改配置文件：vi /etc/rinetd-bbr.conf\"></a>修改配置文件：vi /etc/rinetd-bbr.conf</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># bindadress bindport connectaddress connectport</span><br><span class=\"line\">0.0.0.0 443 0.0.0.0 443</span><br><span class=\"line\">0.0.0.0 80 0.0.0.0 80</span><br></pre></td></tr></table></figure>\n<h3 id=\"iptables\"><a href=\"#iptables\" class=\"headerlink\" title=\"iptables\"></a>iptables</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -A INPUT -p tcp --destination-port 443 -j DROP</span><br><span class=\"line\">iptables -A INPUT -p tcp --destination-port 80 -j DROP</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看是否成功-rinetd-bbr\"><a href=\"#查看是否成功-rinetd-bbr\" class=\"headerlink\" title=\"查看是否成功 rinetd-bbr\"></a>查看是否成功 rinetd-bbr</h3><p>暂时只能使用top 命令查看cpu占用率<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">top - 17:39:34 up 45 min,  2 users,  load average: 0.00, 0.01, 0.00</span><br><span class=\"line\">Tasks:  23 total,   1 running,  22 sleeping,   0 stopped,   0 zombie</span><br><span class=\"line\">%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class=\"line\">KiB Mem:    524288 total,   131240 used,   393048 free,        0 buffers</span><br><span class=\"line\">KiB Swap:    65536 total,        0 used,    65536 free.    41152 cached Mem</span><br><span class=\"line\"></span><br><span class=\"line\">  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                                                                                                                                                       </span><br><span class=\"line\">  294 root      20   0  518592  11792   2524 S  1.3  2.2   0:44.73 rinetd-bbr                                                                                                                                                    </span><br><span class=\"line\">    1 root      20   0   37060   3612   2352 S  0.0  0.7   0:00.25 systemd                                                                                                                                                       </span><br><span class=\"line\">    2 root      20   0       0      0      0 S  0.0  0.0   0:00.00 kthreadd/120973                                                                                                                                               </span><br><span class=\"line\">    3 root      20   0       0      0      0 S  0.0  0.0   0:00.00 khelper/120973                                                                                                                                                </span><br><span class=\"line\">   59 root      20   0   41464   1800   1316 S  0.0  0.3   0:00.00 systemd-udevd                                                                                                                                                 </span><br><span class=\"line\">   60 root      20   0   31108   2028   1728 S  0.0  0.4   0:00.09 systemd-journal                                                                                                                                               </span><br><span class=\"line\">  289 systemd+  20   0   26520   1608   1344 S  0.0  0.3   0:00.04 systemd-network                                                                                                                                               </span><br><span class=\"line\">  290 root      20   0   25988   1180    948 S  0.0  0.2   0:00.00 cron                                                                                                                                                          </span><br><span class=\"line\">  299 root      20   0   69872   3344   2604 S  0.0  0.6   0:00.00 sshd                                                                                                                                                                   </span><br><span class=\"line\">  377 root      20   0   56932  11860   1760 S  0.0  2.3   0:00.33 supervisord                                                                                                                                                   </span><br><span class=\"line\">  379 root      20   0   60860  12120   2292 S  0.0  2.3   0:16.00 python                                                                                                                                                        </span><br><span class=\"line\">  386 kcptun    20   0    9420   3900   2908 S  0.0  0.7   0:00.01 server_linux_am                                                                                                                                               </span><br><span class=\"line\">  571 root      20   0   97404   4124   3116 S  0.0  0.8   0:00.11 sshd                                                                                                                                                          </span><br><span class=\"line\">  582 root      20   0   18240   2116   1556 S  0.0  0.4   0:00.00 bash                                                                                                                                                          </span><br><span class=\"line\">  716 root      20   0   97404   4080   3120 S  0.0  0.8   0:00.01 sshd                                                                                                                                                          </span><br><span class=\"line\">  727 root      20   0   18240   2084   1524 S  0.0  0.4   0:00.00 bash                                                                                                                                                          </span><br><span class=\"line\">  738 root      20   0   20000   1604   1080 R  0.0  0.3   0:00.02 top</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"github-项目地址\"><a href=\"#github-项目地址\" class=\"headerlink\" title=\"github 项目地址\"></a>github 项目地址</h3><p><a href=\"https://github.com/linhua55/lkl_study\" title=\"https://github.com/linhua55/lkl_study\" target=\"_blank\" rel=\"noopener\">https://github.com/linhua55/lkl_study</a></p>\n<h3 id=\"安装命令：\"><a href=\"#安装命令：\" class=\"headerlink\" title=\"安装命令：\"></a>安装命令：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https://raw.githubusercontent.com/linhua55/lkl_study/master/get-rinetd.sh | bash</span><br></pre></td></tr></table></figure>\n<h5 id=\"修改配置文件：vi-etc-rinetd-bbr-conf\"><a href=\"#修改配置文件：vi-etc-rinetd-bbr-conf\" class=\"headerlink\" title=\"修改配置文件：vi /etc/rinetd-bbr.conf\"></a>修改配置文件：vi /etc/rinetd-bbr.conf</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># bindadress bindport connectaddress connectport</span><br><span class=\"line\">0.0.0.0 443 0.0.0.0 443</span><br><span class=\"line\">0.0.0.0 80 0.0.0.0 80</span><br></pre></td></tr></table></figure>\n<h3 id=\"iptables\"><a href=\"#iptables\" class=\"headerlink\" title=\"iptables\"></a>iptables</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -A INPUT -p tcp --destination-port 443 -j DROP</span><br><span class=\"line\">iptables -A INPUT -p tcp --destination-port 80 -j DROP</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看是否成功-rinetd-bbr\"><a href=\"#查看是否成功-rinetd-bbr\" class=\"headerlink\" title=\"查看是否成功 rinetd-bbr\"></a>查看是否成功 rinetd-bbr</h3><p>暂时只能使用top 命令查看cpu占用率<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">top - 17:39:34 up 45 min,  2 users,  load average: 0.00, 0.01, 0.00</span><br><span class=\"line\">Tasks:  23 total,   1 running,  22 sleeping,   0 stopped,   0 zombie</span><br><span class=\"line\">%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class=\"line\">KiB Mem:    524288 total,   131240 used,   393048 free,        0 buffers</span><br><span class=\"line\">KiB Swap:    65536 total,        0 used,    65536 free.    41152 cached Mem</span><br><span class=\"line\"></span><br><span class=\"line\">  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                                                                                                                                                       </span><br><span class=\"line\">  294 root      20   0  518592  11792   2524 S  1.3  2.2   0:44.73 rinetd-bbr                                                                                                                                                    </span><br><span class=\"line\">    1 root      20   0   37060   3612   2352 S  0.0  0.7   0:00.25 systemd                                                                                                                                                       </span><br><span class=\"line\">    2 root      20   0       0      0      0 S  0.0  0.0   0:00.00 kthreadd/120973                                                                                                                                               </span><br><span class=\"line\">    3 root      20   0       0      0      0 S  0.0  0.0   0:00.00 khelper/120973                                                                                                                                                </span><br><span class=\"line\">   59 root      20   0   41464   1800   1316 S  0.0  0.3   0:00.00 systemd-udevd                                                                                                                                                 </span><br><span class=\"line\">   60 root      20   0   31108   2028   1728 S  0.0  0.4   0:00.09 systemd-journal                                                                                                                                               </span><br><span class=\"line\">  289 systemd+  20   0   26520   1608   1344 S  0.0  0.3   0:00.04 systemd-network                                                                                                                                               </span><br><span class=\"line\">  290 root      20   0   25988   1180    948 S  0.0  0.2   0:00.00 cron                                                                                                                                                          </span><br><span class=\"line\">  299 root      20   0   69872   3344   2604 S  0.0  0.6   0:00.00 sshd                                                                                                                                                                   </span><br><span class=\"line\">  377 root      20   0   56932  11860   1760 S  0.0  2.3   0:00.33 supervisord                                                                                                                                                   </span><br><span class=\"line\">  379 root      20   0   60860  12120   2292 S  0.0  2.3   0:16.00 python                                                                                                                                                        </span><br><span class=\"line\">  386 kcptun    20   0    9420   3900   2908 S  0.0  0.7   0:00.01 server_linux_am                                                                                                                                               </span><br><span class=\"line\">  571 root      20   0   97404   4124   3116 S  0.0  0.8   0:00.11 sshd                                                                                                                                                          </span><br><span class=\"line\">  582 root      20   0   18240   2116   1556 S  0.0  0.4   0:00.00 bash                                                                                                                                                          </span><br><span class=\"line\">  716 root      20   0   97404   4080   3120 S  0.0  0.8   0:00.01 sshd                                                                                                                                                          </span><br><span class=\"line\">  727 root      20   0   18240   2084   1524 S  0.0  0.4   0:00.00 bash                                                                                                                                                          </span><br><span class=\"line\">  738 root      20   0   20000   1604   1080 R  0.0  0.3   0:00.02 top</span><br></pre></td></tr></table></figure></p>\n"},{"title":"Ubuntu 安装 SSR 一键脚本","author":"ZkName","date":"2017-04-19T04:27:00.000Z","_content":"## SSR一键脚本\n\n###### 几个默认配置：\n默认加密为： chacha20\n默认协议为： auth_sha1_v4\n默认混淆为：  tls1.2_ticket_auth\n\n### 一键脚本的安装\n```shell\nwget -N --no-check-certificate https://raw.githubusercontent.com/91yun/shadowsocks_install/master/shadowsocksR.sh && bash shadowsocksR.sh\n```\n###### 本脚本安装完成后，已将 ShadowsocksR 自动加入开机自启动。\n### 卸载方法：\n```shell\nbash ./shadowsocksR.sh uninstall\n```\n### 升级方法：\n```shell\ncd /usr/local/shadowsocks/shadowsocks\ngit pull\n```\n### 使用命令：\n启动： /etc/init.d/shadowsocks start\n停止： /etc/init.d/shadowsocks stop\n重启： /etc/init.d/shadowsocks restart\n状态： /etc/init.d/shadowsocks status\n\n配置文件路径： /etc/shadowsocks.json\n日志文件路径： /var/log/shadowsocks.log\n安装路径： /usr/local/shadowsocks/shadowsoks\n\n### 多用户配置\n如果要多个用户一起使用的话，请写入以下配置（ vi /etc/shadowsocks.json ）：\n\n多用户的核心是这个配置，把这个配置替代掉 /etc/shadowsocks.json 的相关密码的配置就行了：\n```shell\n“port_password”:{\n“80”:”password1″,\n“443”:”password2″\n},\n```\n\n###### 完整的多用户配置：\n```shell\n{\n    \"server\":\"0.0.0.0\",\n    \"server_ipv6\": \"[::]\",\n    \"local_address\":\"127.0.0.1\",\n    \"local_port\":1080,\n    \"port_password\":{\n        \"80\":\"password1\",\n        \"443\":\"password2\"\n    },\n    \"timeout\":300,\n    \"method\":\"aes-256-cfb\",\n    \"protocol\": \"auth_sha1_compatible\",\n    \"protocol_param\": \"\",\n    \"obfs\": \"http_simple_compatible\",\n    \"obfs_param\": \"\",\n    \"redirect\": \"\",\n    \"dns_ipv6\": false,\n    \"fast_open\": false,\n    \"workers\": 1\n}\n```\n\n文章来源：https://www.91yun.org/archives/2079\n\n\n","source":"_posts/Ubuntu-安装-SSR-一键脚本.md","raw":"title: Ubuntu 安装 SSR 一键脚本\nauthor: ZkName\ntags:\n  - Ubuntu\n  - shadowsocks\n  - ssr\ncategories: []\ndate: 2017-04-19 12:27:00\n---\n## SSR一键脚本\n\n###### 几个默认配置：\n默认加密为： chacha20\n默认协议为： auth_sha1_v4\n默认混淆为：  tls1.2_ticket_auth\n\n### 一键脚本的安装\n```shell\nwget -N --no-check-certificate https://raw.githubusercontent.com/91yun/shadowsocks_install/master/shadowsocksR.sh && bash shadowsocksR.sh\n```\n###### 本脚本安装完成后，已将 ShadowsocksR 自动加入开机自启动。\n### 卸载方法：\n```shell\nbash ./shadowsocksR.sh uninstall\n```\n### 升级方法：\n```shell\ncd /usr/local/shadowsocks/shadowsocks\ngit pull\n```\n### 使用命令：\n启动： /etc/init.d/shadowsocks start\n停止： /etc/init.d/shadowsocks stop\n重启： /etc/init.d/shadowsocks restart\n状态： /etc/init.d/shadowsocks status\n\n配置文件路径： /etc/shadowsocks.json\n日志文件路径： /var/log/shadowsocks.log\n安装路径： /usr/local/shadowsocks/shadowsoks\n\n### 多用户配置\n如果要多个用户一起使用的话，请写入以下配置（ vi /etc/shadowsocks.json ）：\n\n多用户的核心是这个配置，把这个配置替代掉 /etc/shadowsocks.json 的相关密码的配置就行了：\n```shell\n“port_password”:{\n“80”:”password1″,\n“443”:”password2″\n},\n```\n\n###### 完整的多用户配置：\n```shell\n{\n    \"server\":\"0.0.0.0\",\n    \"server_ipv6\": \"[::]\",\n    \"local_address\":\"127.0.0.1\",\n    \"local_port\":1080,\n    \"port_password\":{\n        \"80\":\"password1\",\n        \"443\":\"password2\"\n    },\n    \"timeout\":300,\n    \"method\":\"aes-256-cfb\",\n    \"protocol\": \"auth_sha1_compatible\",\n    \"protocol_param\": \"\",\n    \"obfs\": \"http_simple_compatible\",\n    \"obfs_param\": \"\",\n    \"redirect\": \"\",\n    \"dns_ipv6\": false,\n    \"fast_open\": false,\n    \"workers\": 1\n}\n```\n\n文章来源：https://www.91yun.org/archives/2079\n\n\n","slug":"Ubuntu-安装-SSR-一键脚本","published":1,"updated":"2018-12-13T08:24:34.066Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsoq0011i85noubdp7eu","content":"<h2 id=\"SSR一键脚本\"><a href=\"#SSR一键脚本\" class=\"headerlink\" title=\"SSR一键脚本\"></a>SSR一键脚本</h2><h6 id=\"几个默认配置：\"><a href=\"#几个默认配置：\" class=\"headerlink\" title=\"几个默认配置：\"></a>几个默认配置：</h6><p>默认加密为： chacha20<br>默认协议为： auth_sha1_v4<br>默认混淆为：  tls1.2_ticket_auth</p>\n<h3 id=\"一键脚本的安装\"><a href=\"#一键脚本的安装\" class=\"headerlink\" title=\"一键脚本的安装\"></a>一键脚本的安装</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -N --no-check-certificate https://raw.githubusercontent.com/91yun/shadowsocks_install/master/shadowsocksR.sh &amp;&amp; bash shadowsocksR.sh</span><br></pre></td></tr></table></figure>\n<h6 id=\"本脚本安装完成后，已将-ShadowsocksR-自动加入开机自启动。\"><a href=\"#本脚本安装完成后，已将-ShadowsocksR-自动加入开机自启动。\" class=\"headerlink\" title=\"本脚本安装完成后，已将 ShadowsocksR 自动加入开机自启动。\"></a>本脚本安装完成后，已将 ShadowsocksR 自动加入开机自启动。</h6><h3 id=\"卸载方法：\"><a href=\"#卸载方法：\" class=\"headerlink\" title=\"卸载方法：\"></a>卸载方法：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bash ./shadowsocksR.sh uninstall</span><br></pre></td></tr></table></figure>\n<h3 id=\"升级方法：\"><a href=\"#升级方法：\" class=\"headerlink\" title=\"升级方法：\"></a>升级方法：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/shadowsocks/shadowsocks</span><br><span class=\"line\">git pull</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用命令：\"><a href=\"#使用命令：\" class=\"headerlink\" title=\"使用命令：\"></a>使用命令：</h3><p>启动： /etc/init.d/shadowsocks start<br>停止： /etc/init.d/shadowsocks stop<br>重启： /etc/init.d/shadowsocks restart<br>状态： /etc/init.d/shadowsocks status</p>\n<p>配置文件路径： /etc/shadowsocks.json<br>日志文件路径： /var/log/shadowsocks.log<br>安装路径： /usr/local/shadowsocks/shadowsoks</p>\n<h3 id=\"多用户配置\"><a href=\"#多用户配置\" class=\"headerlink\" title=\"多用户配置\"></a>多用户配置</h3><p>如果要多个用户一起使用的话，请写入以下配置（ vi /etc/shadowsocks.json ）：</p>\n<p>多用户的核心是这个配置，把这个配置替代掉 /etc/shadowsocks.json 的相关密码的配置就行了：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">“port_password”:&#123;</span><br><span class=\"line\">“80”:”password1″,</span><br><span class=\"line\">“443”:”password2″</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></p>\n<h6 id=\"完整的多用户配置：\"><a href=\"#完整的多用户配置：\" class=\"headerlink\" title=\"完整的多用户配置：\"></a>完整的多用户配置：</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    \"server\":\"0.0.0.0\",</span><br><span class=\"line\">    \"server_ipv6\": \"[::]\",</span><br><span class=\"line\">    \"local_address\":\"127.0.0.1\",</span><br><span class=\"line\">    \"local_port\":1080,</span><br><span class=\"line\">    \"port_password\":&#123;</span><br><span class=\"line\">        \"80\":\"password1\",</span><br><span class=\"line\">        \"443\":\"password2\"</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    \"timeout\":300,</span><br><span class=\"line\">    \"method\":\"aes-256-cfb\",</span><br><span class=\"line\">    \"protocol\": \"auth_sha1_compatible\",</span><br><span class=\"line\">    \"protocol_param\": \"\",</span><br><span class=\"line\">    \"obfs\": \"http_simple_compatible\",</span><br><span class=\"line\">    \"obfs_param\": \"\",</span><br><span class=\"line\">    \"redirect\": \"\",</span><br><span class=\"line\">    \"dns_ipv6\": false,</span><br><span class=\"line\">    \"fast_open\": false,</span><br><span class=\"line\">    \"workers\": 1</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>文章来源：<a href=\"https://www.91yun.org/archives/2079\" target=\"_blank\" rel=\"noopener\">https://www.91yun.org/archives/2079</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"SSR一键脚本\"><a href=\"#SSR一键脚本\" class=\"headerlink\" title=\"SSR一键脚本\"></a>SSR一键脚本</h2><h6 id=\"几个默认配置：\"><a href=\"#几个默认配置：\" class=\"headerlink\" title=\"几个默认配置：\"></a>几个默认配置：</h6><p>默认加密为： chacha20<br>默认协议为： auth_sha1_v4<br>默认混淆为：  tls1.2_ticket_auth</p>\n<h3 id=\"一键脚本的安装\"><a href=\"#一键脚本的安装\" class=\"headerlink\" title=\"一键脚本的安装\"></a>一键脚本的安装</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -N --no-check-certificate https://raw.githubusercontent.com/91yun/shadowsocks_install/master/shadowsocksR.sh &amp;&amp; bash shadowsocksR.sh</span><br></pre></td></tr></table></figure>\n<h6 id=\"本脚本安装完成后，已将-ShadowsocksR-自动加入开机自启动。\"><a href=\"#本脚本安装完成后，已将-ShadowsocksR-自动加入开机自启动。\" class=\"headerlink\" title=\"本脚本安装完成后，已将 ShadowsocksR 自动加入开机自启动。\"></a>本脚本安装完成后，已将 ShadowsocksR 自动加入开机自启动。</h6><h3 id=\"卸载方法：\"><a href=\"#卸载方法：\" class=\"headerlink\" title=\"卸载方法：\"></a>卸载方法：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bash ./shadowsocksR.sh uninstall</span><br></pre></td></tr></table></figure>\n<h3 id=\"升级方法：\"><a href=\"#升级方法：\" class=\"headerlink\" title=\"升级方法：\"></a>升级方法：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/shadowsocks/shadowsocks</span><br><span class=\"line\">git pull</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用命令：\"><a href=\"#使用命令：\" class=\"headerlink\" title=\"使用命令：\"></a>使用命令：</h3><p>启动： /etc/init.d/shadowsocks start<br>停止： /etc/init.d/shadowsocks stop<br>重启： /etc/init.d/shadowsocks restart<br>状态： /etc/init.d/shadowsocks status</p>\n<p>配置文件路径： /etc/shadowsocks.json<br>日志文件路径： /var/log/shadowsocks.log<br>安装路径： /usr/local/shadowsocks/shadowsoks</p>\n<h3 id=\"多用户配置\"><a href=\"#多用户配置\" class=\"headerlink\" title=\"多用户配置\"></a>多用户配置</h3><p>如果要多个用户一起使用的话，请写入以下配置（ vi /etc/shadowsocks.json ）：</p>\n<p>多用户的核心是这个配置，把这个配置替代掉 /etc/shadowsocks.json 的相关密码的配置就行了：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">“port_password”:&#123;</span><br><span class=\"line\">“80”:”password1″,</span><br><span class=\"line\">“443”:”password2″</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></p>\n<h6 id=\"完整的多用户配置：\"><a href=\"#完整的多用户配置：\" class=\"headerlink\" title=\"完整的多用户配置：\"></a>完整的多用户配置：</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    \"server\":\"0.0.0.0\",</span><br><span class=\"line\">    \"server_ipv6\": \"[::]\",</span><br><span class=\"line\">    \"local_address\":\"127.0.0.1\",</span><br><span class=\"line\">    \"local_port\":1080,</span><br><span class=\"line\">    \"port_password\":&#123;</span><br><span class=\"line\">        \"80\":\"password1\",</span><br><span class=\"line\">        \"443\":\"password2\"</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    \"timeout\":300,</span><br><span class=\"line\">    \"method\":\"aes-256-cfb\",</span><br><span class=\"line\">    \"protocol\": \"auth_sha1_compatible\",</span><br><span class=\"line\">    \"protocol_param\": \"\",</span><br><span class=\"line\">    \"obfs\": \"http_simple_compatible\",</span><br><span class=\"line\">    \"obfs_param\": \"\",</span><br><span class=\"line\">    \"redirect\": \"\",</span><br><span class=\"line\">    \"dns_ipv6\": false,</span><br><span class=\"line\">    \"fast_open\": false,</span><br><span class=\"line\">    \"workers\": 1</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>文章来源：<a href=\"https://www.91yun.org/archives/2079\" target=\"_blank\" rel=\"noopener\">https://www.91yun.org/archives/2079</a></p>\n"},{"title":"Springboot注册linux服务","author":"ZkName","date":"2017-08-03T08:08:00.000Z","_content":"##### 1、设置jar|war权限\n```shell\n# 确保jar文件有执行权限\nchmod 500 demo.jar\n# 创建jar文件到/etc/init.d/的软连接\nln -s /home/demo.jar /etc/init.d/demo.conf配置文件\n\n```\n###### demo.conf配置文件\n```shell\nJAVA_OPTS=\"-Xms1024m -Xmx2048m\"\nRUN_ARGS=\"--server.port=8080 --logging.level=INFO --spring.thymeleaf.cache=true --logging.file=/app/log/demo/demo.log\" \n```\n##### 2、使用service命令运行应用\n```shell\nservice demo start|stop|restart|status\n```\n\n##### 3、开机启动\n###### 1.启动\n```shell\nupdate-rc.d demo defaults\n```\n###### 1.关闭启动\n```shell\nupdate-rc.d demo disable\n```\n###### 1.删除启动\n```shell\nupdate-rc.d demo remove\n```","source":"_posts/Springboot注册linux服务.md","raw":"title: Springboot注册linux服务\nauthor: ZkName\ntags:\n  - SpringBoot\n  - Spring\ncategories: []\ndate: 2017-08-03 16:08:00\n---\n##### 1、设置jar|war权限\n```shell\n# 确保jar文件有执行权限\nchmod 500 demo.jar\n# 创建jar文件到/etc/init.d/的软连接\nln -s /home/demo.jar /etc/init.d/demo.conf配置文件\n\n```\n###### demo.conf配置文件\n```shell\nJAVA_OPTS=\"-Xms1024m -Xmx2048m\"\nRUN_ARGS=\"--server.port=8080 --logging.level=INFO --spring.thymeleaf.cache=true --logging.file=/app/log/demo/demo.log\" \n```\n##### 2、使用service命令运行应用\n```shell\nservice demo start|stop|restart|status\n```\n\n##### 3、开机启动\n###### 1.启动\n```shell\nupdate-rc.d demo defaults\n```\n###### 1.关闭启动\n```shell\nupdate-rc.d demo disable\n```\n###### 1.删除启动\n```shell\nupdate-rc.d demo remove\n```","slug":"Springboot注册linux服务","published":1,"updated":"2018-12-13T08:24:34.063Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsor0013i85n6rrgw3y1","content":"<h5 id=\"1、设置jar-war权限\"><a href=\"#1、设置jar-war权限\" class=\"headerlink\" title=\"1、设置jar|war权限\"></a>1、设置jar|war权限</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 确保jar文件有执行权限</span><br><span class=\"line\">chmod 500 demo.jar</span><br><span class=\"line\"><span class=\"meta\">#</span> 创建jar文件到/etc/init.d/的软连接</span><br><span class=\"line\">ln -s /home/demo.jar /etc/init.d/demo.conf配置文件</span><br></pre></td></tr></table></figure>\n<h6 id=\"demo-conf配置文件\"><a href=\"#demo-conf配置文件\" class=\"headerlink\" title=\"demo.conf配置文件\"></a>demo.conf配置文件</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JAVA_OPTS=\"-Xms1024m -Xmx2048m\"</span><br><span class=\"line\">RUN_ARGS=\"--server.port=8080 --logging.level=INFO --spring.thymeleaf.cache=true --logging.file=/app/log/demo/demo.log\"</span><br></pre></td></tr></table></figure>\n<h5 id=\"2、使用service命令运行应用\"><a href=\"#2、使用service命令运行应用\" class=\"headerlink\" title=\"2、使用service命令运行应用\"></a>2、使用service命令运行应用</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service demo start|stop|restart|status</span><br></pre></td></tr></table></figure>\n<h5 id=\"3、开机启动\"><a href=\"#3、开机启动\" class=\"headerlink\" title=\"3、开机启动\"></a>3、开机启动</h5><h6 id=\"1-启动\"><a href=\"#1-启动\" class=\"headerlink\" title=\"1.启动\"></a>1.启动</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update-rc.d demo defaults</span><br></pre></td></tr></table></figure>\n<h6 id=\"1-关闭启动\"><a href=\"#1-关闭启动\" class=\"headerlink\" title=\"1.关闭启动\"></a>1.关闭启动</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update-rc.d demo disable</span><br></pre></td></tr></table></figure>\n<h6 id=\"1-删除启动\"><a href=\"#1-删除启动\" class=\"headerlink\" title=\"1.删除启动\"></a>1.删除启动</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update-rc.d demo remove</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h5 id=\"1、设置jar-war权限\"><a href=\"#1、设置jar-war权限\" class=\"headerlink\" title=\"1、设置jar|war权限\"></a>1、设置jar|war权限</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 确保jar文件有执行权限</span><br><span class=\"line\">chmod 500 demo.jar</span><br><span class=\"line\"><span class=\"meta\">#</span> 创建jar文件到/etc/init.d/的软连接</span><br><span class=\"line\">ln -s /home/demo.jar /etc/init.d/demo.conf配置文件</span><br></pre></td></tr></table></figure>\n<h6 id=\"demo-conf配置文件\"><a href=\"#demo-conf配置文件\" class=\"headerlink\" title=\"demo.conf配置文件\"></a>demo.conf配置文件</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JAVA_OPTS=\"-Xms1024m -Xmx2048m\"</span><br><span class=\"line\">RUN_ARGS=\"--server.port=8080 --logging.level=INFO --spring.thymeleaf.cache=true --logging.file=/app/log/demo/demo.log\"</span><br></pre></td></tr></table></figure>\n<h5 id=\"2、使用service命令运行应用\"><a href=\"#2、使用service命令运行应用\" class=\"headerlink\" title=\"2、使用service命令运行应用\"></a>2、使用service命令运行应用</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service demo start|stop|restart|status</span><br></pre></td></tr></table></figure>\n<h5 id=\"3、开机启动\"><a href=\"#3、开机启动\" class=\"headerlink\" title=\"3、开机启动\"></a>3、开机启动</h5><h6 id=\"1-启动\"><a href=\"#1-启动\" class=\"headerlink\" title=\"1.启动\"></a>1.启动</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update-rc.d demo defaults</span><br></pre></td></tr></table></figure>\n<h6 id=\"1-关闭启动\"><a href=\"#1-关闭启动\" class=\"headerlink\" title=\"1.关闭启动\"></a>1.关闭启动</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update-rc.d demo disable</span><br></pre></td></tr></table></figure>\n<h6 id=\"1-删除启动\"><a href=\"#1-删除启动\" class=\"headerlink\" title=\"1.删除启动\"></a>1.删除启动</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update-rc.d demo remove</span><br></pre></td></tr></table></figure>"},{"title":"Ubuntu下安装Shadowsocks","date":"2015-12-17T03:54:00.000Z","_content":"1. 更新列表：\n```shell\nsudo apt-get update\n```\n2. 确认Ubuntu机器上Python的版本号（需要不小于 2.6）：\n```shell\nsudo apt-get update\n```\n3. 安装 python-pip和 shadowsocks：\n```shell\napt-get install python-gevent python-pip python-m2crypto\npip install shadowsocks\n```\n4. 找到shadowsocks配置文件所在文件夹，一般为：\n```shell\n/etc/shadowsocks/\n\n或者通过以下命令完全搜索（可以使用通配符）\nfind / -name shadowsocks\n```\n5. 修改配置文件夹下面的 config.json 文件（如果不存在则创建一个），该文件为json格式，具体如下：\n```\n单用户配置：\n{\n        \"timeout\":600,\n        \"method\":\"aes-256-cfb\",\n        \"local_port\":1080,\n        \"server\":\"0.0.0.0\",\n \n        \"server_port\":8388,\n        \"password\":\"passwd\"\n}\n \n多用户配置（通过配置多个端口来实现）：\n{\n        \"timeout\":600,\n        \"method\":\"aes-256-cfb\"\n        \"local_port\":1080,\n        \"server\":\"0.0.0.0\",\n \n        \"port_password\": \n        {\n                \"8388\":\"passwd1\",\n                \"8391\":\"passwd2\"\n        },\n        \"_comment\":\n        {\n                \"8388\":\"user1\",\n                \"8391\":\"user1\"\n        }\n}\n \n每项配置含义如下：\ntimeout：         超时时间\nmethod：          加密方式\nlocal_port：      本地代理服务监听端口（用于当前机器的程序使用）\nserver：          作为代理服务器监听的IP（全0表示监听所有IP）\nserver_port：     作为代理服务器监听的端口（作为服务器用于其他机器使用）\npassword：        作为代理服务器提供服务时用于验证的密码\nport_password：   为每个不同端口设置不同的验证密码（适用于多用户时）\n_comment：        为每个不同端口设置说明文本（例如备注每个端口的使用者）\n```\n6. 开机自动启动：\n\n```shell\n/usr/local/bin/ssserver -c /etc/shadowsocks/config.json -d start\n```","source":"_posts/Ubuntu下安装Shadowsocks.md","raw":"title: Ubuntu下安装Shadowsocks\ntags:\n  - Ubuntu\ncategories:\n  - Ubuntu\ndate: 2015-12-17 11:54:00\n---\n1. 更新列表：\n```shell\nsudo apt-get update\n```\n2. 确认Ubuntu机器上Python的版本号（需要不小于 2.6）：\n```shell\nsudo apt-get update\n```\n3. 安装 python-pip和 shadowsocks：\n```shell\napt-get install python-gevent python-pip python-m2crypto\npip install shadowsocks\n```\n4. 找到shadowsocks配置文件所在文件夹，一般为：\n```shell\n/etc/shadowsocks/\n\n或者通过以下命令完全搜索（可以使用通配符）\nfind / -name shadowsocks\n```\n5. 修改配置文件夹下面的 config.json 文件（如果不存在则创建一个），该文件为json格式，具体如下：\n```\n单用户配置：\n{\n        \"timeout\":600,\n        \"method\":\"aes-256-cfb\",\n        \"local_port\":1080,\n        \"server\":\"0.0.0.0\",\n \n        \"server_port\":8388,\n        \"password\":\"passwd\"\n}\n \n多用户配置（通过配置多个端口来实现）：\n{\n        \"timeout\":600,\n        \"method\":\"aes-256-cfb\"\n        \"local_port\":1080,\n        \"server\":\"0.0.0.0\",\n \n        \"port_password\": \n        {\n                \"8388\":\"passwd1\",\n                \"8391\":\"passwd2\"\n        },\n        \"_comment\":\n        {\n                \"8388\":\"user1\",\n                \"8391\":\"user1\"\n        }\n}\n \n每项配置含义如下：\ntimeout：         超时时间\nmethod：          加密方式\nlocal_port：      本地代理服务监听端口（用于当前机器的程序使用）\nserver：          作为代理服务器监听的IP（全0表示监听所有IP）\nserver_port：     作为代理服务器监听的端口（作为服务器用于其他机器使用）\npassword：        作为代理服务器提供服务时用于验证的密码\nport_password：   为每个不同端口设置不同的验证密码（适用于多用户时）\n_comment：        为每个不同端口设置说明文本（例如备注每个端口的使用者）\n```\n6. 开机自动启动：\n\n```shell\n/usr/local/bin/ssserver -c /etc/shadowsocks/config.json -d start\n```","slug":"Ubuntu下安装Shadowsocks","published":1,"updated":"2018-12-13T08:24:34.067Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsot0016i85nws1qgt00","content":"<ol>\n<li><p>更新列表：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>确认Ubuntu机器上Python的版本号（需要不小于 2.6）：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装 python-pip和 shadowsocks：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install python-gevent python-pip python-m2crypto</span><br><span class=\"line\">pip install shadowsocks</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>找到shadowsocks配置文件所在文件夹，一般为：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/shadowsocks/</span><br><span class=\"line\"></span><br><span class=\"line\">或者通过以下命令完全搜索（可以使用通配符）</span><br><span class=\"line\">find / -name shadowsocks</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>修改配置文件夹下面的 config.json 文件（如果不存在则创建一个），该文件为json格式，具体如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">单用户配置：</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        &quot;timeout&quot;:600,</span><br><span class=\"line\">        &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class=\"line\">        &quot;local_port&quot;:1080,</span><br><span class=\"line\">        &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class=\"line\"> </span><br><span class=\"line\">        &quot;server_port&quot;:8388,</span><br><span class=\"line\">        &quot;password&quot;:&quot;passwd&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">多用户配置（通过配置多个端口来实现）：</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        &quot;timeout&quot;:600,</span><br><span class=\"line\">        &quot;method&quot;:&quot;aes-256-cfb&quot;</span><br><span class=\"line\">        &quot;local_port&quot;:1080,</span><br><span class=\"line\">        &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class=\"line\"> </span><br><span class=\"line\">        &quot;port_password&quot;: </span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">                &quot;8388&quot;:&quot;passwd1&quot;,</span><br><span class=\"line\">                &quot;8391&quot;:&quot;passwd2&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;_comment&quot;:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">                &quot;8388&quot;:&quot;user1&quot;,</span><br><span class=\"line\">                &quot;8391&quot;:&quot;user1&quot;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">每项配置含义如下：</span><br><span class=\"line\">timeout：         超时时间</span><br><span class=\"line\">method：          加密方式</span><br><span class=\"line\">local_port：      本地代理服务监听端口（用于当前机器的程序使用）</span><br><span class=\"line\">server：          作为代理服务器监听的IP（全0表示监听所有IP）</span><br><span class=\"line\">server_port：     作为代理服务器监听的端口（作为服务器用于其他机器使用）</span><br><span class=\"line\">password：        作为代理服务器提供服务时用于验证的密码</span><br><span class=\"line\">port_password：   为每个不同端口设置不同的验证密码（适用于多用户时）</span><br><span class=\"line\">_comment：        为每个不同端口设置说明文本（例如备注每个端口的使用者）</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开机自动启动：</p>\n</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/bin/ssserver -c /etc/shadowsocks/config.json -d start</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<ol>\n<li><p>更新列表：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>确认Ubuntu机器上Python的版本号（需要不小于 2.6）：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装 python-pip和 shadowsocks：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install python-gevent python-pip python-m2crypto</span><br><span class=\"line\">pip install shadowsocks</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>找到shadowsocks配置文件所在文件夹，一般为：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/shadowsocks/</span><br><span class=\"line\"></span><br><span class=\"line\">或者通过以下命令完全搜索（可以使用通配符）</span><br><span class=\"line\">find / -name shadowsocks</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>修改配置文件夹下面的 config.json 文件（如果不存在则创建一个），该文件为json格式，具体如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">单用户配置：</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        &quot;timeout&quot;:600,</span><br><span class=\"line\">        &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class=\"line\">        &quot;local_port&quot;:1080,</span><br><span class=\"line\">        &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class=\"line\"> </span><br><span class=\"line\">        &quot;server_port&quot;:8388,</span><br><span class=\"line\">        &quot;password&quot;:&quot;passwd&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">多用户配置（通过配置多个端口来实现）：</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        &quot;timeout&quot;:600,</span><br><span class=\"line\">        &quot;method&quot;:&quot;aes-256-cfb&quot;</span><br><span class=\"line\">        &quot;local_port&quot;:1080,</span><br><span class=\"line\">        &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class=\"line\"> </span><br><span class=\"line\">        &quot;port_password&quot;: </span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">                &quot;8388&quot;:&quot;passwd1&quot;,</span><br><span class=\"line\">                &quot;8391&quot;:&quot;passwd2&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;_comment&quot;:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">                &quot;8388&quot;:&quot;user1&quot;,</span><br><span class=\"line\">                &quot;8391&quot;:&quot;user1&quot;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">每项配置含义如下：</span><br><span class=\"line\">timeout：         超时时间</span><br><span class=\"line\">method：          加密方式</span><br><span class=\"line\">local_port：      本地代理服务监听端口（用于当前机器的程序使用）</span><br><span class=\"line\">server：          作为代理服务器监听的IP（全0表示监听所有IP）</span><br><span class=\"line\">server_port：     作为代理服务器监听的端口（作为服务器用于其他机器使用）</span><br><span class=\"line\">password：        作为代理服务器提供服务时用于验证的密码</span><br><span class=\"line\">port_password：   为每个不同端口设置不同的验证密码（适用于多用户时）</span><br><span class=\"line\">_comment：        为每个不同端口设置说明文本（例如备注每个端口的使用者）</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开机自动启动：</p>\n</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/bin/ssserver -c /etc/shadowsocks/config.json -d start</span><br></pre></td></tr></table></figure>"},{"title":"Ubuntu安装JDK","date":"2016-03-10T09:27:00.000Z","_content":"## 一.jdk1.8安装\n### 1. 从网站上下载jdk1.8包(jdk-8u73-linux-x64.tar.gz )\n\n### 2.解压到 /usr/java/目录下，\n解压安装到：\n```shell\ntar zxvf jdk-8u73-linux-x64.tar.gz  -C /usr/java/\n\nln -s /usr/java/jdk1.8.0_73  /usr/java/jdk\n```\n\n### 3.环境变量配置：\n (/etc/profile文件中添加：)\n```shell\n vi  /etc/profile\n JAVA_HOME=/usr/java/jdk\n PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin\n CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n export JAVA_HOME PATH CLASSPATH\n ```\n 添加完毕保存退出\n```shell\n source /etc/profile\n```\n```shell\n sudo update-alternatives --install /usr/bin/java java /usr/java/jdk/bin/java 300\n sudo update-alternatives --install /usr/bin/javac javac /usr/java/jdk/bin/javac 300\n sudo update-alternatives  --install  /usr/bin/jar jar /usr/java/jdk/bin/jar 300\n sudo update-alternatives  --install  /usr/bin/javah javah /usr/java/jdk/bin/javah 300\n sudo update-alternatives  --install  /usr/bin/javap javap /usr/java/jdk/bin/javap 300\n```\n```shell\n java -version\n```\n显示 \n java version \"1.8.0_73\"\n Java(TM) SE Runtime Environment (build 1.8.0_73-b02)\n Java HotSpot(TM) 64-Bit Server VM (build 25.73-b02, mixed mode)","source":"_posts/Ubuntu安装JDK.md","raw":"title: Ubuntu安装JDK\ntags:\n  - Ubuntu\n  - JDK\ncategories:\n  - Ubuntu\ndate: 2016-03-10 17:27:00\n---\n## 一.jdk1.8安装\n### 1. 从网站上下载jdk1.8包(jdk-8u73-linux-x64.tar.gz )\n\n### 2.解压到 /usr/java/目录下，\n解压安装到：\n```shell\ntar zxvf jdk-8u73-linux-x64.tar.gz  -C /usr/java/\n\nln -s /usr/java/jdk1.8.0_73  /usr/java/jdk\n```\n\n### 3.环境变量配置：\n (/etc/profile文件中添加：)\n```shell\n vi  /etc/profile\n JAVA_HOME=/usr/java/jdk\n PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin\n CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n export JAVA_HOME PATH CLASSPATH\n ```\n 添加完毕保存退出\n```shell\n source /etc/profile\n```\n```shell\n sudo update-alternatives --install /usr/bin/java java /usr/java/jdk/bin/java 300\n sudo update-alternatives --install /usr/bin/javac javac /usr/java/jdk/bin/javac 300\n sudo update-alternatives  --install  /usr/bin/jar jar /usr/java/jdk/bin/jar 300\n sudo update-alternatives  --install  /usr/bin/javah javah /usr/java/jdk/bin/javah 300\n sudo update-alternatives  --install  /usr/bin/javap javap /usr/java/jdk/bin/javap 300\n```\n```shell\n java -version\n```\n显示 \n java version \"1.8.0_73\"\n Java(TM) SE Runtime Environment (build 1.8.0_73-b02)\n Java HotSpot(TM) 64-Bit Server VM (build 25.73-b02, mixed mode)","slug":"Ubuntu安装JDK","published":1,"updated":"2018-12-13T08:24:34.068Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspf001zi85n0gcux2ct","content":"<h2 id=\"一-jdk1-8安装\"><a href=\"#一-jdk1-8安装\" class=\"headerlink\" title=\"一.jdk1.8安装\"></a>一.jdk1.8安装</h2><h3 id=\"1-从网站上下载jdk1-8包-jdk-8u73-linux-x64-tar-gz\"><a href=\"#1-从网站上下载jdk1-8包-jdk-8u73-linux-x64-tar-gz\" class=\"headerlink\" title=\"1. 从网站上下载jdk1.8包(jdk-8u73-linux-x64.tar.gz )\"></a>1. 从网站上下载jdk1.8包(jdk-8u73-linux-x64.tar.gz )</h3><h3 id=\"2-解压到-usr-java-目录下，\"><a href=\"#2-解压到-usr-java-目录下，\" class=\"headerlink\" title=\"2.解压到 /usr/java/目录下，\"></a>2.解压到 /usr/java/目录下，</h3><p>解压安装到：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf jdk-8u73-linux-x64.tar.gz  -C /usr/java/</span><br><span class=\"line\"></span><br><span class=\"line\">ln -s /usr/java/jdk1.8.0_73  /usr/java/jdk</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3-环境变量配置：\"><a href=\"#3-环境变量配置：\" class=\"headerlink\" title=\"3.环境变量配置：\"></a>3.环境变量配置：</h3><p> (/etc/profile文件中添加：)<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi  /etc/profile</span><br><span class=\"line\">JAVA_HOME=/usr/java/jdk</span><br><span class=\"line\">PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin</span><br><span class=\"line\">CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class=\"line\">export JAVA_HOME PATH CLASSPATH</span><br></pre></td></tr></table></figure></p>\n<p> 添加完毕保存退出<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo update-alternatives --install /usr/bin/java java /usr/java/jdk/bin/java 300</span><br><span class=\"line\">sudo update-alternatives --install /usr/bin/javac javac /usr/java/jdk/bin/javac 300</span><br><span class=\"line\">sudo update-alternatives  --install  /usr/bin/jar jar /usr/java/jdk/bin/jar 300</span><br><span class=\"line\">sudo update-alternatives  --install  /usr/bin/javah javah /usr/java/jdk/bin/javah 300</span><br><span class=\"line\">sudo update-alternatives  --install  /usr/bin/javap javap /usr/java/jdk/bin/javap 300</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -version</span><br></pre></td></tr></table></figure>\n<p>显示<br> java version “1.8.0_73”<br> Java(TM) SE Runtime Environment (build 1.8.0_73-b02)<br> Java HotSpot(TM) 64-Bit Server VM (build 25.73-b02, mixed mode)</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"一-jdk1-8安装\"><a href=\"#一-jdk1-8安装\" class=\"headerlink\" title=\"一.jdk1.8安装\"></a>一.jdk1.8安装</h2><h3 id=\"1-从网站上下载jdk1-8包-jdk-8u73-linux-x64-tar-gz\"><a href=\"#1-从网站上下载jdk1-8包-jdk-8u73-linux-x64-tar-gz\" class=\"headerlink\" title=\"1. 从网站上下载jdk1.8包(jdk-8u73-linux-x64.tar.gz )\"></a>1. 从网站上下载jdk1.8包(jdk-8u73-linux-x64.tar.gz )</h3><h3 id=\"2-解压到-usr-java-目录下，\"><a href=\"#2-解压到-usr-java-目录下，\" class=\"headerlink\" title=\"2.解压到 /usr/java/目录下，\"></a>2.解压到 /usr/java/目录下，</h3><p>解压安装到：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf jdk-8u73-linux-x64.tar.gz  -C /usr/java/</span><br><span class=\"line\"></span><br><span class=\"line\">ln -s /usr/java/jdk1.8.0_73  /usr/java/jdk</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3-环境变量配置：\"><a href=\"#3-环境变量配置：\" class=\"headerlink\" title=\"3.环境变量配置：\"></a>3.环境变量配置：</h3><p> (/etc/profile文件中添加：)<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi  /etc/profile</span><br><span class=\"line\">JAVA_HOME=/usr/java/jdk</span><br><span class=\"line\">PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin</span><br><span class=\"line\">CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class=\"line\">export JAVA_HOME PATH CLASSPATH</span><br></pre></td></tr></table></figure></p>\n<p> 添加完毕保存退出<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo update-alternatives --install /usr/bin/java java /usr/java/jdk/bin/java 300</span><br><span class=\"line\">sudo update-alternatives --install /usr/bin/javac javac /usr/java/jdk/bin/javac 300</span><br><span class=\"line\">sudo update-alternatives  --install  /usr/bin/jar jar /usr/java/jdk/bin/jar 300</span><br><span class=\"line\">sudo update-alternatives  --install  /usr/bin/javah javah /usr/java/jdk/bin/javah 300</span><br><span class=\"line\">sudo update-alternatives  --install  /usr/bin/javap javap /usr/java/jdk/bin/javap 300</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -version</span><br></pre></td></tr></table></figure>\n<p>显示<br> java version “1.8.0_73”<br> Java(TM) SE Runtime Environment (build 1.8.0_73-b02)<br> Java HotSpot(TM) 64-Bit Server VM (build 25.73-b02, mixed mode)</p>\n"},{"title":"Ubuntu 安装 nodejs","author":"ZkName","date":"2018-10-30T02:00:00.000Z","_content":"## Ubuntu 安装 nodejs\n```shell\n#下载\nwget https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz\n#解压\ntar xf  node-v8.12.0-linux-x64.tar.xz -C /usr/local/\n#环境变量配置增加\nsudo vi /etc/profile\n\nexport NODE_HOME=/usr/local/node-v8.12.0-linux-x64\nexport PATH=$PATH:$NODE_HOME/bin \nexport NODE_PATH=$NODE_HOME/lib/node_modules\n```","source":"_posts/Ubuntu安装nodejs.md","raw":"title: Ubuntu 安装 nodejs\nauthor: ZkName\ntags:\n  - nodejs\n  - Ubuntu\ncategories: []\ndate: 2018-10-30 10:00:00\n---\n## Ubuntu 安装 nodejs\n```shell\n#下载\nwget https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz\n#解压\ntar xf  node-v8.12.0-linux-x64.tar.xz -C /usr/local/\n#环境变量配置增加\nsudo vi /etc/profile\n\nexport NODE_HOME=/usr/local/node-v8.12.0-linux-x64\nexport PATH=$PATH:$NODE_HOME/bin \nexport NODE_PATH=$NODE_HOME/lib/node_modules\n```","slug":"Ubuntu安装nodejs","published":1,"updated":"2018-12-13T08:24:34.045Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspg0020i85nlrcnznz7","content":"<h2 id=\"Ubuntu-安装-nodejs\"><a href=\"#Ubuntu-安装-nodejs\" class=\"headerlink\" title=\"Ubuntu 安装 nodejs\"></a>Ubuntu 安装 nodejs</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>下载</span><br><span class=\"line\">wget https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz</span><br><span class=\"line\"><span class=\"meta\">#</span>解压</span><br><span class=\"line\">tar xf  node-v8.12.0-linux-x64.tar.xz -C /usr/local/</span><br><span class=\"line\"><span class=\"meta\">#</span>环境变量配置增加</span><br><span class=\"line\">sudo vi /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\">export NODE_HOME=/usr/local/node-v8.12.0-linux-x64</span><br><span class=\"line\">export PATH=$PATH:$NODE_HOME/bin </span><br><span class=\"line\">export NODE_PATH=$NODE_HOME/lib/node_modules</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Ubuntu-安装-nodejs\"><a href=\"#Ubuntu-安装-nodejs\" class=\"headerlink\" title=\"Ubuntu 安装 nodejs\"></a>Ubuntu 安装 nodejs</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>下载</span><br><span class=\"line\">wget https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz</span><br><span class=\"line\"><span class=\"meta\">#</span>解压</span><br><span class=\"line\">tar xf  node-v8.12.0-linux-x64.tar.xz -C /usr/local/</span><br><span class=\"line\"><span class=\"meta\">#</span>环境变量配置增加</span><br><span class=\"line\">sudo vi /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\">export NODE_HOME=/usr/local/node-v8.12.0-linux-x64</span><br><span class=\"line\">export PATH=$PATH:$NODE_HOME/bin </span><br><span class=\"line\">export NODE_PATH=$NODE_HOME/lib/node_modules</span><br></pre></td></tr></table></figure>"},{"title":"Ubuntu定时任务","date":"2015-12-18T06:35:00.000Z","_content":"1. 编辑配置文件：\n```shell\n#增加任务：\ncrontab -e\n\n# Edit this file to introduce tasks to be run by cron.\n# \n# Each task to run has to be defined through a single line\n# indicating with different fields when the task will be run\n# and what command to run for the task\n# \n# To define the time you can provide concrete values for\n# minute (m), hour (h), day of month (dom), month (mon),\n# and day of week (dow) or use '*' in these fields (for 'any').# \n# Notice that tasks will be started based on the cron's system\n# daemon's notion of time and timezones.\n# \n# Output of the crontab jobs (including errors) is sent through\n# email to the user the crontab file belongs to (unless redirected).\n# \n# For example, you can run a backup of all your user accounts\n# at 5 a.m every week with:\n# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/\n# \n# For more information see the manual pages of crontab(5) and cron(8)\n# \n# m h  dom mon dow   command\n\n#每分钟访问百度首页\n*/1 * * * *  curl -v \"http://www.baidu.com\"\n```\n\n2. 重启\n```shell\nsudo service cron restart\n```\n3. 查看任务\n```shell\ncrontab -l\n```\n4. 删除任务\n```shell\ncrontab -r\n```","source":"_posts/Ubuntu定时任务.md","raw":"title: Ubuntu定时任务\ntags:\n  - Ubuntu\n  - Crontab\ncategories:\n  - Ubuntu\ndate: 2015-12-18 14:35:00\n---\n1. 编辑配置文件：\n```shell\n#增加任务：\ncrontab -e\n\n# Edit this file to introduce tasks to be run by cron.\n# \n# Each task to run has to be defined through a single line\n# indicating with different fields when the task will be run\n# and what command to run for the task\n# \n# To define the time you can provide concrete values for\n# minute (m), hour (h), day of month (dom), month (mon),\n# and day of week (dow) or use '*' in these fields (for 'any').# \n# Notice that tasks will be started based on the cron's system\n# daemon's notion of time and timezones.\n# \n# Output of the crontab jobs (including errors) is sent through\n# email to the user the crontab file belongs to (unless redirected).\n# \n# For example, you can run a backup of all your user accounts\n# at 5 a.m every week with:\n# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/\n# \n# For more information see the manual pages of crontab(5) and cron(8)\n# \n# m h  dom mon dow   command\n\n#每分钟访问百度首页\n*/1 * * * *  curl -v \"http://www.baidu.com\"\n```\n\n2. 重启\n```shell\nsudo service cron restart\n```\n3. 查看任务\n```shell\ncrontab -l\n```\n4. 删除任务\n```shell\ncrontab -r\n```","slug":"Ubuntu定时任务","published":1,"updated":"2018-12-13T08:24:34.070Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsph0022i85nx3pyl2z0","content":"<ol>\n<li><p>编辑配置文件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>增加任务：</span><br><span class=\"line\">crontab -e</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Edit this file to introduce tasks to be run by cron.</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> Each task to run has to be defined through a single line</span><br><span class=\"line\"><span class=\"meta\">#</span> indicating with different fields when the task will be run</span><br><span class=\"line\"><span class=\"meta\">#</span> and what command to run for the task</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> To define the time you can provide concrete values for</span><br><span class=\"line\"><span class=\"meta\">#</span> minute (m), hour (h), day of month (dom), month (mon),</span><br><span class=\"line\"><span class=\"meta\">#</span> and day of week (dow) or use '*' in these fields (for 'any').# </span><br><span class=\"line\"><span class=\"meta\">#</span> Notice that tasks will be started based on the cron's system</span><br><span class=\"line\"><span class=\"meta\">#</span> daemon's notion of time and timezones.</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> Output of the crontab jobs (including errors) is sent through</span><br><span class=\"line\"><span class=\"meta\">#</span> email to the user the crontab file belongs to (unless redirected).</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> For example, you can run a backup of all your user accounts</span><br><span class=\"line\"><span class=\"meta\">#</span> at 5 a.m every week with:</span><br><span class=\"line\"><span class=\"meta\">#</span> 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> For more information see the manual pages of crontab(5) and cron(8)</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> m h  dom mon dow   command</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>每分钟访问百度首页</span><br><span class=\"line\">*/1 * * * *  curl -v \"http://www.baidu.com\"</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>重启</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service cron restart</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>查看任务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -l</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>删除任务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -r</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li><p>编辑配置文件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>增加任务：</span><br><span class=\"line\">crontab -e</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Edit this file to introduce tasks to be run by cron.</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> Each task to run has to be defined through a single line</span><br><span class=\"line\"><span class=\"meta\">#</span> indicating with different fields when the task will be run</span><br><span class=\"line\"><span class=\"meta\">#</span> and what command to run for the task</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> To define the time you can provide concrete values for</span><br><span class=\"line\"><span class=\"meta\">#</span> minute (m), hour (h), day of month (dom), month (mon),</span><br><span class=\"line\"><span class=\"meta\">#</span> and day of week (dow) or use '*' in these fields (for 'any').# </span><br><span class=\"line\"><span class=\"meta\">#</span> Notice that tasks will be started based on the cron's system</span><br><span class=\"line\"><span class=\"meta\">#</span> daemon's notion of time and timezones.</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> Output of the crontab jobs (including errors) is sent through</span><br><span class=\"line\"><span class=\"meta\">#</span> email to the user the crontab file belongs to (unless redirected).</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> For example, you can run a backup of all your user accounts</span><br><span class=\"line\"><span class=\"meta\">#</span> at 5 a.m every week with:</span><br><span class=\"line\"><span class=\"meta\">#</span> 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> For more information see the manual pages of crontab(5) and cron(8)</span><br><span class=\"line\"><span class=\"meta\">#</span> </span><br><span class=\"line\"><span class=\"meta\">#</span> m h  dom mon dow   command</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>每分钟访问百度首页</span><br><span class=\"line\">*/1 * * * *  curl -v \"http://www.baidu.com\"</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>重启</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service cron restart</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>查看任务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -l</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>删除任务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -r</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"Ubuntu安装vsftpd","date":"2016-05-19T02:14:00.000Z","_content":"## 1、安装\n```shell\nsudo apt-get update\nsudo apt-get install vsftpd\n```\n## 2、新建用户uftp并设置密码\n### 创建用户\n```shell\nuseradd ftpuser -s /sbin/nologin -d /app/ftpuser/\npasswd ftpuser\n```\n### 目录赋权限\n```shell\nchmod 777 -R /app/ftpuser/html\n```","source":"_posts/Ubuntu安装vsftpd.md","raw":"title: Ubuntu安装vsftpd\ntags:\n  - Ubuntu\ncategories:\n  - Ubuntu\ndate: 2016-05-19 10:14:00\n---\n## 1、安装\n```shell\nsudo apt-get update\nsudo apt-get install vsftpd\n```\n## 2、新建用户uftp并设置密码\n### 创建用户\n```shell\nuseradd ftpuser -s /sbin/nologin -d /app/ftpuser/\npasswd ftpuser\n```\n### 目录赋权限\n```shell\nchmod 777 -R /app/ftpuser/html\n```","slug":"Ubuntu安装vsftpd","published":1,"updated":"2018-12-13T08:24:34.069Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspj0025i85nyok9nc72","content":"<h2 id=\"1、安装\"><a href=\"#1、安装\" class=\"headerlink\" title=\"1、安装\"></a>1、安装</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install vsftpd</span><br></pre></td></tr></table></figure>\n<h2 id=\"2、新建用户uftp并设置密码\"><a href=\"#2、新建用户uftp并设置密码\" class=\"headerlink\" title=\"2、新建用户uftp并设置密码\"></a>2、新建用户uftp并设置密码</h2><h3 id=\"创建用户\"><a href=\"#创建用户\" class=\"headerlink\" title=\"创建用户\"></a>创建用户</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useradd ftpuser -s /sbin/nologin -d /app/ftpuser/</span><br><span class=\"line\">passwd ftpuser</span><br></pre></td></tr></table></figure>\n<h3 id=\"目录赋权限\"><a href=\"#目录赋权限\" class=\"headerlink\" title=\"目录赋权限\"></a>目录赋权限</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 777 -R /app/ftpuser/html</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1、安装\"><a href=\"#1、安装\" class=\"headerlink\" title=\"1、安装\"></a>1、安装</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install vsftpd</span><br></pre></td></tr></table></figure>\n<h2 id=\"2、新建用户uftp并设置密码\"><a href=\"#2、新建用户uftp并设置密码\" class=\"headerlink\" title=\"2、新建用户uftp并设置密码\"></a>2、新建用户uftp并设置密码</h2><h3 id=\"创建用户\"><a href=\"#创建用户\" class=\"headerlink\" title=\"创建用户\"></a>创建用户</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useradd ftpuser -s /sbin/nologin -d /app/ftpuser/</span><br><span class=\"line\">passwd ftpuser</span><br></pre></td></tr></table></figure>\n<h3 id=\"目录赋权限\"><a href=\"#目录赋权限\" class=\"headerlink\" title=\"目录赋权限\"></a>目录赋权限</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 777 -R /app/ftpuser/html</span><br></pre></td></tr></table></figure>"},{"title":"MarkdownPad2.5 注册码","date":"2015-12-17T01:49:00.000Z","_content":"![软件版本](/img/20151217111031.png)\n## 注册信息转载\n### 邮箱：\n```\nSoar360@live.com\n```\n### 授权码：\n```\nGBPduHjWfJU1mZqcPM3BikjYKF6xKhlKIys3i1MU2eJHqWGImDHzWdD6xhMNLGVpbP2M5SN6bnxn2kSE8qHqNY5QaaRxmO3YSMHxlv2EYpjdwLcPwfeTG7kUdnhKE0vVy4RidP6Y2wZ0q74f47fzsZo45JE2hfQBFi2O9Jldjp1mW8HUpTtLA2a5/sQytXJUQl/QKO0jUQY4pa5CCx20sV1ClOTZtAGngSOJtIOFXK599sBr5aIEFyH0K7H4BoNMiiDMnxt1rD8Vb/ikJdhGMMQr0R4B+L3nWU97eaVPTRKfWGDE8/eAgKzpGwrQQoDh+nzX1xoVQ8NAuH+s4UcSeQ==\n```\n\n### 安装完后Windows10下出现一个问题：\n\n![软件提示](/img/20151217111715.png)\n\n需要下载软件安装：[http://markdownpad.com/download/awesomium_v1.6.6_sdk_win.exe](http://markdownpad.com/download/awesomium_v1.6.6_sdk_win.exe \"awesomium_v1.6.6_sdk_win\")","source":"_posts/MarkdownPad2.5 注册码.md","raw":"title: MarkdownPad2.5 注册码\ntags:\n  - 注册码\n  - MarkdownPad\ncategories:\n  - 注册码\ndate: 2015-12-17 09:49:00\n---\n![软件版本](/img/20151217111031.png)\n## 注册信息转载\n### 邮箱：\n```\nSoar360@live.com\n```\n### 授权码：\n```\nGBPduHjWfJU1mZqcPM3BikjYKF6xKhlKIys3i1MU2eJHqWGImDHzWdD6xhMNLGVpbP2M5SN6bnxn2kSE8qHqNY5QaaRxmO3YSMHxlv2EYpjdwLcPwfeTG7kUdnhKE0vVy4RidP6Y2wZ0q74f47fzsZo45JE2hfQBFi2O9Jldjp1mW8HUpTtLA2a5/sQytXJUQl/QKO0jUQY4pa5CCx20sV1ClOTZtAGngSOJtIOFXK599sBr5aIEFyH0K7H4BoNMiiDMnxt1rD8Vb/ikJdhGMMQr0R4B+L3nWU97eaVPTRKfWGDE8/eAgKzpGwrQQoDh+nzX1xoVQ8NAuH+s4UcSeQ==\n```\n\n### 安装完后Windows10下出现一个问题：\n\n![软件提示](/img/20151217111715.png)\n\n需要下载软件安装：[http://markdownpad.com/download/awesomium_v1.6.6_sdk_win.exe](http://markdownpad.com/download/awesomium_v1.6.6_sdk_win.exe \"awesomium_v1.6.6_sdk_win\")","slug":"MarkdownPad2.5 注册码","published":1,"updated":"2018-12-13T08:24:34.060Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspk0027i85nvfc87mtj","content":"<p><img src=\"/img/20151217111031.png\" alt=\"软件版本\"></p>\n<h2 id=\"注册信息转载\"><a href=\"#注册信息转载\" class=\"headerlink\" title=\"注册信息转载\"></a>注册信息转载</h2><h3 id=\"邮箱：\"><a href=\"#邮箱：\" class=\"headerlink\" title=\"邮箱：\"></a>邮箱：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Soar360@live.com</span><br></pre></td></tr></table></figure>\n<h3 id=\"授权码：\"><a href=\"#授权码：\" class=\"headerlink\" title=\"授权码：\"></a>授权码：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GBPduHjWfJU1mZqcPM3BikjYKF6xKhlKIys3i1MU2eJHqWGImDHzWdD6xhMNLGVpbP2M5SN6bnxn2kSE8qHqNY5QaaRxmO3YSMHxlv2EYpjdwLcPwfeTG7kUdnhKE0vVy4RidP6Y2wZ0q74f47fzsZo45JE2hfQBFi2O9Jldjp1mW8HUpTtLA2a5/sQytXJUQl/QKO0jUQY4pa5CCx20sV1ClOTZtAGngSOJtIOFXK599sBr5aIEFyH0K7H4BoNMiiDMnxt1rD8Vb/ikJdhGMMQr0R4B+L3nWU97eaVPTRKfWGDE8/eAgKzpGwrQQoDh+nzX1xoVQ8NAuH+s4UcSeQ==</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装完后Windows10下出现一个问题：\"><a href=\"#安装完后Windows10下出现一个问题：\" class=\"headerlink\" title=\"安装完后Windows10下出现一个问题：\"></a>安装完后Windows10下出现一个问题：</h3><p><img src=\"/img/20151217111715.png\" alt=\"软件提示\"></p>\n<p>需要下载软件安装：<a href=\"http://markdownpad.com/download/awesomium_v1.6.6_sdk_win.exe\" title=\"awesomium_v1.6.6_sdk_win\" target=\"_blank\" rel=\"noopener\">http://markdownpad.com/download/awesomium_v1.6.6_sdk_win.exe</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/img/20151217111031.png\" alt=\"软件版本\"></p>\n<h2 id=\"注册信息转载\"><a href=\"#注册信息转载\" class=\"headerlink\" title=\"注册信息转载\"></a>注册信息转载</h2><h3 id=\"邮箱：\"><a href=\"#邮箱：\" class=\"headerlink\" title=\"邮箱：\"></a>邮箱：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Soar360@live.com</span><br></pre></td></tr></table></figure>\n<h3 id=\"授权码：\"><a href=\"#授权码：\" class=\"headerlink\" title=\"授权码：\"></a>授权码：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GBPduHjWfJU1mZqcPM3BikjYKF6xKhlKIys3i1MU2eJHqWGImDHzWdD6xhMNLGVpbP2M5SN6bnxn2kSE8qHqNY5QaaRxmO3YSMHxlv2EYpjdwLcPwfeTG7kUdnhKE0vVy4RidP6Y2wZ0q74f47fzsZo45JE2hfQBFi2O9Jldjp1mW8HUpTtLA2a5/sQytXJUQl/QKO0jUQY4pa5CCx20sV1ClOTZtAGngSOJtIOFXK599sBr5aIEFyH0K7H4BoNMiiDMnxt1rD8Vb/ikJdhGMMQr0R4B+L3nWU97eaVPTRKfWGDE8/eAgKzpGwrQQoDh+nzX1xoVQ8NAuH+s4UcSeQ==</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装完后Windows10下出现一个问题：\"><a href=\"#安装完后Windows10下出现一个问题：\" class=\"headerlink\" title=\"安装完后Windows10下出现一个问题：\"></a>安装完后Windows10下出现一个问题：</h3><p><img src=\"/img/20151217111715.png\" alt=\"软件提示\"></p>\n<p>需要下载软件安装：<a href=\"http://markdownpad.com/download/awesomium_v1.6.6_sdk_win.exe\" title=\"awesomium_v1.6.6_sdk_win\" target=\"_blank\" rel=\"noopener\">http://markdownpad.com/download/awesomium_v1.6.6_sdk_win.exe</a></p>\n"},{"title":"Cygwin的 vim 退格键 方向键混乱","date":"2014-08-27T02:22:00.000Z","_content":"## Cygwin里面vi的问题只是因为配置文件导致的问题，执行以下命令重新放好配置文件即可解决:\n```shell\ncp /usr/share/vim/{VIM_VERSION}/vimrc_example.vim ~/.vimrc\n```\n记得将{VIM_VERSION}替换成你自己所对应的版本，例如vim72。\n\n","source":"_posts/cygwin 的vim 退格键 方向键混乱.md","raw":"title: Cygwin的 vim 退格键 方向键混乱\ndate: 2014-08-27 10:22:00\ntags: Cygwin\n---\n## Cygwin里面vi的问题只是因为配置文件导致的问题，执行以下命令重新放好配置文件即可解决:\n```shell\ncp /usr/share/vim/{VIM_VERSION}/vimrc_example.vim ~/.vimrc\n```\n记得将{VIM_VERSION}替换成你自己所对应的版本，例如vim72。\n\n","slug":"cygwin 的vim 退格键 方向键混乱","published":1,"updated":"2018-12-13T08:24:34.071Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspl0029i85ny0ri5aot","content":"<h2 id=\"Cygwin里面vi的问题只是因为配置文件导致的问题，执行以下命令重新放好配置文件即可解决\"><a href=\"#Cygwin里面vi的问题只是因为配置文件导致的问题，执行以下命令重新放好配置文件即可解决\" class=\"headerlink\" title=\"Cygwin里面vi的问题只是因为配置文件导致的问题，执行以下命令重新放好配置文件即可解决:\"></a>Cygwin里面vi的问题只是因为配置文件导致的问题，执行以下命令重新放好配置文件即可解决:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp /usr/share/vim/&#123;VIM_VERSION&#125;/vimrc_example.vim ~/.vimrc</span><br></pre></td></tr></table></figure>\n<p>记得将{VIM_VERSION}替换成你自己所对应的版本，例如vim72。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Cygwin里面vi的问题只是因为配置文件导致的问题，执行以下命令重新放好配置文件即可解决\"><a href=\"#Cygwin里面vi的问题只是因为配置文件导致的问题，执行以下命令重新放好配置文件即可解决\" class=\"headerlink\" title=\"Cygwin里面vi的问题只是因为配置文件导致的问题，执行以下命令重新放好配置文件即可解决:\"></a>Cygwin里面vi的问题只是因为配置文件导致的问题，执行以下命令重新放好配置文件即可解决:</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp /usr/share/vim/&#123;VIM_VERSION&#125;/vimrc_example.vim ~/.vimrc</span><br></pre></td></tr></table></figure>\n<p>记得将{VIM_VERSION}替换成你自己所对应的版本，例如vim72。</p>\n"},{"title":"Nginx安装反向代理配置","author":"ZkName","date":"2017-08-07T04:25:00.000Z","_content":"#### 1、安装Nginx\n```shell\napt-get update\napt-get install nginx\n/etc/init.d/nginx start\n```\n#### 2、配置反向代理\n```shell\nvi /etc/nginx/conf.d/domain.conf\n\nserver {\n        listen 80;\n        server_name domain.com;\n        location / {\n\t\tproxy_set_header Host $host;\n\t\tproxy_set_header X-Real-IP $remote_addr;\n\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\t\tproxy_set_header X-Forwarded-Proto $scheme;\n\t\tproxy_pass http://localhost:8080;\n        }\n}\n```\n#### 3、配置反向代理加SSL\n```shell\nvi /etc/nginx/conf.d/domain.conf\n\nserver {\n        listen 80;\n        listen 443 ssl;\n        server_name domain.com;\n        \n        ssl on;\n        ssl_certificate /etc/ssl/private/domain.crt;\n        ssl_certificate_key /etc/ssl/private/domain.key\n        ssl_prefer_server_ciphers on;\n        \n        location / {\n\t\tproxy_set_header Host $host;\n\t\tproxy_set_header X-Real-IP $remote_addr;\n\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\t\tproxy_set_header X-Forwarded-Proto $scheme;\n\t\tproxy_pass http://localhost:8080;\n        }\n}\n```","source":"_posts/Nginx安装.md","raw":"title: Nginx安装反向代理配置\nauthor: ZkName\ntags:\n  - Ubuntu\n  - Nginx\n  - SSL\ncategories: []\ndate: 2017-08-07 12:25:00\n---\n#### 1、安装Nginx\n```shell\napt-get update\napt-get install nginx\n/etc/init.d/nginx start\n```\n#### 2、配置反向代理\n```shell\nvi /etc/nginx/conf.d/domain.conf\n\nserver {\n        listen 80;\n        server_name domain.com;\n        location / {\n\t\tproxy_set_header Host $host;\n\t\tproxy_set_header X-Real-IP $remote_addr;\n\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\t\tproxy_set_header X-Forwarded-Proto $scheme;\n\t\tproxy_pass http://localhost:8080;\n        }\n}\n```\n#### 3、配置反向代理加SSL\n```shell\nvi /etc/nginx/conf.d/domain.conf\n\nserver {\n        listen 80;\n        listen 443 ssl;\n        server_name domain.com;\n        \n        ssl on;\n        ssl_certificate /etc/ssl/private/domain.crt;\n        ssl_certificate_key /etc/ssl/private/domain.key\n        ssl_prefer_server_ciphers on;\n        \n        location / {\n\t\tproxy_set_header Host $host;\n\t\tproxy_set_header X-Real-IP $remote_addr;\n\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\t\tproxy_set_header X-Forwarded-Proto $scheme;\n\t\tproxy_pass http://localhost:8080;\n        }\n}\n```","slug":"Nginx安装","published":1,"updated":"2018-12-13T08:24:34.061Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspn002ei85nd0zm4570","content":"<h4 id=\"1、安装Nginx\"><a href=\"#1、安装Nginx\" class=\"headerlink\" title=\"1、安装Nginx\"></a>1、安装Nginx</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get install nginx</span><br><span class=\"line\">/etc/init.d/nginx start</span><br></pre></td></tr></table></figure>\n<h4 id=\"2、配置反向代理\"><a href=\"#2、配置反向代理\" class=\"headerlink\" title=\"2、配置反向代理\"></a>2、配置反向代理</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/nginx/conf.d/domain.conf</span><br><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        server_name domain.com;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">\t\tproxy_set_header Host $host;</span><br><span class=\"line\">\t\tproxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">\t\tproxy_set_header X-Forwarded-Proto $scheme;</span><br><span class=\"line\">\t\tproxy_pass http://localhost:8080;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"3、配置反向代理加SSL\"><a href=\"#3、配置反向代理加SSL\" class=\"headerlink\" title=\"3、配置反向代理加SSL\"></a>3、配置反向代理加SSL</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/nginx/conf.d/domain.conf</span><br><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        listen 443 ssl;</span><br><span class=\"line\">        server_name domain.com;</span><br><span class=\"line\">        </span><br><span class=\"line\">        ssl on;</span><br><span class=\"line\">        ssl_certificate /etc/ssl/private/domain.crt;</span><br><span class=\"line\">        ssl_certificate_key /etc/ssl/private/domain.key</span><br><span class=\"line\">        ssl_prefer_server_ciphers on;</span><br><span class=\"line\">        </span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">\t\tproxy_set_header Host $host;</span><br><span class=\"line\">\t\tproxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">\t\tproxy_set_header X-Forwarded-Proto $scheme;</span><br><span class=\"line\">\t\tproxy_pass http://localhost:8080;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"1、安装Nginx\"><a href=\"#1、安装Nginx\" class=\"headerlink\" title=\"1、安装Nginx\"></a>1、安装Nginx</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get install nginx</span><br><span class=\"line\">/etc/init.d/nginx start</span><br></pre></td></tr></table></figure>\n<h4 id=\"2、配置反向代理\"><a href=\"#2、配置反向代理\" class=\"headerlink\" title=\"2、配置反向代理\"></a>2、配置反向代理</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/nginx/conf.d/domain.conf</span><br><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        server_name domain.com;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">\t\tproxy_set_header Host $host;</span><br><span class=\"line\">\t\tproxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">\t\tproxy_set_header X-Forwarded-Proto $scheme;</span><br><span class=\"line\">\t\tproxy_pass http://localhost:8080;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"3、配置反向代理加SSL\"><a href=\"#3、配置反向代理加SSL\" class=\"headerlink\" title=\"3、配置反向代理加SSL\"></a>3、配置反向代理加SSL</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/nginx/conf.d/domain.conf</span><br><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        listen 443 ssl;</span><br><span class=\"line\">        server_name domain.com;</span><br><span class=\"line\">        </span><br><span class=\"line\">        ssl on;</span><br><span class=\"line\">        ssl_certificate /etc/ssl/private/domain.crt;</span><br><span class=\"line\">        ssl_certificate_key /etc/ssl/private/domain.key</span><br><span class=\"line\">        ssl_prefer_server_ciphers on;</span><br><span class=\"line\">        </span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">\t\tproxy_set_header Host $host;</span><br><span class=\"line\">\t\tproxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">\t\tproxy_set_header X-Forwarded-Proto $scheme;</span><br><span class=\"line\">\t\tproxy_pass http://localhost:8080;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"maven debug 断点定位 source jar","date":"2014-08-04T02:33:00.000Z","_content":"## eclipse 有两个debug插件：\n### 一、m2e.sourcelookup 插件：\nhttps://github.com/bjmi/m2e.sourcelookup\n### 二、m2e-extras 插件安装：\nhttps://github.com/ifedorenko/com.ifedorenko.m2e.sourcelookup\n##### 1、\n![选择](/img/20140812122250.png)\n##### 2、\n![√勾选](/img/20140812122118.png)\n\n\n","source":"_posts/maven debug 断点定位 source jar.md","raw":"title: maven debug 断点定位 source jar\ntags:\n  - Eclipse\ncategories:\n  - Eclipse\ndate: 2014-08-04 10:33:00\n---\n## eclipse 有两个debug插件：\n### 一、m2e.sourcelookup 插件：\nhttps://github.com/bjmi/m2e.sourcelookup\n### 二、m2e-extras 插件安装：\nhttps://github.com/ifedorenko/com.ifedorenko.m2e.sourcelookup\n##### 1、\n![选择](/img/20140812122250.png)\n##### 2、\n![√勾选](/img/20140812122118.png)\n\n\n","slug":"maven debug 断点定位 source jar","published":1,"updated":"2018-12-13T08:24:34.078Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspp002hi85nnfeh4jw7","content":"<h2 id=\"eclipse-有两个debug插件：\"><a href=\"#eclipse-有两个debug插件：\" class=\"headerlink\" title=\"eclipse 有两个debug插件：\"></a>eclipse 有两个debug插件：</h2><h3 id=\"一、m2e-sourcelookup-插件：\"><a href=\"#一、m2e-sourcelookup-插件：\" class=\"headerlink\" title=\"一、m2e.sourcelookup 插件：\"></a>一、m2e.sourcelookup 插件：</h3><p><a href=\"https://github.com/bjmi/m2e.sourcelookup\" target=\"_blank\" rel=\"noopener\">https://github.com/bjmi/m2e.sourcelookup</a></p>\n<h3 id=\"二、m2e-extras-插件安装：\"><a href=\"#二、m2e-extras-插件安装：\" class=\"headerlink\" title=\"二、m2e-extras 插件安装：\"></a>二、m2e-extras 插件安装：</h3><p><a href=\"https://github.com/ifedorenko/com.ifedorenko.m2e.sourcelookup\" target=\"_blank\" rel=\"noopener\">https://github.com/ifedorenko/com.ifedorenko.m2e.sourcelookup</a></p>\n<h5 id=\"1、\"><a href=\"#1、\" class=\"headerlink\" title=\"1、\"></a>1、</h5><p><img src=\"/img/20140812122250.png\" alt=\"选择\"></p>\n<h5 id=\"2、\"><a href=\"#2、\" class=\"headerlink\" title=\"2、\"></a>2、</h5><p><img src=\"/img/20140812122118.png\" alt=\"√勾选\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"eclipse-有两个debug插件：\"><a href=\"#eclipse-有两个debug插件：\" class=\"headerlink\" title=\"eclipse 有两个debug插件：\"></a>eclipse 有两个debug插件：</h2><h3 id=\"一、m2e-sourcelookup-插件：\"><a href=\"#一、m2e-sourcelookup-插件：\" class=\"headerlink\" title=\"一、m2e.sourcelookup 插件：\"></a>一、m2e.sourcelookup 插件：</h3><p><a href=\"https://github.com/bjmi/m2e.sourcelookup\" target=\"_blank\" rel=\"noopener\">https://github.com/bjmi/m2e.sourcelookup</a></p>\n<h3 id=\"二、m2e-extras-插件安装：\"><a href=\"#二、m2e-extras-插件安装：\" class=\"headerlink\" title=\"二、m2e-extras 插件安装：\"></a>二、m2e-extras 插件安装：</h3><p><a href=\"https://github.com/ifedorenko/com.ifedorenko.m2e.sourcelookup\" target=\"_blank\" rel=\"noopener\">https://github.com/ifedorenko/com.ifedorenko.m2e.sourcelookup</a></p>\n<h5 id=\"1、\"><a href=\"#1、\" class=\"headerlink\" title=\"1、\"></a>1、</h5><p><img src=\"/img/20140812122250.png\" alt=\"选择\"></p>\n<h5 id=\"2、\"><a href=\"#2、\" class=\"headerlink\" title=\"2、\"></a>2、</h5><p><img src=\"/img/20140812122118.png\" alt=\"√勾选\"></p>\n"},{"title":"google voice 申请脚本","date":"2017-10-24T06:18:00.000Z","_content":"\n###### 选择好号码后在带有continue按钮的界面(下图)，以chrome浏览器为例，选中你需要的号码，按f12键弹出浏览器开发者工具，点击console，在开发者工具console界面，粘贴下面的脚本，回车，你会看到按钮自动点击，接下来等待就可以了。。。\n\n###### 本脚本从别人博客转载的，注意事项什么的，大家自行百度搜索吧。\n\n## JS脚本：\n```js\nvar sleep = delay => new Promise(resolve => setTimeout(resolve, delay));\n\nvar composeClick = function x(btn) {\n  var rect = btn.getBoundingClientRect();\n  var x = rect.left + rect.width * Math.random();\n  var y = rect.top + rect.height * Math.random();\n  const mousedown = new MouseEvent(\"mousedown\", {\n    screenX: x + window.screen.availLeft,\n    screenY: y + window.screen.availTop,\n    clientX: x,\n    clientY: y,\n  });\n  const click = new MouseEvent(\"click\", {\n    screenX: x + window.screen.availLeft,\n    screenY: y + window.screen.availTop,\n    clientX: x,\n    clientY: y,\n  });\n  const mouseup = new MouseEvent(\"mouseup\", {\n    screenX: x + window.screen.availLeft,\n    screenY: y + window.screen.availTop,\n    clientX: x,\n    clientY: y,\n  });\n  btn.dispatchEvent(mousedown);\n  return sleep(150 + Math.random() * 30)\n    .then(() => {\n      btn.dispatchEvent(click);\n      return sleep(30 + Math.random() * 30);\n    }).then(() => {\n      btn.dispatchEvent(mouseup);\n    });\n}\n\nfunction task() {\n  var btn = document.querySelector(\".continueButton\");\n  if (!btn) {\n    alert(\"Finish\");\n    return;\n  }\n  composeClick(btn)\n    .then(() => {\n      // 在此调整点击时间间隔\n      return sleep(50 + Math.random() * 600);\n    })\n    .then(() => {\n      task();\n    });\n}\ntask();\n\n```\n\n\n\n## 注意事项\n\n##### 1、 新注册的Google账号，然后申请GV, 千万不要跳IP登录。否则被封的几率非常大。\n\n##### 2、有人说环聊安卓无法接收来电？请仔细研究环聊设置中是否开启了 【来电】开关。记住全程挂美国代理。\n\n##### 3、Google Voice有回收政策，而不回收的前提就是半年内使用Google Voice号码发短信或者打电话，这点还是很容易做到的。","source":"_posts/google_voice_register.md","raw":"title: google voice 申请脚本\ntags:\n  - google voice\ncategories:\n  - google\ndate: 2017-10-24 14:18:00\n---\n\n###### 选择好号码后在带有continue按钮的界面(下图)，以chrome浏览器为例，选中你需要的号码，按f12键弹出浏览器开发者工具，点击console，在开发者工具console界面，粘贴下面的脚本，回车，你会看到按钮自动点击，接下来等待就可以了。。。\n\n###### 本脚本从别人博客转载的，注意事项什么的，大家自行百度搜索吧。\n\n## JS脚本：\n```js\nvar sleep = delay => new Promise(resolve => setTimeout(resolve, delay));\n\nvar composeClick = function x(btn) {\n  var rect = btn.getBoundingClientRect();\n  var x = rect.left + rect.width * Math.random();\n  var y = rect.top + rect.height * Math.random();\n  const mousedown = new MouseEvent(\"mousedown\", {\n    screenX: x + window.screen.availLeft,\n    screenY: y + window.screen.availTop,\n    clientX: x,\n    clientY: y,\n  });\n  const click = new MouseEvent(\"click\", {\n    screenX: x + window.screen.availLeft,\n    screenY: y + window.screen.availTop,\n    clientX: x,\n    clientY: y,\n  });\n  const mouseup = new MouseEvent(\"mouseup\", {\n    screenX: x + window.screen.availLeft,\n    screenY: y + window.screen.availTop,\n    clientX: x,\n    clientY: y,\n  });\n  btn.dispatchEvent(mousedown);\n  return sleep(150 + Math.random() * 30)\n    .then(() => {\n      btn.dispatchEvent(click);\n      return sleep(30 + Math.random() * 30);\n    }).then(() => {\n      btn.dispatchEvent(mouseup);\n    });\n}\n\nfunction task() {\n  var btn = document.querySelector(\".continueButton\");\n  if (!btn) {\n    alert(\"Finish\");\n    return;\n  }\n  composeClick(btn)\n    .then(() => {\n      // 在此调整点击时间间隔\n      return sleep(50 + Math.random() * 600);\n    })\n    .then(() => {\n      task();\n    });\n}\ntask();\n\n```\n\n\n\n## 注意事项\n\n##### 1、 新注册的Google账号，然后申请GV, 千万不要跳IP登录。否则被封的几率非常大。\n\n##### 2、有人说环聊安卓无法接收来电？请仔细研究环聊设置中是否开启了 【来电】开关。记住全程挂美国代理。\n\n##### 3、Google Voice有回收政策，而不回收的前提就是半年内使用Google Voice号码发短信或者打电话，这点还是很容易做到的。","slug":"google_voice_register","published":1,"updated":"2018-12-13T08:24:34.072Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspq002ji85ndcd0akl0","content":"<h6 id=\"选择好号码后在带有continue按钮的界面-下图-，以chrome浏览器为例，选中你需要的号码，按f12键弹出浏览器开发者工具，点击console，在开发者工具console界面，粘贴下面的脚本，回车，你会看到按钮自动点击，接下来等待就可以了。。。\"><a href=\"#选择好号码后在带有continue按钮的界面-下图-，以chrome浏览器为例，选中你需要的号码，按f12键弹出浏览器开发者工具，点击console，在开发者工具console界面，粘贴下面的脚本，回车，你会看到按钮自动点击，接下来等待就可以了。。。\" class=\"headerlink\" title=\"选择好号码后在带有continue按钮的界面(下图)，以chrome浏览器为例，选中你需要的号码，按f12键弹出浏览器开发者工具，点击console，在开发者工具console界面，粘贴下面的脚本，回车，你会看到按钮自动点击，接下来等待就可以了。。。\"></a>选择好号码后在带有continue按钮的界面(下图)，以chrome浏览器为例，选中你需要的号码，按f12键弹出浏览器开发者工具，点击console，在开发者工具console界面，粘贴下面的脚本，回车，你会看到按钮自动点击，接下来等待就可以了。。。</h6><h6 id=\"本脚本从别人博客转载的，注意事项什么的，大家自行百度搜索吧。\"><a href=\"#本脚本从别人博客转载的，注意事项什么的，大家自行百度搜索吧。\" class=\"headerlink\" title=\"本脚本从别人博客转载的，注意事项什么的，大家自行百度搜索吧。\"></a>本脚本从别人博客转载的，注意事项什么的，大家自行百度搜索吧。</h6><h2 id=\"JS脚本：\"><a href=\"#JS脚本：\" class=\"headerlink\" title=\"JS脚本：\"></a>JS脚本：</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> sleep = <span class=\"function\"><span class=\"params\">delay</span> =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> setTimeout(resolve, delay));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> composeClick = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">x</span>(<span class=\"params\">btn</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = btn.getBoundingClientRect();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> x = rect.left + rect.width * <span class=\"built_in\">Math</span>.random();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> y = rect.top + rect.height * <span class=\"built_in\">Math</span>.random();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> mousedown = <span class=\"keyword\">new</span> MouseEvent(<span class=\"string\">\"mousedown\"</span>, &#123;</span><br><span class=\"line\">    screenX: x + <span class=\"built_in\">window</span>.screen.availLeft,</span><br><span class=\"line\">    screenY: y + <span class=\"built_in\">window</span>.screen.availTop,</span><br><span class=\"line\">    clientX: x,</span><br><span class=\"line\">    clientY: y,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> click = <span class=\"keyword\">new</span> MouseEvent(<span class=\"string\">\"click\"</span>, &#123;</span><br><span class=\"line\">    screenX: x + <span class=\"built_in\">window</span>.screen.availLeft,</span><br><span class=\"line\">    screenY: y + <span class=\"built_in\">window</span>.screen.availTop,</span><br><span class=\"line\">    clientX: x,</span><br><span class=\"line\">    clientY: y,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> mouseup = <span class=\"keyword\">new</span> MouseEvent(<span class=\"string\">\"mouseup\"</span>, &#123;</span><br><span class=\"line\">    screenX: x + <span class=\"built_in\">window</span>.screen.availLeft,</span><br><span class=\"line\">    screenY: y + <span class=\"built_in\">window</span>.screen.availTop,</span><br><span class=\"line\">    clientX: x,</span><br><span class=\"line\">    clientY: y,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  btn.dispatchEvent(mousedown);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sleep(<span class=\"number\">150</span> + <span class=\"built_in\">Math</span>.random() * <span class=\"number\">30</span>)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      btn.dispatchEvent(click);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> sleep(<span class=\"number\">30</span> + <span class=\"built_in\">Math</span>.random() * <span class=\"number\">30</span>);</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      btn.dispatchEvent(mouseup);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">task</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> btn = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\".continueButton\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!btn) &#123;</span><br><span class=\"line\">    alert(<span class=\"string\">\"Finish\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  composeClick(btn)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 在此调整点击时间间隔</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> sleep(<span class=\"number\">50</span> + <span class=\"built_in\">Math</span>.random() * <span class=\"number\">600</span>);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      task();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">task();</span><br></pre></td></tr></table></figure>\n<h2 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h2><h5 id=\"1、-新注册的Google账号，然后申请GV-千万不要跳IP登录。否则被封的几率非常大。\"><a href=\"#1、-新注册的Google账号，然后申请GV-千万不要跳IP登录。否则被封的几率非常大。\" class=\"headerlink\" title=\"1、 新注册的Google账号，然后申请GV, 千万不要跳IP登录。否则被封的几率非常大。\"></a>1、 新注册的Google账号，然后申请GV, 千万不要跳IP登录。否则被封的几率非常大。</h5><h5 id=\"2、有人说环聊安卓无法接收来电？请仔细研究环聊设置中是否开启了-【来电】开关。记住全程挂美国代理。\"><a href=\"#2、有人说环聊安卓无法接收来电？请仔细研究环聊设置中是否开启了-【来电】开关。记住全程挂美国代理。\" class=\"headerlink\" title=\"2、有人说环聊安卓无法接收来电？请仔细研究环聊设置中是否开启了 【来电】开关。记住全程挂美国代理。\"></a>2、有人说环聊安卓无法接收来电？请仔细研究环聊设置中是否开启了 【来电】开关。记住全程挂美国代理。</h5><h5 id=\"3、Google-Voice有回收政策，而不回收的前提就是半年内使用Google-Voice号码发短信或者打电话，这点还是很容易做到的。\"><a href=\"#3、Google-Voice有回收政策，而不回收的前提就是半年内使用Google-Voice号码发短信或者打电话，这点还是很容易做到的。\" class=\"headerlink\" title=\"3、Google Voice有回收政策，而不回收的前提就是半年内使用Google Voice号码发短信或者打电话，这点还是很容易做到的。\"></a>3、Google Voice有回收政策，而不回收的前提就是半年内使用Google Voice号码发短信或者打电话，这点还是很容易做到的。</h5>","site":{"data":{}},"excerpt":"","more":"<h6 id=\"选择好号码后在带有continue按钮的界面-下图-，以chrome浏览器为例，选中你需要的号码，按f12键弹出浏览器开发者工具，点击console，在开发者工具console界面，粘贴下面的脚本，回车，你会看到按钮自动点击，接下来等待就可以了。。。\"><a href=\"#选择好号码后在带有continue按钮的界面-下图-，以chrome浏览器为例，选中你需要的号码，按f12键弹出浏览器开发者工具，点击console，在开发者工具console界面，粘贴下面的脚本，回车，你会看到按钮自动点击，接下来等待就可以了。。。\" class=\"headerlink\" title=\"选择好号码后在带有continue按钮的界面(下图)，以chrome浏览器为例，选中你需要的号码，按f12键弹出浏览器开发者工具，点击console，在开发者工具console界面，粘贴下面的脚本，回车，你会看到按钮自动点击，接下来等待就可以了。。。\"></a>选择好号码后在带有continue按钮的界面(下图)，以chrome浏览器为例，选中你需要的号码，按f12键弹出浏览器开发者工具，点击console，在开发者工具console界面，粘贴下面的脚本，回车，你会看到按钮自动点击，接下来等待就可以了。。。</h6><h6 id=\"本脚本从别人博客转载的，注意事项什么的，大家自行百度搜索吧。\"><a href=\"#本脚本从别人博客转载的，注意事项什么的，大家自行百度搜索吧。\" class=\"headerlink\" title=\"本脚本从别人博客转载的，注意事项什么的，大家自行百度搜索吧。\"></a>本脚本从别人博客转载的，注意事项什么的，大家自行百度搜索吧。</h6><h2 id=\"JS脚本：\"><a href=\"#JS脚本：\" class=\"headerlink\" title=\"JS脚本：\"></a>JS脚本：</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> sleep = <span class=\"function\"><span class=\"params\">delay</span> =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> setTimeout(resolve, delay));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> composeClick = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">x</span>(<span class=\"params\">btn</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = btn.getBoundingClientRect();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> x = rect.left + rect.width * <span class=\"built_in\">Math</span>.random();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> y = rect.top + rect.height * <span class=\"built_in\">Math</span>.random();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> mousedown = <span class=\"keyword\">new</span> MouseEvent(<span class=\"string\">\"mousedown\"</span>, &#123;</span><br><span class=\"line\">    screenX: x + <span class=\"built_in\">window</span>.screen.availLeft,</span><br><span class=\"line\">    screenY: y + <span class=\"built_in\">window</span>.screen.availTop,</span><br><span class=\"line\">    clientX: x,</span><br><span class=\"line\">    clientY: y,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> click = <span class=\"keyword\">new</span> MouseEvent(<span class=\"string\">\"click\"</span>, &#123;</span><br><span class=\"line\">    screenX: x + <span class=\"built_in\">window</span>.screen.availLeft,</span><br><span class=\"line\">    screenY: y + <span class=\"built_in\">window</span>.screen.availTop,</span><br><span class=\"line\">    clientX: x,</span><br><span class=\"line\">    clientY: y,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> mouseup = <span class=\"keyword\">new</span> MouseEvent(<span class=\"string\">\"mouseup\"</span>, &#123;</span><br><span class=\"line\">    screenX: x + <span class=\"built_in\">window</span>.screen.availLeft,</span><br><span class=\"line\">    screenY: y + <span class=\"built_in\">window</span>.screen.availTop,</span><br><span class=\"line\">    clientX: x,</span><br><span class=\"line\">    clientY: y,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  btn.dispatchEvent(mousedown);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sleep(<span class=\"number\">150</span> + <span class=\"built_in\">Math</span>.random() * <span class=\"number\">30</span>)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      btn.dispatchEvent(click);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> sleep(<span class=\"number\">30</span> + <span class=\"built_in\">Math</span>.random() * <span class=\"number\">30</span>);</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      btn.dispatchEvent(mouseup);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">task</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> btn = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\".continueButton\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!btn) &#123;</span><br><span class=\"line\">    alert(<span class=\"string\">\"Finish\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  composeClick(btn)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 在此调整点击时间间隔</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> sleep(<span class=\"number\">50</span> + <span class=\"built_in\">Math</span>.random() * <span class=\"number\">600</span>);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      task();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">task();</span><br></pre></td></tr></table></figure>\n<h2 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h2><h5 id=\"1、-新注册的Google账号，然后申请GV-千万不要跳IP登录。否则被封的几率非常大。\"><a href=\"#1、-新注册的Google账号，然后申请GV-千万不要跳IP登录。否则被封的几率非常大。\" class=\"headerlink\" title=\"1、 新注册的Google账号，然后申请GV, 千万不要跳IP登录。否则被封的几率非常大。\"></a>1、 新注册的Google账号，然后申请GV, 千万不要跳IP登录。否则被封的几率非常大。</h5><h5 id=\"2、有人说环聊安卓无法接收来电？请仔细研究环聊设置中是否开启了-【来电】开关。记住全程挂美国代理。\"><a href=\"#2、有人说环聊安卓无法接收来电？请仔细研究环聊设置中是否开启了-【来电】开关。记住全程挂美国代理。\" class=\"headerlink\" title=\"2、有人说环聊安卓无法接收来电？请仔细研究环聊设置中是否开启了 【来电】开关。记住全程挂美国代理。\"></a>2、有人说环聊安卓无法接收来电？请仔细研究环聊设置中是否开启了 【来电】开关。记住全程挂美国代理。</h5><h5 id=\"3、Google-Voice有回收政策，而不回收的前提就是半年内使用Google-Voice号码发短信或者打电话，这点还是很容易做到的。\"><a href=\"#3、Google-Voice有回收政策，而不回收的前提就是半年内使用Google-Voice号码发短信或者打电话，这点还是很容易做到的。\" class=\"headerlink\" title=\"3、Google Voice有回收政策，而不回收的前提就是半年内使用Google Voice号码发短信或者打电话，这点还是很容易做到的。\"></a>3、Google Voice有回收政策，而不回收的前提就是半年内使用Google Voice号码发短信或者打电话，这点还是很容易做到的。</h5>"},{"title":"Ubuntu 安装 SVN 一键脚本","author":"ZkName","date":"2018-12-13T04:27:00.000Z","_content":"## SVN安装\n```\napt-get install subversion\n```\n#### 1. 创建svn根目录\n```\nsudo mkdir /home/svn/\n\n```\n\n#### 2. 使用svn命令创建SVN文件仓库\n```\nsudo svnadmin create /home/svn/\n```\n## 配置svn\n\n#### 1. 配置用户名密码\n```\nvi /home/svn/conf/passwd\n\n[users]\n# harry = harryssecret\n# sally = sallyssecret\ntest = test  # 添加用户密码\n```\n\n#### 2. 配置分组权限\n```\nvi /home/svn/conf/authz\n\n[groups]\nmanager = test\n\n#[repository:/svn]\n@manager = rw\n```\n\n#### 3. svn全局配置，启用用户名密码，分组等\n```\nvi /home/svn/conf/svnserve.conf\n\nanon-access = none\nauth-access = write\npassword-db = passwd\nauthz-db = authz\n```\n\n#### 启动svn服务\n```\nsvnserve -d -r /home/svn/\n```\n\n\n\n\n\n\n\n","source":"_posts/Ubuntu-安装-SVN.md","raw":"title: Ubuntu 安装 SVN 一键脚本\nauthor: ZkName\ntags:\n  - Ubuntu\n  - SVN\n  - svn\ndate: 2018-12-13 12:27:00\n---\n## SVN安装\n```\napt-get install subversion\n```\n#### 1. 创建svn根目录\n```\nsudo mkdir /home/svn/\n\n```\n\n#### 2. 使用svn命令创建SVN文件仓库\n```\nsudo svnadmin create /home/svn/\n```\n## 配置svn\n\n#### 1. 配置用户名密码\n```\nvi /home/svn/conf/passwd\n\n[users]\n# harry = harryssecret\n# sally = sallyssecret\ntest = test  # 添加用户密码\n```\n\n#### 2. 配置分组权限\n```\nvi /home/svn/conf/authz\n\n[groups]\nmanager = test\n\n#[repository:/svn]\n@manager = rw\n```\n\n#### 3. svn全局配置，启用用户名密码，分组等\n```\nvi /home/svn/conf/svnserve.conf\n\nanon-access = none\nauth-access = write\npassword-db = passwd\nauthz-db = authz\n```\n\n#### 启动svn服务\n```\nsvnserve -d -r /home/svn/\n```\n\n\n\n\n\n\n\n","slug":"Ubuntu-安装-SVN","published":1,"updated":"2018-12-13T08:35:31.251Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspr002li85nzsi33tbm","content":"<h2 id=\"SVN安装\"><a href=\"#SVN安装\" class=\"headerlink\" title=\"SVN安装\"></a>SVN安装</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install subversion</span><br></pre></td></tr></table></figure>\n<h4 id=\"1-创建svn根目录\"><a href=\"#1-创建svn根目录\" class=\"headerlink\" title=\"1. 创建svn根目录\"></a>1. 创建svn根目录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir /home/svn/</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-使用svn命令创建SVN文件仓库\"><a href=\"#2-使用svn命令创建SVN文件仓库\" class=\"headerlink\" title=\"2. 使用svn命令创建SVN文件仓库\"></a>2. 使用svn命令创建SVN文件仓库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo svnadmin create /home/svn/</span><br></pre></td></tr></table></figure>\n<h2 id=\"配置svn\"><a href=\"#配置svn\" class=\"headerlink\" title=\"配置svn\"></a>配置svn</h2><h4 id=\"1-配置用户名密码\"><a href=\"#1-配置用户名密码\" class=\"headerlink\" title=\"1. 配置用户名密码\"></a>1. 配置用户名密码</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /home/svn/conf/passwd</span><br><span class=\"line\"></span><br><span class=\"line\">[users]</span><br><span class=\"line\"># harry = harryssecret</span><br><span class=\"line\"># sally = sallyssecret</span><br><span class=\"line\">test = test  # 添加用户密码</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-配置分组权限\"><a href=\"#2-配置分组权限\" class=\"headerlink\" title=\"2. 配置分组权限\"></a>2. 配置分组权限</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /home/svn/conf/authz</span><br><span class=\"line\"></span><br><span class=\"line\">[groups]</span><br><span class=\"line\">manager = test</span><br><span class=\"line\"></span><br><span class=\"line\">#[repository:/svn]</span><br><span class=\"line\">@manager = rw</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-svn全局配置，启用用户名密码，分组等\"><a href=\"#3-svn全局配置，启用用户名密码，分组等\" class=\"headerlink\" title=\"3. svn全局配置，启用用户名密码，分组等\"></a>3. svn全局配置，启用用户名密码，分组等</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /home/svn/conf/svnserve.conf</span><br><span class=\"line\"></span><br><span class=\"line\">anon-access = none</span><br><span class=\"line\">auth-access = write</span><br><span class=\"line\">password-db = passwd</span><br><span class=\"line\">authz-db = authz</span><br></pre></td></tr></table></figure>\n<h4 id=\"启动svn服务\"><a href=\"#启动svn服务\" class=\"headerlink\" title=\"启动svn服务\"></a>启动svn服务</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svnserve -d -r /home/svn/</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"SVN安装\"><a href=\"#SVN安装\" class=\"headerlink\" title=\"SVN安装\"></a>SVN安装</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install subversion</span><br></pre></td></tr></table></figure>\n<h4 id=\"1-创建svn根目录\"><a href=\"#1-创建svn根目录\" class=\"headerlink\" title=\"1. 创建svn根目录\"></a>1. 创建svn根目录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir /home/svn/</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-使用svn命令创建SVN文件仓库\"><a href=\"#2-使用svn命令创建SVN文件仓库\" class=\"headerlink\" title=\"2. 使用svn命令创建SVN文件仓库\"></a>2. 使用svn命令创建SVN文件仓库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo svnadmin create /home/svn/</span><br></pre></td></tr></table></figure>\n<h2 id=\"配置svn\"><a href=\"#配置svn\" class=\"headerlink\" title=\"配置svn\"></a>配置svn</h2><h4 id=\"1-配置用户名密码\"><a href=\"#1-配置用户名密码\" class=\"headerlink\" title=\"1. 配置用户名密码\"></a>1. 配置用户名密码</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /home/svn/conf/passwd</span><br><span class=\"line\"></span><br><span class=\"line\">[users]</span><br><span class=\"line\"># harry = harryssecret</span><br><span class=\"line\"># sally = sallyssecret</span><br><span class=\"line\">test = test  # 添加用户密码</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-配置分组权限\"><a href=\"#2-配置分组权限\" class=\"headerlink\" title=\"2. 配置分组权限\"></a>2. 配置分组权限</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /home/svn/conf/authz</span><br><span class=\"line\"></span><br><span class=\"line\">[groups]</span><br><span class=\"line\">manager = test</span><br><span class=\"line\"></span><br><span class=\"line\">#[repository:/svn]</span><br><span class=\"line\">@manager = rw</span><br></pre></td></tr></table></figure>\n<h4 id=\"3-svn全局配置，启用用户名密码，分组等\"><a href=\"#3-svn全局配置，启用用户名密码，分组等\" class=\"headerlink\" title=\"3. svn全局配置，启用用户名密码，分组等\"></a>3. svn全局配置，启用用户名密码，分组等</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /home/svn/conf/svnserve.conf</span><br><span class=\"line\"></span><br><span class=\"line\">anon-access = none</span><br><span class=\"line\">auth-access = write</span><br><span class=\"line\">password-db = passwd</span><br><span class=\"line\">authz-db = authz</span><br></pre></td></tr></table></figure>\n<h4 id=\"启动svn服务\"><a href=\"#启动svn服务\" class=\"headerlink\" title=\"启动svn服务\"></a>启动svn服务</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svnserve -d -r /home/svn/</span><br></pre></td></tr></table></figure>\n"},{"title":"hexo更换电脑","author":"ZkName","date":"2018-10-30T03:00:00.000Z","_content":"## hexo更换电脑\n\n### 拷贝文件到新目录\n/public\n/scaffolds\n/source\n/themes\n/_admin-config.yml\n/_config.yml\n/package.json\n\n\n## 安装 nodejs\n```shell\n#下载\nwget https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz\n#解压\ntar xf  node-v8.12.0-linux-x64.tar.xz -C /usr/local/\n#环境变量配置增加\nsudo vi /etc/profile\n\nexport NODE_HOME=/usr/local/node-v8.12.0-linux-x64\nexport PATH=$PATH:$NODE_HOME/bin \nexport NODE_PATH=$NODE_HOME/lib/node_modules\n```\n\n### 执行安装依赖\n```shell\nnpm install\n```\n","source":"_posts/hexo更换电脑.md","raw":"title: hexo更换电脑\nauthor: ZkName\ntags:\n  - hexo\n  - Ubuntu\ncategories: []\ndate: 2018-10-30 11:00:00\n---\n## hexo更换电脑\n\n### 拷贝文件到新目录\n/public\n/scaffolds\n/source\n/themes\n/_admin-config.yml\n/_config.yml\n/package.json\n\n\n## 安装 nodejs\n```shell\n#下载\nwget https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz\n#解压\ntar xf  node-v8.12.0-linux-x64.tar.xz -C /usr/local/\n#环境变量配置增加\nsudo vi /etc/profile\n\nexport NODE_HOME=/usr/local/node-v8.12.0-linux-x64\nexport PATH=$PATH:$NODE_HOME/bin \nexport NODE_PATH=$NODE_HOME/lib/node_modules\n```\n\n### 执行安装依赖\n```shell\nnpm install\n```\n","slug":"hexo更换电脑","published":1,"updated":"2018-12-13T08:24:34.046Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspt002pi85ni3gnt1g4","content":"<h2 id=\"hexo更换电脑\"><a href=\"#hexo更换电脑\" class=\"headerlink\" title=\"hexo更换电脑\"></a>hexo更换电脑</h2><h3 id=\"拷贝文件到新目录\"><a href=\"#拷贝文件到新目录\" class=\"headerlink\" title=\"拷贝文件到新目录\"></a>拷贝文件到新目录</h3><p>/public<br>/scaffolds<br>/source<br>/themes<br>/_admin-config.yml<br>/_config.yml<br>/package.json</p>\n<h2 id=\"安装-nodejs\"><a href=\"#安装-nodejs\" class=\"headerlink\" title=\"安装 nodejs\"></a>安装 nodejs</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>下载</span><br><span class=\"line\">wget https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz</span><br><span class=\"line\"><span class=\"meta\">#</span>解压</span><br><span class=\"line\">tar xf  node-v8.12.0-linux-x64.tar.xz -C /usr/local/</span><br><span class=\"line\"><span class=\"meta\">#</span>环境变量配置增加</span><br><span class=\"line\">sudo vi /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\">export NODE_HOME=/usr/local/node-v8.12.0-linux-x64</span><br><span class=\"line\">export PATH=$PATH:$NODE_HOME/bin </span><br><span class=\"line\">export NODE_PATH=$NODE_HOME/lib/node_modules</span><br></pre></td></tr></table></figure>\n<h3 id=\"执行安装依赖\"><a href=\"#执行安装依赖\" class=\"headerlink\" title=\"执行安装依赖\"></a>执行安装依赖</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"hexo更换电脑\"><a href=\"#hexo更换电脑\" class=\"headerlink\" title=\"hexo更换电脑\"></a>hexo更换电脑</h2><h3 id=\"拷贝文件到新目录\"><a href=\"#拷贝文件到新目录\" class=\"headerlink\" title=\"拷贝文件到新目录\"></a>拷贝文件到新目录</h3><p>/public<br>/scaffolds<br>/source<br>/themes<br>/_admin-config.yml<br>/_config.yml<br>/package.json</p>\n<h2 id=\"安装-nodejs\"><a href=\"#安装-nodejs\" class=\"headerlink\" title=\"安装 nodejs\"></a>安装 nodejs</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>下载</span><br><span class=\"line\">wget https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz</span><br><span class=\"line\"><span class=\"meta\">#</span>解压</span><br><span class=\"line\">tar xf  node-v8.12.0-linux-x64.tar.xz -C /usr/local/</span><br><span class=\"line\"><span class=\"meta\">#</span>环境变量配置增加</span><br><span class=\"line\">sudo vi /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\">export NODE_HOME=/usr/local/node-v8.12.0-linux-x64</span><br><span class=\"line\">export PATH=$PATH:$NODE_HOME/bin </span><br><span class=\"line\">export NODE_PATH=$NODE_HOME/lib/node_modules</span><br></pre></td></tr></table></figure>\n<h3 id=\"执行安装依赖\"><a href=\"#执行安装依赖\" class=\"headerlink\" title=\"执行安装依赖\"></a>执行安装依赖</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n"},{"title":"linux 常用命令","date":"2014-10-16T02:14:00.000Z","_content":"## 简介\n#### linux常用命令\n### scp\n```shell\n#文件复制\nscp /home/root/music/1.mp3 root@192.168.1.100:/home/root/others/music\nscp /home/root/music/1.mp3 root@192.168.1.100:/home/root/others/music/001.mp3\n#目录复制\nscp -r /home/root/music/ root@192.168.1.100:/home/root/others/\n#远程文件复制\nscp root@192.168.1.100:/home/root/others/music /home/root/music/1.mp3\n#远程目录复制\nscp -r root@192.168.1.100:/home/root/others/ /home/root/music/\n```\n","source":"_posts/linux 常用命令.md","raw":"title: linux 常用命令\ntags:\n  - Ubuntu\n  - Linux\ncategories:\n  - Ubuntu\ndate: 2014-10-16 10:14:00\n---\n## 简介\n#### linux常用命令\n### scp\n```shell\n#文件复制\nscp /home/root/music/1.mp3 root@192.168.1.100:/home/root/others/music\nscp /home/root/music/1.mp3 root@192.168.1.100:/home/root/others/music/001.mp3\n#目录复制\nscp -r /home/root/music/ root@192.168.1.100:/home/root/others/\n#远程文件复制\nscp root@192.168.1.100:/home/root/others/music /home/root/music/1.mp3\n#远程目录复制\nscp -r root@192.168.1.100:/home/root/others/ /home/root/music/\n```\n","slug":"linux 常用命令","published":1,"updated":"2018-12-13T08:24:34.076Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspv002si85ng32tft9r","content":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><h4 id=\"linux常用命令\"><a href=\"#linux常用命令\" class=\"headerlink\" title=\"linux常用命令\"></a>linux常用命令</h4><h3 id=\"scp\"><a href=\"#scp\" class=\"headerlink\" title=\"scp\"></a>scp</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>文件复制</span><br><span class=\"line\">scp /home/root/music/1.mp3 root@192.168.1.100:/home/root/others/music</span><br><span class=\"line\">scp /home/root/music/1.mp3 root@192.168.1.100:/home/root/others/music/001.mp3</span><br><span class=\"line\"><span class=\"meta\">#</span>目录复制</span><br><span class=\"line\">scp -r /home/root/music/ root@192.168.1.100:/home/root/others/</span><br><span class=\"line\"><span class=\"meta\">#</span>远程文件复制</span><br><span class=\"line\">scp root@192.168.1.100:/home/root/others/music /home/root/music/1.mp3</span><br><span class=\"line\"><span class=\"meta\">#</span>远程目录复制</span><br><span class=\"line\">scp -r root@192.168.1.100:/home/root/others/ /home/root/music/</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><h4 id=\"linux常用命令\"><a href=\"#linux常用命令\" class=\"headerlink\" title=\"linux常用命令\"></a>linux常用命令</h4><h3 id=\"scp\"><a href=\"#scp\" class=\"headerlink\" title=\"scp\"></a>scp</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>文件复制</span><br><span class=\"line\">scp /home/root/music/1.mp3 root@192.168.1.100:/home/root/others/music</span><br><span class=\"line\">scp /home/root/music/1.mp3 root@192.168.1.100:/home/root/others/music/001.mp3</span><br><span class=\"line\"><span class=\"meta\">#</span>目录复制</span><br><span class=\"line\">scp -r /home/root/music/ root@192.168.1.100:/home/root/others/</span><br><span class=\"line\"><span class=\"meta\">#</span>远程文件复制</span><br><span class=\"line\">scp root@192.168.1.100:/home/root/others/music /home/root/music/1.mp3</span><br><span class=\"line\"><span class=\"meta\">#</span>远程目录复制</span><br><span class=\"line\">scp -r root@192.168.1.100:/home/root/others/ /home/root/music/</span><br></pre></td></tr></table></figure>\n"},{"title":"mysql  emoji  utf8mb4 问题","date":"2016-05-17T06:28:00.000Z","_content":"## 一、前提\n1、mysql的版本不能太低，低于5.5.3的版本不支持utf8mb4编码\n2、将表中的对应字段，其字符集修改成utf8mb4\n3、对于 JDBC 连接，需要使用 MySQL Connector/J 5.1.13（含）以上的版本。\n4、JDBC 的连接串中，建议不配置 characterEncoding 选项。\n## 二、解决方式\n### 第一种通过 set names 命令设置会话字符集\n```java\n String query = \"set names utf8mb4\";\n stat.execute(query);\n```\n### 第二种如果使用Druid连接池配置文件增加：\n```xml\n<property name=\"connectionInitSqls\" value=\"set names utf8mb4;\"/>\n```\n##### 完整配置：\n```xml\n<bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\" init-method=\"init\" destroy-method=\"close\">\n        <property name=\"driverClassName\" value=\"${jdbc-driver}\"/>\n        <property name=\"url\" value=\"${jdbc-url}\"/>\n        <property name=\"username\" value=\"${jdbc-user}\"/>\n        <property name=\"password\" value=\"${jdbc-password}\"/>\n        <property name=\"filters\" value=\"stat\"/>\n        <property name=\"maxActive\" value=\"20\"/>\n        <property name=\"initialSize\" value=\"1\"/>\n        <property name=\"maxWait\" value=\"60000\"/>\n        <property name=\"minIdle\" value=\"1\"/>\n        <property name=\"timeBetweenEvictionRunsMillis\" value=\"3000\"/>\n        <property name=\"minEvictableIdleTimeMillis\" value=\"300000\"/>\n        <property name=\"validationQuery\" value=\"SELECT 'x'\"/>\n        <property name=\"testWhileIdle\" value=\"true\"/>\n        <property name=\"testOnBorrow\" value=\"false\"/>\n        <property name=\"testOnReturn\" value=\"false\"/>\n        <property name=\"poolPreparedStatements\" value=\"true\"/>\n        <property name=\"maxPoolPreparedStatementPerConnectionSize\" value=\"20\"/>\n        <property name=\"connectionInitSqls\" value=\"set names utf8mb4;\"/>\n</bean>\n```","source":"_posts/mysql-utf8mb4-的问题.md","raw":"title: mysql  emoji  utf8mb4 问题\ntags:\n  - Mysql\ncategories:\n  - Mysql\ndate: 2016-05-17 14:28:00\n---\n## 一、前提\n1、mysql的版本不能太低，低于5.5.3的版本不支持utf8mb4编码\n2、将表中的对应字段，其字符集修改成utf8mb4\n3、对于 JDBC 连接，需要使用 MySQL Connector/J 5.1.13（含）以上的版本。\n4、JDBC 的连接串中，建议不配置 characterEncoding 选项。\n## 二、解决方式\n### 第一种通过 set names 命令设置会话字符集\n```java\n String query = \"set names utf8mb4\";\n stat.execute(query);\n```\n### 第二种如果使用Druid连接池配置文件增加：\n```xml\n<property name=\"connectionInitSqls\" value=\"set names utf8mb4;\"/>\n```\n##### 完整配置：\n```xml\n<bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\" init-method=\"init\" destroy-method=\"close\">\n        <property name=\"driverClassName\" value=\"${jdbc-driver}\"/>\n        <property name=\"url\" value=\"${jdbc-url}\"/>\n        <property name=\"username\" value=\"${jdbc-user}\"/>\n        <property name=\"password\" value=\"${jdbc-password}\"/>\n        <property name=\"filters\" value=\"stat\"/>\n        <property name=\"maxActive\" value=\"20\"/>\n        <property name=\"initialSize\" value=\"1\"/>\n        <property name=\"maxWait\" value=\"60000\"/>\n        <property name=\"minIdle\" value=\"1\"/>\n        <property name=\"timeBetweenEvictionRunsMillis\" value=\"3000\"/>\n        <property name=\"minEvictableIdleTimeMillis\" value=\"300000\"/>\n        <property name=\"validationQuery\" value=\"SELECT 'x'\"/>\n        <property name=\"testWhileIdle\" value=\"true\"/>\n        <property name=\"testOnBorrow\" value=\"false\"/>\n        <property name=\"testOnReturn\" value=\"false\"/>\n        <property name=\"poolPreparedStatements\" value=\"true\"/>\n        <property name=\"maxPoolPreparedStatementPerConnectionSize\" value=\"20\"/>\n        <property name=\"connectionInitSqls\" value=\"set names utf8mb4;\"/>\n</bean>\n```","slug":"mysql-utf8mb4-的问题","published":1,"updated":"2018-12-13T08:24:34.079Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspw002vi85npziqwscu","content":"<h2 id=\"一、前提\"><a href=\"#一、前提\" class=\"headerlink\" title=\"一、前提\"></a>一、前提</h2><p>1、mysql的版本不能太低，低于5.5.3的版本不支持utf8mb4编码<br>2、将表中的对应字段，其字符集修改成utf8mb4<br>3、对于 JDBC 连接，需要使用 MySQL Connector/J 5.1.13（含）以上的版本。<br>4、JDBC 的连接串中，建议不配置 characterEncoding 选项。</p>\n<h2 id=\"二、解决方式\"><a href=\"#二、解决方式\" class=\"headerlink\" title=\"二、解决方式\"></a>二、解决方式</h2><h3 id=\"第一种通过-set-names-命令设置会话字符集\"><a href=\"#第一种通过-set-names-命令设置会话字符集\" class=\"headerlink\" title=\"第一种通过 set names 命令设置会话字符集\"></a>第一种通过 set names 命令设置会话字符集</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String query = <span class=\"string\">\"set names utf8mb4\"</span>;</span><br><span class=\"line\">stat.execute(query);</span><br></pre></td></tr></table></figure>\n<h3 id=\"第二种如果使用Druid连接池配置文件增加：\"><a href=\"#第二种如果使用Druid连接池配置文件增加：\" class=\"headerlink\" title=\"第二种如果使用Druid连接池配置文件增加：\"></a>第二种如果使用Druid连接池配置文件增加：</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"connectionInitSqls\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"set names utf8mb4;\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"完整配置：\"><a href=\"#完整配置：\" class=\"headerlink\" title=\"完整配置：\"></a>完整配置：</h5><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.alibaba.druid.pool.DruidDataSource\"</span> <span class=\"attr\">init-method</span>=<span class=\"string\">\"init\"</span> <span class=\"attr\">destroy-method</span>=<span class=\"string\">\"close\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc-driver&#125;\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc-url&#125;\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc-user&#125;\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc-password&#125;\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"filters\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"stat\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"maxActive\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"20\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"initialSize\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"1\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"maxWait\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"60000\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"minIdle\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"1\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"timeBetweenEvictionRunsMillis\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"3000\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"minEvictableIdleTimeMillis\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"300000\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"validationQuery\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"SELECT 'x'\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"testWhileIdle\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"testOnBorrow\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"false\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"testOnReturn\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"false\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"poolPreparedStatements\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"maxPoolPreparedStatementPerConnectionSize\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"20\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"connectionInitSqls\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"set names utf8mb4;\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"一、前提\"><a href=\"#一、前提\" class=\"headerlink\" title=\"一、前提\"></a>一、前提</h2><p>1、mysql的版本不能太低，低于5.5.3的版本不支持utf8mb4编码<br>2、将表中的对应字段，其字符集修改成utf8mb4<br>3、对于 JDBC 连接，需要使用 MySQL Connector/J 5.1.13（含）以上的版本。<br>4、JDBC 的连接串中，建议不配置 characterEncoding 选项。</p>\n<h2 id=\"二、解决方式\"><a href=\"#二、解决方式\" class=\"headerlink\" title=\"二、解决方式\"></a>二、解决方式</h2><h3 id=\"第一种通过-set-names-命令设置会话字符集\"><a href=\"#第一种通过-set-names-命令设置会话字符集\" class=\"headerlink\" title=\"第一种通过 set names 命令设置会话字符集\"></a>第一种通过 set names 命令设置会话字符集</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String query = <span class=\"string\">\"set names utf8mb4\"</span>;</span><br><span class=\"line\">stat.execute(query);</span><br></pre></td></tr></table></figure>\n<h3 id=\"第二种如果使用Druid连接池配置文件增加：\"><a href=\"#第二种如果使用Druid连接池配置文件增加：\" class=\"headerlink\" title=\"第二种如果使用Druid连接池配置文件增加：\"></a>第二种如果使用Druid连接池配置文件增加：</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"connectionInitSqls\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"set names utf8mb4;\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"完整配置：\"><a href=\"#完整配置：\" class=\"headerlink\" title=\"完整配置：\"></a>完整配置：</h5><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.alibaba.druid.pool.DruidDataSource\"</span> <span class=\"attr\">init-method</span>=<span class=\"string\">\"init\"</span> <span class=\"attr\">destroy-method</span>=<span class=\"string\">\"close\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driverClassName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc-driver&#125;\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc-url&#125;\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc-user&#125;\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"$&#123;jdbc-password&#125;\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"filters\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"stat\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"maxActive\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"20\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"initialSize\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"1\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"maxWait\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"60000\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"minIdle\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"1\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"timeBetweenEvictionRunsMillis\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"3000\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"minEvictableIdleTimeMillis\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"300000\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"validationQuery\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"SELECT 'x'\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"testWhileIdle\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"testOnBorrow\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"false\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"testOnReturn\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"false\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"poolPreparedStatements\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"maxPoolPreparedStatementPerConnectionSize\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"20\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"connectionInitSqls\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"set names utf8mb4;\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"Spring多事务绑定","author":"ZkName","date":"2017-08-16T08:55:00.000Z","_content":"###### 1、maven 使用 spring-data-commons\n```xml\n\t\t<dependency>\n\t\t    <groupId>org.springframework.data</groupId>\n\t\t    <artifactId>spring-data-commons</artifactId>\n\t\t    <version>1.13.6.RELEASE</version>\n\t\t</dependency>\n```\n\n###### 2、spring 配置文件\n```xml\n\t<!-- 事务声明 -->\n\t<bean id=\"transactionManager1\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n\t\t<property name=\"dataSource\" ref=\"dataSource1\" />\n\t</bean>\n\t<!-- 事务声明 -->\n\t<bean id=\"transactionManager2\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n\t\t<property name=\"dataSource\" ref=\"dataSource2\" />\n\t</bean>\n    <!-- 配置默认事务 -->\n\t<tx:annotation-driven transaction-manager=\"transactionManager1\"  proxy-target-class=\"true\" />\n    \n\t<!-- 多事务绑定 -->\n\t<bean id=\"chainedTransactionManager\" class=\"org.springframework.data.transaction.ChainedTransactionManager\">\n\t\t<constructor-arg>\n\t\t\t<array>\n\t\t\t\t<ref bean=\"transactionManager1\"/>\n\t\t\t\t<ref bean=\"transactionManager2\"/>\n\t\t\t</array>\n\t\t</constructor-arg>\n\t</bean>\n\n```\n###### 3、java 测试可见已经回滚了\n\n```java\n\t@Transactional(value=\"chainedTransactionManager\",rollbackFor = Exception.class) \n\tpublic void test() {\n\t\t//插入数据库\n\t\tsave(obj1);\n\t\t//插入数据库\n\t\tsave(obj2);\n\t\t//抛出异常\n\t\tif (true) {\n\t\t\tthrow new Exception(\"error\");\n\t\t}\n\t}\n```","source":"_posts/pring多事务绑定同时开启.md","raw":"title: Spring多事务绑定\nauthor: ZkName\ntags:\n  - Spring\n  - Java\ncategories: []\ndate: 2017-08-16 16:55:00\n---\n###### 1、maven 使用 spring-data-commons\n```xml\n\t\t<dependency>\n\t\t    <groupId>org.springframework.data</groupId>\n\t\t    <artifactId>spring-data-commons</artifactId>\n\t\t    <version>1.13.6.RELEASE</version>\n\t\t</dependency>\n```\n\n###### 2、spring 配置文件\n```xml\n\t<!-- 事务声明 -->\n\t<bean id=\"transactionManager1\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n\t\t<property name=\"dataSource\" ref=\"dataSource1\" />\n\t</bean>\n\t<!-- 事务声明 -->\n\t<bean id=\"transactionManager2\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n\t\t<property name=\"dataSource\" ref=\"dataSource2\" />\n\t</bean>\n    <!-- 配置默认事务 -->\n\t<tx:annotation-driven transaction-manager=\"transactionManager1\"  proxy-target-class=\"true\" />\n    \n\t<!-- 多事务绑定 -->\n\t<bean id=\"chainedTransactionManager\" class=\"org.springframework.data.transaction.ChainedTransactionManager\">\n\t\t<constructor-arg>\n\t\t\t<array>\n\t\t\t\t<ref bean=\"transactionManager1\"/>\n\t\t\t\t<ref bean=\"transactionManager2\"/>\n\t\t\t</array>\n\t\t</constructor-arg>\n\t</bean>\n\n```\n###### 3、java 测试可见已经回滚了\n\n```java\n\t@Transactional(value=\"chainedTransactionManager\",rollbackFor = Exception.class) \n\tpublic void test() {\n\t\t//插入数据库\n\t\tsave(obj1);\n\t\t//插入数据库\n\t\tsave(obj2);\n\t\t//抛出异常\n\t\tif (true) {\n\t\t\tthrow new Exception(\"error\");\n\t\t}\n\t}\n```","slug":"pring多事务绑定同时开启","published":1,"updated":"2018-12-13T08:24:34.081Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspx002xi85nmo1z80lx","content":"<h6 id=\"1、maven-使用-spring-data-commons\"><a href=\"#1、maven-使用-spring-data-commons\" class=\"headerlink\" title=\"1、maven 使用 spring-data-commons\"></a>1、maven 使用 spring-data-commons</h6><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.data<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-data-commons<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.13.6.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"2、spring-配置文件\"><a href=\"#2、spring-配置文件\" class=\"headerlink\" title=\"2、spring 配置文件\"></a>2、spring 配置文件</h6><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 事务声明 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"transactionManager1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"dataSource1\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 事务声明 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"transactionManager2\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"dataSource2\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\">   <span class=\"comment\">&lt;!-- 配置默认事务 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tx:annotation-driven</span> <span class=\"attr\">transaction-manager</span>=<span class=\"string\">\"transactionManager1\"</span>  <span class=\"attr\">proxy-target-class</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\">   </span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 多事务绑定 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"chainedTransactionManager\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.data.transaction.ChainedTransactionManager\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">array</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"transactionManager1\"</span>/&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"transactionManager2\"</span>/&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">array</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"3、java-测试可见已经回滚了\"><a href=\"#3、java-测试可见已经回滚了\" class=\"headerlink\" title=\"3、java 测试可见已经回滚了\"></a>3、java 测试可见已经回滚了</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Transactional</span>(value=<span class=\"string\">\"chainedTransactionManager\"</span>,rollbackFor = Exception.class) </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//插入数据库</span></span><br><span class=\"line\">\tsave(obj1);</span><br><span class=\"line\">\t<span class=\"comment\">//插入数据库</span></span><br><span class=\"line\">\tsave(obj2);</span><br><span class=\"line\">\t<span class=\"comment\">//抛出异常</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> Exception(<span class=\"string\">\"error\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h6 id=\"1、maven-使用-spring-data-commons\"><a href=\"#1、maven-使用-spring-data-commons\" class=\"headerlink\" title=\"1、maven 使用 spring-data-commons\"></a>1、maven 使用 spring-data-commons</h6><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.data<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-data-commons<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.13.6.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"2、spring-配置文件\"><a href=\"#2、spring-配置文件\" class=\"headerlink\" title=\"2、spring 配置文件\"></a>2、spring 配置文件</h6><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 事务声明 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"transactionManager1\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"dataSource1\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 事务声明 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"transactionManager2\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dataSource\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"dataSource2\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\">   <span class=\"comment\">&lt;!-- 配置默认事务 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tx:annotation-driven</span> <span class=\"attr\">transaction-manager</span>=<span class=\"string\">\"transactionManager1\"</span>  <span class=\"attr\">proxy-target-class</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\">   </span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 多事务绑定 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"chainedTransactionManager\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.data.transaction.ChainedTransactionManager\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">constructor-arg</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">array</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"transactionManager1\"</span>/&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">ref</span> <span class=\"attr\">bean</span>=<span class=\"string\">\"transactionManager2\"</span>/&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">array</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">constructor-arg</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"3、java-测试可见已经回滚了\"><a href=\"#3、java-测试可见已经回滚了\" class=\"headerlink\" title=\"3、java 测试可见已经回滚了\"></a>3、java 测试可见已经回滚了</h6><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Transactional</span>(value=<span class=\"string\">\"chainedTransactionManager\"</span>,rollbackFor = Exception.class) </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//插入数据库</span></span><br><span class=\"line\">\tsave(obj1);</span><br><span class=\"line\">\t<span class=\"comment\">//插入数据库</span></span><br><span class=\"line\">\tsave(obj2);</span><br><span class=\"line\">\t<span class=\"comment\">//抛出异常</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> Exception(<span class=\"string\">\"error\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"ios workflow 视频解析地址","author":"ZkName","date":"2017-03-30T03:50:00.000Z","_content":"## workflow ios 视频解析地址笔记：\n\n【爱奇艺、搜狐、乐视、芒果、爱奇艺】http://api.mp4la.net\n【乐视、爱奇艺、优酷、搜狐】http://q.z.vip.totv.72du.com/?url=\n【优酷、乐视、搜狐、爱奇艺、腾讯】http://api.47ks.com/webcloud/?v=\n【爱奇艺、搜狐、优酷】http://jx.71ki.com/index.php?url=\n【爱奇艺、搜狐、乐视、芒果、优酷】http://000o.cc\n【优酷、乐视、芒果】http://www.yydy8.com/Common/?url=\n【爱奇艺、搜狐、腾讯、乐视、优酷】http://yun.mt2t.com/yun?url=\n【爱奇艺、搜狐、乐视、芒果、优酷】http://yyygwz.com/index.php?url=","source":"_posts/orkflow-视频解析地址.md","raw":"title: ios workflow 视频解析地址\nauthor: ZkName\ntags:\n  - workflow\n  - ios\ncategories: []\ndate: 2017-03-30 11:50:00\n---\n## workflow ios 视频解析地址笔记：\n\n【爱奇艺、搜狐、乐视、芒果、爱奇艺】http://api.mp4la.net\n【乐视、爱奇艺、优酷、搜狐】http://q.z.vip.totv.72du.com/?url=\n【优酷、乐视、搜狐、爱奇艺、腾讯】http://api.47ks.com/webcloud/?v=\n【爱奇艺、搜狐、优酷】http://jx.71ki.com/index.php?url=\n【爱奇艺、搜狐、乐视、芒果、优酷】http://000o.cc\n【优酷、乐视、芒果】http://www.yydy8.com/Common/?url=\n【爱奇艺、搜狐、腾讯、乐视、优酷】http://yun.mt2t.com/yun?url=\n【爱奇艺、搜狐、乐视、芒果、优酷】http://yyygwz.com/index.php?url=","slug":"orkflow-视频解析地址","published":1,"updated":"2018-12-13T08:24:34.080Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjspy0030i85nzbhy23es","content":"<h2 id=\"workflow-ios-视频解析地址笔记：\"><a href=\"#workflow-ios-视频解析地址笔记：\" class=\"headerlink\" title=\"workflow ios 视频解析地址笔记：\"></a>workflow ios 视频解析地址笔记：</h2><p>【爱奇艺、搜狐、乐视、芒果、爱奇艺】<a href=\"http://api.mp4la.net\" target=\"_blank\" rel=\"noopener\">http://api.mp4la.net</a><br>【乐视、爱奇艺、优酷、搜狐】<a href=\"http://q.z.vip.totv.72du.com/?url=\" target=\"_blank\" rel=\"noopener\">http://q.z.vip.totv.72du.com/?url=</a><br>【优酷、乐视、搜狐、爱奇艺、腾讯】<a href=\"http://api.47ks.com/webcloud/?v=\" target=\"_blank\" rel=\"noopener\">http://api.47ks.com/webcloud/?v=</a><br>【爱奇艺、搜狐、优酷】<a href=\"http://jx.71ki.com/index.php?url=\" target=\"_blank\" rel=\"noopener\">http://jx.71ki.com/index.php?url=</a><br>【爱奇艺、搜狐、乐视、芒果、优酷】<a href=\"http://000o.cc\" target=\"_blank\" rel=\"noopener\">http://000o.cc</a><br>【优酷、乐视、芒果】<a href=\"http://www.yydy8.com/Common/?url=\" target=\"_blank\" rel=\"noopener\">http://www.yydy8.com/Common/?url=</a><br>【爱奇艺、搜狐、腾讯、乐视、优酷】<a href=\"http://yun.mt2t.com/yun?url=\" target=\"_blank\" rel=\"noopener\">http://yun.mt2t.com/yun?url=</a><br>【爱奇艺、搜狐、乐视、芒果、优酷】<a href=\"http://yyygwz.com/index.php?url=\" target=\"_blank\" rel=\"noopener\">http://yyygwz.com/index.php?url=</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"workflow-ios-视频解析地址笔记：\"><a href=\"#workflow-ios-视频解析地址笔记：\" class=\"headerlink\" title=\"workflow ios 视频解析地址笔记：\"></a>workflow ios 视频解析地址笔记：</h2><p>【爱奇艺、搜狐、乐视、芒果、爱奇艺】<a href=\"http://api.mp4la.net\" target=\"_blank\" rel=\"noopener\">http://api.mp4la.net</a><br>【乐视、爱奇艺、优酷、搜狐】<a href=\"http://q.z.vip.totv.72du.com/?url=\" target=\"_blank\" rel=\"noopener\">http://q.z.vip.totv.72du.com/?url=</a><br>【优酷、乐视、搜狐、爱奇艺、腾讯】<a href=\"http://api.47ks.com/webcloud/?v=\" target=\"_blank\" rel=\"noopener\">http://api.47ks.com/webcloud/?v=</a><br>【爱奇艺、搜狐、优酷】<a href=\"http://jx.71ki.com/index.php?url=\" target=\"_blank\" rel=\"noopener\">http://jx.71ki.com/index.php?url=</a><br>【爱奇艺、搜狐、乐视、芒果、优酷】<a href=\"http://000o.cc\" target=\"_blank\" rel=\"noopener\">http://000o.cc</a><br>【优酷、乐视、芒果】<a href=\"http://www.yydy8.com/Common/?url=\" target=\"_blank\" rel=\"noopener\">http://www.yydy8.com/Common/?url=</a><br>【爱奇艺、搜狐、腾讯、乐视、优酷】<a href=\"http://yun.mt2t.com/yun?url=\" target=\"_blank\" rel=\"noopener\">http://yun.mt2t.com/yun?url=</a><br>【爱奇艺、搜狐、乐视、芒果、优酷】<a href=\"http://yyygwz.com/index.php?url=\" target=\"_blank\" rel=\"noopener\">http://yyygwz.com/index.php?url=</a></p>\n"},{"title":"ubuntu dnsmasq配置","date":"2014-10-14T02:22:00.000Z","_content":"## 简介\n#### DNSmasq是一个轻巧的，容易使用的DNS服务工具，它可以应用在内部网和Internet连接的时候的 IP地址NAT转换，也可以用做小型网络的DNS服务。\n## 安装\n```shell\nsudo apt-get install dnsmasq\n```\n## 配置\n```shell\nvi /etc/dnsmasq.conf\n\n# Configuration file for dnsmasq.\n#\n# Format is one option per line, legal options are the same\n# as the long options legal on the command line. See\n# \"/usr/sbin/dnsmasq --help\" or \"man 8 dnsmasq\" for details.\n\n# The following two options make you a better netizen, since they\n# tell dnsmasq to filter out queries which the public DNS cannot\n# answer, and which load the servers (especially the root servers)\n# unnecessarily. If you have a dial-on-demand link they also stop\n# these requests from bringing up the link unnecessarily.\n\n# Never forward plain names (without a dot or domain part)\n#domain-needed\n# Never forward addresses in the non-routed address spaces.\n#bogus-priv\n\n\n# Uncomment this to filter useless windows-originated DNS requests\n# which can trigger dial-on-demand links needlessly.\n# Note that (amongst other things) this blocks all SRV requests,\n# so don't use it if you use eg Kerberos, SIP, XMMP or Google-talk.\n# This option only affects forwarding, SRV records originating for\n# dnsmasq (via srv-host= lines) are not suppressed by it.\n#filterwin2k\n\n# Change this line if you want dns to get its upstream servers from\n# somewhere other that /etc/resolv.conf\n#resolv-file=\n#用于设置上级dns服务器，用于向上级服务器转发查询请求。不设置，默认使用/etc/resolv.conf 如要解析外网的dns，必须设置此项用于向外转发dns请求。\n\n# By  default,  dnsmasq  will  send queries to any of the upstream\n\n...\n...\n...\n\n# Include a another lot of configuration options.\n#conf-file=/etc/dnsmasq.more.conf\nconf-dir=/etc/dnsmasq.d\n#用于包含配置文件目录\n\n```\n\n#### 在/etc/dnsmasq.d 新建文件配置文件dns-intrant.conf 添加常用的网站用于dns缓存\n```shell\naddress=/a.com/192.168.1.1 \n\n#泛解析\naddress=/.a.com/192.168.1.1\naddress=/.a.net/192.168.1.2\naddress=/.a.cn/192.168.3  \n```\n## 启动服务\n```shell\nsudo service dnsmasq restart\n\n#查看服务是否启动\nnetstat -ntlp|grep 53 \n```\n\n","source":"_posts/ubuntu dnsmasq配置.md","raw":"title: ubuntu dnsmasq配置\ntags:\n  - Ubuntu\n  - DNSmasq\ncategories:\n  - Ubuntu\ndate: 2014-10-14 10:22:00\n---\n## 简介\n#### DNSmasq是一个轻巧的，容易使用的DNS服务工具，它可以应用在内部网和Internet连接的时候的 IP地址NAT转换，也可以用做小型网络的DNS服务。\n## 安装\n```shell\nsudo apt-get install dnsmasq\n```\n## 配置\n```shell\nvi /etc/dnsmasq.conf\n\n# Configuration file for dnsmasq.\n#\n# Format is one option per line, legal options are the same\n# as the long options legal on the command line. See\n# \"/usr/sbin/dnsmasq --help\" or \"man 8 dnsmasq\" for details.\n\n# The following two options make you a better netizen, since they\n# tell dnsmasq to filter out queries which the public DNS cannot\n# answer, and which load the servers (especially the root servers)\n# unnecessarily. If you have a dial-on-demand link they also stop\n# these requests from bringing up the link unnecessarily.\n\n# Never forward plain names (without a dot or domain part)\n#domain-needed\n# Never forward addresses in the non-routed address spaces.\n#bogus-priv\n\n\n# Uncomment this to filter useless windows-originated DNS requests\n# which can trigger dial-on-demand links needlessly.\n# Note that (amongst other things) this blocks all SRV requests,\n# so don't use it if you use eg Kerberos, SIP, XMMP or Google-talk.\n# This option only affects forwarding, SRV records originating for\n# dnsmasq (via srv-host= lines) are not suppressed by it.\n#filterwin2k\n\n# Change this line if you want dns to get its upstream servers from\n# somewhere other that /etc/resolv.conf\n#resolv-file=\n#用于设置上级dns服务器，用于向上级服务器转发查询请求。不设置，默认使用/etc/resolv.conf 如要解析外网的dns，必须设置此项用于向外转发dns请求。\n\n# By  default,  dnsmasq  will  send queries to any of the upstream\n\n...\n...\n...\n\n# Include a another lot of configuration options.\n#conf-file=/etc/dnsmasq.more.conf\nconf-dir=/etc/dnsmasq.d\n#用于包含配置文件目录\n\n```\n\n#### 在/etc/dnsmasq.d 新建文件配置文件dns-intrant.conf 添加常用的网站用于dns缓存\n```shell\naddress=/a.com/192.168.1.1 \n\n#泛解析\naddress=/.a.com/192.168.1.1\naddress=/.a.net/192.168.1.2\naddress=/.a.cn/192.168.3  \n```\n## 启动服务\n```shell\nsudo service dnsmasq restart\n\n#查看服务是否启动\nnetstat -ntlp|grep 53 \n```\n\n","slug":"ubuntu dnsmasq配置","published":1,"updated":"2018-12-13T08:24:34.083Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsq00034i85n4e5t24c0","content":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><h4 id=\"DNSmasq是一个轻巧的，容易使用的DNS服务工具，它可以应用在内部网和Internet连接的时候的-IP地址NAT转换，也可以用做小型网络的DNS服务。\"><a href=\"#DNSmasq是一个轻巧的，容易使用的DNS服务工具，它可以应用在内部网和Internet连接的时候的-IP地址NAT转换，也可以用做小型网络的DNS服务。\" class=\"headerlink\" title=\"DNSmasq是一个轻巧的，容易使用的DNS服务工具，它可以应用在内部网和Internet连接的时候的 IP地址NAT转换，也可以用做小型网络的DNS服务。\"></a>DNSmasq是一个轻巧的，容易使用的DNS服务工具，它可以应用在内部网和Internet连接的时候的 IP地址NAT转换，也可以用做小型网络的DNS服务。</h4><h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install dnsmasq</span><br></pre></td></tr></table></figure>\n<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/dnsmasq.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Configuration file for dnsmasq.</span><br><span class=\"line\"><span class=\"meta\">#</span></span><br><span class=\"line\"><span class=\"meta\">#</span> Format is one option per line, legal options are the same</span><br><span class=\"line\"><span class=\"meta\">#</span> as the long options legal on the command line. See</span><br><span class=\"line\"><span class=\"meta\">#</span> \"/usr/sbin/dnsmasq --help\" or \"man 8 dnsmasq\" for details.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> The following two options make you a better netizen, since they</span><br><span class=\"line\"><span class=\"meta\">#</span> tell dnsmasq to filter out queries which the public DNS cannot</span><br><span class=\"line\"><span class=\"meta\">#</span> answer, and which load the servers (especially the root servers)</span><br><span class=\"line\"><span class=\"meta\">#</span> unnecessarily. If you have a dial-on-demand link they also stop</span><br><span class=\"line\"><span class=\"meta\">#</span> these requests from bringing up the link unnecessarily.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Never forward plain names (without a dot or domain part)</span><br><span class=\"line\"><span class=\"meta\">#</span>domain-needed</span><br><span class=\"line\"><span class=\"meta\">#</span> Never forward addresses in the non-routed address spaces.</span><br><span class=\"line\"><span class=\"meta\">#</span>bogus-priv</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Uncomment this to filter useless windows-originated DNS requests</span><br><span class=\"line\"><span class=\"meta\">#</span> which can trigger dial-on-demand links needlessly.</span><br><span class=\"line\"><span class=\"meta\">#</span> Note that (amongst other things) this blocks all SRV requests,</span><br><span class=\"line\"><span class=\"meta\">#</span> so don't use it if you use eg Kerberos, SIP, XMMP or Google-talk.</span><br><span class=\"line\"><span class=\"meta\">#</span> This option only affects forwarding, SRV records originating for</span><br><span class=\"line\"><span class=\"meta\">#</span> dnsmasq (via srv-host= lines) are not suppressed by it.</span><br><span class=\"line\"><span class=\"meta\">#</span>filterwin2k</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Change this line if you want dns to get its upstream servers from</span><br><span class=\"line\"><span class=\"meta\">#</span> somewhere other that /etc/resolv.conf</span><br><span class=\"line\"><span class=\"meta\">#</span>resolv-file=</span><br><span class=\"line\"><span class=\"meta\">#</span>用于设置上级dns服务器，用于向上级服务器转发查询请求。不设置，默认使用/etc/resolv.conf 如要解析外网的dns，必须设置此项用于向外转发dns请求。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> By  default,  dnsmasq  will  send queries to any of the upstream</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Include a another lot of configuration options.</span><br><span class=\"line\"><span class=\"meta\">#</span>conf-file=/etc/dnsmasq.more.conf</span><br><span class=\"line\">conf-dir=/etc/dnsmasq.d</span><br><span class=\"line\"><span class=\"meta\">#</span>用于包含配置文件目录</span><br></pre></td></tr></table></figure>\n<h4 id=\"在-etc-dnsmasq-d-新建文件配置文件dns-intrant-conf-添加常用的网站用于dns缓存\"><a href=\"#在-etc-dnsmasq-d-新建文件配置文件dns-intrant-conf-添加常用的网站用于dns缓存\" class=\"headerlink\" title=\"在/etc/dnsmasq.d 新建文件配置文件dns-intrant.conf 添加常用的网站用于dns缓存\"></a>在/etc/dnsmasq.d 新建文件配置文件dns-intrant.conf 添加常用的网站用于dns缓存</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">address=/a.com/192.168.1.1 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>泛解析</span><br><span class=\"line\">address=/.a.com/192.168.1.1</span><br><span class=\"line\">address=/.a.net/192.168.1.2</span><br><span class=\"line\">address=/.a.cn/192.168.3</span><br></pre></td></tr></table></figure>\n<h2 id=\"启动服务\"><a href=\"#启动服务\" class=\"headerlink\" title=\"启动服务\"></a>启动服务</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service dnsmasq restart</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>查看服务是否启动</span><br><span class=\"line\">netstat -ntlp|grep 53</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><h4 id=\"DNSmasq是一个轻巧的，容易使用的DNS服务工具，它可以应用在内部网和Internet连接的时候的-IP地址NAT转换，也可以用做小型网络的DNS服务。\"><a href=\"#DNSmasq是一个轻巧的，容易使用的DNS服务工具，它可以应用在内部网和Internet连接的时候的-IP地址NAT转换，也可以用做小型网络的DNS服务。\" class=\"headerlink\" title=\"DNSmasq是一个轻巧的，容易使用的DNS服务工具，它可以应用在内部网和Internet连接的时候的 IP地址NAT转换，也可以用做小型网络的DNS服务。\"></a>DNSmasq是一个轻巧的，容易使用的DNS服务工具，它可以应用在内部网和Internet连接的时候的 IP地址NAT转换，也可以用做小型网络的DNS服务。</h4><h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install dnsmasq</span><br></pre></td></tr></table></figure>\n<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/dnsmasq.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Configuration file for dnsmasq.</span><br><span class=\"line\"><span class=\"meta\">#</span></span><br><span class=\"line\"><span class=\"meta\">#</span> Format is one option per line, legal options are the same</span><br><span class=\"line\"><span class=\"meta\">#</span> as the long options legal on the command line. See</span><br><span class=\"line\"><span class=\"meta\">#</span> \"/usr/sbin/dnsmasq --help\" or \"man 8 dnsmasq\" for details.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> The following two options make you a better netizen, since they</span><br><span class=\"line\"><span class=\"meta\">#</span> tell dnsmasq to filter out queries which the public DNS cannot</span><br><span class=\"line\"><span class=\"meta\">#</span> answer, and which load the servers (especially the root servers)</span><br><span class=\"line\"><span class=\"meta\">#</span> unnecessarily. If you have a dial-on-demand link they also stop</span><br><span class=\"line\"><span class=\"meta\">#</span> these requests from bringing up the link unnecessarily.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Never forward plain names (without a dot or domain part)</span><br><span class=\"line\"><span class=\"meta\">#</span>domain-needed</span><br><span class=\"line\"><span class=\"meta\">#</span> Never forward addresses in the non-routed address spaces.</span><br><span class=\"line\"><span class=\"meta\">#</span>bogus-priv</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Uncomment this to filter useless windows-originated DNS requests</span><br><span class=\"line\"><span class=\"meta\">#</span> which can trigger dial-on-demand links needlessly.</span><br><span class=\"line\"><span class=\"meta\">#</span> Note that (amongst other things) this blocks all SRV requests,</span><br><span class=\"line\"><span class=\"meta\">#</span> so don't use it if you use eg Kerberos, SIP, XMMP or Google-talk.</span><br><span class=\"line\"><span class=\"meta\">#</span> This option only affects forwarding, SRV records originating for</span><br><span class=\"line\"><span class=\"meta\">#</span> dnsmasq (via srv-host= lines) are not suppressed by it.</span><br><span class=\"line\"><span class=\"meta\">#</span>filterwin2k</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Change this line if you want dns to get its upstream servers from</span><br><span class=\"line\"><span class=\"meta\">#</span> somewhere other that /etc/resolv.conf</span><br><span class=\"line\"><span class=\"meta\">#</span>resolv-file=</span><br><span class=\"line\"><span class=\"meta\">#</span>用于设置上级dns服务器，用于向上级服务器转发查询请求。不设置，默认使用/etc/resolv.conf 如要解析外网的dns，必须设置此项用于向外转发dns请求。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> By  default,  dnsmasq  will  send queries to any of the upstream</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Include a another lot of configuration options.</span><br><span class=\"line\"><span class=\"meta\">#</span>conf-file=/etc/dnsmasq.more.conf</span><br><span class=\"line\">conf-dir=/etc/dnsmasq.d</span><br><span class=\"line\"><span class=\"meta\">#</span>用于包含配置文件目录</span><br></pre></td></tr></table></figure>\n<h4 id=\"在-etc-dnsmasq-d-新建文件配置文件dns-intrant-conf-添加常用的网站用于dns缓存\"><a href=\"#在-etc-dnsmasq-d-新建文件配置文件dns-intrant-conf-添加常用的网站用于dns缓存\" class=\"headerlink\" title=\"在/etc/dnsmasq.d 新建文件配置文件dns-intrant.conf 添加常用的网站用于dns缓存\"></a>在/etc/dnsmasq.d 新建文件配置文件dns-intrant.conf 添加常用的网站用于dns缓存</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">address=/a.com/192.168.1.1 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>泛解析</span><br><span class=\"line\">address=/.a.com/192.168.1.1</span><br><span class=\"line\">address=/.a.net/192.168.1.2</span><br><span class=\"line\">address=/.a.cn/192.168.3</span><br></pre></td></tr></table></figure>\n<h2 id=\"启动服务\"><a href=\"#启动服务\" class=\"headerlink\" title=\"启动服务\"></a>启动服务</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service dnsmasq restart</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>查看服务是否启动</span><br><span class=\"line\">netstat -ntlp|grep 53</span><br></pre></td></tr></table></figure>\n"},{"title":"ubuntu使用ssh-keygen设置ssh无密码登录","date":"2014-08-27T09:55:00.000Z","_content":"## 输入时，会提示创建.ssh/id_rsa、id_rsa.pub的文件，其中第一个为密钥，第二个为公钥。过程中会要求输入密码，为了ssh访问过程无须密码，直接回车 。\n\n```shell\nroot@ubuntu:~# ssh-keygen -t rsa\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/root/.ssh/id_rsa): \nCreated directory '/root/.ssh'.\nEnter passphrase (empty for no passphrase): \nEnter same passphrase again: \nYour identification has been saved in /root/.ssh/id_rsa.\nYour public key has been saved in /root/.ssh/id_rsa.pub.\nThe key fingerprint is:\n84:50:44:e7:22:e1:f0:75:01:f2:c8:e9:45:39:66:70 root@ubuntu\nThe key's randomart image is:\n+--[ RSA 2048]----+\n|  . ==Eo+.       |\n|   = @==         |\n|    Bo=.o        |\n|   . o o         |\n|    .   S        |\n|                 |\n|                 |\n|                 |\n|                 |\n+-----------------+\n```\n\n## 公钥复制，本机直接复制\n```shell\nroot@ubuntu:~/.ssh# cp id_rsa.pub authorized_keys\n```\n\n## 复制密码\n```shell\n# 192.168.1.11 服务器输入\nssh-copy-id -i ~/.ssh/id_rsa.pub -p22 root@192.168.1.10\n# 192.168.1.10 服务器输入\nssh-copy-id -i ~/.ssh/id_rsa.pub -p22 root@192.168.1.11\n```\n\n# 登录\n```shell\nroot@ubuntu:~/.ssh# ssh localhost\n```\n\n\n\n","source":"_posts/ubuntu使用ssh-keygen设置ssh无密码登录.md","raw":"title: ubuntu使用ssh-keygen设置ssh无密码登录\ntags:\n  - Ubuntu\ncategories:\n  - Ubuntu\ndate: 2014-08-27 17:55:00\n---\n## 输入时，会提示创建.ssh/id_rsa、id_rsa.pub的文件，其中第一个为密钥，第二个为公钥。过程中会要求输入密码，为了ssh访问过程无须密码，直接回车 。\n\n```shell\nroot@ubuntu:~# ssh-keygen -t rsa\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/root/.ssh/id_rsa): \nCreated directory '/root/.ssh'.\nEnter passphrase (empty for no passphrase): \nEnter same passphrase again: \nYour identification has been saved in /root/.ssh/id_rsa.\nYour public key has been saved in /root/.ssh/id_rsa.pub.\nThe key fingerprint is:\n84:50:44:e7:22:e1:f0:75:01:f2:c8:e9:45:39:66:70 root@ubuntu\nThe key's randomart image is:\n+--[ RSA 2048]----+\n|  . ==Eo+.       |\n|   = @==         |\n|    Bo=.o        |\n|   . o o         |\n|    .   S        |\n|                 |\n|                 |\n|                 |\n|                 |\n+-----------------+\n```\n\n## 公钥复制，本机直接复制\n```shell\nroot@ubuntu:~/.ssh# cp id_rsa.pub authorized_keys\n```\n\n## 复制密码\n```shell\n# 192.168.1.11 服务器输入\nssh-copy-id -i ~/.ssh/id_rsa.pub -p22 root@192.168.1.10\n# 192.168.1.10 服务器输入\nssh-copy-id -i ~/.ssh/id_rsa.pub -p22 root@192.168.1.11\n```\n\n# 登录\n```shell\nroot@ubuntu:~/.ssh# ssh localhost\n```\n\n\n\n","slug":"ubuntu使用ssh-keygen设置ssh无密码登录","published":1,"updated":"2018-12-13T08:24:34.084Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsq10036i85n7pvda101","content":"<h2 id=\"输入时，会提示创建-ssh-id-rsa、id-rsa-pub的文件，其中第一个为密钥，第二个为公钥。过程中会要求输入密码，为了ssh访问过程无须密码，直接回车-。\"><a href=\"#输入时，会提示创建-ssh-id-rsa、id-rsa-pub的文件，其中第一个为密钥，第二个为公钥。过程中会要求输入密码，为了ssh访问过程无须密码，直接回车-。\" class=\"headerlink\" title=\"输入时，会提示创建.ssh/id_rsa、id_rsa.pub的文件，其中第一个为密钥，第二个为公钥。过程中会要求输入密码，为了ssh访问过程无须密码，直接回车 。\"></a>输入时，会提示创建.ssh/id_rsa、id_rsa.pub的文件，其中第一个为密钥，第二个为公钥。过程中会要求输入密码，为了ssh访问过程无须密码，直接回车 。</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~# ssh-keygen -t rsa</span><br><span class=\"line\">Generating public/private rsa key pair.</span><br><span class=\"line\">Enter file in which to save the key (/root/.ssh/id_rsa): </span><br><span class=\"line\">Created directory '/root/.ssh'.</span><br><span class=\"line\">Enter passphrase (empty for no passphrase): </span><br><span class=\"line\">Enter same passphrase again: </span><br><span class=\"line\">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class=\"line\">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class=\"line\">The key fingerprint is:</span><br><span class=\"line\">84:50:44:e7:22:e1:f0:75:01:f2:c8:e9:45:39:66:70 root@ubuntu</span><br><span class=\"line\">The key's randomart image is:</span><br><span class=\"line\">+--[ RSA 2048]----+</span><br><span class=\"line\">|  . ==Eo+.       |</span><br><span class=\"line\">|   = @==         |</span><br><span class=\"line\">|    Bo=.o        |</span><br><span class=\"line\">|   . o o         |</span><br><span class=\"line\">|    .   S        |</span><br><span class=\"line\">|                 |</span><br><span class=\"line\">|                 |</span><br><span class=\"line\">|                 |</span><br><span class=\"line\">|                 |</span><br><span class=\"line\">+-----------------+</span><br></pre></td></tr></table></figure>\n<h2 id=\"公钥复制，本机直接复制\"><a href=\"#公钥复制，本机直接复制\" class=\"headerlink\" title=\"公钥复制，本机直接复制\"></a>公钥复制，本机直接复制</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~/.ssh# cp id_rsa.pub authorized_keys</span><br></pre></td></tr></table></figure>\n<h2 id=\"复制密码\"><a href=\"#复制密码\" class=\"headerlink\" title=\"复制密码\"></a>复制密码</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 192.168.1.11 服务器输入</span><br><span class=\"line\">ssh-copy-id -i ~/.ssh/id_rsa.pub -p22 root@192.168.1.10</span><br><span class=\"line\"><span class=\"meta\">#</span> 192.168.1.10 服务器输入</span><br><span class=\"line\">ssh-copy-id -i ~/.ssh/id_rsa.pub -p22 root@192.168.1.11</span><br></pre></td></tr></table></figure>\n<h1 id=\"登录\"><a href=\"#登录\" class=\"headerlink\" title=\"登录\"></a>登录</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~/.ssh# ssh localhost</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"输入时，会提示创建-ssh-id-rsa、id-rsa-pub的文件，其中第一个为密钥，第二个为公钥。过程中会要求输入密码，为了ssh访问过程无须密码，直接回车-。\"><a href=\"#输入时，会提示创建-ssh-id-rsa、id-rsa-pub的文件，其中第一个为密钥，第二个为公钥。过程中会要求输入密码，为了ssh访问过程无须密码，直接回车-。\" class=\"headerlink\" title=\"输入时，会提示创建.ssh/id_rsa、id_rsa.pub的文件，其中第一个为密钥，第二个为公钥。过程中会要求输入密码，为了ssh访问过程无须密码，直接回车 。\"></a>输入时，会提示创建.ssh/id_rsa、id_rsa.pub的文件，其中第一个为密钥，第二个为公钥。过程中会要求输入密码，为了ssh访问过程无须密码，直接回车 。</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~# ssh-keygen -t rsa</span><br><span class=\"line\">Generating public/private rsa key pair.</span><br><span class=\"line\">Enter file in which to save the key (/root/.ssh/id_rsa): </span><br><span class=\"line\">Created directory '/root/.ssh'.</span><br><span class=\"line\">Enter passphrase (empty for no passphrase): </span><br><span class=\"line\">Enter same passphrase again: </span><br><span class=\"line\">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class=\"line\">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class=\"line\">The key fingerprint is:</span><br><span class=\"line\">84:50:44:e7:22:e1:f0:75:01:f2:c8:e9:45:39:66:70 root@ubuntu</span><br><span class=\"line\">The key's randomart image is:</span><br><span class=\"line\">+--[ RSA 2048]----+</span><br><span class=\"line\">|  . ==Eo+.       |</span><br><span class=\"line\">|   = @==         |</span><br><span class=\"line\">|    Bo=.o        |</span><br><span class=\"line\">|   . o o         |</span><br><span class=\"line\">|    .   S        |</span><br><span class=\"line\">|                 |</span><br><span class=\"line\">|                 |</span><br><span class=\"line\">|                 |</span><br><span class=\"line\">|                 |</span><br><span class=\"line\">+-----------------+</span><br></pre></td></tr></table></figure>\n<h2 id=\"公钥复制，本机直接复制\"><a href=\"#公钥复制，本机直接复制\" class=\"headerlink\" title=\"公钥复制，本机直接复制\"></a>公钥复制，本机直接复制</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~/.ssh# cp id_rsa.pub authorized_keys</span><br></pre></td></tr></table></figure>\n<h2 id=\"复制密码\"><a href=\"#复制密码\" class=\"headerlink\" title=\"复制密码\"></a>复制密码</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 192.168.1.11 服务器输入</span><br><span class=\"line\">ssh-copy-id -i ~/.ssh/id_rsa.pub -p22 root@192.168.1.10</span><br><span class=\"line\"><span class=\"meta\">#</span> 192.168.1.10 服务器输入</span><br><span class=\"line\">ssh-copy-id -i ~/.ssh/id_rsa.pub -p22 root@192.168.1.11</span><br></pre></td></tr></table></figure>\n<h1 id=\"登录\"><a href=\"#登录\" class=\"headerlink\" title=\"登录\"></a>登录</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:~/.ssh# ssh localhost</span><br></pre></td></tr></table></figure>\n"},{"title":"hexo+coding 搭建博客","date":"2015-12-17T15:59:00.000Z","_content":"### 1、安装Git\n[http://git-for-windows.github.io/](http://git-for-windows.github.io/ \"官网\")\n[https://github.com/git-for-windows/git/releases/download/v2.6.4.windows.1/Git-2.6.4-64-bit.exe](https://github.com/git-for-windows/git/releases/download/v2.6.4.windows.1/Git-2.6.4-64-bit.exe \"Git-2.6.4-64-bit 下载\")\n### 2、安装Node.js\n[https://nodejs.org/en/](https://nodejs.org/en/ \"官网\")\n[https://nodejs.org/dist/v5.3.0/node-v5.3.0-x64.msi](https://nodejs.org/dist/v5.3.0/node-v5.3.0-x64.msi \"下载\")\n### 3、安装Hexo框架\n```shell\nnpm install -g hexo\n```\n### 4、安装Hexo插件\n```shell\nnpm install hexo-generator-sitemap --save\nnpm install hexo-generator-feed --save\nnpm install hexo-deployer-git --save\n```\n### 5、创建个人博客\n创建目录，右击后选择git bash，输入：\n```shell\nhexo init\n```\n### 6、运行服务器测试\n```shell\nhexo generate\nhexo server\n```\n本地地址：[http://localhost:4000/](http://localhost:4000/ \"http://localhost:4000/\")\n\n### 7、编辑_config.yml文件增加\n```shell\ndeploy:\n   type: git\n   repo: git@git.coding.net:kinsou/blog.git\n   message: update\n   branch: coding-pages\n```\n### 8、上传Git\n```shell\nhexo d -g\n```\n其他命令：\n```shell\nhexo n #写文章\nhexo g #生成\nhexo d #部署 # 可与hexo g合并为 \n```","source":"_posts/hexo+gitcafe 搭建博客.md","raw":"title: hexo+coding 搭建博客\ntags:\n  - Git\n  - Hexo\ncategories:\n  - Hexo\ndate: 2015-12-17 23:59:00\n---\n### 1、安装Git\n[http://git-for-windows.github.io/](http://git-for-windows.github.io/ \"官网\")\n[https://github.com/git-for-windows/git/releases/download/v2.6.4.windows.1/Git-2.6.4-64-bit.exe](https://github.com/git-for-windows/git/releases/download/v2.6.4.windows.1/Git-2.6.4-64-bit.exe \"Git-2.6.4-64-bit 下载\")\n### 2、安装Node.js\n[https://nodejs.org/en/](https://nodejs.org/en/ \"官网\")\n[https://nodejs.org/dist/v5.3.0/node-v5.3.0-x64.msi](https://nodejs.org/dist/v5.3.0/node-v5.3.0-x64.msi \"下载\")\n### 3、安装Hexo框架\n```shell\nnpm install -g hexo\n```\n### 4、安装Hexo插件\n```shell\nnpm install hexo-generator-sitemap --save\nnpm install hexo-generator-feed --save\nnpm install hexo-deployer-git --save\n```\n### 5、创建个人博客\n创建目录，右击后选择git bash，输入：\n```shell\nhexo init\n```\n### 6、运行服务器测试\n```shell\nhexo generate\nhexo server\n```\n本地地址：[http://localhost:4000/](http://localhost:4000/ \"http://localhost:4000/\")\n\n### 7、编辑_config.yml文件增加\n```shell\ndeploy:\n   type: git\n   repo: git@git.coding.net:kinsou/blog.git\n   message: update\n   branch: coding-pages\n```\n### 8、上传Git\n```shell\nhexo d -g\n```\n其他命令：\n```shell\nhexo n #写文章\nhexo g #生成\nhexo d #部署 # 可与hexo g合并为 \n```","slug":"hexo+gitcafe 搭建博客","published":1,"updated":"2018-12-13T08:24:34.074Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsq20038i85nw7dgld3p","content":"<h3 id=\"1、安装Git\"><a href=\"#1、安装Git\" class=\"headerlink\" title=\"1、安装Git\"></a>1、安装Git</h3><p><a href=\"http://git-for-windows.github.io/\" title=\"官网\" target=\"_blank\" rel=\"noopener\">http://git-for-windows.github.io/</a><br><a href=\"https://github.com/git-for-windows/git/releases/download/v2.6.4.windows.1/Git-2.6.4-64-bit.exe\" title=\"Git-2.6.4-64-bit 下载\" target=\"_blank\" rel=\"noopener\">https://github.com/git-for-windows/git/releases/download/v2.6.4.windows.1/Git-2.6.4-64-bit.exe</a></p>\n<h3 id=\"2、安装Node-js\"><a href=\"#2、安装Node-js\" class=\"headerlink\" title=\"2、安装Node.js\"></a>2、安装Node.js</h3><p><a href=\"https://nodejs.org/en/\" title=\"官网\" target=\"_blank\" rel=\"noopener\">https://nodejs.org/en/</a><br><a href=\"https://nodejs.org/dist/v5.3.0/node-v5.3.0-x64.msi\" title=\"下载\" target=\"_blank\" rel=\"noopener\">https://nodejs.org/dist/v5.3.0/node-v5.3.0-x64.msi</a></p>\n<h3 id=\"3、安装Hexo框架\"><a href=\"#3、安装Hexo框架\" class=\"headerlink\" title=\"3、安装Hexo框架\"></a>3、安装Hexo框架</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、安装Hexo插件\"><a href=\"#4、安装Hexo插件\" class=\"headerlink\" title=\"4、安装Hexo插件\"></a>4、安装Hexo插件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-generator-sitemap --save</span><br><span class=\"line\">npm install hexo-generator-feed --save</span><br><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n<h3 id=\"5、创建个人博客\"><a href=\"#5、创建个人博客\" class=\"headerlink\" title=\"5、创建个人博客\"></a>5、创建个人博客</h3><p>创建目录，右击后选择git bash，输入：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo init</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"6、运行服务器测试\"><a href=\"#6、运行服务器测试\" class=\"headerlink\" title=\"6、运行服务器测试\"></a>6、运行服务器测试</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo generate</span><br><span class=\"line\">hexo server</span><br></pre></td></tr></table></figure>\n<p>本地地址：<a href=\"http://localhost:4000/\" title=\"http://localhost:4000/\" target=\"_blank\" rel=\"noopener\">http://localhost:4000/</a></p>\n<h3 id=\"7、编辑-config-yml文件增加\"><a href=\"#7、编辑-config-yml文件增加\" class=\"headerlink\" title=\"7、编辑_config.yml文件增加\"></a>7、编辑_config.yml文件增加</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deploy:</span><br><span class=\"line\">   type: git</span><br><span class=\"line\">   repo: git@git.coding.net:kinsou/blog.git</span><br><span class=\"line\">   message: update</span><br><span class=\"line\">   branch: coding-pages</span><br></pre></td></tr></table></figure>\n<h3 id=\"8、上传Git\"><a href=\"#8、上传Git\" class=\"headerlink\" title=\"8、上传Git\"></a>8、上传Git</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo d -g</span><br></pre></td></tr></table></figure>\n<p>其他命令：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo n #写文章</span><br><span class=\"line\">hexo g #生成</span><br><span class=\"line\">hexo d #部署 # 可与hexo g合并为</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"1、安装Git\"><a href=\"#1、安装Git\" class=\"headerlink\" title=\"1、安装Git\"></a>1、安装Git</h3><p><a href=\"http://git-for-windows.github.io/\" title=\"官网\" target=\"_blank\" rel=\"noopener\">http://git-for-windows.github.io/</a><br><a href=\"https://github.com/git-for-windows/git/releases/download/v2.6.4.windows.1/Git-2.6.4-64-bit.exe\" title=\"Git-2.6.4-64-bit 下载\" target=\"_blank\" rel=\"noopener\">https://github.com/git-for-windows/git/releases/download/v2.6.4.windows.1/Git-2.6.4-64-bit.exe</a></p>\n<h3 id=\"2、安装Node-js\"><a href=\"#2、安装Node-js\" class=\"headerlink\" title=\"2、安装Node.js\"></a>2、安装Node.js</h3><p><a href=\"https://nodejs.org/en/\" title=\"官网\" target=\"_blank\" rel=\"noopener\">https://nodejs.org/en/</a><br><a href=\"https://nodejs.org/dist/v5.3.0/node-v5.3.0-x64.msi\" title=\"下载\" target=\"_blank\" rel=\"noopener\">https://nodejs.org/dist/v5.3.0/node-v5.3.0-x64.msi</a></p>\n<h3 id=\"3、安装Hexo框架\"><a href=\"#3、安装Hexo框架\" class=\"headerlink\" title=\"3、安装Hexo框架\"></a>3、安装Hexo框架</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、安装Hexo插件\"><a href=\"#4、安装Hexo插件\" class=\"headerlink\" title=\"4、安装Hexo插件\"></a>4、安装Hexo插件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-generator-sitemap --save</span><br><span class=\"line\">npm install hexo-generator-feed --save</span><br><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n<h3 id=\"5、创建个人博客\"><a href=\"#5、创建个人博客\" class=\"headerlink\" title=\"5、创建个人博客\"></a>5、创建个人博客</h3><p>创建目录，右击后选择git bash，输入：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo init</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"6、运行服务器测试\"><a href=\"#6、运行服务器测试\" class=\"headerlink\" title=\"6、运行服务器测试\"></a>6、运行服务器测试</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo generate</span><br><span class=\"line\">hexo server</span><br></pre></td></tr></table></figure>\n<p>本地地址：<a href=\"http://localhost:4000/\" title=\"http://localhost:4000/\" target=\"_blank\" rel=\"noopener\">http://localhost:4000/</a></p>\n<h3 id=\"7、编辑-config-yml文件增加\"><a href=\"#7、编辑-config-yml文件增加\" class=\"headerlink\" title=\"7、编辑_config.yml文件增加\"></a>7、编辑_config.yml文件增加</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deploy:</span><br><span class=\"line\">   type: git</span><br><span class=\"line\">   repo: git@git.coding.net:kinsou/blog.git</span><br><span class=\"line\">   message: update</span><br><span class=\"line\">   branch: coding-pages</span><br></pre></td></tr></table></figure>\n<h3 id=\"8、上传Git\"><a href=\"#8、上传Git\" class=\"headerlink\" title=\"8、上传Git\"></a>8、上传Git</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo d -g</span><br></pre></td></tr></table></figure>\n<p>其他命令：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo n #写文章</span><br><span class=\"line\">hexo g #生成</span><br><span class=\"line\">hexo d #部署 # 可与hexo g合并为</span><br></pre></td></tr></table></figure></p>\n"},{"title":"tomcat memcached-session-manager使用spring security序列化问题","date":"2013-05-09T02:40:00.000Z","_content":"## tomcat异常：\n```java\n警告: Could not load session with id 2CD7BCC8414A6DF09EF97E07FBCDABD3-n2 from memcached.\ncom.esotericsoftware.kryo.SerializationException: Unable to deserialize object of type: java.util.concurrent.ConcurrentHashMap\n\tat com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:593)\n\tat com.esotericsoftware.kryo.ObjectBuffer.readObject(ObjectBuffer.java:213)\n\tat de.javakaffee.web.msm.serializer.kryo.KryoTranscoder.deserializeAttributes(KryoTranscoder.java:261)\n\tat de.javakaffee.web.msm.TranscoderService.deserializeAttributes(TranscoderService.java:169)\n\tat de.javakaffee.web.msm.TranscoderService.deserialize(TranscoderService.java:126)\n\tat de.javakaffee.web.msm.MemcachedSessionService.loadFromMemcached(MemcachedSessionService.java:1119)\n\tat de.javakaffee.web.msm.MemcachedSessionService.findSession(MemcachedSessionService.java:597)\n\tat de.javakaffee.web.msm.MemcachedBackupSessionManager.findSession(MemcachedBackupSessionManager.java:216)\n\tat org.apache.catalina.connector.Request.doGetSession(Request.java:2419)\n\tat org.apache.catalina.connector.Request.getSession(Request.java:2157)\n\tat org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:833)\n\tat org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:844)\n\tat org.apache.jasper.runtime.PageContextImpl._initialize(PageContextImpl.java:146)\n\tat org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:124)\n\tat org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:107)\n\tat org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:63)\n\tat org.apache.jsp.login_jsp._jspService(login_jsp.java:61)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat com.autoradio.mz.util.filter.AddHttpHeaderFilter.doFilter(AddHttpHeaderFilter.java:29)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat de.javakaffee.web.msm.RequestTrackingContextValve.invoke(RequestTrackingContextValve.java:99)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n\tat de.javakaffee.web.msm.RequestTrackingHostValve.invoke(RequestTrackingHostValve.java:165)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n\tat java.lang.Thread.run(Thread.java:662)\nCaused by: com.esotericsoftware.kryo.SerializationException: Unable to deserialize object of type: org.springframework.security.core.context.SecurityContextImpl\n\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:571)\n\tat com.esotericsoftware.kryo.serialize.MapSerializer.readObjectData(MapSerializer.java:129)\n\tat com.esotericsoftware.kryo.Serializer.readObject(Serializer.java:61)\n\tat com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:589)\n\t... 43 more\nCaused by: com.esotericsoftware.kryo.SerializationException: Serialization trace:\nauthorities (com.autoradio.mz.security.springsecurity.LoginUser)\nprincipal (org.springframework.security.authentication.UsernamePasswordAuthenticationToken)\nauthentication (org.springframework.security.core.context.SecurityContextImpl)\n\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:238)\n\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:81)\n\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:220)\n\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:81)\n\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:220)\n\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:81)\n\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:566)\n\t... 46 more\nCaused by: java.lang.ClassCastException: org.springframework.security.core.authority.SimpleGrantedAuthority cannot be cast to java.lang.Comparable\n\tat java.util.TreeMap.put(TreeMap.java:542)\n\tat java.util.TreeSet.add(TreeSet.java:238)\n\tat com.esotericsoftware.kryo.serialize.CollectionSerializer.readObjectData(CollectionSerializer.java:113)\n\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:566)\n\tat de.javakaffee.kryoserializers.UnmodifiableCollectionsSerializer.readObjectData(UnmodifiableCollectionsSerializer.java:84)\n\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:220)\n\t... 52 more\n```\n-----------------------------------------------------\n发现 SimpleGrantedAuthority 转换类型错误；\n\n\n## 解决\n可以使用自定义序列化对象沿用java自身的序列化实现：\n\n```java\nimport com.esotericsoftware.kryo.Kryo;\nimport com.esotericsoftware.kryo.serialize.SerializableSerializer;\nimport de.javakaffee.web.msm.serializer.kryo.KryoCustomization;\n\npublic class CustomKryoRegistration implements KryoCustomization {\n\tpublic void customize(Kryo kryo) {\n\t    kryo.register(org.springframework.security.core.userdetails.User.class, new SerializableSerializer());\n\t}\n}\n```\n## XML customConverter添加 CustomKryoRegistration类：\n```xml\n    <Manager className=\"de.javakaffee.web.msm.MemcachedBackupSessionManager\" sticky=\"false\" memcachedNodes=\"n1:192.168.0.124:11211 n2:192.168.0.123:11211\" lockingMode=\"uriPattern:/path1|/path2\" requestUriIgnorePattern=\".*\\.(png|gif|jpg|css|js|ico)$\" sessionBackupAsync=\"false\" transcoderFactoryClass=\"de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory\" customConverter=\"CustomKryoRegistration\" />\n```\n\n## 高效序列化实现请自行编写继承对象：\n```java\ncom.esotericsoftware.kryo.Serializer.java\n```\n","source":"_posts/tomcat memcached-session-manager使用spring security序列化问题.md","raw":"title: tomcat memcached-session-manager使用spring security序列化问题\ntags:\n  - Tomcat\n  - Java\ncategories:\n  - Java\ndate: 2013-05-09 10:40:00\n---\n## tomcat异常：\n```java\n警告: Could not load session with id 2CD7BCC8414A6DF09EF97E07FBCDABD3-n2 from memcached.\ncom.esotericsoftware.kryo.SerializationException: Unable to deserialize object of type: java.util.concurrent.ConcurrentHashMap\n\tat com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:593)\n\tat com.esotericsoftware.kryo.ObjectBuffer.readObject(ObjectBuffer.java:213)\n\tat de.javakaffee.web.msm.serializer.kryo.KryoTranscoder.deserializeAttributes(KryoTranscoder.java:261)\n\tat de.javakaffee.web.msm.TranscoderService.deserializeAttributes(TranscoderService.java:169)\n\tat de.javakaffee.web.msm.TranscoderService.deserialize(TranscoderService.java:126)\n\tat de.javakaffee.web.msm.MemcachedSessionService.loadFromMemcached(MemcachedSessionService.java:1119)\n\tat de.javakaffee.web.msm.MemcachedSessionService.findSession(MemcachedSessionService.java:597)\n\tat de.javakaffee.web.msm.MemcachedBackupSessionManager.findSession(MemcachedBackupSessionManager.java:216)\n\tat org.apache.catalina.connector.Request.doGetSession(Request.java:2419)\n\tat org.apache.catalina.connector.Request.getSession(Request.java:2157)\n\tat org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:833)\n\tat org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:844)\n\tat org.apache.jasper.runtime.PageContextImpl._initialize(PageContextImpl.java:146)\n\tat org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:124)\n\tat org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:107)\n\tat org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:63)\n\tat org.apache.jsp.login_jsp._jspService(login_jsp.java:61)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat com.autoradio.mz.util.filter.AddHttpHeaderFilter.doFilter(AddHttpHeaderFilter.java:29)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat de.javakaffee.web.msm.RequestTrackingContextValve.invoke(RequestTrackingContextValve.java:99)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n\tat de.javakaffee.web.msm.RequestTrackingHostValve.invoke(RequestTrackingHostValve.java:165)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n\tat java.lang.Thread.run(Thread.java:662)\nCaused by: com.esotericsoftware.kryo.SerializationException: Unable to deserialize object of type: org.springframework.security.core.context.SecurityContextImpl\n\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:571)\n\tat com.esotericsoftware.kryo.serialize.MapSerializer.readObjectData(MapSerializer.java:129)\n\tat com.esotericsoftware.kryo.Serializer.readObject(Serializer.java:61)\n\tat com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:589)\n\t... 43 more\nCaused by: com.esotericsoftware.kryo.SerializationException: Serialization trace:\nauthorities (com.autoradio.mz.security.springsecurity.LoginUser)\nprincipal (org.springframework.security.authentication.UsernamePasswordAuthenticationToken)\nauthentication (org.springframework.security.core.context.SecurityContextImpl)\n\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:238)\n\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:81)\n\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:220)\n\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:81)\n\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:220)\n\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:81)\n\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:566)\n\t... 46 more\nCaused by: java.lang.ClassCastException: org.springframework.security.core.authority.SimpleGrantedAuthority cannot be cast to java.lang.Comparable\n\tat java.util.TreeMap.put(TreeMap.java:542)\n\tat java.util.TreeSet.add(TreeSet.java:238)\n\tat com.esotericsoftware.kryo.serialize.CollectionSerializer.readObjectData(CollectionSerializer.java:113)\n\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:566)\n\tat de.javakaffee.kryoserializers.UnmodifiableCollectionsSerializer.readObjectData(UnmodifiableCollectionsSerializer.java:84)\n\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:220)\n\t... 52 more\n```\n-----------------------------------------------------\n发现 SimpleGrantedAuthority 转换类型错误；\n\n\n## 解决\n可以使用自定义序列化对象沿用java自身的序列化实现：\n\n```java\nimport com.esotericsoftware.kryo.Kryo;\nimport com.esotericsoftware.kryo.serialize.SerializableSerializer;\nimport de.javakaffee.web.msm.serializer.kryo.KryoCustomization;\n\npublic class CustomKryoRegistration implements KryoCustomization {\n\tpublic void customize(Kryo kryo) {\n\t    kryo.register(org.springframework.security.core.userdetails.User.class, new SerializableSerializer());\n\t}\n}\n```\n## XML customConverter添加 CustomKryoRegistration类：\n```xml\n    <Manager className=\"de.javakaffee.web.msm.MemcachedBackupSessionManager\" sticky=\"false\" memcachedNodes=\"n1:192.168.0.124:11211 n2:192.168.0.123:11211\" lockingMode=\"uriPattern:/path1|/path2\" requestUriIgnorePattern=\".*\\.(png|gif|jpg|css|js|ico)$\" sessionBackupAsync=\"false\" transcoderFactoryClass=\"de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory\" customConverter=\"CustomKryoRegistration\" />\n```\n\n## 高效序列化实现请自行编写继承对象：\n```java\ncom.esotericsoftware.kryo.Serializer.java\n```\n","slug":"tomcat memcached-session-manager使用spring security序列化问题","published":1,"updated":"2018-12-13T08:24:34.082Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsq3003ai85n5tn49sc0","content":"<h2 id=\"tomcat异常：\"><a href=\"#tomcat异常：\" class=\"headerlink\" title=\"tomcat异常：\"></a>tomcat异常：</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">警告: Could not load session with id <span class=\"number\">2</span>CD7BCC8414A6DF09EF97E07FBCDABD3-n2 from memcached.</span><br><span class=\"line\">com.esotericsoftware.kryo.SerializationException: Unable to deserialize object of type: java.util.concurrent.ConcurrentHashMap</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:<span class=\"number\">593</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.ObjectBuffer.readObject(ObjectBuffer.java:<span class=\"number\">213</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.serializer.kryo.KryoTranscoder.deserializeAttributes(KryoTranscoder.java:<span class=\"number\">261</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.TranscoderService.deserializeAttributes(TranscoderService.java:<span class=\"number\">169</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.TranscoderService.deserialize(TranscoderService.java:<span class=\"number\">126</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.MemcachedSessionService.loadFromMemcached(MemcachedSessionService.java:<span class=\"number\">1119</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.MemcachedSessionService.findSession(MemcachedSessionService.java:<span class=\"number\">597</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.MemcachedBackupSessionManager.findSession(MemcachedBackupSessionManager.java:<span class=\"number\">216</span>)</span><br><span class=\"line\">\tat org.apache.catalina.connector.Request.doGetSession(Request.java:<span class=\"number\">2419</span>)</span><br><span class=\"line\">\tat org.apache.catalina.connector.Request.getSession(Request.java:<span class=\"number\">2157</span>)</span><br><span class=\"line\">\tat org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:<span class=\"number\">833</span>)</span><br><span class=\"line\">\tat org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:<span class=\"number\">844</span>)</span><br><span class=\"line\">\tat org.apache.jasper.runtime.PageContextImpl._initialize(PageContextImpl.java:<span class=\"number\">146</span>)</span><br><span class=\"line\">\tat org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:<span class=\"number\">124</span>)</span><br><span class=\"line\">\tat org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:<span class=\"number\">107</span>)</span><br><span class=\"line\">\tat org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:<span class=\"number\">63</span>)</span><br><span class=\"line\">\tat org.apache.jsp.login_jsp._jspService(login_jsp.java:<span class=\"number\">61</span>)</span><br><span class=\"line\">\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:<span class=\"number\">70</span>)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:<span class=\"number\">717</span>)</span><br><span class=\"line\">\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:<span class=\"number\">388</span>)</span><br><span class=\"line\">\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:<span class=\"number\">313</span>)</span><br><span class=\"line\">\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:<span class=\"number\">260</span>)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:<span class=\"number\">717</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class=\"number\">290</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class=\"number\">206</span>)</span><br><span class=\"line\">\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:<span class=\"number\">88</span>)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class=\"number\">76</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class=\"number\">235</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class=\"number\">206</span>)</span><br><span class=\"line\">\tat com.autoradio.mz.util.filter.AddHttpHeaderFilter.doFilter(AddHttpHeaderFilter.java:<span class=\"number\">29</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class=\"number\">235</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class=\"number\">206</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:<span class=\"number\">233</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:<span class=\"number\">191</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.RequestTrackingContextValve.invoke(RequestTrackingContextValve.java:<span class=\"number\">99</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:<span class=\"number\">127</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.RequestTrackingHostValve.invoke(RequestTrackingHostValve.java:<span class=\"number\">165</span>)</span><br><span class=\"line\">\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:<span class=\"number\">102</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:<span class=\"number\">109</span>)</span><br><span class=\"line\">\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:<span class=\"number\">293</span>)</span><br><span class=\"line\">\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:<span class=\"number\">859</span>)</span><br><span class=\"line\">\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:<span class=\"number\">602</span>)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:<span class=\"number\">489</span>)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:<span class=\"number\">662</span>)</span><br><span class=\"line\">Caused by: com.esotericsoftware.kryo.SerializationException: Unable to deserialize object of type: org.springframework.security.core.context.SecurityContextImpl</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:<span class=\"number\">571</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.MapSerializer.readObjectData(MapSerializer.java:<span class=\"number\">129</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Serializer.readObject(Serializer.java:<span class=\"number\">61</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:<span class=\"number\">589</span>)</span><br><span class=\"line\">\t... <span class=\"number\">43</span> more</span><br><span class=\"line\">Caused by: com.esotericsoftware.kryo.SerializationException: Serialization trace:</span><br><span class=\"line\">authorities (com.autoradio.mz.security.springsecurity.LoginUser)</span><br><span class=\"line\">principal (org.springframework.security.authentication.UsernamePasswordAuthenticationToken)</span><br><span class=\"line\">authentication (org.springframework.security.core.context.SecurityContextImpl)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:<span class=\"number\">238</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:<span class=\"number\">81</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:<span class=\"number\">220</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:<span class=\"number\">81</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:<span class=\"number\">220</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:<span class=\"number\">81</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:<span class=\"number\">566</span>)</span><br><span class=\"line\">\t... <span class=\"number\">46</span> more</span><br><span class=\"line\">Caused by: java.lang.ClassCastException: org.springframework.security.core.authority.SimpleGrantedAuthority cannot be cast to java.lang.Comparable</span><br><span class=\"line\">\tat java.util.TreeMap.put(TreeMap.java:<span class=\"number\">542</span>)</span><br><span class=\"line\">\tat java.util.TreeSet.add(TreeSet.java:<span class=\"number\">238</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.CollectionSerializer.readObjectData(CollectionSerializer.java:<span class=\"number\">113</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:<span class=\"number\">566</span>)</span><br><span class=\"line\">\tat de.javakaffee.kryoserializers.UnmodifiableCollectionsSerializer.readObjectData(UnmodifiableCollectionsSerializer.java:<span class=\"number\">84</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:<span class=\"number\">220</span>)</span><br><span class=\"line\">\t... <span class=\"number\">52</span> more</span><br></pre></td></tr></table></figure>\n<hr>\n<p>发现 SimpleGrantedAuthority 转换类型错误；</p>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><p>可以使用自定义序列化对象沿用java自身的序列化实现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> com.esotericsoftware.kryo.Kryo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.esotericsoftware.kryo.serialize.SerializableSerializer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> de.javakaffee.web.msm.serializer.kryo.KryoCustomization;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CustomKryoRegistration</span> <span class=\"keyword\">implements</span> <span class=\"title\">KryoCustomization</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">customize</span><span class=\"params\">(Kryo kryo)</span> </span>&#123;</span><br><span class=\"line\">\t    kryo.register(org.springframework.security.core.userdetails.User.class, <span class=\"keyword\">new</span> SerializableSerializer());</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"XML-customConverter添加-CustomKryoRegistration类：\"><a href=\"#XML-customConverter添加-CustomKryoRegistration类：\" class=\"headerlink\" title=\"XML customConverter添加 CustomKryoRegistration类：\"></a>XML customConverter添加 CustomKryoRegistration类：</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Manager</span> <span class=\"attr\">className</span>=<span class=\"string\">\"de.javakaffee.web.msm.MemcachedBackupSessionManager\"</span> <span class=\"attr\">sticky</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">memcachedNodes</span>=<span class=\"string\">\"n1:192.168.0.124:11211 n2:192.168.0.123:11211\"</span> <span class=\"attr\">lockingMode</span>=<span class=\"string\">\"uriPattern:/path1|/path2\"</span> <span class=\"attr\">requestUriIgnorePattern</span>=<span class=\"string\">\".*\\.(png|gif|jpg|css|js|ico)$\"</span> <span class=\"attr\">sessionBackupAsync</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">transcoderFactoryClass</span>=<span class=\"string\">\"de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory\"</span> <span class=\"attr\">customConverter</span>=<span class=\"string\">\"CustomKryoRegistration\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"高效序列化实现请自行编写继承对象：\"><a href=\"#高效序列化实现请自行编写继承对象：\" class=\"headerlink\" title=\"高效序列化实现请自行编写继承对象：\"></a>高效序列化实现请自行编写继承对象：</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">com.esotericsoftware.kryo.Serializer.java</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"tomcat异常：\"><a href=\"#tomcat异常：\" class=\"headerlink\" title=\"tomcat异常：\"></a>tomcat异常：</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">警告: Could not load session with id <span class=\"number\">2</span>CD7BCC8414A6DF09EF97E07FBCDABD3-n2 from memcached.</span><br><span class=\"line\">com.esotericsoftware.kryo.SerializationException: Unable to deserialize object of type: java.util.concurrent.ConcurrentHashMap</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:<span class=\"number\">593</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.ObjectBuffer.readObject(ObjectBuffer.java:<span class=\"number\">213</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.serializer.kryo.KryoTranscoder.deserializeAttributes(KryoTranscoder.java:<span class=\"number\">261</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.TranscoderService.deserializeAttributes(TranscoderService.java:<span class=\"number\">169</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.TranscoderService.deserialize(TranscoderService.java:<span class=\"number\">126</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.MemcachedSessionService.loadFromMemcached(MemcachedSessionService.java:<span class=\"number\">1119</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.MemcachedSessionService.findSession(MemcachedSessionService.java:<span class=\"number\">597</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.MemcachedBackupSessionManager.findSession(MemcachedBackupSessionManager.java:<span class=\"number\">216</span>)</span><br><span class=\"line\">\tat org.apache.catalina.connector.Request.doGetSession(Request.java:<span class=\"number\">2419</span>)</span><br><span class=\"line\">\tat org.apache.catalina.connector.Request.getSession(Request.java:<span class=\"number\">2157</span>)</span><br><span class=\"line\">\tat org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:<span class=\"number\">833</span>)</span><br><span class=\"line\">\tat org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:<span class=\"number\">844</span>)</span><br><span class=\"line\">\tat org.apache.jasper.runtime.PageContextImpl._initialize(PageContextImpl.java:<span class=\"number\">146</span>)</span><br><span class=\"line\">\tat org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:<span class=\"number\">124</span>)</span><br><span class=\"line\">\tat org.apache.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:<span class=\"number\">107</span>)</span><br><span class=\"line\">\tat org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:<span class=\"number\">63</span>)</span><br><span class=\"line\">\tat org.apache.jsp.login_jsp._jspService(login_jsp.java:<span class=\"number\">61</span>)</span><br><span class=\"line\">\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:<span class=\"number\">70</span>)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:<span class=\"number\">717</span>)</span><br><span class=\"line\">\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:<span class=\"number\">388</span>)</span><br><span class=\"line\">\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:<span class=\"number\">313</span>)</span><br><span class=\"line\">\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:<span class=\"number\">260</span>)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:<span class=\"number\">717</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class=\"number\">290</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class=\"number\">206</span>)</span><br><span class=\"line\">\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:<span class=\"number\">88</span>)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:<span class=\"number\">76</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class=\"number\">235</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class=\"number\">206</span>)</span><br><span class=\"line\">\tat com.autoradio.mz.util.filter.AddHttpHeaderFilter.doFilter(AddHttpHeaderFilter.java:<span class=\"number\">29</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class=\"number\">235</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class=\"number\">206</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:<span class=\"number\">233</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:<span class=\"number\">191</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.RequestTrackingContextValve.invoke(RequestTrackingContextValve.java:<span class=\"number\">99</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:<span class=\"number\">127</span>)</span><br><span class=\"line\">\tat de.javakaffee.web.msm.RequestTrackingHostValve.invoke(RequestTrackingHostValve.java:<span class=\"number\">165</span>)</span><br><span class=\"line\">\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:<span class=\"number\">102</span>)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:<span class=\"number\">109</span>)</span><br><span class=\"line\">\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:<span class=\"number\">293</span>)</span><br><span class=\"line\">\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:<span class=\"number\">859</span>)</span><br><span class=\"line\">\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:<span class=\"number\">602</span>)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:<span class=\"number\">489</span>)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:<span class=\"number\">662</span>)</span><br><span class=\"line\">Caused by: com.esotericsoftware.kryo.SerializationException: Unable to deserialize object of type: org.springframework.security.core.context.SecurityContextImpl</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:<span class=\"number\">571</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.MapSerializer.readObjectData(MapSerializer.java:<span class=\"number\">129</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Serializer.readObject(Serializer.java:<span class=\"number\">61</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:<span class=\"number\">589</span>)</span><br><span class=\"line\">\t... <span class=\"number\">43</span> more</span><br><span class=\"line\">Caused by: com.esotericsoftware.kryo.SerializationException: Serialization trace:</span><br><span class=\"line\">authorities (com.autoradio.mz.security.springsecurity.LoginUser)</span><br><span class=\"line\">principal (org.springframework.security.authentication.UsernamePasswordAuthenticationToken)</span><br><span class=\"line\">authentication (org.springframework.security.core.context.SecurityContextImpl)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:<span class=\"number\">238</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:<span class=\"number\">81</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:<span class=\"number\">220</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:<span class=\"number\">81</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:<span class=\"number\">220</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.ReferenceFieldSerializer.readObjectData(ReferenceFieldSerializer.java:<span class=\"number\">81</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:<span class=\"number\">566</span>)</span><br><span class=\"line\">\t... <span class=\"number\">46</span> more</span><br><span class=\"line\">Caused by: java.lang.ClassCastException: org.springframework.security.core.authority.SimpleGrantedAuthority cannot be cast to java.lang.Comparable</span><br><span class=\"line\">\tat java.util.TreeMap.put(TreeMap.java:<span class=\"number\">542</span>)</span><br><span class=\"line\">\tat java.util.TreeSet.add(TreeSet.java:<span class=\"number\">238</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.CollectionSerializer.readObjectData(CollectionSerializer.java:<span class=\"number\">113</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:<span class=\"number\">566</span>)</span><br><span class=\"line\">\tat de.javakaffee.kryoserializers.UnmodifiableCollectionsSerializer.readObjectData(UnmodifiableCollectionsSerializer.java:<span class=\"number\">84</span>)</span><br><span class=\"line\">\tat com.esotericsoftware.kryo.serialize.FieldSerializer.readObjectData(FieldSerializer.java:<span class=\"number\">220</span>)</span><br><span class=\"line\">\t... <span class=\"number\">52</span> more</span><br></pre></td></tr></table></figure>\n<hr>\n<p>发现 SimpleGrantedAuthority 转换类型错误；</p>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><p>可以使用自定义序列化对象沿用java自身的序列化实现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> com.esotericsoftware.kryo.Kryo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.esotericsoftware.kryo.serialize.SerializableSerializer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> de.javakaffee.web.msm.serializer.kryo.KryoCustomization;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CustomKryoRegistration</span> <span class=\"keyword\">implements</span> <span class=\"title\">KryoCustomization</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">customize</span><span class=\"params\">(Kryo kryo)</span> </span>&#123;</span><br><span class=\"line\">\t    kryo.register(org.springframework.security.core.userdetails.User.class, <span class=\"keyword\">new</span> SerializableSerializer());</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"XML-customConverter添加-CustomKryoRegistration类：\"><a href=\"#XML-customConverter添加-CustomKryoRegistration类：\" class=\"headerlink\" title=\"XML customConverter添加 CustomKryoRegistration类：\"></a>XML customConverter添加 CustomKryoRegistration类：</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Manager</span> <span class=\"attr\">className</span>=<span class=\"string\">\"de.javakaffee.web.msm.MemcachedBackupSessionManager\"</span> <span class=\"attr\">sticky</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">memcachedNodes</span>=<span class=\"string\">\"n1:192.168.0.124:11211 n2:192.168.0.123:11211\"</span> <span class=\"attr\">lockingMode</span>=<span class=\"string\">\"uriPattern:/path1|/path2\"</span> <span class=\"attr\">requestUriIgnorePattern</span>=<span class=\"string\">\".*\\.(png|gif|jpg|css|js|ico)$\"</span> <span class=\"attr\">sessionBackupAsync</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">transcoderFactoryClass</span>=<span class=\"string\">\"de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory\"</span> <span class=\"attr\">customConverter</span>=<span class=\"string\">\"CustomKryoRegistration\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"高效序列化实现请自行编写继承对象：\"><a href=\"#高效序列化实现请自行编写继承对象：\" class=\"headerlink\" title=\"高效序列化实现请自行编写继承对象：\"></a>高效序列化实现请自行编写继承对象：</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">com.esotericsoftware.kryo.Serializer.java</span><br></pre></td></tr></table></figure>\n"},{"title":"wechat-javax.net.ssl.SSLException异常","date":"2015-02-02T10:27:00.000Z","_content":"## 在使用微信公众平台开发模式(JAVA) SDK 发现调用https的异常：\n```\n/**\n * 微信公众平台开发模式(JAVA) SDK\n * (c) 2012-2013 ____′↘夏悸 <wmails@126.cn>, MIT Licensed\n * http://www.jeasyuicn.com/wechat\n */\n```\n```java\njava.util.concurrent.ExecutionException: java.net.ConnectException: Received fatal alert: bad_record_mac to https://api.weixin.qq.com/cgi-bin/user/info?openid=#&access_token=#\n\tat com.ning.http.client.providers.netty.NettyResponseFuture.abort(NettyResponseFuture.java:342)\n\tat com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:108)\n\tat org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:427)\n\tat org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:413)\n\tat org.jboss.netty.channel.DefaultChannelFuture.setFailure(DefaultChannelFuture.java:380)\n\tat org.jboss.netty.handler.ssl.SslHandler.setHandshakeFailure(SslHandler.java:1566)\n\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1368)\n\tat org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:917)\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:425)\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)\n\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\n\tat org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:318)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n\tat org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n\tat org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\tat java.lang.Thread.run(Thread.java:744)\nCaused by: java.net.ConnectException: Received fatal alert: bad_record_mac to https://api.weixin.qq.com/cgi-bin/user/info?openid=#&access_token=#\n\tat com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:104)\n\t... 23 more\nCaused by: javax.net.ssl.SSLException: Received fatal alert: bad_record_mac\n\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:208)\n\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1619)\n\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1587)\n\tat sun.security.ssl.SSLEngineImpl.recvAlert(SSLEngineImpl.java:1756)\n\tat sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1060)\n\tat sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:884)\n\tat sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)\n\tat javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\n\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1282)\n\tat org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:917)\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:425)\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\n\tat org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:318)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n\t... 3 more\n```\n\n## 解决方法com.gson.util.HttpKit.java 修改：\n### 原内容\n```java\n        AsyncHttpClient http = new AsyncHttpClient();\n        AsyncHttpClient.BoundRequestBuilder builder = http.prepareGet(url);\n```\n\n### 修改为：\n```java\n        AsyncHttpClient http = new AsyncHttpClient(new ApacheAsyncHttpProvider (new AsyncHttpClientConfig.Builder().build()));\n        AsyncHttpClient.BoundRequestBuilder builder = http.prepareGet(url);\n```","source":"_posts/wechat-javax.net.ssl.SSLException异常.md","raw":"title: wechat-javax.net.ssl.SSLException异常\ntags:\n  - Java\n  - Wechat\ncategories:\n  - Java\ndate: 2015-02-02 18:27:00\n---\n## 在使用微信公众平台开发模式(JAVA) SDK 发现调用https的异常：\n```\n/**\n * 微信公众平台开发模式(JAVA) SDK\n * (c) 2012-2013 ____′↘夏悸 <wmails@126.cn>, MIT Licensed\n * http://www.jeasyuicn.com/wechat\n */\n```\n```java\njava.util.concurrent.ExecutionException: java.net.ConnectException: Received fatal alert: bad_record_mac to https://api.weixin.qq.com/cgi-bin/user/info?openid=#&access_token=#\n\tat com.ning.http.client.providers.netty.NettyResponseFuture.abort(NettyResponseFuture.java:342)\n\tat com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:108)\n\tat org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:427)\n\tat org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:413)\n\tat org.jboss.netty.channel.DefaultChannelFuture.setFailure(DefaultChannelFuture.java:380)\n\tat org.jboss.netty.handler.ssl.SslHandler.setHandshakeFailure(SslHandler.java:1566)\n\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1368)\n\tat org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:917)\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:425)\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)\n\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\n\tat org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:318)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n\tat org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n\tat org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\tat java.lang.Thread.run(Thread.java:744)\nCaused by: java.net.ConnectException: Received fatal alert: bad_record_mac to https://api.weixin.qq.com/cgi-bin/user/info?openid=#&access_token=#\n\tat com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:104)\n\t... 23 more\nCaused by: javax.net.ssl.SSLException: Received fatal alert: bad_record_mac\n\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:208)\n\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1619)\n\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1587)\n\tat sun.security.ssl.SSLEngineImpl.recvAlert(SSLEngineImpl.java:1756)\n\tat sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1060)\n\tat sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:884)\n\tat sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)\n\tat javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)\n\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1282)\n\tat org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:917)\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:425)\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\n\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\n\tat org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:318)\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n\t... 3 more\n```\n\n## 解决方法com.gson.util.HttpKit.java 修改：\n### 原内容\n```java\n        AsyncHttpClient http = new AsyncHttpClient();\n        AsyncHttpClient.BoundRequestBuilder builder = http.prepareGet(url);\n```\n\n### 修改为：\n```java\n        AsyncHttpClient http = new AsyncHttpClient(new ApacheAsyncHttpProvider (new AsyncHttpClientConfig.Builder().build()));\n        AsyncHttpClient.BoundRequestBuilder builder = http.prepareGet(url);\n```","slug":"wechat-javax.net.ssl.SSLException异常","published":1,"updated":"2018-12-13T08:24:34.085Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsq5003ei85nejepamuj","content":"<h2 id=\"在使用微信公众平台开发模式-JAVA-SDK-发现调用https的异常：\"><a href=\"#在使用微信公众平台开发模式-JAVA-SDK-发现调用https的异常：\" class=\"headerlink\" title=\"在使用微信公众平台开发模式(JAVA) SDK 发现调用https的异常：\"></a>在使用微信公众平台开发模式(JAVA) SDK 发现调用https的异常：</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * 微信公众平台开发模式(JAVA) SDK</span><br><span class=\"line\"> * (c) 2012-2013 ____′↘夏悸 &lt;wmails@126.cn&gt;, MIT Licensed</span><br><span class=\"line\"> * http://www.jeasyuicn.com/wechat</span><br><span class=\"line\"> */</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java.util.concurrent.ExecutionException: java.net.ConnectException: Received fatal alert: bad_record_mac to https:<span class=\"comment\">//api.weixin.qq.com/cgi-bin/user/info?openid=#&amp;access_token=#</span></span><br><span class=\"line\">\tat com.ning.http.client.providers.netty.NettyResponseFuture.abort(NettyResponseFuture.java:<span class=\"number\">342</span>)</span><br><span class=\"line\">\tat com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:<span class=\"number\">108</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:<span class=\"number\">427</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:<span class=\"number\">413</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.DefaultChannelFuture.setFailure(DefaultChannelFuture.java:<span class=\"number\">380</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.setHandshakeFailure(SslHandler.java:<span class=\"number\">1566</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:<span class=\"number\">1368</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:<span class=\"number\">917</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:<span class=\"number\">425</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:<span class=\"number\">303</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:<span class=\"number\">70</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:<span class=\"number\">564</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:<span class=\"number\">559</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:<span class=\"number\">268</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:<span class=\"number\">255</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:<span class=\"number\">88</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:<span class=\"number\">108</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:<span class=\"number\">318</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:<span class=\"number\">89</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:<span class=\"number\">178</span>)</span><br><span class=\"line\">\tat org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:<span class=\"number\">108</span>)</span><br><span class=\"line\">\tat org.jboss.netty.util.internal.DeadLockProofWorker$<span class=\"number\">1</span>.run(DeadLockProofWorker.java:<span class=\"number\">42</span>)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:<span class=\"number\">1145</span>)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:<span class=\"number\">615</span>)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:<span class=\"number\">744</span>)</span><br><span class=\"line\">Caused by: java.net.ConnectException: Received fatal alert: bad_record_mac to https:<span class=\"comment\">//api.weixin.qq.com/cgi-bin/user/info?openid=#&amp;access_token=#</span></span><br><span class=\"line\">\tat com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:<span class=\"number\">104</span>)</span><br><span class=\"line\">\t... <span class=\"number\">23</span> more</span><br><span class=\"line\">Caused by: javax.net.ssl.SSLException: Received fatal alert: bad_record_mac</span><br><span class=\"line\">\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:<span class=\"number\">208</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:<span class=\"number\">1619</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:<span class=\"number\">1587</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.recvAlert(SSLEngineImpl.java:<span class=\"number\">1756</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:<span class=\"number\">1060</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:<span class=\"number\">884</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:<span class=\"number\">758</span>)</span><br><span class=\"line\">\tat javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:<span class=\"number\">624</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:<span class=\"number\">1282</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:<span class=\"number\">917</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:<span class=\"number\">425</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:<span class=\"number\">303</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:<span class=\"number\">268</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:<span class=\"number\">255</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:<span class=\"number\">88</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:<span class=\"number\">108</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:<span class=\"number\">318</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:<span class=\"number\">89</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:<span class=\"number\">178</span>)</span><br><span class=\"line\">\t... <span class=\"number\">3</span> more</span><br></pre></td></tr></table></figure>\n<h2 id=\"解决方法com-gson-util-HttpKit-java-修改：\"><a href=\"#解决方法com-gson-util-HttpKit-java-修改：\" class=\"headerlink\" title=\"解决方法com.gson.util.HttpKit.java 修改：\"></a>解决方法com.gson.util.HttpKit.java 修改：</h2><h3 id=\"原内容\"><a href=\"#原内容\" class=\"headerlink\" title=\"原内容\"></a>原内容</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AsyncHttpClient http = <span class=\"keyword\">new</span> AsyncHttpClient();</span><br><span class=\"line\">AsyncHttpClient.BoundRequestBuilder builder = http.prepareGet(url);</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改为：\"><a href=\"#修改为：\" class=\"headerlink\" title=\"修改为：\"></a>修改为：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AsyncHttpClient http = <span class=\"keyword\">new</span> AsyncHttpClient(<span class=\"keyword\">new</span> ApacheAsyncHttpProvider (<span class=\"keyword\">new</span> AsyncHttpClientConfig.Builder().build()));</span><br><span class=\"line\">AsyncHttpClient.BoundRequestBuilder builder = http.prepareGet(url);</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"在使用微信公众平台开发模式-JAVA-SDK-发现调用https的异常：\"><a href=\"#在使用微信公众平台开发模式-JAVA-SDK-发现调用https的异常：\" class=\"headerlink\" title=\"在使用微信公众平台开发模式(JAVA) SDK 发现调用https的异常：\"></a>在使用微信公众平台开发模式(JAVA) SDK 发现调用https的异常：</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * 微信公众平台开发模式(JAVA) SDK</span><br><span class=\"line\"> * (c) 2012-2013 ____′↘夏悸 &lt;wmails@126.cn&gt;, MIT Licensed</span><br><span class=\"line\"> * http://www.jeasyuicn.com/wechat</span><br><span class=\"line\"> */</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java.util.concurrent.ExecutionException: java.net.ConnectException: Received fatal alert: bad_record_mac to https:<span class=\"comment\">//api.weixin.qq.com/cgi-bin/user/info?openid=#&amp;access_token=#</span></span><br><span class=\"line\">\tat com.ning.http.client.providers.netty.NettyResponseFuture.abort(NettyResponseFuture.java:<span class=\"number\">342</span>)</span><br><span class=\"line\">\tat com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:<span class=\"number\">108</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:<span class=\"number\">427</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:<span class=\"number\">413</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.DefaultChannelFuture.setFailure(DefaultChannelFuture.java:<span class=\"number\">380</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.setHandshakeFailure(SslHandler.java:<span class=\"number\">1566</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:<span class=\"number\">1368</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:<span class=\"number\">917</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:<span class=\"number\">425</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:<span class=\"number\">303</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:<span class=\"number\">70</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:<span class=\"number\">564</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:<span class=\"number\">559</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:<span class=\"number\">268</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:<span class=\"number\">255</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:<span class=\"number\">88</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:<span class=\"number\">108</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:<span class=\"number\">318</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:<span class=\"number\">89</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:<span class=\"number\">178</span>)</span><br><span class=\"line\">\tat org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:<span class=\"number\">108</span>)</span><br><span class=\"line\">\tat org.jboss.netty.util.internal.DeadLockProofWorker$<span class=\"number\">1</span>.run(DeadLockProofWorker.java:<span class=\"number\">42</span>)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:<span class=\"number\">1145</span>)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:<span class=\"number\">615</span>)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:<span class=\"number\">744</span>)</span><br><span class=\"line\">Caused by: java.net.ConnectException: Received fatal alert: bad_record_mac to https:<span class=\"comment\">//api.weixin.qq.com/cgi-bin/user/info?openid=#&amp;access_token=#</span></span><br><span class=\"line\">\tat com.ning.http.client.providers.netty.NettyConnectListener.operationComplete(NettyConnectListener.java:<span class=\"number\">104</span>)</span><br><span class=\"line\">\t... <span class=\"number\">23</span> more</span><br><span class=\"line\">Caused by: javax.net.ssl.SSLException: Received fatal alert: bad_record_mac</span><br><span class=\"line\">\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:<span class=\"number\">208</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:<span class=\"number\">1619</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:<span class=\"number\">1587</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.recvAlert(SSLEngineImpl.java:<span class=\"number\">1756</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:<span class=\"number\">1060</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:<span class=\"number\">884</span>)</span><br><span class=\"line\">\tat sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:<span class=\"number\">758</span>)</span><br><span class=\"line\">\tat javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:<span class=\"number\">624</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:<span class=\"number\">1282</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:<span class=\"number\">917</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:<span class=\"number\">425</span>)</span><br><span class=\"line\">\tat org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:<span class=\"number\">303</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:<span class=\"number\">268</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:<span class=\"number\">255</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:<span class=\"number\">88</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:<span class=\"number\">108</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:<span class=\"number\">318</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:<span class=\"number\">89</span>)</span><br><span class=\"line\">\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:<span class=\"number\">178</span>)</span><br><span class=\"line\">\t... <span class=\"number\">3</span> more</span><br></pre></td></tr></table></figure>\n<h2 id=\"解决方法com-gson-util-HttpKit-java-修改：\"><a href=\"#解决方法com-gson-util-HttpKit-java-修改：\" class=\"headerlink\" title=\"解决方法com.gson.util.HttpKit.java 修改：\"></a>解决方法com.gson.util.HttpKit.java 修改：</h2><h3 id=\"原内容\"><a href=\"#原内容\" class=\"headerlink\" title=\"原内容\"></a>原内容</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AsyncHttpClient http = <span class=\"keyword\">new</span> AsyncHttpClient();</span><br><span class=\"line\">AsyncHttpClient.BoundRequestBuilder builder = http.prepareGet(url);</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改为：\"><a href=\"#修改为：\" class=\"headerlink\" title=\"修改为：\"></a>修改为：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AsyncHttpClient http = <span class=\"keyword\">new</span> AsyncHttpClient(<span class=\"keyword\">new</span> ApacheAsyncHttpProvider (<span class=\"keyword\">new</span> AsyncHttpClientConfig.Builder().build()));</span><br><span class=\"line\">AsyncHttpClient.BoundRequestBuilder builder = http.prepareGet(url);</span><br></pre></td></tr></table></figure>"},{"title":"安装Hadoop2.5.0","date":"2014-08-27T10:27:00.000Z","_content":"## 安装Hadoop，单机模式。\n\n### 1、免密码ssh设置：\n[免密码ssh设置](/2014/08/27/ubuntu使用ssh-keygen设置ssh无密码登录/ \"免密码ssh设置\")\n\n### 2、JDK安装配置：\n[JDK安装配置](/2014/08/27/ubuntu%20安装%20jdk/ \"JDK安装配置\")\n\n### 3、我们把下载好的hadoop-2.5.0.tar.gz解压形成/usr/local/hadoop-2.5.0/并配置环境变量，同JAVA_HOME类似，在/etc/profile文件中添加如下配置：\n```shell\n#set hadoop environment\nexport HADOOP_HOME=/usr/local/hadoop-2.5.0/\nexport PATH=$PATH:$HADOOP_HOME/bin\nexport PATH=$PATH:$HADOOP_HOME/sbin\n```\n\n### 4、修改配置文件\n\n修改的文件都在/usr/local/hadoop-2.5.0/etc/hadoop下：\n\ncore-site.xml、hdfs-site.xml、yarn-site.xml 、mapred-site.xml。\n\n配置文件的添加和修改都在<configuration></configuration> 中\n\n#### core-site.xml\n```xml\n<property>\n  <name>fs.defaultFS</name>\n  <value>hdfs://localhost:9000</value>\n</property>\n\n<property>\n  <name>hadoop.tmp.dir</name>\n  <value>/data/hadoop/hadoop_tmp</value>\n</property>\n```\n添加hdfs的指定URL路径，由于是伪分布模式，所以配置的是本机IP ，可为真实ip、localhost。\n\n#### hdfs-site.xml\n```xml\n<property>\n  <name>dfs.namenode.name.dir</name>\n  <value>/data/hadoop/namenode</value>\n</property>\n\n<property>\n  <name>dfs.datanode.data.dir</name>\n  <value>/data/hadoop/datanode</value>\n</property>\n\n<property>\n  <name>dfs.replication</name>\n  <value>1</value>\n</property>\n```\n主要是对namenode 和 datanode 存储路径的设置。为了便于管理，最好配置一下。\n\n#### mapred-site.xml\n```xml\n<property>\n  <name>mapreduce.framework.name</name>\n  <value>yarn</value>\n</property>\n```\nhadoop2.0有了yarn，所以原来的mapred配置都转向yarn-site.xml文件中了，这里也就指定yarn。\n\n#### yarn-site.xml \n\n为了简单，快速做测试，使用默认的即可。\n\n### 5、启动hadoop\n\n启动的文件都是 sbin下，bin下的都是命令。\n\n使用命令cd $HADOOP_HOME切换到该安装目录下\n\n首先格式化 namenode\n```shell\nbin/hdfs namenode -format\n```\n确定不报错，且出现\n```shell\n14/08/27 18:19:49 INFO util.GSet: capacity      = 2^15 = 32768 entries\n14/08/27 18:19:49 INFO namenode.NNConf: ACLs enabled? false\n14/08/27 18:19:49 INFO namenode.NNConf: XAttrs enabled? true\n14/08/27 18:19:49 INFO namenode.NNConf: Maximum size of an xattr: 16384\n14/08/27 18:19:49 INFO namenode.FSImage: Allocated new BlockPoolId: BP-409433172-127.0.1.1-1409134789102\n14/08/27 18:19:49 INFO common.Storage: Storage directory /data/hadoop/namenode has been successfully formatted.\n14/08/27 18:19:49 INFO namenode.NNStorageRetentionManager: Going to retain 1 images with txid >= 0\n14/08/27 18:19:49 INFO util.ExitUtil: Exiting with status 0\n14/08/27 18:19:49 INFO namenode.NameNode: SHUTDOWN_MSG: \n/************************************************************\nSHUTDOWN_MSG: Shutting down NameNode at ubuntu/127.0.1.1\n************************************************************/\n```\n启动namenode\n```shell\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./hadoop-daemon.sh start namenode\nstarting namenode, logging to /usr/local/hadoop-2.5.0/logs/hadoop-root-namenode-ubuntu.out\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./hadoop-daemon.sh start datanode\nstarting datanode, logging to /usr/local/hadoop-2.5.0/logs/hadoop-root-datanode-ubuntu.out\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# jps\n8865 NameNode\n9009 Jps\n8945 DataNode\n```\n启动成功可以使用sbin/hadoop-daemon.sh stop datanode（或namenode）来关闭。\n\n启动Manage管理\n```shell\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./yarn-daemon.sh start resourcemanager\nstarting resourcemanager, logging to /usr/local/hadoop-2.5.0/logs/yarn-root-resourcemanager-ubuntu.out\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./yarn-daemon.sh start nodemanager\nstarting nodemanager, logging to /usr/local/hadoop-2.5.0/logs/yarn-root-nodemanager-ubuntu.out\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# jps\n8865 NameNode\n8945 DataNode\n9362 Jps\n9275 NodeManager\n9035 ResourceManager\n```\n\n证明启动成功 同时也可以使用yarn-daemon.sh stop resourcemanager（nodemanager）来关闭。\n\n如果没有单独配置yarn-site.xml中的yarn.resourcemanager.webapp.address，默认的端口8088 访问\n\nhttp://127.0.0.1:8088/  可以访问hadoop管理页面\n\n如果没有单独配置 hdfs-site.xml中的dfs.namenode.http-address,默认端口50070\n\nhttp://127.0.0.1:50070 可以访问namenode节点信息。\n","source":"_posts/安装Hadoop2.5.0.md","raw":"title: 安装Hadoop2.5.0\ntags:\n  - Hadoop\ncategories:\n  - Java\ndate: 2014-08-27 18:27:00\n---\n## 安装Hadoop，单机模式。\n\n### 1、免密码ssh设置：\n[免密码ssh设置](/2014/08/27/ubuntu使用ssh-keygen设置ssh无密码登录/ \"免密码ssh设置\")\n\n### 2、JDK安装配置：\n[JDK安装配置](/2014/08/27/ubuntu%20安装%20jdk/ \"JDK安装配置\")\n\n### 3、我们把下载好的hadoop-2.5.0.tar.gz解压形成/usr/local/hadoop-2.5.0/并配置环境变量，同JAVA_HOME类似，在/etc/profile文件中添加如下配置：\n```shell\n#set hadoop environment\nexport HADOOP_HOME=/usr/local/hadoop-2.5.0/\nexport PATH=$PATH:$HADOOP_HOME/bin\nexport PATH=$PATH:$HADOOP_HOME/sbin\n```\n\n### 4、修改配置文件\n\n修改的文件都在/usr/local/hadoop-2.5.0/etc/hadoop下：\n\ncore-site.xml、hdfs-site.xml、yarn-site.xml 、mapred-site.xml。\n\n配置文件的添加和修改都在<configuration></configuration> 中\n\n#### core-site.xml\n```xml\n<property>\n  <name>fs.defaultFS</name>\n  <value>hdfs://localhost:9000</value>\n</property>\n\n<property>\n  <name>hadoop.tmp.dir</name>\n  <value>/data/hadoop/hadoop_tmp</value>\n</property>\n```\n添加hdfs的指定URL路径，由于是伪分布模式，所以配置的是本机IP ，可为真实ip、localhost。\n\n#### hdfs-site.xml\n```xml\n<property>\n  <name>dfs.namenode.name.dir</name>\n  <value>/data/hadoop/namenode</value>\n</property>\n\n<property>\n  <name>dfs.datanode.data.dir</name>\n  <value>/data/hadoop/datanode</value>\n</property>\n\n<property>\n  <name>dfs.replication</name>\n  <value>1</value>\n</property>\n```\n主要是对namenode 和 datanode 存储路径的设置。为了便于管理，最好配置一下。\n\n#### mapred-site.xml\n```xml\n<property>\n  <name>mapreduce.framework.name</name>\n  <value>yarn</value>\n</property>\n```\nhadoop2.0有了yarn，所以原来的mapred配置都转向yarn-site.xml文件中了，这里也就指定yarn。\n\n#### yarn-site.xml \n\n为了简单，快速做测试，使用默认的即可。\n\n### 5、启动hadoop\n\n启动的文件都是 sbin下，bin下的都是命令。\n\n使用命令cd $HADOOP_HOME切换到该安装目录下\n\n首先格式化 namenode\n```shell\nbin/hdfs namenode -format\n```\n确定不报错，且出现\n```shell\n14/08/27 18:19:49 INFO util.GSet: capacity      = 2^15 = 32768 entries\n14/08/27 18:19:49 INFO namenode.NNConf: ACLs enabled? false\n14/08/27 18:19:49 INFO namenode.NNConf: XAttrs enabled? true\n14/08/27 18:19:49 INFO namenode.NNConf: Maximum size of an xattr: 16384\n14/08/27 18:19:49 INFO namenode.FSImage: Allocated new BlockPoolId: BP-409433172-127.0.1.1-1409134789102\n14/08/27 18:19:49 INFO common.Storage: Storage directory /data/hadoop/namenode has been successfully formatted.\n14/08/27 18:19:49 INFO namenode.NNStorageRetentionManager: Going to retain 1 images with txid >= 0\n14/08/27 18:19:49 INFO util.ExitUtil: Exiting with status 0\n14/08/27 18:19:49 INFO namenode.NameNode: SHUTDOWN_MSG: \n/************************************************************\nSHUTDOWN_MSG: Shutting down NameNode at ubuntu/127.0.1.1\n************************************************************/\n```\n启动namenode\n```shell\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./hadoop-daemon.sh start namenode\nstarting namenode, logging to /usr/local/hadoop-2.5.0/logs/hadoop-root-namenode-ubuntu.out\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./hadoop-daemon.sh start datanode\nstarting datanode, logging to /usr/local/hadoop-2.5.0/logs/hadoop-root-datanode-ubuntu.out\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# jps\n8865 NameNode\n9009 Jps\n8945 DataNode\n```\n启动成功可以使用sbin/hadoop-daemon.sh stop datanode（或namenode）来关闭。\n\n启动Manage管理\n```shell\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./yarn-daemon.sh start resourcemanager\nstarting resourcemanager, logging to /usr/local/hadoop-2.5.0/logs/yarn-root-resourcemanager-ubuntu.out\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./yarn-daemon.sh start nodemanager\nstarting nodemanager, logging to /usr/local/hadoop-2.5.0/logs/yarn-root-nodemanager-ubuntu.out\nroot@ubuntu:/usr/local/hadoop-2.5.0/sbin# jps\n8865 NameNode\n8945 DataNode\n9362 Jps\n9275 NodeManager\n9035 ResourceManager\n```\n\n证明启动成功 同时也可以使用yarn-daemon.sh stop resourcemanager（nodemanager）来关闭。\n\n如果没有单独配置yarn-site.xml中的yarn.resourcemanager.webapp.address，默认的端口8088 访问\n\nhttp://127.0.0.1:8088/  可以访问hadoop管理页面\n\n如果没有单独配置 hdfs-site.xml中的dfs.namenode.http-address,默认端口50070\n\nhttp://127.0.0.1:50070 可以访问namenode节点信息。\n","slug":"安装Hadoop2.5.0","published":1,"updated":"2018-12-13T08:24:34.090Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsq6003hi85ni6fgjj59","content":"<h2 id=\"安装Hadoop，单机模式。\"><a href=\"#安装Hadoop，单机模式。\" class=\"headerlink\" title=\"安装Hadoop，单机模式。\"></a>安装Hadoop，单机模式。</h2><h3 id=\"1、免密码ssh设置：\"><a href=\"#1、免密码ssh设置：\" class=\"headerlink\" title=\"1、免密码ssh设置：\"></a>1、免密码ssh设置：</h3><p><a href=\"/2014/08/27/ubuntu使用ssh-keygen设置ssh无密码登录/\" title=\"免密码ssh设置\">免密码ssh设置</a></p>\n<h3 id=\"2、JDK安装配置：\"><a href=\"#2、JDK安装配置：\" class=\"headerlink\" title=\"2、JDK安装配置：\"></a>2、JDK安装配置：</h3><p><a href=\"/2014/08/27/ubuntu%20安装%20jdk/\" title=\"JDK安装配置\">JDK安装配置</a></p>\n<h3 id=\"3、我们把下载好的hadoop-2-5-0-tar-gz解压形成-usr-local-hadoop-2-5-0-并配置环境变量，同JAVA-HOME类似，在-etc-profile文件中添加如下配置：\"><a href=\"#3、我们把下载好的hadoop-2-5-0-tar-gz解压形成-usr-local-hadoop-2-5-0-并配置环境变量，同JAVA-HOME类似，在-etc-profile文件中添加如下配置：\" class=\"headerlink\" title=\"3、我们把下载好的hadoop-2.5.0.tar.gz解压形成/usr/local/hadoop-2.5.0/并配置环境变量，同JAVA_HOME类似，在/etc/profile文件中添加如下配置：\"></a>3、我们把下载好的hadoop-2.5.0.tar.gz解压形成/usr/local/hadoop-2.5.0/并配置环境变量，同JAVA_HOME类似，在/etc/profile文件中添加如下配置：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>set hadoop environment</span><br><span class=\"line\">export HADOOP_HOME=/usr/local/hadoop-2.5.0/</span><br><span class=\"line\">export PATH=$PATH:$HADOOP_HOME/bin</span><br><span class=\"line\">export PATH=$PATH:$HADOOP_HOME/sbin</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、修改配置文件\"><a href=\"#4、修改配置文件\" class=\"headerlink\" title=\"4、修改配置文件\"></a>4、修改配置文件</h3><p>修改的文件都在/usr/local/hadoop-2.5.0/etc/hadoop下：</p>\n<p>core-site.xml、hdfs-site.xml、yarn-site.xml 、mapred-site.xml。</p>\n<p>配置文件的添加和修改都在<configuration></configuration> 中</p>\n<h4 id=\"core-site-xml\"><a href=\"#core-site-xml\" class=\"headerlink\" title=\"core-site.xml\"></a>core-site.xml</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>fs.defaultFS<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>hdfs://localhost:9000<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hadoop.tmp.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/data/hadoop/hadoop_tmp<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>添加hdfs的指定URL路径，由于是伪分布模式，所以配置的是本机IP ，可为真实ip、localhost。</p>\n<h4 id=\"hdfs-site-xml\"><a href=\"#hdfs-site-xml\" class=\"headerlink\" title=\"hdfs-site.xml\"></a>hdfs-site.xml</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.name.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/data/hadoop/namenode<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.datanode.data.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/data/hadoop/datanode<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.replication<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>主要是对namenode 和 datanode 存储路径的设置。为了便于管理，最好配置一下。</p>\n<h4 id=\"mapred-site-xml\"><a href=\"#mapred-site-xml\" class=\"headerlink\" title=\"mapred-site.xml\"></a>mapred-site.xml</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.framework.name<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>yarn<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>hadoop2.0有了yarn，所以原来的mapred配置都转向yarn-site.xml文件中了，这里也就指定yarn。</p>\n<h4 id=\"yarn-site-xml\"><a href=\"#yarn-site-xml\" class=\"headerlink\" title=\"yarn-site.xml\"></a>yarn-site.xml</h4><p>为了简单，快速做测试，使用默认的即可。</p>\n<h3 id=\"5、启动hadoop\"><a href=\"#5、启动hadoop\" class=\"headerlink\" title=\"5、启动hadoop\"></a>5、启动hadoop</h3><p>启动的文件都是 sbin下，bin下的都是命令。</p>\n<p>使用命令cd $HADOOP_HOME切换到该安装目录下</p>\n<p>首先格式化 namenode<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/hdfs namenode -format</span><br></pre></td></tr></table></figure></p>\n<p>确定不报错，且出现<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">14/08/27 18:19:49 INFO util.GSet: capacity      = 2^15 = 32768 entries</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.NNConf: ACLs enabled? false</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.NNConf: XAttrs enabled? true</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.NNConf: Maximum size of an xattr: 16384</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.FSImage: Allocated new BlockPoolId: BP-409433172-127.0.1.1-1409134789102</span><br><span class=\"line\">14/08/27 18:19:49 INFO common.Storage: Storage directory /data/hadoop/namenode has been successfully formatted.</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.NNStorageRetentionManager: Going to retain 1 images with txid &gt;= 0</span><br><span class=\"line\">14/08/27 18:19:49 INFO util.ExitUtil: Exiting with status 0</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.NameNode: SHUTDOWN_MSG: </span><br><span class=\"line\">/************************************************************</span><br><span class=\"line\">SHUTDOWN_MSG: Shutting down NameNode at ubuntu/127.0.1.1</span><br><span class=\"line\">************************************************************/</span><br></pre></td></tr></table></figure></p>\n<p>启动namenode<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./hadoop-daemon.sh start namenode</span><br><span class=\"line\">starting namenode, logging to /usr/local/hadoop-2.5.0/logs/hadoop-root-namenode-ubuntu.out</span><br><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./hadoop-daemon.sh start datanode</span><br><span class=\"line\">starting datanode, logging to /usr/local/hadoop-2.5.0/logs/hadoop-root-datanode-ubuntu.out</span><br><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# jps</span><br><span class=\"line\">8865 NameNode</span><br><span class=\"line\">9009 Jps</span><br><span class=\"line\">8945 DataNode</span><br></pre></td></tr></table></figure></p>\n<p>启动成功可以使用sbin/hadoop-daemon.sh stop datanode（或namenode）来关闭。</p>\n<p>启动Manage管理<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./yarn-daemon.sh start resourcemanager</span><br><span class=\"line\">starting resourcemanager, logging to /usr/local/hadoop-2.5.0/logs/yarn-root-resourcemanager-ubuntu.out</span><br><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./yarn-daemon.sh start nodemanager</span><br><span class=\"line\">starting nodemanager, logging to /usr/local/hadoop-2.5.0/logs/yarn-root-nodemanager-ubuntu.out</span><br><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# jps</span><br><span class=\"line\">8865 NameNode</span><br><span class=\"line\">8945 DataNode</span><br><span class=\"line\">9362 Jps</span><br><span class=\"line\">9275 NodeManager</span><br><span class=\"line\">9035 ResourceManager</span><br></pre></td></tr></table></figure></p>\n<p>证明启动成功 同时也可以使用yarn-daemon.sh stop resourcemanager（nodemanager）来关闭。</p>\n<p>如果没有单独配置yarn-site.xml中的yarn.resourcemanager.webapp.address，默认的端口8088 访问</p>\n<p><a href=\"http://127.0.0.1:8088/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:8088/</a>  可以访问hadoop管理页面</p>\n<p>如果没有单独配置 hdfs-site.xml中的dfs.namenode.http-address,默认端口50070</p>\n<p><a href=\"http://127.0.0.1:50070\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:50070</a> 可以访问namenode节点信息。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"安装Hadoop，单机模式。\"><a href=\"#安装Hadoop，单机模式。\" class=\"headerlink\" title=\"安装Hadoop，单机模式。\"></a>安装Hadoop，单机模式。</h2><h3 id=\"1、免密码ssh设置：\"><a href=\"#1、免密码ssh设置：\" class=\"headerlink\" title=\"1、免密码ssh设置：\"></a>1、免密码ssh设置：</h3><p><a href=\"/2014/08/27/ubuntu使用ssh-keygen设置ssh无密码登录/\" title=\"免密码ssh设置\">免密码ssh设置</a></p>\n<h3 id=\"2、JDK安装配置：\"><a href=\"#2、JDK安装配置：\" class=\"headerlink\" title=\"2、JDK安装配置：\"></a>2、JDK安装配置：</h3><p><a href=\"/2014/08/27/ubuntu%20安装%20jdk/\" title=\"JDK安装配置\">JDK安装配置</a></p>\n<h3 id=\"3、我们把下载好的hadoop-2-5-0-tar-gz解压形成-usr-local-hadoop-2-5-0-并配置环境变量，同JAVA-HOME类似，在-etc-profile文件中添加如下配置：\"><a href=\"#3、我们把下载好的hadoop-2-5-0-tar-gz解压形成-usr-local-hadoop-2-5-0-并配置环境变量，同JAVA-HOME类似，在-etc-profile文件中添加如下配置：\" class=\"headerlink\" title=\"3、我们把下载好的hadoop-2.5.0.tar.gz解压形成/usr/local/hadoop-2.5.0/并配置环境变量，同JAVA_HOME类似，在/etc/profile文件中添加如下配置：\"></a>3、我们把下载好的hadoop-2.5.0.tar.gz解压形成/usr/local/hadoop-2.5.0/并配置环境变量，同JAVA_HOME类似，在/etc/profile文件中添加如下配置：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>set hadoop environment</span><br><span class=\"line\">export HADOOP_HOME=/usr/local/hadoop-2.5.0/</span><br><span class=\"line\">export PATH=$PATH:$HADOOP_HOME/bin</span><br><span class=\"line\">export PATH=$PATH:$HADOOP_HOME/sbin</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、修改配置文件\"><a href=\"#4、修改配置文件\" class=\"headerlink\" title=\"4、修改配置文件\"></a>4、修改配置文件</h3><p>修改的文件都在/usr/local/hadoop-2.5.0/etc/hadoop下：</p>\n<p>core-site.xml、hdfs-site.xml、yarn-site.xml 、mapred-site.xml。</p>\n<p>配置文件的添加和修改都在<configuration></configuration> 中</p>\n<h4 id=\"core-site-xml\"><a href=\"#core-site-xml\" class=\"headerlink\" title=\"core-site.xml\"></a>core-site.xml</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>fs.defaultFS<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>hdfs://localhost:9000<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hadoop.tmp.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/data/hadoop/hadoop_tmp<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>添加hdfs的指定URL路径，由于是伪分布模式，所以配置的是本机IP ，可为真实ip、localhost。</p>\n<h4 id=\"hdfs-site-xml\"><a href=\"#hdfs-site-xml\" class=\"headerlink\" title=\"hdfs-site.xml\"></a>hdfs-site.xml</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.name.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/data/hadoop/namenode<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.datanode.data.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/data/hadoop/datanode<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.replication<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>主要是对namenode 和 datanode 存储路径的设置。为了便于管理，最好配置一下。</p>\n<h4 id=\"mapred-site-xml\"><a href=\"#mapred-site-xml\" class=\"headerlink\" title=\"mapred-site.xml\"></a>mapred-site.xml</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.framework.name<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>yarn<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>hadoop2.0有了yarn，所以原来的mapred配置都转向yarn-site.xml文件中了，这里也就指定yarn。</p>\n<h4 id=\"yarn-site-xml\"><a href=\"#yarn-site-xml\" class=\"headerlink\" title=\"yarn-site.xml\"></a>yarn-site.xml</h4><p>为了简单，快速做测试，使用默认的即可。</p>\n<h3 id=\"5、启动hadoop\"><a href=\"#5、启动hadoop\" class=\"headerlink\" title=\"5、启动hadoop\"></a>5、启动hadoop</h3><p>启动的文件都是 sbin下，bin下的都是命令。</p>\n<p>使用命令cd $HADOOP_HOME切换到该安装目录下</p>\n<p>首先格式化 namenode<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/hdfs namenode -format</span><br></pre></td></tr></table></figure></p>\n<p>确定不报错，且出现<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">14/08/27 18:19:49 INFO util.GSet: capacity      = 2^15 = 32768 entries</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.NNConf: ACLs enabled? false</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.NNConf: XAttrs enabled? true</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.NNConf: Maximum size of an xattr: 16384</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.FSImage: Allocated new BlockPoolId: BP-409433172-127.0.1.1-1409134789102</span><br><span class=\"line\">14/08/27 18:19:49 INFO common.Storage: Storage directory /data/hadoop/namenode has been successfully formatted.</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.NNStorageRetentionManager: Going to retain 1 images with txid &gt;= 0</span><br><span class=\"line\">14/08/27 18:19:49 INFO util.ExitUtil: Exiting with status 0</span><br><span class=\"line\">14/08/27 18:19:49 INFO namenode.NameNode: SHUTDOWN_MSG: </span><br><span class=\"line\">/************************************************************</span><br><span class=\"line\">SHUTDOWN_MSG: Shutting down NameNode at ubuntu/127.0.1.1</span><br><span class=\"line\">************************************************************/</span><br></pre></td></tr></table></figure></p>\n<p>启动namenode<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./hadoop-daemon.sh start namenode</span><br><span class=\"line\">starting namenode, logging to /usr/local/hadoop-2.5.0/logs/hadoop-root-namenode-ubuntu.out</span><br><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./hadoop-daemon.sh start datanode</span><br><span class=\"line\">starting datanode, logging to /usr/local/hadoop-2.5.0/logs/hadoop-root-datanode-ubuntu.out</span><br><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# jps</span><br><span class=\"line\">8865 NameNode</span><br><span class=\"line\">9009 Jps</span><br><span class=\"line\">8945 DataNode</span><br></pre></td></tr></table></figure></p>\n<p>启动成功可以使用sbin/hadoop-daemon.sh stop datanode（或namenode）来关闭。</p>\n<p>启动Manage管理<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./yarn-daemon.sh start resourcemanager</span><br><span class=\"line\">starting resourcemanager, logging to /usr/local/hadoop-2.5.0/logs/yarn-root-resourcemanager-ubuntu.out</span><br><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# ./yarn-daemon.sh start nodemanager</span><br><span class=\"line\">starting nodemanager, logging to /usr/local/hadoop-2.5.0/logs/yarn-root-nodemanager-ubuntu.out</span><br><span class=\"line\">root@ubuntu:/usr/local/hadoop-2.5.0/sbin# jps</span><br><span class=\"line\">8865 NameNode</span><br><span class=\"line\">8945 DataNode</span><br><span class=\"line\">9362 Jps</span><br><span class=\"line\">9275 NodeManager</span><br><span class=\"line\">9035 ResourceManager</span><br></pre></td></tr></table></figure></p>\n<p>证明启动成功 同时也可以使用yarn-daemon.sh stop resourcemanager（nodemanager）来关闭。</p>\n<p>如果没有单独配置yarn-site.xml中的yarn.resourcemanager.webapp.address，默认的端口8088 访问</p>\n<p><a href=\"http://127.0.0.1:8088/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:8088/</a>  可以访问hadoop管理页面</p>\n<p>如果没有单独配置 hdfs-site.xml中的dfs.namenode.http-address,默认端口50070</p>\n<p><a href=\"http://127.0.0.1:50070\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:50070</a> 可以访问namenode节点信息。</p>\n"},{"title":"Xkcptun 改版的 kcptun","author":"ZkName","date":"2017-10-18T07:26:00.000Z","_content":"### github 项目地址\n\n[https://github.com/liudf0716/xkcptun](https://github.com/liudf0716/xkcptun \"https://github.com/liudf0716/xkcptun\")\n\n### 安装：\nxkcptun依赖libevent2\n安装libevent2库后 (apt-get install libevent-dev)\n\n```shle\ngit clone https://github.com/liudf0716/xkcptun.git\n\ncd xkcptun\n\nmkdir build && cd build\n\ncmake ..\n\nmake\n```\nbuild下生成 xkcp_client, xkcp_server, xkcp_spy\n\n##### 注册服务\n```shle\nmkdir /etc/xkcptun\ncp xkcp_server /usr/local/bin/\ncp server.json /etc/xkcptun/\ncp xkcptun.service /lib/systemd/system/xkcptun.service\n\nsystemctl enable xkcptun\nsystemctl start xkcptun\nsystemctl status xkcptun\n```\n\n### server.json 配置文件例子 \n\n```json\n{\n  \"localinterface\": \"eth0\",\n  \"localport\": 9089,\n  \"remoteaddr\": \"127.0.0.1\",\n  \"remoteport\": 443,\n  \"key\": \"14789632a\",\n  \"crypt\": \"none\",\n  \"mode\": \"fast3\",\n  \"mtu\": 1350,\n  \"sndwnd\": 4096,\n  \"rcvwnd\": 512,\n  \"datashard\": 10,\n  \"parityshard\": 3,\n  \"dscp\": 0,\n  \"nocomp\": true,\n  \"acknodelay\": false,\n  \"nodelay\": 0,\n  \"interval\": 20,\n  \"resend\": 2,\n  \"nc\": 1,\n  \"sockbuf\": 4194304,\n  \"keepalive\": 10\n}\n  \n  ```","source":"_posts/xkcptun_install.md","raw":"title: Xkcptun 改版的 kcptun\nauthor: ZkName\ntags:\n  - kcptun\n  - xkcptun \n  - Ubuntu\ncategories: []\ndate: 2017-10-18 15:26:00\n---\n### github 项目地址\n\n[https://github.com/liudf0716/xkcptun](https://github.com/liudf0716/xkcptun \"https://github.com/liudf0716/xkcptun\")\n\n### 安装：\nxkcptun依赖libevent2\n安装libevent2库后 (apt-get install libevent-dev)\n\n```shle\ngit clone https://github.com/liudf0716/xkcptun.git\n\ncd xkcptun\n\nmkdir build && cd build\n\ncmake ..\n\nmake\n```\nbuild下生成 xkcp_client, xkcp_server, xkcp_spy\n\n##### 注册服务\n```shle\nmkdir /etc/xkcptun\ncp xkcp_server /usr/local/bin/\ncp server.json /etc/xkcptun/\ncp xkcptun.service /lib/systemd/system/xkcptun.service\n\nsystemctl enable xkcptun\nsystemctl start xkcptun\nsystemctl status xkcptun\n```\n\n### server.json 配置文件例子 \n\n```json\n{\n  \"localinterface\": \"eth0\",\n  \"localport\": 9089,\n  \"remoteaddr\": \"127.0.0.1\",\n  \"remoteport\": 443,\n  \"key\": \"14789632a\",\n  \"crypt\": \"none\",\n  \"mode\": \"fast3\",\n  \"mtu\": 1350,\n  \"sndwnd\": 4096,\n  \"rcvwnd\": 512,\n  \"datashard\": 10,\n  \"parityshard\": 3,\n  \"dscp\": 0,\n  \"nocomp\": true,\n  \"acknodelay\": false,\n  \"nodelay\": 0,\n  \"interval\": 20,\n  \"resend\": 2,\n  \"nc\": 1,\n  \"sockbuf\": 4194304,\n  \"keepalive\": 10\n}\n  \n  ```","slug":"xkcptun_install","published":1,"updated":"2018-12-13T08:24:34.086Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsq8003li85n9iordqso","content":"<h3 id=\"github-项目地址\"><a href=\"#github-项目地址\" class=\"headerlink\" title=\"github 项目地址\"></a>github 项目地址</h3><p><a href=\"https://github.com/liudf0716/xkcptun\" title=\"https://github.com/liudf0716/xkcptun\" target=\"_blank\" rel=\"noopener\">https://github.com/liudf0716/xkcptun</a></p>\n<h3 id=\"安装：\"><a href=\"#安装：\" class=\"headerlink\" title=\"安装：\"></a>安装：</h3><p>xkcptun依赖libevent2<br>安装libevent2库后 (apt-get install libevent-dev)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/liudf0716/xkcptun.git</span><br><span class=\"line\"></span><br><span class=\"line\">cd xkcptun</span><br><span class=\"line\"></span><br><span class=\"line\">mkdir build &amp;&amp; cd build</span><br><span class=\"line\"></span><br><span class=\"line\">cmake ..</span><br><span class=\"line\"></span><br><span class=\"line\">make</span><br></pre></td></tr></table></figure>\n<p>build下生成 xkcp_client, xkcp_server, xkcp_spy</p>\n<h5 id=\"注册服务\"><a href=\"#注册服务\" class=\"headerlink\" title=\"注册服务\"></a>注册服务</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /etc/xkcptun</span><br><span class=\"line\">cp xkcp_server /usr/local/bin/</span><br><span class=\"line\">cp server.json /etc/xkcptun/</span><br><span class=\"line\">cp xkcptun.service /lib/systemd/system/xkcptun.service</span><br><span class=\"line\"></span><br><span class=\"line\">systemctl enable xkcptun</span><br><span class=\"line\">systemctl start xkcptun</span><br><span class=\"line\">systemctl status xkcptun</span><br></pre></td></tr></table></figure>\n<h3 id=\"server-json-配置文件例子\"><a href=\"#server-json-配置文件例子\" class=\"headerlink\" title=\"server.json 配置文件例子\"></a>server.json 配置文件例子</h3><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"localinterface\"</span>: <span class=\"string\">\"eth0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"localport\"</span>: <span class=\"number\">9089</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"remoteaddr\"</span>: <span class=\"string\">\"127.0.0.1\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"remoteport\"</span>: <span class=\"number\">443</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"14789632a\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"crypt\"</span>: <span class=\"string\">\"none\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"mode\"</span>: <span class=\"string\">\"fast3\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"mtu\"</span>: <span class=\"number\">1350</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"sndwnd\"</span>: <span class=\"number\">4096</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"rcvwnd\"</span>: <span class=\"number\">512</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"datashard\"</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"parityshard\"</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"dscp\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"nocomp\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"acknodelay\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"nodelay\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"interval\"</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"resend\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"nc\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"sockbuf\"</span>: <span class=\"number\">4194304</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"keepalive\"</span>: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"github-项目地址\"><a href=\"#github-项目地址\" class=\"headerlink\" title=\"github 项目地址\"></a>github 项目地址</h3><p><a href=\"https://github.com/liudf0716/xkcptun\" title=\"https://github.com/liudf0716/xkcptun\" target=\"_blank\" rel=\"noopener\">https://github.com/liudf0716/xkcptun</a></p>\n<h3 id=\"安装：\"><a href=\"#安装：\" class=\"headerlink\" title=\"安装：\"></a>安装：</h3><p>xkcptun依赖libevent2<br>安装libevent2库后 (apt-get install libevent-dev)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/liudf0716/xkcptun.git</span><br><span class=\"line\"></span><br><span class=\"line\">cd xkcptun</span><br><span class=\"line\"></span><br><span class=\"line\">mkdir build &amp;&amp; cd build</span><br><span class=\"line\"></span><br><span class=\"line\">cmake ..</span><br><span class=\"line\"></span><br><span class=\"line\">make</span><br></pre></td></tr></table></figure>\n<p>build下生成 xkcp_client, xkcp_server, xkcp_spy</p>\n<h5 id=\"注册服务\"><a href=\"#注册服务\" class=\"headerlink\" title=\"注册服务\"></a>注册服务</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /etc/xkcptun</span><br><span class=\"line\">cp xkcp_server /usr/local/bin/</span><br><span class=\"line\">cp server.json /etc/xkcptun/</span><br><span class=\"line\">cp xkcptun.service /lib/systemd/system/xkcptun.service</span><br><span class=\"line\"></span><br><span class=\"line\">systemctl enable xkcptun</span><br><span class=\"line\">systemctl start xkcptun</span><br><span class=\"line\">systemctl status xkcptun</span><br></pre></td></tr></table></figure>\n<h3 id=\"server-json-配置文件例子\"><a href=\"#server-json-配置文件例子\" class=\"headerlink\" title=\"server.json 配置文件例子\"></a>server.json 配置文件例子</h3><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"localinterface\"</span>: <span class=\"string\">\"eth0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"localport\"</span>: <span class=\"number\">9089</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"remoteaddr\"</span>: <span class=\"string\">\"127.0.0.1\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"remoteport\"</span>: <span class=\"number\">443</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"14789632a\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"crypt\"</span>: <span class=\"string\">\"none\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"mode\"</span>: <span class=\"string\">\"fast3\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"mtu\"</span>: <span class=\"number\">1350</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"sndwnd\"</span>: <span class=\"number\">4096</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"rcvwnd\"</span>: <span class=\"number\">512</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"datashard\"</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"parityshard\"</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"dscp\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"nocomp\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"acknodelay\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"nodelay\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"interval\"</span>: <span class=\"number\">20</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"resend\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"nc\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"sockbuf\"</span>: <span class=\"number\">4194304</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"keepalive\"</span>: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"极路由安装shadowsocks插件","date":"2016-07-18T06:18:00.000Z","_content":"\n\n\n\n## github上hiwifi-ss项目地址：\n\n\n[极路由Shadowsocks翻墙插件github hiwifi-ss](https://github.com/qiwihui/hiwifi-ss/ \"极路由Shadowsocks翻墙插件github hiwifi-ss\")","source":"_posts/极路由安装shadowsocks插件.md","raw":"title: 极路由安装shadowsocks插件\ntags:\n  - '  shadowsocks'\n  - 极路由\ncategories:\n  - Shadowsocks\ndate: 2016-07-18 14:18:00\n---\n\n\n\n\n## github上hiwifi-ss项目地址：\n\n\n[极路由Shadowsocks翻墙插件github hiwifi-ss](https://github.com/qiwihui/hiwifi-ss/ \"极路由Shadowsocks翻墙插件github hiwifi-ss\")","slug":"极路由安装shadowsocks插件","published":1,"updated":"2018-12-13T08:24:34.092Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsq9003oi85nrsjm4c3i","content":"<h2 id=\"github上hiwifi-ss项目地址：\"><a href=\"#github上hiwifi-ss项目地址：\" class=\"headerlink\" title=\"github上hiwifi-ss项目地址：\"></a>github上hiwifi-ss项目地址：</h2><p><a href=\"https://github.com/qiwihui/hiwifi-ss/\" title=\"极路由Shadowsocks翻墙插件github hiwifi-ss\" target=\"_blank\" rel=\"noopener\">极路由Shadowsocks翻墙插件github hiwifi-ss</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"github上hiwifi-ss项目地址：\"><a href=\"#github上hiwifi-ss项目地址：\" class=\"headerlink\" title=\"github上hiwifi-ss项目地址：\"></a>github上hiwifi-ss项目地址：</h2><p><a href=\"https://github.com/qiwihui/hiwifi-ss/\" title=\"极路由Shadowsocks翻墙插件github hiwifi-ss\" target=\"_blank\" rel=\"noopener\">极路由Shadowsocks翻墙插件github hiwifi-ss</a></p>\n"},{"title":"深度学习---之pooling层的作用与缺陷（转载）","author":"ZkName","date":"2018-08-20T02:20:00.000Z","_content":"###### 作者：谢志宁\n链接：[https://www.zhihu.com/question/36686900/answer/130890492](https://www.zhihu.com/question/36686900/answer/130890492 \"https://www.zhihu.com/question/36686900/answer/130890492\")\n来源：知乎\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n### 个人觉得主要是两个作用：\n1、 invariance(不变性)，这种不变性包括translation(平移)，rotation(旋转)，scale(尺度)\n\n2、 保留主要的特征同时减少参数(降维，效果类似PCA)和计算量，防止过拟合，提高模型泛化能力\n\n1. translation invariance：\n这里举一个直观的例子(数字识别)，假设有一个16x16的图片，里面有个数字1，我们需要识别出来，这个数字1可能写的偏左一点(图1)，这个数字1可能偏右一点(图2)，图1到图2相当于向右平移了一个单位，但是图1和图2经过max pooling之后它们都变成了相同的8x8特征矩阵，主要的特征我们捕获到了，同时又将问题的规模从16x16降到了8x8，而且具有平移不变性的特点。图中的a（或b）表示，在原始图片中的这些a（或b）位置，最终都会映射到相同的位置。\n![](/img/深度学习---之pooling层的作用与缺陷1.png)\n2. rotation invariance：\n下图表示汉字“一”的识别，第一张相对于x轴有倾斜角，第二张是平行于x轴，两张图片相当于做了旋转，经过多次max pooling后具有相同的特征\n![](/img/深度学习---之pooling层的作用与缺陷2.png)\n3. scale invariance：\n下图表示数字“0”的识别，第一张的“0”比较大，第二张的“0”进行了较小，相当于作了缩放，同样地，经过多次max pooling后具有相同的特征\n![](/img/深度学习---之pooling层的作用与缺陷3.png)\n\n转载：[https://blog.csdn.net/zxyhhjs2017/article/details/78607469](https://blog.csdn.net/zxyhhjs2017/article/details/78607469 \"https://blog.csdn.net/zxyhhjs2017/article/details/78607469\")\n\n![](/img/深度学习---之pooling层的作用与缺陷4.png)","source":"_posts/深度学习---之pooling层的作用与缺陷.md","raw":"title: 深度学习---之pooling层的作用与缺陷（转载）\nauthor: ZkName\ntags:\n  - 深度学习\ncategories: []\ndate: 2018-08-20 10:20:00\n---\n###### 作者：谢志宁\n链接：[https://www.zhihu.com/question/36686900/answer/130890492](https://www.zhihu.com/question/36686900/answer/130890492 \"https://www.zhihu.com/question/36686900/answer/130890492\")\n来源：知乎\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n### 个人觉得主要是两个作用：\n1、 invariance(不变性)，这种不变性包括translation(平移)，rotation(旋转)，scale(尺度)\n\n2、 保留主要的特征同时减少参数(降维，效果类似PCA)和计算量，防止过拟合，提高模型泛化能力\n\n1. translation invariance：\n这里举一个直观的例子(数字识别)，假设有一个16x16的图片，里面有个数字1，我们需要识别出来，这个数字1可能写的偏左一点(图1)，这个数字1可能偏右一点(图2)，图1到图2相当于向右平移了一个单位，但是图1和图2经过max pooling之后它们都变成了相同的8x8特征矩阵，主要的特征我们捕获到了，同时又将问题的规模从16x16降到了8x8，而且具有平移不变性的特点。图中的a（或b）表示，在原始图片中的这些a（或b）位置，最终都会映射到相同的位置。\n![](/img/深度学习---之pooling层的作用与缺陷1.png)\n2. rotation invariance：\n下图表示汉字“一”的识别，第一张相对于x轴有倾斜角，第二张是平行于x轴，两张图片相当于做了旋转，经过多次max pooling后具有相同的特征\n![](/img/深度学习---之pooling层的作用与缺陷2.png)\n3. scale invariance：\n下图表示数字“0”的识别，第一张的“0”比较大，第二张的“0”进行了较小，相当于作了缩放，同样地，经过多次max pooling后具有相同的特征\n![](/img/深度学习---之pooling层的作用与缺陷3.png)\n\n转载：[https://blog.csdn.net/zxyhhjs2017/article/details/78607469](https://blog.csdn.net/zxyhhjs2017/article/details/78607469 \"https://blog.csdn.net/zxyhhjs2017/article/details/78607469\")\n\n![](/img/深度学习---之pooling层的作用与缺陷4.png)","slug":"深度学习---之pooling层的作用与缺陷","published":1,"updated":"2018-12-13T08:24:34.094Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsqa003qi85nis2z4w7m","content":"<h6 id=\"作者：谢志宁\"><a href=\"#作者：谢志宁\" class=\"headerlink\" title=\"作者：谢志宁\"></a>作者：谢志宁</h6><p>链接：<a href=\"https://www.zhihu.com/question/36686900/answer/130890492\" title=\"https://www.zhihu.com/question/36686900/answer/130890492\" target=\"_blank\" rel=\"noopener\">https://www.zhihu.com/question/36686900/answer/130890492</a><br>来源：知乎<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>\n<h3 id=\"个人觉得主要是两个作用：\"><a href=\"#个人觉得主要是两个作用：\" class=\"headerlink\" title=\"个人觉得主要是两个作用：\"></a>个人觉得主要是两个作用：</h3><p>1、 invariance(不变性)，这种不变性包括translation(平移)，rotation(旋转)，scale(尺度)</p>\n<p>2、 保留主要的特征同时减少参数(降维，效果类似PCA)和计算量，防止过拟合，提高模型泛化能力</p>\n<ol>\n<li>translation invariance：<br>这里举一个直观的例子(数字识别)，假设有一个16x16的图片，里面有个数字1，我们需要识别出来，这个数字1可能写的偏左一点(图1)，这个数字1可能偏右一点(图2)，图1到图2相当于向右平移了一个单位，但是图1和图2经过max pooling之后它们都变成了相同的8x8特征矩阵，主要的特征我们捕获到了，同时又将问题的规模从16x16降到了8x8，而且具有平移不变性的特点。图中的a（或b）表示，在原始图片中的这些a（或b）位置，最终都会映射到相同的位置。<br><img src=\"/img/深度学习---之pooling层的作用与缺陷1.png\" alt=\"\"></li>\n<li>rotation invariance：<br>下图表示汉字“一”的识别，第一张相对于x轴有倾斜角，第二张是平行于x轴，两张图片相当于做了旋转，经过多次max pooling后具有相同的特征<br><img src=\"/img/深度学习---之pooling层的作用与缺陷2.png\" alt=\"\"></li>\n<li>scale invariance：<br>下图表示数字“0”的识别，第一张的“0”比较大，第二张的“0”进行了较小，相当于作了缩放，同样地，经过多次max pooling后具有相同的特征<br><img src=\"/img/深度学习---之pooling层的作用与缺陷3.png\" alt=\"\"></li>\n</ol>\n<p>转载：<a href=\"https://blog.csdn.net/zxyhhjs2017/article/details/78607469\" title=\"https://blog.csdn.net/zxyhhjs2017/article/details/78607469\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/zxyhhjs2017/article/details/78607469</a></p>\n<p><img src=\"/img/深度学习---之pooling层的作用与缺陷4.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h6 id=\"作者：谢志宁\"><a href=\"#作者：谢志宁\" class=\"headerlink\" title=\"作者：谢志宁\"></a>作者：谢志宁</h6><p>链接：<a href=\"https://www.zhihu.com/question/36686900/answer/130890492\" title=\"https://www.zhihu.com/question/36686900/answer/130890492\" target=\"_blank\" rel=\"noopener\">https://www.zhihu.com/question/36686900/answer/130890492</a><br>来源：知乎<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>\n<h3 id=\"个人觉得主要是两个作用：\"><a href=\"#个人觉得主要是两个作用：\" class=\"headerlink\" title=\"个人觉得主要是两个作用：\"></a>个人觉得主要是两个作用：</h3><p>1、 invariance(不变性)，这种不变性包括translation(平移)，rotation(旋转)，scale(尺度)</p>\n<p>2、 保留主要的特征同时减少参数(降维，效果类似PCA)和计算量，防止过拟合，提高模型泛化能力</p>\n<ol>\n<li>translation invariance：<br>这里举一个直观的例子(数字识别)，假设有一个16x16的图片，里面有个数字1，我们需要识别出来，这个数字1可能写的偏左一点(图1)，这个数字1可能偏右一点(图2)，图1到图2相当于向右平移了一个单位，但是图1和图2经过max pooling之后它们都变成了相同的8x8特征矩阵，主要的特征我们捕获到了，同时又将问题的规模从16x16降到了8x8，而且具有平移不变性的特点。图中的a（或b）表示，在原始图片中的这些a（或b）位置，最终都会映射到相同的位置。<br><img src=\"/img/深度学习---之pooling层的作用与缺陷1.png\" alt=\"\"></li>\n<li>rotation invariance：<br>下图表示汉字“一”的识别，第一张相对于x轴有倾斜角，第二张是平行于x轴，两张图片相当于做了旋转，经过多次max pooling后具有相同的特征<br><img src=\"/img/深度学习---之pooling层的作用与缺陷2.png\" alt=\"\"></li>\n<li>scale invariance：<br>下图表示数字“0”的识别，第一张的“0”比较大，第二张的“0”进行了较小，相当于作了缩放，同样地，经过多次max pooling后具有相同的特征<br><img src=\"/img/深度学习---之pooling层的作用与缺陷3.png\" alt=\"\"></li>\n</ol>\n<p>转载：<a href=\"https://blog.csdn.net/zxyhhjs2017/article/details/78607469\" title=\"https://blog.csdn.net/zxyhhjs2017/article/details/78607469\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/zxyhhjs2017/article/details/78607469</a></p>\n<p><img src=\"/img/深度学习---之pooling层的作用与缺陷4.png\" alt=\"\"></p>\n"},{"title":"Ubuntu安装 pip 配置服务器端 shadowsocks","author":"ZkName","date":"2017-04-10T04:12:00.000Z","_content":"## Ubuntu 安装 pip 配置服务器端 shadowsocks\n\n#### 1、安装 pip\n```shell\n#更新源\napt-get update\napt-get upgrade\n#安装\napt-get install python-pip\n```\n#### 2、安装 shadowsocks\n\n###### 1.安装最新版：\n```shell\npip install https://github.com/shadowsocks/shadowsocks/archive/master.zip\n```\n###### 2.配置编辑文件： vi /etc/shadowsocks.json\n```shell\n{\n    \"server\":\"0.0.0.0\",\n    \"server_port\":8388,\n    \"password\":\"xxx\",\n    \"timeout\":60,\n    \"method\":\"rc4-md5\",\n    \"workers\": 4,\n    \"fast_open\": true\n}\n```\n###### 3.开机启动 编辑文件 vi /etc/rc.local 增加：\n```shell\nnohup ssserver -c /etc/shadowsocks.json > log &\niptables -I INPUT -4 -p tcp -m tcp --dport 8388 -j ACCEPT\n```\n#### 3、安装 supervisor \n```shell\n#安装\napt-get install supervisor\n```\n###### 1.编辑文件：vi /etc/supervisor/conf.d/s-server.conf\n```shell\n[program:ssserver]\ncommand=/usr/local/bin/ssserver -c /etc/shadowsocks.json\ndirectory=/tmp\nuser=root\nautostart=true\nautorestart=true\nstdout_logfile=/dev/null\nstderr_logfile=/dev/null\n```\n###### 2.重新加载配置文件：\n```shell\nsudo supervisorctl reload\n```","source":"_posts/安装-pip-配置服务器端-shadowsocks.md","raw":"title: Ubuntu安装 pip 配置服务器端 shadowsocks\nauthor: ZkName\ntags:\n  - shadowsocks\n  - Ubuntu\ncategories: []\ndate: 2017-04-10 12:12:00\n---\n## Ubuntu 安装 pip 配置服务器端 shadowsocks\n\n#### 1、安装 pip\n```shell\n#更新源\napt-get update\napt-get upgrade\n#安装\napt-get install python-pip\n```\n#### 2、安装 shadowsocks\n\n###### 1.安装最新版：\n```shell\npip install https://github.com/shadowsocks/shadowsocks/archive/master.zip\n```\n###### 2.配置编辑文件： vi /etc/shadowsocks.json\n```shell\n{\n    \"server\":\"0.0.0.0\",\n    \"server_port\":8388,\n    \"password\":\"xxx\",\n    \"timeout\":60,\n    \"method\":\"rc4-md5\",\n    \"workers\": 4,\n    \"fast_open\": true\n}\n```\n###### 3.开机启动 编辑文件 vi /etc/rc.local 增加：\n```shell\nnohup ssserver -c /etc/shadowsocks.json > log &\niptables -I INPUT -4 -p tcp -m tcp --dport 8388 -j ACCEPT\n```\n#### 3、安装 supervisor \n```shell\n#安装\napt-get install supervisor\n```\n###### 1.编辑文件：vi /etc/supervisor/conf.d/s-server.conf\n```shell\n[program:ssserver]\ncommand=/usr/local/bin/ssserver -c /etc/shadowsocks.json\ndirectory=/tmp\nuser=root\nautostart=true\nautorestart=true\nstdout_logfile=/dev/null\nstderr_logfile=/dev/null\n```\n###### 2.重新加载配置文件：\n```shell\nsudo supervisorctl reload\n```","slug":"安装-pip-配置服务器端-shadowsocks","published":1,"updated":"2018-12-13T08:24:34.088Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsqc003ui85nbum54z60","content":"<h2 id=\"Ubuntu-安装-pip-配置服务器端-shadowsocks\"><a href=\"#Ubuntu-安装-pip-配置服务器端-shadowsocks\" class=\"headerlink\" title=\"Ubuntu 安装 pip 配置服务器端 shadowsocks\"></a>Ubuntu 安装 pip 配置服务器端 shadowsocks</h2><h4 id=\"1、安装-pip\"><a href=\"#1、安装-pip\" class=\"headerlink\" title=\"1、安装 pip\"></a>1、安装 pip</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>更新源</span><br><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get upgrade</span><br><span class=\"line\"><span class=\"meta\">#</span>安装</span><br><span class=\"line\">apt-get install python-pip</span><br></pre></td></tr></table></figure>\n<h4 id=\"2、安装-shadowsocks\"><a href=\"#2、安装-shadowsocks\" class=\"headerlink\" title=\"2、安装 shadowsocks\"></a>2、安装 shadowsocks</h4><h6 id=\"1-安装最新版：\"><a href=\"#1-安装最新版：\" class=\"headerlink\" title=\"1.安装最新版：\"></a>1.安装最新版：</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install https://github.com/shadowsocks/shadowsocks/archive/master.zip</span><br></pre></td></tr></table></figure>\n<h6 id=\"2-配置编辑文件：-vi-etc-shadowsocks-json\"><a href=\"#2-配置编辑文件：-vi-etc-shadowsocks-json\" class=\"headerlink\" title=\"2.配置编辑文件： vi /etc/shadowsocks.json\"></a>2.配置编辑文件： vi /etc/shadowsocks.json</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    \"server\":\"0.0.0.0\",</span><br><span class=\"line\">    \"server_port\":8388,</span><br><span class=\"line\">    \"password\":\"xxx\",</span><br><span class=\"line\">    \"timeout\":60,</span><br><span class=\"line\">    \"method\":\"rc4-md5\",</span><br><span class=\"line\">    \"workers\": 4,</span><br><span class=\"line\">    \"fast_open\": true</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"3-开机启动-编辑文件-vi-etc-rc-local-增加：\"><a href=\"#3-开机启动-编辑文件-vi-etc-rc-local-增加：\" class=\"headerlink\" title=\"3.开机启动 编辑文件 vi /etc/rc.local 增加：\"></a>3.开机启动 编辑文件 vi /etc/rc.local 增加：</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup ssserver -c /etc/shadowsocks.json &gt; log &amp;</span><br><span class=\"line\">iptables -I INPUT -4 -p tcp -m tcp --dport 8388 -j ACCEPT</span><br></pre></td></tr></table></figure>\n<h4 id=\"3、安装-supervisor\"><a href=\"#3、安装-supervisor\" class=\"headerlink\" title=\"3、安装 supervisor\"></a>3、安装 supervisor</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>安装</span><br><span class=\"line\">apt-get install supervisor</span><br></pre></td></tr></table></figure>\n<h6 id=\"1-编辑文件：vi-etc-supervisor-conf-d-s-server-conf\"><a href=\"#1-编辑文件：vi-etc-supervisor-conf-d-s-server-conf\" class=\"headerlink\" title=\"1.编辑文件：vi /etc/supervisor/conf.d/s-server.conf\"></a>1.编辑文件：vi /etc/supervisor/conf.d/s-server.conf</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[program:ssserver]</span><br><span class=\"line\">command=/usr/local/bin/ssserver -c /etc/shadowsocks.json</span><br><span class=\"line\">directory=/tmp</span><br><span class=\"line\">user=root</span><br><span class=\"line\">autostart=true</span><br><span class=\"line\">autorestart=true</span><br><span class=\"line\">stdout_logfile=/dev/null</span><br><span class=\"line\">stderr_logfile=/dev/null</span><br></pre></td></tr></table></figure>\n<h6 id=\"2-重新加载配置文件：\"><a href=\"#2-重新加载配置文件：\" class=\"headerlink\" title=\"2.重新加载配置文件：\"></a>2.重新加载配置文件：</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo supervisorctl reload</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Ubuntu-安装-pip-配置服务器端-shadowsocks\"><a href=\"#Ubuntu-安装-pip-配置服务器端-shadowsocks\" class=\"headerlink\" title=\"Ubuntu 安装 pip 配置服务器端 shadowsocks\"></a>Ubuntu 安装 pip 配置服务器端 shadowsocks</h2><h4 id=\"1、安装-pip\"><a href=\"#1、安装-pip\" class=\"headerlink\" title=\"1、安装 pip\"></a>1、安装 pip</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>更新源</span><br><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get upgrade</span><br><span class=\"line\"><span class=\"meta\">#</span>安装</span><br><span class=\"line\">apt-get install python-pip</span><br></pre></td></tr></table></figure>\n<h4 id=\"2、安装-shadowsocks\"><a href=\"#2、安装-shadowsocks\" class=\"headerlink\" title=\"2、安装 shadowsocks\"></a>2、安装 shadowsocks</h4><h6 id=\"1-安装最新版：\"><a href=\"#1-安装最新版：\" class=\"headerlink\" title=\"1.安装最新版：\"></a>1.安装最新版：</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install https://github.com/shadowsocks/shadowsocks/archive/master.zip</span><br></pre></td></tr></table></figure>\n<h6 id=\"2-配置编辑文件：-vi-etc-shadowsocks-json\"><a href=\"#2-配置编辑文件：-vi-etc-shadowsocks-json\" class=\"headerlink\" title=\"2.配置编辑文件： vi /etc/shadowsocks.json\"></a>2.配置编辑文件： vi /etc/shadowsocks.json</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    \"server\":\"0.0.0.0\",</span><br><span class=\"line\">    \"server_port\":8388,</span><br><span class=\"line\">    \"password\":\"xxx\",</span><br><span class=\"line\">    \"timeout\":60,</span><br><span class=\"line\">    \"method\":\"rc4-md5\",</span><br><span class=\"line\">    \"workers\": 4,</span><br><span class=\"line\">    \"fast_open\": true</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"3-开机启动-编辑文件-vi-etc-rc-local-增加：\"><a href=\"#3-开机启动-编辑文件-vi-etc-rc-local-增加：\" class=\"headerlink\" title=\"3.开机启动 编辑文件 vi /etc/rc.local 增加：\"></a>3.开机启动 编辑文件 vi /etc/rc.local 增加：</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup ssserver -c /etc/shadowsocks.json &gt; log &amp;</span><br><span class=\"line\">iptables -I INPUT -4 -p tcp -m tcp --dport 8388 -j ACCEPT</span><br></pre></td></tr></table></figure>\n<h4 id=\"3、安装-supervisor\"><a href=\"#3、安装-supervisor\" class=\"headerlink\" title=\"3、安装 supervisor\"></a>3、安装 supervisor</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>安装</span><br><span class=\"line\">apt-get install supervisor</span><br></pre></td></tr></table></figure>\n<h6 id=\"1-编辑文件：vi-etc-supervisor-conf-d-s-server-conf\"><a href=\"#1-编辑文件：vi-etc-supervisor-conf-d-s-server-conf\" class=\"headerlink\" title=\"1.编辑文件：vi /etc/supervisor/conf.d/s-server.conf\"></a>1.编辑文件：vi /etc/supervisor/conf.d/s-server.conf</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[program:ssserver]</span><br><span class=\"line\">command=/usr/local/bin/ssserver -c /etc/shadowsocks.json</span><br><span class=\"line\">directory=/tmp</span><br><span class=\"line\">user=root</span><br><span class=\"line\">autostart=true</span><br><span class=\"line\">autorestart=true</span><br><span class=\"line\">stdout_logfile=/dev/null</span><br><span class=\"line\">stderr_logfile=/dev/null</span><br></pre></td></tr></table></figure>\n<h6 id=\"2-重新加载配置文件：\"><a href=\"#2-重新加载配置文件：\" class=\"headerlink\" title=\"2.重新加载配置文件：\"></a>2.重新加载配置文件：</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo supervisorctl reload</span><br></pre></td></tr></table></figure>"},{"title":"开启Docker远程访问","author":"ZkName","date":"2017-07-27T02:20:00.000Z","_content":"###### 编辑文件 vi /etc/default/docker\n```shell\n# Here in Debian, this file is sourced by:\n#   - /etc/init.d/docker (sysvinit)\n#   - /etc/init/docker (upstart)\n#   - systemd's docker.service\n\n# Use of this file for configuring your Docker daemon is discouraged.\n\n# The recommended alternative is \"/etc/docker/daemon.json\", as described in:\n#   https://docs.docker.com/v1.11/engine/reference/commandline/daemon/#daemon-configuration-file\n\n# If that does not suit your needs, try a systemd drop-in file, as described in:\n#   https://docs.docker.com/v1.11/engine/admin/systemd/#custom-docker-daemon-options\n# 增加\n\nDOCKER_OPTS=\"-H=unix:///var/run/docker.sock -H=0.0.0.0:2375\"\n```","source":"_posts/开启Docker远程访问.md","raw":"title: 开启Docker远程访问\nauthor: ZkName\ntags:\n  - Docker\ncategories: []\ndate: 2017-07-27 10:20:00\n---\n###### 编辑文件 vi /etc/default/docker\n```shell\n# Here in Debian, this file is sourced by:\n#   - /etc/init.d/docker (sysvinit)\n#   - /etc/init/docker (upstart)\n#   - systemd's docker.service\n\n# Use of this file for configuring your Docker daemon is discouraged.\n\n# The recommended alternative is \"/etc/docker/daemon.json\", as described in:\n#   https://docs.docker.com/v1.11/engine/reference/commandline/daemon/#daemon-configuration-file\n\n# If that does not suit your needs, try a systemd drop-in file, as described in:\n#   https://docs.docker.com/v1.11/engine/admin/systemd/#custom-docker-daemon-options\n# 增加\n\nDOCKER_OPTS=\"-H=unix:///var/run/docker.sock -H=0.0.0.0:2375\"\n```","slug":"开启Docker远程访问","published":1,"updated":"2018-12-13T08:24:34.091Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsqd003vi85nwx8q4u7h","content":"<h6 id=\"编辑文件-vi-etc-default-docker\"><a href=\"#编辑文件-vi-etc-default-docker\" class=\"headerlink\" title=\"编辑文件 vi /etc/default/docker\"></a>编辑文件 vi /etc/default/docker</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> Here in Debian, this file is sourced by:</span><br><span class=\"line\"><span class=\"meta\">#</span>   - /etc/init.d/docker (sysvinit)</span><br><span class=\"line\"><span class=\"meta\">#</span>   - /etc/init/docker (upstart)</span><br><span class=\"line\"><span class=\"meta\">#</span>   - systemd's docker.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Use of this file for configuring your Docker daemon is discouraged.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> The recommended alternative is \"/etc/docker/daemon.json\", as described in:</span><br><span class=\"line\"><span class=\"meta\">#</span>   https://docs.docker.com/v1.11/engine/reference/commandline/daemon/#daemon-configuration-file</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> If that does not suit your needs, try a systemd drop-in file, as described in:</span><br><span class=\"line\"><span class=\"meta\">#</span>   https://docs.docker.com/v1.11/engine/admin/systemd/#custom-docker-daemon-options</span><br><span class=\"line\"><span class=\"meta\">#</span> 增加</span><br><span class=\"line\"></span><br><span class=\"line\">DOCKER_OPTS=\"-H=unix:///var/run/docker.sock -H=0.0.0.0:2375\"</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h6 id=\"编辑文件-vi-etc-default-docker\"><a href=\"#编辑文件-vi-etc-default-docker\" class=\"headerlink\" title=\"编辑文件 vi /etc/default/docker\"></a>编辑文件 vi /etc/default/docker</h6><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> Here in Debian, this file is sourced by:</span><br><span class=\"line\"><span class=\"meta\">#</span>   - /etc/init.d/docker (sysvinit)</span><br><span class=\"line\"><span class=\"meta\">#</span>   - /etc/init/docker (upstart)</span><br><span class=\"line\"><span class=\"meta\">#</span>   - systemd's docker.service</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Use of this file for configuring your Docker daemon is discouraged.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> The recommended alternative is \"/etc/docker/daemon.json\", as described in:</span><br><span class=\"line\"><span class=\"meta\">#</span>   https://docs.docker.com/v1.11/engine/reference/commandline/daemon/#daemon-configuration-file</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> If that does not suit your needs, try a systemd drop-in file, as described in:</span><br><span class=\"line\"><span class=\"meta\">#</span>   https://docs.docker.com/v1.11/engine/admin/systemd/#custom-docker-daemon-options</span><br><span class=\"line\"><span class=\"meta\">#</span> 增加</span><br><span class=\"line\"></span><br><span class=\"line\">DOCKER_OPTS=\"-H=unix:///var/run/docker.sock -H=0.0.0.0:2375\"</span><br></pre></td></tr></table></figure>"},{"title":"Java内存压缩解压带密码zip","date":"2014-06-05T02:22:00.000Z","_content":"## 压缩类ZipEncryptOutputStream.java\n```java\nimport java.io.IOException;\nimport java.io.OutputStream;\nimport java.security.SecureRandom;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport static com.zk.zip.ZipExpand.*;\n\n/**\n * Output stream that can be used to password-protect zip files.\n *\n * <h3>Example usage:</h3>\n * <p>Creating a password-protected zip file:</p>\n * <pre>\n *  ZipEncryptOutputStream zeos = new ZipEncryptOutputStream(new FileOutputStream(fileName), password);\n *  ZipOutputStream zos = new ZipOuputStream(zdis);\n *  ... create zip file using the standard JDK ZipOutputStream in zos variable ...\n * </pre>\n * <p>Converting a plain zip file to a password-protected zip file:</p>\n * <pre>\n *  FileInputStream src = new FileInputStream(srcFile);\n *  ZipEncryptOutputStream dest = new ZipEncryptOutputStream(new FileOutputStream(destFile), password);\n *\n *  // should wrap with try-catch-finally, do the close in finally\n *  int b;\n *  while ((b = src.read()) > -1) {\n *      dest.write(b);\n *  }\n *\n *  src.close();\n *  dest.close();\n * </pre>\n */\npublic class ZipEncryptOutputStream extends OutputStream {\n    private final OutputStream delegate;\n    private final int keys[] = new int[3];\n    private final int pwdKeys[] = new int[3];\n\n    private int copyBytes;\n    private int skipBytes;\n    private State state = State.NEW_SECTION;\n    private State futureState;\n    private Section section;\n    private byte[] decryptHeader;\n    private final ArrayList<int[][]> crcAndSize = new ArrayList<int[][]>();\n    private final ArrayList<Integer> localHeaderOffset = new ArrayList<Integer>();\n    private ArrayList<int[]> fileData;\n    private int[][] condition;\n    private int fileIndex;\n    private int[] buffer;\n    private int bufOffset;\n    private int fileSize;\n    private int bytesWritten;\n    private int centralRepoOffset;\n\n    private static final int ROW_SIZE = 65536;\n\n    /**\n     * Convenience constructor taking password as a string.\n     *\n     * @param delegate Output stream to write the password-protected zip to.\n     * @param password Password to use for protecting the zip.\n     */\n    public ZipEncryptOutputStream(OutputStream delegate, String password) {\n        this(delegate, password.toCharArray());\n    }\n\n    /**\n     * Safer version of the constructor. Takes password as a char array that can\n     * be nulled right after calling this constructor instead of a string that may\n     * stay visible on the heap for the duration of application run time.\n     *\n     * @param delegate Output stream to write the password-protected zip to.\n     * @param password Password to use for protecting the zip.\n     */\n    public ZipEncryptOutputStream(OutputStream delegate, char[] password) {\n        this.delegate = delegate;\n        pwdKeys[0] = 305419896;\n        pwdKeys[1] = 591751049;\n        pwdKeys[2] = 878082192;\n        for (int i = 0; i < password.length; i++) {\n            ZipExpand.updateKeys((byte) (password[i] & 0xff), pwdKeys);\n        }\n    }\n\n    private static enum State {NEW_SECTION, SECTION_HEADER, FLAGS, REPO_OFFSET, CRC, FILE_HEADER_OFFSET,\n        COMPRESSED_SIZE_READ, HEADER, DATA, FILE_BUFFERED, BUFFER, BUFFER_COPY, BUFFER_UNTIL, TAIL}\n    private static enum Section {LFH, CFH, ECD}\n\n    @Override\n    public void write(int b) throws IOException {\n        if (skipBytes > 0) {\n            skipBytes--;\n            return;\n        }\n        if (copyBytes == 0) {\n            switch (state) {\n                case NEW_SECTION:\n                    if (b != 0x50) {\n                        throw new IllegalStateException(\"Unexpected value read at offset \" + bytesWritten + \": \" + b + \" (expected: \" + 0x50 + \")\");\n                    }\n                    buffer(new int[4], State.SECTION_HEADER, 0x50);\n                    return;\n                case SECTION_HEADER:\n                    identifySectionHeader();\n                    break;\n                case FLAGS:\n                    copyBytes = 7;\n                    state = State.CRC;\n                    if (section == Section.LFH) {\n                        if ((b & 1) == 1) {\n                            throw new IllegalStateException(\"ZIP already password protected.\");\n                        }\n                        if ((b & 64) == 64) {\n                            throw new IllegalStateException(\"Strong encryption used.\");\n                        }\n                        if ((b & 8) == 8) {\n                            bufferUntil(State.FILE_BUFFERED, CFH_SIGNATURE, LFH_SIGNATURE);\n                        }\n                    }\n                    b = b & 0xf7 | 1;\n                    break;\n                case CRC:\n                    if (section == Section.CFH) {\n                        int[][] cns = crcAndSize.get(fileIndex);\n                        for (int j = 0; j < 3; j++) {\n                            for (int i = 0; i < 4; i++) {\n                                writeToDelegate(cns[j][i]);\n                            }\n                        }\n                        skipBytes = 11;\n                        copyBytes = 14;\n                        state = State.FILE_HEADER_OFFSET;\n                    } else {\n                        int[] cns = new int[16];\n                        buffer(cns, State.COMPRESSED_SIZE_READ, b);\n                    }\n                    return;\n                case FILE_HEADER_OFFSET:\n                    writeAsBytes(localHeaderOffset.get(fileIndex));\n                    fileIndex++;\n                    skipBytes = 3;\n                    copyBytesUntil(State.SECTION_HEADER, CFH_SIGNATURE, ECD_SIGNATURE);\n                    return;\n                case COMPRESSED_SIZE_READ:\n                    int[][] cns = new int[][] {\n                        {buffer[0], buffer[1], buffer[2], buffer[3]},\n                        {buffer[4], buffer[5], buffer[6], buffer[7]},\n                        {buffer[8], buffer[9], buffer[10], buffer[11]}\n                    };\n                    adjustSize(cns[1]);\n                    crcAndSize.add(cns);\n                    for (int j = 0; j < 3; j++) {\n                        for (int i = 0; i < 4; i++) {\n                            writeToDelegate(cns[j][i]);\n                        }\n                    }\n                    copyBytes = buffer[12] + buffer[14] + (buffer[13] + buffer[15]) * 256 - 1;\n                    state = State.HEADER;\n                    if (copyBytes < 0) {\n                        throw new IllegalStateException(\"No file name stored in the zip file.\");\n                    }\n                    break;\n                case HEADER:\n                    writeDecryptHeader();\n                    fileSize = decode(crcAndSize.get(crcAndSize.size() - 1)[1]);\n                    state = State.DATA;\n                    // intentionally no break\n                case DATA:\n                    b = encrypt(b);\n                    fileSize--;\n                    if (fileSize == 0) {\n                        state = State.NEW_SECTION;\n                    }\n                    break;\n                case BUFFER:\n                    buffer[bufOffset] = b;\n                    bufOffset++;\n                    if (bufOffset == buffer.length) {\n                        state = futureState;\n                    }\n                    return;\n                case BUFFER_COPY:\n                    buffer[bufOffset] = b;\n                    if (checkCondition()) {\n                        bufOffset = 0;\n                        state = futureState;\n                    }\n                    break;\n                case BUFFER_UNTIL:\n                    int col = fileSize % ROW_SIZE;\n                    if (col == 0) {\n                        fileData.add(new int[ROW_SIZE]);\n                    }\n                    int[] row = fileData.get(fileData.size() - 1);\n                    row[col] = b;\n                    buffer[bufOffset] = b;\n                    fileSize++;\n                    if (checkCondition()) {\n                        fileSize -= buffer.length;\n                        state = futureState;\n                    }\n                    return;\n                case FILE_BUFFERED:\n                    row = fileData.get(0);\n                    int r = 0;\n                    int pointer = 16 + row[12] + row[14] + (row[13] + row[15]) * 256;\n                    cns = new int[3][4];\n                    readFromFileBuffer(fileSize - 12, cns[0]);\n                    readFromFileBuffer(fileSize - 8, cns[1]);\n                    readFromFileBuffer(fileSize - 4, cns[2]);\n                    fileSize = decode(cns[1]);\n                    adjustSize(cns[1]);\n                    crcAndSize.add(cns);\n                    for (int i = 0; i < 4; i++) {\n                        row[i] = cns[0][i];\n                        row[i + 4] = cns[1][i];\n                        row[i + 8] = cns[2][i];\n                    }\n                    for (int i = 0; i < pointer; i++) {\n                        writeToDelegate(row[i]);\n                    }\n                    writeDecryptHeader();\n                    for (int i = 0; i < fileSize; i++) {\n                        writeToDelegate(encrypt(row[pointer]));\n                        pointer++;\n                        if (pointer == ROW_SIZE) {\n                            pointer = 0;\n                            r++;\n                            row = fileData.get(r);\n                        }\n                    }\n                    fileData = null;\n                    identifySectionHeader();\n                    break;\n                case REPO_OFFSET:\n                    writeAsBytes(centralRepoOffset);\n                    skipBytes = 3;\n                    state = State.TAIL;\n                    return;\n                case TAIL:\n                    break;\n            }\n        } else {\n            copyBytes--;\n        }\n        writeToDelegate(b);\n    }\n\n    private void writeToDelegate(int b) throws IOException {\n        delegate.write(b);\n        bytesWritten++;\n    }\n\n    private static void adjustSize(int[] values) {\n        int inc = DECRYPT_HEADER_SIZE;\n        for (int i = 0; i < 4; i++) {\n            values[i] = values[i] + inc;\n            inc = values[i] >> 8;\n            values[i] &= 0xff;\n        }\n    }\n\n    private static int decode(int[] value) {\n        return value[0] + (value[1] << 8) + (value[2] << 16) + (value[3] << 24);\n    }\n\n    private void writeAsBytes(int value) throws IOException {\n        for (int i = 0; i < 4; i++) {\n            writeToDelegate(value & 0xff);\n            value >>= 8;\n        }\n    }\n\n    private void identifySectionHeader() throws IllegalStateException, IOException {\n        if (Arrays.equals(buffer, LFH_SIGNATURE)) {\n            section = Section.LFH;\n            copyBytes = 1;\n            state = State.FLAGS;\n            localHeaderOffset.add(bytesWritten);\n        } else if (Arrays.equals(buffer, CFH_SIGNATURE)) {\n            section = Section.CFH;\n            copyBytes = 3;\n            state = State.FLAGS;\n            if (centralRepoOffset == 0) {\n                centralRepoOffset = bytesWritten;\n            }\n        } else if (Arrays.equals(buffer, ECD_SIGNATURE)) {\n            section = Section.ECD;\n            copyBytes = 11;\n            state = State.REPO_OFFSET;\n        } else {\n            throw new IllegalStateException(\"Unknown header: \" + Arrays.asList(buffer).toString());\n        }\n        flushBuffer();\n    }\n\n    private void readFromFileBuffer(int offset, int[] target) {\n        int r = offset / ROW_SIZE;\n        int c = offset % ROW_SIZE;\n        int[] row = fileData.get(r);\n        for (int i = 0; i < target.length; i++) {\n            target[i] = row[c];\n            c++;\n            if (c == ROW_SIZE) {\n                c = 0;\n                r++;\n                row = fileData.get(r);\n            }\n        }\n    }\n\n    @Override\n    public void close() throws IOException {\n        super.close();\n        delegate.close();\n    }\n\n    private void initKeys() {\n        System.arraycopy(pwdKeys, 0, keys, 0, keys.length);\n    }\n\n    private void updateKeys(byte charAt) {\n        ZipExpand.updateKeys(charAt, keys);\n    }\n\n    private byte encryptByte() {\n        int temp = keys[2] | 2;\n        return (byte) ((temp * (temp ^ 1)) >>> 8);\n    }\n\n    private int encrypt(int b) {\n        int newB = (b ^ encryptByte()) & 0xff;\n        updateKeys((byte) b);\n        return newB;\n    }\n\n    private void writeDecryptHeader() throws IOException {\n        initKeys();\n        int[] crc = crcAndSize.get(crcAndSize.size() - 1)[0];\n        SecureRandom random = new SecureRandom();\n        decryptHeader = new byte[DECRYPT_HEADER_SIZE];\n        random.nextBytes(decryptHeader);\n        decryptHeader[DECRYPT_HEADER_SIZE - 2] = (byte) crc[2];\n        decryptHeader[DECRYPT_HEADER_SIZE - 1] = (byte) crc[3];\n        for (int i = 0; i < DECRYPT_HEADER_SIZE; i++) {\n            writeToDelegate(encrypt(decryptHeader[i]));\n        }\n    }\n\n    private void buffer(int[] values, State state, int... knownValues) {\n        System.arraycopy(knownValues, 0, values, 0, knownValues.length);\n        buffer = values;\n        bufOffset = knownValues.length;\n        this.state = State.BUFFER;\n        futureState = state;\n    }\n\n    private void flushBuffer() throws IOException {\n        for (int i = 0; i < bufOffset; i++) {\n            writeToDelegate(buffer[i]);\n        }\n    }\n\n    private void copyBytesUntil(State state, int[]... condition) {\n        futureState = state;\n        this.condition = condition;\n        bufOffset = 0;\n        buffer = new int[condition[0].length];\n        this.state = State.BUFFER_COPY;\n    }\n\n    private void bufferUntil(State state, int[]... condition) {\n        copyBytesUntil(state, condition);\n        fileData = new ArrayList<int[]>();\n        fileSize = 0;\n        this.state = State.BUFFER_UNTIL;\n    }\n\n    private boolean checkCondition() {\n        boolean equals = true;\n        for (int i = 0; i < condition.length; i++) {\n            equals = true;\n            for (int j = 0; j <= bufOffset; j++) {\n                if (condition[i][j] != buffer[j]) {\n                    equals = false;\n                    break;\n                }\n            }\n            if (equals) {\n                bufOffset++;\n                break;\n            }\n        }\n        if (!equals) {\n            bufOffset = 0;\n        }\n        return equals && (buffer.length == bufOffset);\n    }\n}\n```\n\n##解压缩类ZipDecryptInputStream.java\n\n```java\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport static com.zk.zip.ZipExpand.DD_SIGNATURE;\nimport static com.zk.zip.ZipExpand.DECRYPT_HEADER_SIZE;\nimport static com.zk.zip.ZipExpand.LFH_SIGNATURE;\nimport com.zk.zip.ZipExpand.Section;\nimport com.zk.zip.ZipExpand.State;\n\n/**\n * Input stream converting a password-protected zip to an unprotected zip.\n *\n * <h3>Example usage:</h3>\n * <p>Reading a password-protected zip from file:</p>\n * <pre>\n *  ZipDecryptInputStream zdis = new ZipDecryptInputStream(new FileInputStream(fileName), password);\n *  ZipInputStream zis = new ZipInputStream(zdis);\n *  ... read the zip file from zis - the standard JDK ZipInputStream ...\n * </pre>\n * <p>Converting a password-protected zip file to an unprotected zip file:</p>\n * <pre>\n *  ZipDecryptInputStream src = new ZipDecryptInputStream(new FileInputStream(srcFile), password);\n *  FileOutputStream dest = new FileOutputStream(destFile);\n *\n *  // should wrap with try-catch-finally, do the close in finally\n *  int b;\n *  while ((b = src.read()) > -1) {\n *      dest.write(b);\n *  }\n *\n *  src.close();\n *  dest.close();\n * </pre>\n */\npublic class ZipDecryptInputStream extends InputStream {\n    private final InputStream delegate;\n    private final int keys[] = new int[3];\n    private final int pwdKeys[] = new int[3];\n\n    private State state = State.SIGNATURE;\n    private Section section;\n    private int skipBytes;\n    private int compressedSize;\n    private int crc;\n\n    /**\n     * Creates a new instance of the stream.\n     *\n     * @param stream Input stream serving the password-protected zip file to be decrypted.\n     * @param password Password to be used to decrypt the password-protected zip file.\n     */\n    public ZipDecryptInputStream(InputStream stream, String password) {\n        this(stream, password.toCharArray());\n    }\n\n    /**\n     * Safer constructor. Takes password as a char array that can be nulled right after\n     * calling this constructor instead of a string that may be visible on the heap for\n     * the duration of application run time.\n     *\n     * @param stream Input stream serving the password-protected zip file.\n     * @param password Password to use for decrypting the zip file.\n     */\n    public ZipDecryptInputStream(InputStream stream, char[] password) {\n        this.delegate = stream;\n        pwdKeys[0] = 305419896;\n        pwdKeys[1] = 591751049;\n        pwdKeys[2] = 878082192;\n        for (int i = 0; i < password.length; i++) {\n            ZipExpand.updateKeys((byte) (password[i] & 0xff), pwdKeys);\n        }\n    }\n\n    @SuppressWarnings(\"incomplete-switch\")\n\t@Override\n    public int read() throws IOException {\n        int result = delegateRead();\n        if (skipBytes == 0) {\n            switch (state) {\n                case SIGNATURE:\n                    if (!peekAheadEquals(LFH_SIGNATURE)) {\n                        state = State.TAIL;\n                    } else {\n                        section = Section.FILE_HEADER;\n                        skipBytes = 5;\n                        state = State.FLAGS;\n                    }\n                    break;\n                case FLAGS:\n                    if ((result & 1) == 0) {\n                        throw new IllegalStateException(\"ZIP not password protected.\");\n                    }\n                    if ((result & 64) == 64) {\n                        throw new IllegalStateException(\"Strong encryption used.\");\n                    }\n                    if ((result & 8) == 8) {\n                        compressedSize = -1;\n                        state = State.FN_LENGTH;\n                        skipBytes = 19;\n                    } else {\n                        state = State.CRC;\n                        skipBytes = 10;\n                    }\n                    result -= 1;\n                    break;\n                case CRC:\n                    crc = result;\n                    state = State.COMPRESSED_SIZE;\n                    break;\n                case COMPRESSED_SIZE:\n                    int[] values = new int[4];\n                    peekAhead(values);\n                    compressedSize = 0;\n                    int valueInc = DECRYPT_HEADER_SIZE;\n                    for (int i = 0; i < 4; i++) {\n                        compressedSize += values[i] << (8 * i);\n                        values[i] -= valueInc;\n                        if (values[i] < 0) {\n                            valueInc = 1;\n                            values[i] += 256;\n                        } else {\n                            valueInc = 0;\n                        }\n                    }\n                    overrideBuffer(values);\n                    result = values[0];\n                    if (section == Section.DATA_DESCRIPTOR) {\n                        state = State.SIGNATURE;\n                    } else {\n                        state = State.FN_LENGTH;\n                    }\n                    skipBytes = 7;\n                    break;\n                case FN_LENGTH:\n                    values = new int[4];\n                    peekAhead(values);\n                    skipBytes = 3 + values[0] + values[2] + (values[1] + values[3]) * 256;\n                    state = State.HEADER;\n                    break;\n                case HEADER:\n                    section = Section.FILE_DATA;\n                    initKeys();\n                    byte lastValue = 0;\n                    for (int i = 0; i < DECRYPT_HEADER_SIZE; i++) {\n                        lastValue = (byte) (result ^ decryptByte());\n                        updateKeys(lastValue);\n                        result = delegateRead();\n                    }\n                    if ((lastValue & 0xff) != crc) {\n//                        throw new IllegalStateException(\"Wrong password!\");\n                    }\n                    compressedSize -= DECRYPT_HEADER_SIZE;\n                    state = State.DATA;\n                    // intentionally no break\n                case DATA:\n                    if (compressedSize == -1 && peekAheadEquals(DD_SIGNATURE)) {\n                        section = Section.DATA_DESCRIPTOR;\n                        skipBytes = 5;\n                        state = State.CRC;\n                    } else {\n                        result = (result ^ decryptByte()) & 0xff;\n                        updateKeys((byte) result);\n                        compressedSize--;\n                        if (compressedSize == 0) {\n                            state = State.SIGNATURE;\n                        }\n                    }\n                    break;\n                case TAIL:\n                    // do nothing\n            }\n        } else {\n            skipBytes--;\n        }\n        return result;\n    }\n\n    private static final int BUF_SIZE = 8;\n    private int bufOffset = BUF_SIZE;\n    private final int[] buf = new int[BUF_SIZE];\n\n    private int delegateRead() throws IOException {\n        bufOffset++;\n        if (bufOffset >= BUF_SIZE) {\n            fetchData(0);\n            bufOffset = 0;\n        }\n        return buf[bufOffset];\n    }\n\n    private boolean peekAheadEquals(int[] values) throws IOException {\n        prepareBuffer(values);\n        for (int i = 0; i < values.length; i++) {\n            if (buf[bufOffset + i] != values[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private void prepareBuffer(int[] values) throws IOException {\n        if (values.length > (BUF_SIZE - bufOffset)) {\n            for (int i = bufOffset; i < BUF_SIZE; i++) {\n                buf[i - bufOffset] = buf[i];\n            }\n            fetchData(BUF_SIZE - bufOffset);\n            bufOffset = 0;\n        }\n    }\n\n    private void peekAhead(int[] values) throws IOException {\n        prepareBuffer(values);\n        System.arraycopy(buf, bufOffset, values, 0, values.length);\n    }\n\n    private void overrideBuffer(int[] values) throws IOException {\n        prepareBuffer(values);\n        System.arraycopy(values, 0, buf, bufOffset, values.length);\n    }\n\n    private void fetchData(int offset) throws IOException {\n        for (int i = offset; i < BUF_SIZE; i++) {\n            buf[i] = delegate.read();\n            if (buf[i] == -1) {\n                break;\n            }\n        }\n    }\n\n    @Override\n    public void close() throws IOException {\n        delegate.close();\n        super.close();\n    }\n\n    private void initKeys() {\n        System.arraycopy(pwdKeys, 0, keys, 0, keys.length);\n    }\n\n    private void updateKeys(byte charAt) {\n        ZipExpand.updateKeys(charAt, keys);\n    }\n\n    private byte decryptByte() {\n        int temp = keys[2] | 2;\n        return (byte) ((temp * (temp ^ 1)) >>> 8);\n    }\n}\n```\n\n##解密工具类ZipExpand.java\n```java\n\nclass ZipExpand {\n    static final int[] CRC_TABLE = new int[256];\n    // compute the table\n    // (could also have it pre-computed - see http://snippets.dzone.com/tag/crc32)\n    static {\n        for (int i = 0; i < 256; i++) {\n            int r = i;\n            for (int j = 0; j < 8; j++) {\n                if ((r & 1) == 1) {\n                    r = (r >>> 1) ^ 0xedb88320;\n                } else {\n                    r >>>= 1;\n                }\n            }\n            CRC_TABLE[i] = r;\n        }\n    }\n\n    static final int DECRYPT_HEADER_SIZE = 12;\n    static final int[] CFH_SIGNATURE = {0x50, 0x4b, 0x01, 0x02};\n    static final int[] LFH_SIGNATURE = {0x50, 0x4b, 0x03, 0x04};\n    static final int[] ECD_SIGNATURE = {0x50, 0x4b, 0x05, 0x06};\n    static final int[] DD_SIGNATURE = {0x50, 0x4b, 0x07, 0x08};\n\n    static void updateKeys(byte charAt, int[] keys) {\n        keys[0] = crc32(keys[0], charAt);\n        keys[1] += keys[0] & 0xff;\n        keys[1] = keys[1] * 134775813 + 1;\n        keys[2] = crc32(keys[2], (byte) (keys[1] >> 24));\n    }\n\n    static int crc32(int oldCrc, byte charAt) {\n        return ((oldCrc >>> 8) ^ CRC_TABLE[(oldCrc ^ charAt) & 0xff]);\n    }\n\n    static enum State {\n        SIGNATURE, FLAGS, COMPRESSED_SIZE, FN_LENGTH, EF_LENGTH, HEADER, DATA, TAIL, CRC\n    }\n\n    static enum Section {\n        FILE_HEADER, FILE_DATA, DATA_DESCRIPTOR\n    }\n}\n```\n\n## 例子\n```java\n\nimport java.io.BufferedInputStream;\nimport java.io.BufferedReader;\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipInputStream;\nimport java.util.zip.ZipOutputStream;\n\npublic class ZipUtil {\n\n\tpublic static void main(String[] args) throws Exception {\n\t\ttry {\n\t\t\tboolean a=true;\n\t\t\tboolean b=a==false;\n\t\t\t\n\t\t\t/**\n\t\t\t * 压缩\n\t\t\t */\n\t\t\tif(a){\n\t\t\t   //读取文件流\n\t\t\t\tList<InputStream> list=new ArrayList<InputStream>();\n\t\t\t\tlist.add(new FileInputStream(new File(\"C:\\\\Users\\\\zk\\\\Desktop\\\\a.txt\")));\n\t\t\t\tlist.add(new FileInputStream(new File(\"C:\\\\Users\\\\zk\\\\Desktop\\\\b.txt\")));\n\t\t\t\tlist.add(new FileInputStream(new File(\"C:\\\\Users\\\\zk\\\\Desktop\\\\c.txt\")));\n\t\t\t\t//获取输出流\n\t\t\t\tByteArrayOutputStream array=writeZipOutputStream(list.toArray(new FileInputStream[0]),new String[]{\"a.txt\",\"b.txt\",\"c.txt\"}, \"123456\");\n\t\t\t\t//写入文件\n\t\t\t\tFile file=new File(\"C:\\\\Users\\\\zk\\\\Desktop\\\\a.zip\");\n\t\t\t\tif (!file.exists()) {\n\t\t\t\tfile.createNewFile();\n\t\t\t\t}\n\t\t\t\tDataOutputStream to=new DataOutputStream(new FileOutputStream(file));\n\t\t\t\tto.write(array.toByteArray());\n\t\t\t\tto.close();\n\t\t\t\tarray.close();\n\t\t\t}\n\t\t\t\n\t\t\t/**\n\t\t\t * 解压\n\t\t\t */\n\t\t\tif(b){\n\t\t\t   //获取文件字节数组\n\t\t\t\tFile file=new File(\"C:\\\\Users\\\\zk\\\\Desktop\\\\Desktop.zip\");\n\t\t\t\tbyte[] data =new byte[(int) file.length()];\n\t\t\t\tFileInputStream fileInputStream=new FileInputStream(file);\n\t\t\t\tfileInputStream.read(data);\n\t\t\t\t//解压文件获取文本内容\n\t\t\t\tStringBuffer sb=readZip(data,\"123456\");\n\t\t\t\tfileInputStream.close();\n\t\t\t\tSystem.out.println(sb);\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n\t\n\t/**\n\t * 压缩\n\t * @param inputStreams 输入流数组\n\t * @param fileName 文件名数组\n\t * @param password 密码\n\t * @return\n\t * @throws IOException\n\t */\n\tpublic static ByteArrayOutputStream writeZipOutputStream(InputStream [] inputStreams,String [] fileName,String password) throws IOException{\n\t\tZipOutputStream zos = null;\n\t\tByteArrayOutputStream baos=null;\n\t\ttry {\n\t\t\tbaos=new ByteArrayOutputStream();\n\t\t\tzos = new ZipOutputStream(new ZipEncryptOutputStream(baos, password));\n\t\t\tfor (int i = 0; i < inputStreams.length; i++) {\n\t\t        ZipEntry ze = new ZipEntry(fileName[i]);\n\t\t        zos.putNextEntry(ze);\n\t\t        InputStream is = null;\n\t\t        try {\n\t\t        \tis = inputStreams[i];\n\t\t\t        int b;\n\t\t\t        while ((b = is.read()) != -1) {\n\t\t\t            zos.write(b);\n\t\t\t        }\n\t\t\t\t} finally{\n\t\t\t\t\tif(is!=null){\n\t\t\t\t\t\tis.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t    }\n\t\t} finally{\n\t\t\tif(zos!=null){\n\t\t\t\tzos.closeEntry();\n\t\t\t\tzos.close();\n\t\t\t}\n\t\t}\n\t\treturn baos;\n\t}\n\t\n\t\n\t/**\n\t * 解压缩\n\t * @param data zip字节数组\n\t * @param password zip密码\n\t * @return\n\t * @throws IOException\n\t */\n\tpublic static StringBuffer readZip(byte[] data,String password) throws IOException  {\n\t\tStringBuffer sb = new StringBuffer();\n\t\tZipInputStream zin = null;\n\t\tDataInputStream dis = null;\n\t\ttry {\n\t\t\tzin = new ZipInputStream(new ZipDecryptInputStream(new BufferedInputStream(new ByteArrayInputStream(data)), password));\n\t\t\tdis = new DataInputStream(zin);//用ZIP输入流构建DataInputStream     \n\t\t\tZipEntry ze;\n\t\t\twhile ((ze = zin.getNextEntry()) != null) {\n\t\t\t\tif (ze.isDirectory()) {\n\t\t\t\t} else {\n\t\t\t\t\tlong size = ze.getSize();\n\t\t\t\t\tSystem.out.println(ze.getName());\n\t\t\t\t\tif (size > 0) {\n\t\t\t\t\t\tBufferedReader br = null;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tbyte[] content = new byte[(int) ze.getSize()];\n\t\t\t\t\t\t\tdis.readFully(content);\n\t\t\t\t\t\t\tbr = new BufferedReader(new InputStreamReader(new ByteArrayInputStream(content)));\n\t\t\t\t\t\t\tString line;\n\t\t\t\t\t\t\twhile ((line = br.readLine()) != null) {\n\t\t\t\t\t\t\t\tsb.append(line).append(\"\\n\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}finally{\n\t\t\t\t\t\t\tif(br!=null)\n\t\t\t\t\t\t\t\tbr.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}finally{\n\t\t\tif(zin!=null){\n\t\t\t\tzin.closeEntry();\n\t\t\t\tzin.close();\n\t\t\t}\n\t\t\tif(dis!=null)\n\t\t\t\tdis.close();\n\t\t}\n\t\treturn sb;\n\t}\n}\n```","source":"_posts/java内存解压带密码zip.md","raw":"title: Java内存压缩解压带密码zip\ntags:\n  - Java\n  - Zip\ncategories:\n  - Java\ndate: 2014-06-05 10:22:00\n---\n## 压缩类ZipEncryptOutputStream.java\n```java\nimport java.io.IOException;\nimport java.io.OutputStream;\nimport java.security.SecureRandom;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport static com.zk.zip.ZipExpand.*;\n\n/**\n * Output stream that can be used to password-protect zip files.\n *\n * <h3>Example usage:</h3>\n * <p>Creating a password-protected zip file:</p>\n * <pre>\n *  ZipEncryptOutputStream zeos = new ZipEncryptOutputStream(new FileOutputStream(fileName), password);\n *  ZipOutputStream zos = new ZipOuputStream(zdis);\n *  ... create zip file using the standard JDK ZipOutputStream in zos variable ...\n * </pre>\n * <p>Converting a plain zip file to a password-protected zip file:</p>\n * <pre>\n *  FileInputStream src = new FileInputStream(srcFile);\n *  ZipEncryptOutputStream dest = new ZipEncryptOutputStream(new FileOutputStream(destFile), password);\n *\n *  // should wrap with try-catch-finally, do the close in finally\n *  int b;\n *  while ((b = src.read()) > -1) {\n *      dest.write(b);\n *  }\n *\n *  src.close();\n *  dest.close();\n * </pre>\n */\npublic class ZipEncryptOutputStream extends OutputStream {\n    private final OutputStream delegate;\n    private final int keys[] = new int[3];\n    private final int pwdKeys[] = new int[3];\n\n    private int copyBytes;\n    private int skipBytes;\n    private State state = State.NEW_SECTION;\n    private State futureState;\n    private Section section;\n    private byte[] decryptHeader;\n    private final ArrayList<int[][]> crcAndSize = new ArrayList<int[][]>();\n    private final ArrayList<Integer> localHeaderOffset = new ArrayList<Integer>();\n    private ArrayList<int[]> fileData;\n    private int[][] condition;\n    private int fileIndex;\n    private int[] buffer;\n    private int bufOffset;\n    private int fileSize;\n    private int bytesWritten;\n    private int centralRepoOffset;\n\n    private static final int ROW_SIZE = 65536;\n\n    /**\n     * Convenience constructor taking password as a string.\n     *\n     * @param delegate Output stream to write the password-protected zip to.\n     * @param password Password to use for protecting the zip.\n     */\n    public ZipEncryptOutputStream(OutputStream delegate, String password) {\n        this(delegate, password.toCharArray());\n    }\n\n    /**\n     * Safer version of the constructor. Takes password as a char array that can\n     * be nulled right after calling this constructor instead of a string that may\n     * stay visible on the heap for the duration of application run time.\n     *\n     * @param delegate Output stream to write the password-protected zip to.\n     * @param password Password to use for protecting the zip.\n     */\n    public ZipEncryptOutputStream(OutputStream delegate, char[] password) {\n        this.delegate = delegate;\n        pwdKeys[0] = 305419896;\n        pwdKeys[1] = 591751049;\n        pwdKeys[2] = 878082192;\n        for (int i = 0; i < password.length; i++) {\n            ZipExpand.updateKeys((byte) (password[i] & 0xff), pwdKeys);\n        }\n    }\n\n    private static enum State {NEW_SECTION, SECTION_HEADER, FLAGS, REPO_OFFSET, CRC, FILE_HEADER_OFFSET,\n        COMPRESSED_SIZE_READ, HEADER, DATA, FILE_BUFFERED, BUFFER, BUFFER_COPY, BUFFER_UNTIL, TAIL}\n    private static enum Section {LFH, CFH, ECD}\n\n    @Override\n    public void write(int b) throws IOException {\n        if (skipBytes > 0) {\n            skipBytes--;\n            return;\n        }\n        if (copyBytes == 0) {\n            switch (state) {\n                case NEW_SECTION:\n                    if (b != 0x50) {\n                        throw new IllegalStateException(\"Unexpected value read at offset \" + bytesWritten + \": \" + b + \" (expected: \" + 0x50 + \")\");\n                    }\n                    buffer(new int[4], State.SECTION_HEADER, 0x50);\n                    return;\n                case SECTION_HEADER:\n                    identifySectionHeader();\n                    break;\n                case FLAGS:\n                    copyBytes = 7;\n                    state = State.CRC;\n                    if (section == Section.LFH) {\n                        if ((b & 1) == 1) {\n                            throw new IllegalStateException(\"ZIP already password protected.\");\n                        }\n                        if ((b & 64) == 64) {\n                            throw new IllegalStateException(\"Strong encryption used.\");\n                        }\n                        if ((b & 8) == 8) {\n                            bufferUntil(State.FILE_BUFFERED, CFH_SIGNATURE, LFH_SIGNATURE);\n                        }\n                    }\n                    b = b & 0xf7 | 1;\n                    break;\n                case CRC:\n                    if (section == Section.CFH) {\n                        int[][] cns = crcAndSize.get(fileIndex);\n                        for (int j = 0; j < 3; j++) {\n                            for (int i = 0; i < 4; i++) {\n                                writeToDelegate(cns[j][i]);\n                            }\n                        }\n                        skipBytes = 11;\n                        copyBytes = 14;\n                        state = State.FILE_HEADER_OFFSET;\n                    } else {\n                        int[] cns = new int[16];\n                        buffer(cns, State.COMPRESSED_SIZE_READ, b);\n                    }\n                    return;\n                case FILE_HEADER_OFFSET:\n                    writeAsBytes(localHeaderOffset.get(fileIndex));\n                    fileIndex++;\n                    skipBytes = 3;\n                    copyBytesUntil(State.SECTION_HEADER, CFH_SIGNATURE, ECD_SIGNATURE);\n                    return;\n                case COMPRESSED_SIZE_READ:\n                    int[][] cns = new int[][] {\n                        {buffer[0], buffer[1], buffer[2], buffer[3]},\n                        {buffer[4], buffer[5], buffer[6], buffer[7]},\n                        {buffer[8], buffer[9], buffer[10], buffer[11]}\n                    };\n                    adjustSize(cns[1]);\n                    crcAndSize.add(cns);\n                    for (int j = 0; j < 3; j++) {\n                        for (int i = 0; i < 4; i++) {\n                            writeToDelegate(cns[j][i]);\n                        }\n                    }\n                    copyBytes = buffer[12] + buffer[14] + (buffer[13] + buffer[15]) * 256 - 1;\n                    state = State.HEADER;\n                    if (copyBytes < 0) {\n                        throw new IllegalStateException(\"No file name stored in the zip file.\");\n                    }\n                    break;\n                case HEADER:\n                    writeDecryptHeader();\n                    fileSize = decode(crcAndSize.get(crcAndSize.size() - 1)[1]);\n                    state = State.DATA;\n                    // intentionally no break\n                case DATA:\n                    b = encrypt(b);\n                    fileSize--;\n                    if (fileSize == 0) {\n                        state = State.NEW_SECTION;\n                    }\n                    break;\n                case BUFFER:\n                    buffer[bufOffset] = b;\n                    bufOffset++;\n                    if (bufOffset == buffer.length) {\n                        state = futureState;\n                    }\n                    return;\n                case BUFFER_COPY:\n                    buffer[bufOffset] = b;\n                    if (checkCondition()) {\n                        bufOffset = 0;\n                        state = futureState;\n                    }\n                    break;\n                case BUFFER_UNTIL:\n                    int col = fileSize % ROW_SIZE;\n                    if (col == 0) {\n                        fileData.add(new int[ROW_SIZE]);\n                    }\n                    int[] row = fileData.get(fileData.size() - 1);\n                    row[col] = b;\n                    buffer[bufOffset] = b;\n                    fileSize++;\n                    if (checkCondition()) {\n                        fileSize -= buffer.length;\n                        state = futureState;\n                    }\n                    return;\n                case FILE_BUFFERED:\n                    row = fileData.get(0);\n                    int r = 0;\n                    int pointer = 16 + row[12] + row[14] + (row[13] + row[15]) * 256;\n                    cns = new int[3][4];\n                    readFromFileBuffer(fileSize - 12, cns[0]);\n                    readFromFileBuffer(fileSize - 8, cns[1]);\n                    readFromFileBuffer(fileSize - 4, cns[2]);\n                    fileSize = decode(cns[1]);\n                    adjustSize(cns[1]);\n                    crcAndSize.add(cns);\n                    for (int i = 0; i < 4; i++) {\n                        row[i] = cns[0][i];\n                        row[i + 4] = cns[1][i];\n                        row[i + 8] = cns[2][i];\n                    }\n                    for (int i = 0; i < pointer; i++) {\n                        writeToDelegate(row[i]);\n                    }\n                    writeDecryptHeader();\n                    for (int i = 0; i < fileSize; i++) {\n                        writeToDelegate(encrypt(row[pointer]));\n                        pointer++;\n                        if (pointer == ROW_SIZE) {\n                            pointer = 0;\n                            r++;\n                            row = fileData.get(r);\n                        }\n                    }\n                    fileData = null;\n                    identifySectionHeader();\n                    break;\n                case REPO_OFFSET:\n                    writeAsBytes(centralRepoOffset);\n                    skipBytes = 3;\n                    state = State.TAIL;\n                    return;\n                case TAIL:\n                    break;\n            }\n        } else {\n            copyBytes--;\n        }\n        writeToDelegate(b);\n    }\n\n    private void writeToDelegate(int b) throws IOException {\n        delegate.write(b);\n        bytesWritten++;\n    }\n\n    private static void adjustSize(int[] values) {\n        int inc = DECRYPT_HEADER_SIZE;\n        for (int i = 0; i < 4; i++) {\n            values[i] = values[i] + inc;\n            inc = values[i] >> 8;\n            values[i] &= 0xff;\n        }\n    }\n\n    private static int decode(int[] value) {\n        return value[0] + (value[1] << 8) + (value[2] << 16) + (value[3] << 24);\n    }\n\n    private void writeAsBytes(int value) throws IOException {\n        for (int i = 0; i < 4; i++) {\n            writeToDelegate(value & 0xff);\n            value >>= 8;\n        }\n    }\n\n    private void identifySectionHeader() throws IllegalStateException, IOException {\n        if (Arrays.equals(buffer, LFH_SIGNATURE)) {\n            section = Section.LFH;\n            copyBytes = 1;\n            state = State.FLAGS;\n            localHeaderOffset.add(bytesWritten);\n        } else if (Arrays.equals(buffer, CFH_SIGNATURE)) {\n            section = Section.CFH;\n            copyBytes = 3;\n            state = State.FLAGS;\n            if (centralRepoOffset == 0) {\n                centralRepoOffset = bytesWritten;\n            }\n        } else if (Arrays.equals(buffer, ECD_SIGNATURE)) {\n            section = Section.ECD;\n            copyBytes = 11;\n            state = State.REPO_OFFSET;\n        } else {\n            throw new IllegalStateException(\"Unknown header: \" + Arrays.asList(buffer).toString());\n        }\n        flushBuffer();\n    }\n\n    private void readFromFileBuffer(int offset, int[] target) {\n        int r = offset / ROW_SIZE;\n        int c = offset % ROW_SIZE;\n        int[] row = fileData.get(r);\n        for (int i = 0; i < target.length; i++) {\n            target[i] = row[c];\n            c++;\n            if (c == ROW_SIZE) {\n                c = 0;\n                r++;\n                row = fileData.get(r);\n            }\n        }\n    }\n\n    @Override\n    public void close() throws IOException {\n        super.close();\n        delegate.close();\n    }\n\n    private void initKeys() {\n        System.arraycopy(pwdKeys, 0, keys, 0, keys.length);\n    }\n\n    private void updateKeys(byte charAt) {\n        ZipExpand.updateKeys(charAt, keys);\n    }\n\n    private byte encryptByte() {\n        int temp = keys[2] | 2;\n        return (byte) ((temp * (temp ^ 1)) >>> 8);\n    }\n\n    private int encrypt(int b) {\n        int newB = (b ^ encryptByte()) & 0xff;\n        updateKeys((byte) b);\n        return newB;\n    }\n\n    private void writeDecryptHeader() throws IOException {\n        initKeys();\n        int[] crc = crcAndSize.get(crcAndSize.size() - 1)[0];\n        SecureRandom random = new SecureRandom();\n        decryptHeader = new byte[DECRYPT_HEADER_SIZE];\n        random.nextBytes(decryptHeader);\n        decryptHeader[DECRYPT_HEADER_SIZE - 2] = (byte) crc[2];\n        decryptHeader[DECRYPT_HEADER_SIZE - 1] = (byte) crc[3];\n        for (int i = 0; i < DECRYPT_HEADER_SIZE; i++) {\n            writeToDelegate(encrypt(decryptHeader[i]));\n        }\n    }\n\n    private void buffer(int[] values, State state, int... knownValues) {\n        System.arraycopy(knownValues, 0, values, 0, knownValues.length);\n        buffer = values;\n        bufOffset = knownValues.length;\n        this.state = State.BUFFER;\n        futureState = state;\n    }\n\n    private void flushBuffer() throws IOException {\n        for (int i = 0; i < bufOffset; i++) {\n            writeToDelegate(buffer[i]);\n        }\n    }\n\n    private void copyBytesUntil(State state, int[]... condition) {\n        futureState = state;\n        this.condition = condition;\n        bufOffset = 0;\n        buffer = new int[condition[0].length];\n        this.state = State.BUFFER_COPY;\n    }\n\n    private void bufferUntil(State state, int[]... condition) {\n        copyBytesUntil(state, condition);\n        fileData = new ArrayList<int[]>();\n        fileSize = 0;\n        this.state = State.BUFFER_UNTIL;\n    }\n\n    private boolean checkCondition() {\n        boolean equals = true;\n        for (int i = 0; i < condition.length; i++) {\n            equals = true;\n            for (int j = 0; j <= bufOffset; j++) {\n                if (condition[i][j] != buffer[j]) {\n                    equals = false;\n                    break;\n                }\n            }\n            if (equals) {\n                bufOffset++;\n                break;\n            }\n        }\n        if (!equals) {\n            bufOffset = 0;\n        }\n        return equals && (buffer.length == bufOffset);\n    }\n}\n```\n\n##解压缩类ZipDecryptInputStream.java\n\n```java\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport static com.zk.zip.ZipExpand.DD_SIGNATURE;\nimport static com.zk.zip.ZipExpand.DECRYPT_HEADER_SIZE;\nimport static com.zk.zip.ZipExpand.LFH_SIGNATURE;\nimport com.zk.zip.ZipExpand.Section;\nimport com.zk.zip.ZipExpand.State;\n\n/**\n * Input stream converting a password-protected zip to an unprotected zip.\n *\n * <h3>Example usage:</h3>\n * <p>Reading a password-protected zip from file:</p>\n * <pre>\n *  ZipDecryptInputStream zdis = new ZipDecryptInputStream(new FileInputStream(fileName), password);\n *  ZipInputStream zis = new ZipInputStream(zdis);\n *  ... read the zip file from zis - the standard JDK ZipInputStream ...\n * </pre>\n * <p>Converting a password-protected zip file to an unprotected zip file:</p>\n * <pre>\n *  ZipDecryptInputStream src = new ZipDecryptInputStream(new FileInputStream(srcFile), password);\n *  FileOutputStream dest = new FileOutputStream(destFile);\n *\n *  // should wrap with try-catch-finally, do the close in finally\n *  int b;\n *  while ((b = src.read()) > -1) {\n *      dest.write(b);\n *  }\n *\n *  src.close();\n *  dest.close();\n * </pre>\n */\npublic class ZipDecryptInputStream extends InputStream {\n    private final InputStream delegate;\n    private final int keys[] = new int[3];\n    private final int pwdKeys[] = new int[3];\n\n    private State state = State.SIGNATURE;\n    private Section section;\n    private int skipBytes;\n    private int compressedSize;\n    private int crc;\n\n    /**\n     * Creates a new instance of the stream.\n     *\n     * @param stream Input stream serving the password-protected zip file to be decrypted.\n     * @param password Password to be used to decrypt the password-protected zip file.\n     */\n    public ZipDecryptInputStream(InputStream stream, String password) {\n        this(stream, password.toCharArray());\n    }\n\n    /**\n     * Safer constructor. Takes password as a char array that can be nulled right after\n     * calling this constructor instead of a string that may be visible on the heap for\n     * the duration of application run time.\n     *\n     * @param stream Input stream serving the password-protected zip file.\n     * @param password Password to use for decrypting the zip file.\n     */\n    public ZipDecryptInputStream(InputStream stream, char[] password) {\n        this.delegate = stream;\n        pwdKeys[0] = 305419896;\n        pwdKeys[1] = 591751049;\n        pwdKeys[2] = 878082192;\n        for (int i = 0; i < password.length; i++) {\n            ZipExpand.updateKeys((byte) (password[i] & 0xff), pwdKeys);\n        }\n    }\n\n    @SuppressWarnings(\"incomplete-switch\")\n\t@Override\n    public int read() throws IOException {\n        int result = delegateRead();\n        if (skipBytes == 0) {\n            switch (state) {\n                case SIGNATURE:\n                    if (!peekAheadEquals(LFH_SIGNATURE)) {\n                        state = State.TAIL;\n                    } else {\n                        section = Section.FILE_HEADER;\n                        skipBytes = 5;\n                        state = State.FLAGS;\n                    }\n                    break;\n                case FLAGS:\n                    if ((result & 1) == 0) {\n                        throw new IllegalStateException(\"ZIP not password protected.\");\n                    }\n                    if ((result & 64) == 64) {\n                        throw new IllegalStateException(\"Strong encryption used.\");\n                    }\n                    if ((result & 8) == 8) {\n                        compressedSize = -1;\n                        state = State.FN_LENGTH;\n                        skipBytes = 19;\n                    } else {\n                        state = State.CRC;\n                        skipBytes = 10;\n                    }\n                    result -= 1;\n                    break;\n                case CRC:\n                    crc = result;\n                    state = State.COMPRESSED_SIZE;\n                    break;\n                case COMPRESSED_SIZE:\n                    int[] values = new int[4];\n                    peekAhead(values);\n                    compressedSize = 0;\n                    int valueInc = DECRYPT_HEADER_SIZE;\n                    for (int i = 0; i < 4; i++) {\n                        compressedSize += values[i] << (8 * i);\n                        values[i] -= valueInc;\n                        if (values[i] < 0) {\n                            valueInc = 1;\n                            values[i] += 256;\n                        } else {\n                            valueInc = 0;\n                        }\n                    }\n                    overrideBuffer(values);\n                    result = values[0];\n                    if (section == Section.DATA_DESCRIPTOR) {\n                        state = State.SIGNATURE;\n                    } else {\n                        state = State.FN_LENGTH;\n                    }\n                    skipBytes = 7;\n                    break;\n                case FN_LENGTH:\n                    values = new int[4];\n                    peekAhead(values);\n                    skipBytes = 3 + values[0] + values[2] + (values[1] + values[3]) * 256;\n                    state = State.HEADER;\n                    break;\n                case HEADER:\n                    section = Section.FILE_DATA;\n                    initKeys();\n                    byte lastValue = 0;\n                    for (int i = 0; i < DECRYPT_HEADER_SIZE; i++) {\n                        lastValue = (byte) (result ^ decryptByte());\n                        updateKeys(lastValue);\n                        result = delegateRead();\n                    }\n                    if ((lastValue & 0xff) != crc) {\n//                        throw new IllegalStateException(\"Wrong password!\");\n                    }\n                    compressedSize -= DECRYPT_HEADER_SIZE;\n                    state = State.DATA;\n                    // intentionally no break\n                case DATA:\n                    if (compressedSize == -1 && peekAheadEquals(DD_SIGNATURE)) {\n                        section = Section.DATA_DESCRIPTOR;\n                        skipBytes = 5;\n                        state = State.CRC;\n                    } else {\n                        result = (result ^ decryptByte()) & 0xff;\n                        updateKeys((byte) result);\n                        compressedSize--;\n                        if (compressedSize == 0) {\n                            state = State.SIGNATURE;\n                        }\n                    }\n                    break;\n                case TAIL:\n                    // do nothing\n            }\n        } else {\n            skipBytes--;\n        }\n        return result;\n    }\n\n    private static final int BUF_SIZE = 8;\n    private int bufOffset = BUF_SIZE;\n    private final int[] buf = new int[BUF_SIZE];\n\n    private int delegateRead() throws IOException {\n        bufOffset++;\n        if (bufOffset >= BUF_SIZE) {\n            fetchData(0);\n            bufOffset = 0;\n        }\n        return buf[bufOffset];\n    }\n\n    private boolean peekAheadEquals(int[] values) throws IOException {\n        prepareBuffer(values);\n        for (int i = 0; i < values.length; i++) {\n            if (buf[bufOffset + i] != values[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private void prepareBuffer(int[] values) throws IOException {\n        if (values.length > (BUF_SIZE - bufOffset)) {\n            for (int i = bufOffset; i < BUF_SIZE; i++) {\n                buf[i - bufOffset] = buf[i];\n            }\n            fetchData(BUF_SIZE - bufOffset);\n            bufOffset = 0;\n        }\n    }\n\n    private void peekAhead(int[] values) throws IOException {\n        prepareBuffer(values);\n        System.arraycopy(buf, bufOffset, values, 0, values.length);\n    }\n\n    private void overrideBuffer(int[] values) throws IOException {\n        prepareBuffer(values);\n        System.arraycopy(values, 0, buf, bufOffset, values.length);\n    }\n\n    private void fetchData(int offset) throws IOException {\n        for (int i = offset; i < BUF_SIZE; i++) {\n            buf[i] = delegate.read();\n            if (buf[i] == -1) {\n                break;\n            }\n        }\n    }\n\n    @Override\n    public void close() throws IOException {\n        delegate.close();\n        super.close();\n    }\n\n    private void initKeys() {\n        System.arraycopy(pwdKeys, 0, keys, 0, keys.length);\n    }\n\n    private void updateKeys(byte charAt) {\n        ZipExpand.updateKeys(charAt, keys);\n    }\n\n    private byte decryptByte() {\n        int temp = keys[2] | 2;\n        return (byte) ((temp * (temp ^ 1)) >>> 8);\n    }\n}\n```\n\n##解密工具类ZipExpand.java\n```java\n\nclass ZipExpand {\n    static final int[] CRC_TABLE = new int[256];\n    // compute the table\n    // (could also have it pre-computed - see http://snippets.dzone.com/tag/crc32)\n    static {\n        for (int i = 0; i < 256; i++) {\n            int r = i;\n            for (int j = 0; j < 8; j++) {\n                if ((r & 1) == 1) {\n                    r = (r >>> 1) ^ 0xedb88320;\n                } else {\n                    r >>>= 1;\n                }\n            }\n            CRC_TABLE[i] = r;\n        }\n    }\n\n    static final int DECRYPT_HEADER_SIZE = 12;\n    static final int[] CFH_SIGNATURE = {0x50, 0x4b, 0x01, 0x02};\n    static final int[] LFH_SIGNATURE = {0x50, 0x4b, 0x03, 0x04};\n    static final int[] ECD_SIGNATURE = {0x50, 0x4b, 0x05, 0x06};\n    static final int[] DD_SIGNATURE = {0x50, 0x4b, 0x07, 0x08};\n\n    static void updateKeys(byte charAt, int[] keys) {\n        keys[0] = crc32(keys[0], charAt);\n        keys[1] += keys[0] & 0xff;\n        keys[1] = keys[1] * 134775813 + 1;\n        keys[2] = crc32(keys[2], (byte) (keys[1] >> 24));\n    }\n\n    static int crc32(int oldCrc, byte charAt) {\n        return ((oldCrc >>> 8) ^ CRC_TABLE[(oldCrc ^ charAt) & 0xff]);\n    }\n\n    static enum State {\n        SIGNATURE, FLAGS, COMPRESSED_SIZE, FN_LENGTH, EF_LENGTH, HEADER, DATA, TAIL, CRC\n    }\n\n    static enum Section {\n        FILE_HEADER, FILE_DATA, DATA_DESCRIPTOR\n    }\n}\n```\n\n## 例子\n```java\n\nimport java.io.BufferedInputStream;\nimport java.io.BufferedReader;\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipInputStream;\nimport java.util.zip.ZipOutputStream;\n\npublic class ZipUtil {\n\n\tpublic static void main(String[] args) throws Exception {\n\t\ttry {\n\t\t\tboolean a=true;\n\t\t\tboolean b=a==false;\n\t\t\t\n\t\t\t/**\n\t\t\t * 压缩\n\t\t\t */\n\t\t\tif(a){\n\t\t\t   //读取文件流\n\t\t\t\tList<InputStream> list=new ArrayList<InputStream>();\n\t\t\t\tlist.add(new FileInputStream(new File(\"C:\\\\Users\\\\zk\\\\Desktop\\\\a.txt\")));\n\t\t\t\tlist.add(new FileInputStream(new File(\"C:\\\\Users\\\\zk\\\\Desktop\\\\b.txt\")));\n\t\t\t\tlist.add(new FileInputStream(new File(\"C:\\\\Users\\\\zk\\\\Desktop\\\\c.txt\")));\n\t\t\t\t//获取输出流\n\t\t\t\tByteArrayOutputStream array=writeZipOutputStream(list.toArray(new FileInputStream[0]),new String[]{\"a.txt\",\"b.txt\",\"c.txt\"}, \"123456\");\n\t\t\t\t//写入文件\n\t\t\t\tFile file=new File(\"C:\\\\Users\\\\zk\\\\Desktop\\\\a.zip\");\n\t\t\t\tif (!file.exists()) {\n\t\t\t\tfile.createNewFile();\n\t\t\t\t}\n\t\t\t\tDataOutputStream to=new DataOutputStream(new FileOutputStream(file));\n\t\t\t\tto.write(array.toByteArray());\n\t\t\t\tto.close();\n\t\t\t\tarray.close();\n\t\t\t}\n\t\t\t\n\t\t\t/**\n\t\t\t * 解压\n\t\t\t */\n\t\t\tif(b){\n\t\t\t   //获取文件字节数组\n\t\t\t\tFile file=new File(\"C:\\\\Users\\\\zk\\\\Desktop\\\\Desktop.zip\");\n\t\t\t\tbyte[] data =new byte[(int) file.length()];\n\t\t\t\tFileInputStream fileInputStream=new FileInputStream(file);\n\t\t\t\tfileInputStream.read(data);\n\t\t\t\t//解压文件获取文本内容\n\t\t\t\tStringBuffer sb=readZip(data,\"123456\");\n\t\t\t\tfileInputStream.close();\n\t\t\t\tSystem.out.println(sb);\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n\t\n\t/**\n\t * 压缩\n\t * @param inputStreams 输入流数组\n\t * @param fileName 文件名数组\n\t * @param password 密码\n\t * @return\n\t * @throws IOException\n\t */\n\tpublic static ByteArrayOutputStream writeZipOutputStream(InputStream [] inputStreams,String [] fileName,String password) throws IOException{\n\t\tZipOutputStream zos = null;\n\t\tByteArrayOutputStream baos=null;\n\t\ttry {\n\t\t\tbaos=new ByteArrayOutputStream();\n\t\t\tzos = new ZipOutputStream(new ZipEncryptOutputStream(baos, password));\n\t\t\tfor (int i = 0; i < inputStreams.length; i++) {\n\t\t        ZipEntry ze = new ZipEntry(fileName[i]);\n\t\t        zos.putNextEntry(ze);\n\t\t        InputStream is = null;\n\t\t        try {\n\t\t        \tis = inputStreams[i];\n\t\t\t        int b;\n\t\t\t        while ((b = is.read()) != -1) {\n\t\t\t            zos.write(b);\n\t\t\t        }\n\t\t\t\t} finally{\n\t\t\t\t\tif(is!=null){\n\t\t\t\t\t\tis.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t    }\n\t\t} finally{\n\t\t\tif(zos!=null){\n\t\t\t\tzos.closeEntry();\n\t\t\t\tzos.close();\n\t\t\t}\n\t\t}\n\t\treturn baos;\n\t}\n\t\n\t\n\t/**\n\t * 解压缩\n\t * @param data zip字节数组\n\t * @param password zip密码\n\t * @return\n\t * @throws IOException\n\t */\n\tpublic static StringBuffer readZip(byte[] data,String password) throws IOException  {\n\t\tStringBuffer sb = new StringBuffer();\n\t\tZipInputStream zin = null;\n\t\tDataInputStream dis = null;\n\t\ttry {\n\t\t\tzin = new ZipInputStream(new ZipDecryptInputStream(new BufferedInputStream(new ByteArrayInputStream(data)), password));\n\t\t\tdis = new DataInputStream(zin);//用ZIP输入流构建DataInputStream     \n\t\t\tZipEntry ze;\n\t\t\twhile ((ze = zin.getNextEntry()) != null) {\n\t\t\t\tif (ze.isDirectory()) {\n\t\t\t\t} else {\n\t\t\t\t\tlong size = ze.getSize();\n\t\t\t\t\tSystem.out.println(ze.getName());\n\t\t\t\t\tif (size > 0) {\n\t\t\t\t\t\tBufferedReader br = null;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tbyte[] content = new byte[(int) ze.getSize()];\n\t\t\t\t\t\t\tdis.readFully(content);\n\t\t\t\t\t\t\tbr = new BufferedReader(new InputStreamReader(new ByteArrayInputStream(content)));\n\t\t\t\t\t\t\tString line;\n\t\t\t\t\t\t\twhile ((line = br.readLine()) != null) {\n\t\t\t\t\t\t\t\tsb.append(line).append(\"\\n\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}finally{\n\t\t\t\t\t\t\tif(br!=null)\n\t\t\t\t\t\t\t\tbr.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}finally{\n\t\t\tif(zin!=null){\n\t\t\t\tzin.closeEntry();\n\t\t\t\tzin.close();\n\t\t\t}\n\t\t\tif(dis!=null)\n\t\t\t\tdis.close();\n\t\t}\n\t\treturn sb;\n\t}\n}\n```","slug":"java内存解压带密码zip","published":1,"updated":"2018-12-13T08:24:34.075Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjpmdjsr4005fi85nvdmw39tf","content":"<h2 id=\"压缩类ZipEncryptOutputStream-java\"><a href=\"#压缩类ZipEncryptOutputStream-java\" class=\"headerlink\" title=\"压缩类ZipEncryptOutputStream.java\"></a>压缩类ZipEncryptOutputStream.java</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.SecureRandom;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Arrays;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> com.zk.zip.ZipExpand.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Output stream that can be used to password-protect zip files.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;h3&gt;Example usage:&lt;/h3&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;Creating a password-protected zip file:&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipEncryptOutputStream zeos = new ZipEncryptOutputStream(new FileOutputStream(fileName), password);</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipOutputStream zos = new ZipOuputStream(zdis);</span></span><br><span class=\"line\"><span class=\"comment\"> *  ... create zip file using the standard JDK ZipOutputStream in zos variable ...</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;Converting a plain zip file to a password-protected zip file:&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *  FileInputStream src = new FileInputStream(srcFile);</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipEncryptOutputStream dest = new ZipEncryptOutputStream(new FileOutputStream(destFile), password);</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  // should wrap with try-catch-finally, do the close in finally</span></span><br><span class=\"line\"><span class=\"comment\"> *  int b;</span></span><br><span class=\"line\"><span class=\"comment\"> *  while ((b = src.read()) &gt; -1) &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *      dest.write(b);</span></span><br><span class=\"line\"><span class=\"comment\"> *  &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  src.close();</span></span><br><span class=\"line\"><span class=\"comment\"> *  dest.close();</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipEncryptOutputStream</span> <span class=\"keyword\">extends</span> <span class=\"title\">OutputStream</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> OutputStream delegate;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> keys[] = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> pwdKeys[] = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> copyBytes;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> skipBytes;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> State state = State.NEW_SECTION;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> State futureState;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Section section;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">byte</span>[] decryptHeader;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ArrayList&lt;<span class=\"keyword\">int</span>[][]&gt; crcAndSize = <span class=\"keyword\">new</span> ArrayList&lt;<span class=\"keyword\">int</span>[][]&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ArrayList&lt;Integer&gt; localHeaderOffset = <span class=\"keyword\">new</span> ArrayList&lt;Integer&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ArrayList&lt;<span class=\"keyword\">int</span>[]&gt; fileData;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[][] condition;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> fileIndex;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] buffer;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> bufOffset;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> fileSize;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> bytesWritten;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> centralRepoOffset;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> ROW_SIZE = <span class=\"number\">65536</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Convenience constructor taking password as a string.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> delegate Output stream to write the password-protected zip to.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> password Password to use for protecting the zip.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ZipEncryptOutputStream</span><span class=\"params\">(OutputStream delegate, String password)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>(delegate, password.toCharArray());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Safer version of the constructor. Takes password as a char array that can</span></span><br><span class=\"line\"><span class=\"comment\">     * be nulled right after calling this constructor instead of a string that may</span></span><br><span class=\"line\"><span class=\"comment\">     * stay visible on the heap for the duration of application run time.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> delegate Output stream to write the password-protected zip to.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> password Password to use for protecting the zip.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ZipEncryptOutputStream</span><span class=\"params\">(OutputStream delegate, <span class=\"keyword\">char</span>[] password)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.delegate = delegate;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">0</span>] = <span class=\"number\">305419896</span>;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">1</span>] = <span class=\"number\">591751049</span>;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">2</span>] = <span class=\"number\">878082192</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; password.length; i++) &#123;</span><br><span class=\"line\">            ZipExpand.updateKeys((<span class=\"keyword\">byte</span>) (password[i] &amp; <span class=\"number\">0xff</span>), pwdKeys);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">enum</span> State &#123;NEW_SECTION, SECTION_HEADER, FLAGS, REPO_OFFSET, CRC, FILE_HEADER_OFFSET,</span><br><span class=\"line\">        COMPRESSED_SIZE_READ, HEADER, DATA, FILE_BUFFERED, BUFFER, BUFFER_COPY, BUFFER_UNTIL, TAIL&#125;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">enum</span> Section &#123;LFH, CFH, ECD&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">write</span><span class=\"params\">(<span class=\"keyword\">int</span> b)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (skipBytes &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            skipBytes--;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (copyBytes == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (state) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> NEW_SECTION:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (b != <span class=\"number\">0x50</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Unexpected value read at offset \"</span> + bytesWritten + <span class=\"string\">\": \"</span> + b + <span class=\"string\">\" (expected: \"</span> + <span class=\"number\">0x50</span> + <span class=\"string\">\")\"</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    buffer(<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">4</span>], State.SECTION_HEADER, <span class=\"number\">0x50</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> SECTION_HEADER:</span><br><span class=\"line\">                    identifySectionHeader();</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> FLAGS:</span><br><span class=\"line\">                    copyBytes = <span class=\"number\">7</span>;</span><br><span class=\"line\">                    state = State.CRC;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (section == Section.LFH) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> ((b &amp; <span class=\"number\">1</span>) == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"ZIP already password protected.\"</span>);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> ((b &amp; <span class=\"number\">64</span>) == <span class=\"number\">64</span>) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Strong encryption used.\"</span>);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> ((b &amp; <span class=\"number\">8</span>) == <span class=\"number\">8</span>) &#123;</span><br><span class=\"line\">                            bufferUntil(State.FILE_BUFFERED, CFH_SIGNATURE, LFH_SIGNATURE);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    b = b &amp; <span class=\"number\">0xf7</span> | <span class=\"number\">1</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> CRC:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (section == Section.CFH) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">int</span>[][] cns = crcAndSize.get(fileIndex);</span><br><span class=\"line\">                        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">3</span>; j++) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">                                writeToDelegate(cns[j][i]);</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        skipBytes = <span class=\"number\">11</span>;</span><br><span class=\"line\">                        copyBytes = <span class=\"number\">14</span>;</span><br><span class=\"line\">                        state = State.FILE_HEADER_OFFSET;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">int</span>[] cns = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">16</span>];</span><br><span class=\"line\">                        buffer(cns, State.COMPRESSED_SIZE_READ, b);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> FILE_HEADER_OFFSET:</span><br><span class=\"line\">                    writeAsBytes(localHeaderOffset.get(fileIndex));</span><br><span class=\"line\">                    fileIndex++;</span><br><span class=\"line\">                    skipBytes = <span class=\"number\">3</span>;</span><br><span class=\"line\">                    copyBytesUntil(State.SECTION_HEADER, CFH_SIGNATURE, ECD_SIGNATURE);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> COMPRESSED_SIZE_READ:</span><br><span class=\"line\">                    <span class=\"keyword\">int</span>[][] cns = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[][] &#123;</span><br><span class=\"line\">                        &#123;buffer[<span class=\"number\">0</span>], buffer[<span class=\"number\">1</span>], buffer[<span class=\"number\">2</span>], buffer[<span class=\"number\">3</span>]&#125;,</span><br><span class=\"line\">                        &#123;buffer[<span class=\"number\">4</span>], buffer[<span class=\"number\">5</span>], buffer[<span class=\"number\">6</span>], buffer[<span class=\"number\">7</span>]&#125;,</span><br><span class=\"line\">                        &#123;buffer[<span class=\"number\">8</span>], buffer[<span class=\"number\">9</span>], buffer[<span class=\"number\">10</span>], buffer[<span class=\"number\">11</span>]&#125;</span><br><span class=\"line\">                    &#125;;</span><br><span class=\"line\">                    adjustSize(cns[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                    crcAndSize.add(cns);</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">3</span>; j++) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">                            writeToDelegate(cns[j][i]);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    copyBytes = buffer[<span class=\"number\">12</span>] + buffer[<span class=\"number\">14</span>] + (buffer[<span class=\"number\">13</span>] + buffer[<span class=\"number\">15</span>]) * <span class=\"number\">256</span> - <span class=\"number\">1</span>;</span><br><span class=\"line\">                    state = State.HEADER;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (copyBytes &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"No file name stored in the zip file.\"</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> HEADER:</span><br><span class=\"line\">                    writeDecryptHeader();</span><br><span class=\"line\">                    fileSize = decode(crcAndSize.get(crcAndSize.size() - <span class=\"number\">1</span>)[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                    state = State.DATA;</span><br><span class=\"line\">                    <span class=\"comment\">// intentionally no break</span></span><br><span class=\"line\">                <span class=\"keyword\">case</span> DATA:</span><br><span class=\"line\">                    b = encrypt(b);</span><br><span class=\"line\">                    fileSize--;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (fileSize == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        state = State.NEW_SECTION;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> BUFFER:</span><br><span class=\"line\">                    buffer[bufOffset] = b;</span><br><span class=\"line\">                    bufOffset++;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (bufOffset == buffer.length) &#123;</span><br><span class=\"line\">                        state = futureState;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> BUFFER_COPY:</span><br><span class=\"line\">                    buffer[bufOffset] = b;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (checkCondition()) &#123;</span><br><span class=\"line\">                        bufOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">                        state = futureState;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> BUFFER_UNTIL:</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> col = fileSize % ROW_SIZE;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (col == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        fileData.add(<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[ROW_SIZE]);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">int</span>[] row = fileData.get(fileData.size() - <span class=\"number\">1</span>);</span><br><span class=\"line\">                    row[col] = b;</span><br><span class=\"line\">                    buffer[bufOffset] = b;</span><br><span class=\"line\">                    fileSize++;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (checkCondition()) &#123;</span><br><span class=\"line\">                        fileSize -= buffer.length;</span><br><span class=\"line\">                        state = futureState;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> FILE_BUFFERED:</span><br><span class=\"line\">                    row = fileData.get(<span class=\"number\">0</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> r = <span class=\"number\">0</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> pointer = <span class=\"number\">16</span> + row[<span class=\"number\">12</span>] + row[<span class=\"number\">14</span>] + (row[<span class=\"number\">13</span>] + row[<span class=\"number\">15</span>]) * <span class=\"number\">256</span>;</span><br><span class=\"line\">                    cns = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">3</span>][<span class=\"number\">4</span>];</span><br><span class=\"line\">                    readFromFileBuffer(fileSize - <span class=\"number\">12</span>, cns[<span class=\"number\">0</span>]);</span><br><span class=\"line\">                    readFromFileBuffer(fileSize - <span class=\"number\">8</span>, cns[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                    readFromFileBuffer(fileSize - <span class=\"number\">4</span>, cns[<span class=\"number\">2</span>]);</span><br><span class=\"line\">                    fileSize = decode(cns[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                    adjustSize(cns[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                    crcAndSize.add(cns);</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">                        row[i] = cns[<span class=\"number\">0</span>][i];</span><br><span class=\"line\">                        row[i + <span class=\"number\">4</span>] = cns[<span class=\"number\">1</span>][i];</span><br><span class=\"line\">                        row[i + <span class=\"number\">8</span>] = cns[<span class=\"number\">2</span>][i];</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; pointer; i++) &#123;</span><br><span class=\"line\">                        writeToDelegate(row[i]);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    writeDecryptHeader();</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; fileSize; i++) &#123;</span><br><span class=\"line\">                        writeToDelegate(encrypt(row[pointer]));</span><br><span class=\"line\">                        pointer++;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (pointer == ROW_SIZE) &#123;</span><br><span class=\"line\">                            pointer = <span class=\"number\">0</span>;</span><br><span class=\"line\">                            r++;</span><br><span class=\"line\">                            row = fileData.get(r);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    fileData = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                    identifySectionHeader();</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> REPO_OFFSET:</span><br><span class=\"line\">                    writeAsBytes(centralRepoOffset);</span><br><span class=\"line\">                    skipBytes = <span class=\"number\">3</span>;</span><br><span class=\"line\">                    state = State.TAIL;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> TAIL:</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            copyBytes--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        writeToDelegate(b);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">writeToDelegate</span><span class=\"params\">(<span class=\"keyword\">int</span> b)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        delegate.write(b);</span><br><span class=\"line\">        bytesWritten++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">adjustSize</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> inc = DECRYPT_HEADER_SIZE;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">            values[i] = values[i] + inc;</span><br><span class=\"line\">            inc = values[i] &gt;&gt; <span class=\"number\">8</span>;</span><br><span class=\"line\">            values[i] &amp;= <span class=\"number\">0xff</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">decode</span><span class=\"params\">(<span class=\"keyword\">int</span>[] value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value[<span class=\"number\">0</span>] + (value[<span class=\"number\">1</span>] &lt;&lt; <span class=\"number\">8</span>) + (value[<span class=\"number\">2</span>] &lt;&lt; <span class=\"number\">16</span>) + (value[<span class=\"number\">3</span>] &lt;&lt; <span class=\"number\">24</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">writeAsBytes</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">            writeToDelegate(value &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">            value &gt;&gt;= <span class=\"number\">8</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">identifySectionHeader</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IllegalStateException, IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Arrays.equals(buffer, LFH_SIGNATURE)) &#123;</span><br><span class=\"line\">            section = Section.LFH;</span><br><span class=\"line\">            copyBytes = <span class=\"number\">1</span>;</span><br><span class=\"line\">            state = State.FLAGS;</span><br><span class=\"line\">            localHeaderOffset.add(bytesWritten);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (Arrays.equals(buffer, CFH_SIGNATURE)) &#123;</span><br><span class=\"line\">            section = Section.CFH;</span><br><span class=\"line\">            copyBytes = <span class=\"number\">3</span>;</span><br><span class=\"line\">            state = State.FLAGS;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (centralRepoOffset == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                centralRepoOffset = bytesWritten;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (Arrays.equals(buffer, ECD_SIGNATURE)) &#123;</span><br><span class=\"line\">            section = Section.ECD;</span><br><span class=\"line\">            copyBytes = <span class=\"number\">11</span>;</span><br><span class=\"line\">            state = State.REPO_OFFSET;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Unknown header: \"</span> + Arrays.asList(buffer).toString());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        flushBuffer();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">readFromFileBuffer</span><span class=\"params\">(<span class=\"keyword\">int</span> offset, <span class=\"keyword\">int</span>[] target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> r = offset / ROW_SIZE;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> c = offset % ROW_SIZE;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] row = fileData.get(r);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; target.length; i++) &#123;</span><br><span class=\"line\">            target[i] = row[c];</span><br><span class=\"line\">            c++;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (c == ROW_SIZE) &#123;</span><br><span class=\"line\">                c = <span class=\"number\">0</span>;</span><br><span class=\"line\">                r++;</span><br><span class=\"line\">                row = fileData.get(r);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">close</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.close();</span><br><span class=\"line\">        delegate.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initKeys</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.arraycopy(pwdKeys, <span class=\"number\">0</span>, keys, <span class=\"number\">0</span>, keys.length);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">updateKeys</span><span class=\"params\">(<span class=\"keyword\">byte</span> charAt)</span> </span>&#123;</span><br><span class=\"line\">        ZipExpand.updateKeys(charAt, keys);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">byte</span> <span class=\"title\">encryptByte</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> temp = keys[<span class=\"number\">2</span>] | <span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">byte</span>) ((temp * (temp ^ <span class=\"number\">1</span>)) &gt;&gt;&gt; <span class=\"number\">8</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">encrypt</span><span class=\"params\">(<span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> newB = (b ^ encryptByte()) &amp; <span class=\"number\">0xff</span>;</span><br><span class=\"line\">        updateKeys((<span class=\"keyword\">byte</span>) b);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newB;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">writeDecryptHeader</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        initKeys();</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] crc = crcAndSize.get(crcAndSize.size() - <span class=\"number\">1</span>)[<span class=\"number\">0</span>];</span><br><span class=\"line\">        SecureRandom random = <span class=\"keyword\">new</span> SecureRandom();</span><br><span class=\"line\">        decryptHeader = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[DECRYPT_HEADER_SIZE];</span><br><span class=\"line\">        random.nextBytes(decryptHeader);</span><br><span class=\"line\">        decryptHeader[DECRYPT_HEADER_SIZE - <span class=\"number\">2</span>] = (<span class=\"keyword\">byte</span>) crc[<span class=\"number\">2</span>];</span><br><span class=\"line\">        decryptHeader[DECRYPT_HEADER_SIZE - <span class=\"number\">1</span>] = (<span class=\"keyword\">byte</span>) crc[<span class=\"number\">3</span>];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; DECRYPT_HEADER_SIZE; i++) &#123;</span><br><span class=\"line\">            writeToDelegate(encrypt(decryptHeader[i]));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">buffer</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values, State state, <span class=\"keyword\">int</span>... knownValues)</span> </span>&#123;</span><br><span class=\"line\">        System.arraycopy(knownValues, <span class=\"number\">0</span>, values, <span class=\"number\">0</span>, knownValues.length);</span><br><span class=\"line\">        buffer = values;</span><br><span class=\"line\">        bufOffset = knownValues.length;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.state = State.BUFFER;</span><br><span class=\"line\">        futureState = state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">flushBuffer</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; bufOffset; i++) &#123;</span><br><span class=\"line\">            writeToDelegate(buffer[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">copyBytesUntil</span><span class=\"params\">(State state, <span class=\"keyword\">int</span>[]... condition)</span> </span>&#123;</span><br><span class=\"line\">        futureState = state;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.condition = condition;</span><br><span class=\"line\">        bufOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">        buffer = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[condition[<span class=\"number\">0</span>].length];</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.state = State.BUFFER_COPY;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">bufferUntil</span><span class=\"params\">(State state, <span class=\"keyword\">int</span>[]... condition)</span> </span>&#123;</span><br><span class=\"line\">        copyBytesUntil(state, condition);</span><br><span class=\"line\">        fileData = <span class=\"keyword\">new</span> ArrayList&lt;<span class=\"keyword\">int</span>[]&gt;();</span><br><span class=\"line\">        fileSize = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.state = State.BUFFER_UNTIL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">checkCondition</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> equals = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; condition.length; i++) &#123;</span><br><span class=\"line\">            equals = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt;= bufOffset; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (condition[i][j] != buffer[j]) &#123;</span><br><span class=\"line\">                    equals = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (equals) &#123;</span><br><span class=\"line\">                bufOffset++;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!equals) &#123;</span><br><span class=\"line\">            bufOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> equals &amp;&amp; (buffer.length == bufOffset);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>##解压缩类ZipDecryptInputStream.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> com.zk.zip.ZipExpand.DD_SIGNATURE;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> com.zk.zip.ZipExpand.DECRYPT_HEADER_SIZE;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> com.zk.zip.ZipExpand.LFH_SIGNATURE;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zk.zip.ZipExpand.Section;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zk.zip.ZipExpand.State;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Input stream converting a password-protected zip to an unprotected zip.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;h3&gt;Example usage:&lt;/h3&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;Reading a password-protected zip from file:&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipDecryptInputStream zdis = new ZipDecryptInputStream(new FileInputStream(fileName), password);</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipInputStream zis = new ZipInputStream(zdis);</span></span><br><span class=\"line\"><span class=\"comment\"> *  ... read the zip file from zis - the standard JDK ZipInputStream ...</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;Converting a password-protected zip file to an unprotected zip file:&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipDecryptInputStream src = new ZipDecryptInputStream(new FileInputStream(srcFile), password);</span></span><br><span class=\"line\"><span class=\"comment\"> *  FileOutputStream dest = new FileOutputStream(destFile);</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  // should wrap with try-catch-finally, do the close in finally</span></span><br><span class=\"line\"><span class=\"comment\"> *  int b;</span></span><br><span class=\"line\"><span class=\"comment\"> *  while ((b = src.read()) &gt; -1) &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *      dest.write(b);</span></span><br><span class=\"line\"><span class=\"comment\"> *  &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  src.close();</span></span><br><span class=\"line\"><span class=\"comment\"> *  dest.close();</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipDecryptInputStream</span> <span class=\"keyword\">extends</span> <span class=\"title\">InputStream</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> InputStream delegate;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> keys[] = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> pwdKeys[] = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> State state = State.SIGNATURE;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Section section;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> skipBytes;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> compressedSize;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> crc;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Creates a new instance of the stream.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> stream Input stream serving the password-protected zip file to be decrypted.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> password Password to be used to decrypt the password-protected zip file.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ZipDecryptInputStream</span><span class=\"params\">(InputStream stream, String password)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>(stream, password.toCharArray());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Safer constructor. Takes password as a char array that can be nulled right after</span></span><br><span class=\"line\"><span class=\"comment\">     * calling this constructor instead of a string that may be visible on the heap for</span></span><br><span class=\"line\"><span class=\"comment\">     * the duration of application run time.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> stream Input stream serving the password-protected zip file.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> password Password to use for decrypting the zip file.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ZipDecryptInputStream</span><span class=\"params\">(InputStream stream, <span class=\"keyword\">char</span>[] password)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.delegate = stream;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">0</span>] = <span class=\"number\">305419896</span>;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">1</span>] = <span class=\"number\">591751049</span>;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">2</span>] = <span class=\"number\">878082192</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; password.length; i++) &#123;</span><br><span class=\"line\">            ZipExpand.updateKeys((<span class=\"keyword\">byte</span>) (password[i] &amp; <span class=\"number\">0xff</span>), pwdKeys);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"incomplete-switch\"</span>)</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">read</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = delegateRead();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (skipBytes == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (state) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> SIGNATURE:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (!peekAheadEquals(LFH_SIGNATURE)) &#123;</span><br><span class=\"line\">                        state = State.TAIL;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        section = Section.FILE_HEADER;</span><br><span class=\"line\">                        skipBytes = <span class=\"number\">5</span>;</span><br><span class=\"line\">                        state = State.FLAGS;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> FLAGS:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ((result &amp; <span class=\"number\">1</span>) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"ZIP not password protected.\"</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ((result &amp; <span class=\"number\">64</span>) == <span class=\"number\">64</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Strong encryption used.\"</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ((result &amp; <span class=\"number\">8</span>) == <span class=\"number\">8</span>) &#123;</span><br><span class=\"line\">                        compressedSize = -<span class=\"number\">1</span>;</span><br><span class=\"line\">                        state = State.FN_LENGTH;</span><br><span class=\"line\">                        skipBytes = <span class=\"number\">19</span>;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        state = State.CRC;</span><br><span class=\"line\">                        skipBytes = <span class=\"number\">10</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    result -= <span class=\"number\">1</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> CRC:</span><br><span class=\"line\">                    crc = result;</span><br><span class=\"line\">                    state = State.COMPRESSED_SIZE;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> COMPRESSED_SIZE:</span><br><span class=\"line\">                    <span class=\"keyword\">int</span>[] values = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\">                    peekAhead(values);</span><br><span class=\"line\">                    compressedSize = <span class=\"number\">0</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> valueInc = DECRYPT_HEADER_SIZE;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">                        compressedSize += values[i] &lt;&lt; (<span class=\"number\">8</span> * i);</span><br><span class=\"line\">                        values[i] -= valueInc;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (values[i] &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                            valueInc = <span class=\"number\">1</span>;</span><br><span class=\"line\">                            values[i] += <span class=\"number\">256</span>;</span><br><span class=\"line\">                        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                            valueInc = <span class=\"number\">0</span>;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    overrideBuffer(values);</span><br><span class=\"line\">                    result = values[<span class=\"number\">0</span>];</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (section == Section.DATA_DESCRIPTOR) &#123;</span><br><span class=\"line\">                        state = State.SIGNATURE;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        state = State.FN_LENGTH;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    skipBytes = <span class=\"number\">7</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> FN_LENGTH:</span><br><span class=\"line\">                    values = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\">                    peekAhead(values);</span><br><span class=\"line\">                    skipBytes = <span class=\"number\">3</span> + values[<span class=\"number\">0</span>] + values[<span class=\"number\">2</span>] + (values[<span class=\"number\">1</span>] + values[<span class=\"number\">3</span>]) * <span class=\"number\">256</span>;</span><br><span class=\"line\">                    state = State.HEADER;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> HEADER:</span><br><span class=\"line\">                    section = Section.FILE_DATA;</span><br><span class=\"line\">                    initKeys();</span><br><span class=\"line\">                    <span class=\"keyword\">byte</span> lastValue = <span class=\"number\">0</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; DECRYPT_HEADER_SIZE; i++) &#123;</span><br><span class=\"line\">                        lastValue = (<span class=\"keyword\">byte</span>) (result ^ decryptByte());</span><br><span class=\"line\">                        updateKeys(lastValue);</span><br><span class=\"line\">                        result = delegateRead();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ((lastValue &amp; <span class=\"number\">0xff</span>) != crc) &#123;</span><br><span class=\"line\"><span class=\"comment\">//                        throw new IllegalStateException(\"Wrong password!\");</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    compressedSize -= DECRYPT_HEADER_SIZE;</span><br><span class=\"line\">                    state = State.DATA;</span><br><span class=\"line\">                    <span class=\"comment\">// intentionally no break</span></span><br><span class=\"line\">                <span class=\"keyword\">case</span> DATA:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (compressedSize == -<span class=\"number\">1</span> &amp;&amp; peekAheadEquals(DD_SIGNATURE)) &#123;</span><br><span class=\"line\">                        section = Section.DATA_DESCRIPTOR;</span><br><span class=\"line\">                        skipBytes = <span class=\"number\">5</span>;</span><br><span class=\"line\">                        state = State.CRC;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        result = (result ^ decryptByte()) &amp; <span class=\"number\">0xff</span>;</span><br><span class=\"line\">                        updateKeys((<span class=\"keyword\">byte</span>) result);</span><br><span class=\"line\">                        compressedSize--;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (compressedSize == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                            state = State.SIGNATURE;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> TAIL:</span><br><span class=\"line\">                    <span class=\"comment\">// do nothing</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            skipBytes--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> BUF_SIZE = <span class=\"number\">8</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> bufOffset = BUF_SIZE;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] buf = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[BUF_SIZE];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">delegateRead</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        bufOffset++;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (bufOffset &gt;= BUF_SIZE) &#123;</span><br><span class=\"line\">            fetchData(<span class=\"number\">0</span>);</span><br><span class=\"line\">            bufOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> buf[bufOffset];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">peekAheadEquals</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        prepareBuffer(values);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; values.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (buf[bufOffset + i] != values[i]) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">prepareBuffer</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (values.length &gt; (BUF_SIZE - bufOffset)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = bufOffset; i &lt; BUF_SIZE; i++) &#123;</span><br><span class=\"line\">                buf[i - bufOffset] = buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            fetchData(BUF_SIZE - bufOffset);</span><br><span class=\"line\">            bufOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">peekAhead</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        prepareBuffer(values);</span><br><span class=\"line\">        System.arraycopy(buf, bufOffset, values, <span class=\"number\">0</span>, values.length);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">overrideBuffer</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        prepareBuffer(values);</span><br><span class=\"line\">        System.arraycopy(values, <span class=\"number\">0</span>, buf, bufOffset, values.length);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">fetchData</span><span class=\"params\">(<span class=\"keyword\">int</span> offset)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = offset; i &lt; BUF_SIZE; i++) &#123;</span><br><span class=\"line\">            buf[i] = delegate.read();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (buf[i] == -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">close</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        delegate.close();</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initKeys</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.arraycopy(pwdKeys, <span class=\"number\">0</span>, keys, <span class=\"number\">0</span>, keys.length);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">updateKeys</span><span class=\"params\">(<span class=\"keyword\">byte</span> charAt)</span> </span>&#123;</span><br><span class=\"line\">        ZipExpand.updateKeys(charAt, keys);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">byte</span> <span class=\"title\">decryptByte</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> temp = keys[<span class=\"number\">2</span>] | <span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">byte</span>) ((temp * (temp ^ <span class=\"number\">1</span>)) &gt;&gt;&gt; <span class=\"number\">8</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>##解密工具类ZipExpand.java<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipExpand</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] CRC_TABLE = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">256</span>];</span><br><span class=\"line\">    <span class=\"comment\">// compute the table</span></span><br><span class=\"line\">    <span class=\"comment\">// (could also have it pre-computed - see http://snippets.dzone.com/tag/crc32)</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">256</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> r = i;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">8</span>; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ((r &amp; <span class=\"number\">1</span>) == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                    r = (r &gt;&gt;&gt; <span class=\"number\">1</span>) ^ <span class=\"number\">0xedb88320</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    r &gt;&gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            CRC_TABLE[i] = r;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DECRYPT_HEADER_SIZE = <span class=\"number\">12</span>;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] CFH_SIGNATURE = &#123;<span class=\"number\">0x50</span>, <span class=\"number\">0x4b</span>, <span class=\"number\">0x01</span>, <span class=\"number\">0x02</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] LFH_SIGNATURE = &#123;<span class=\"number\">0x50</span>, <span class=\"number\">0x4b</span>, <span class=\"number\">0x03</span>, <span class=\"number\">0x04</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] ECD_SIGNATURE = &#123;<span class=\"number\">0x50</span>, <span class=\"number\">0x4b</span>, <span class=\"number\">0x05</span>, <span class=\"number\">0x06</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] DD_SIGNATURE = &#123;<span class=\"number\">0x50</span>, <span class=\"number\">0x4b</span>, <span class=\"number\">0x07</span>, <span class=\"number\">0x08</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">updateKeys</span><span class=\"params\">(<span class=\"keyword\">byte</span> charAt, <span class=\"keyword\">int</span>[] keys)</span> </span>&#123;</span><br><span class=\"line\">        keys[<span class=\"number\">0</span>] = crc32(keys[<span class=\"number\">0</span>], charAt);</span><br><span class=\"line\">        keys[<span class=\"number\">1</span>] += keys[<span class=\"number\">0</span>] &amp; <span class=\"number\">0xff</span>;</span><br><span class=\"line\">        keys[<span class=\"number\">1</span>] = keys[<span class=\"number\">1</span>] * <span class=\"number\">134775813</span> + <span class=\"number\">1</span>;</span><br><span class=\"line\">        keys[<span class=\"number\">2</span>] = crc32(keys[<span class=\"number\">2</span>], (<span class=\"keyword\">byte</span>) (keys[<span class=\"number\">1</span>] &gt;&gt; <span class=\"number\">24</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">crc32</span><span class=\"params\">(<span class=\"keyword\">int</span> oldCrc, <span class=\"keyword\">byte</span> charAt)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ((oldCrc &gt;&gt;&gt; <span class=\"number\">8</span>) ^ CRC_TABLE[(oldCrc ^ charAt) &amp; <span class=\"number\">0xff</span>]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">enum</span> State &#123;</span><br><span class=\"line\">        SIGNATURE, FLAGS, COMPRESSED_SIZE, FN_LENGTH, EF_LENGTH, HEADER, DATA, TAIL, CRC</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">enum</span> Section &#123;</span><br><span class=\"line\">        FILE_HEADER, FILE_DATA, DATA_DESCRIPTOR</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.ByteArrayInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.ByteArrayOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.DataInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.DataOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStreamReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.zip.ZipEntry;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.zip.ZipInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.zip.ZipOutputStream;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipUtil</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">boolean</span> a=<span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">boolean</span> b=a==<span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t * 压缩</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t */</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(a)&#123;</span><br><span class=\"line\">\t\t\t   <span class=\"comment\">//读取文件流</span></span><br><span class=\"line\">\t\t\t\tList&lt;InputStream&gt; list=<span class=\"keyword\">new</span> ArrayList&lt;InputStream&gt;();</span><br><span class=\"line\">\t\t\t\tlist.add(<span class=\"keyword\">new</span> FileInputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"C:\\\\Users\\\\zk\\\\Desktop\\\\a.txt\"</span>)));</span><br><span class=\"line\">\t\t\t\tlist.add(<span class=\"keyword\">new</span> FileInputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"C:\\\\Users\\\\zk\\\\Desktop\\\\b.txt\"</span>)));</span><br><span class=\"line\">\t\t\t\tlist.add(<span class=\"keyword\">new</span> FileInputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"C:\\\\Users\\\\zk\\\\Desktop\\\\c.txt\"</span>)));</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//获取输出流</span></span><br><span class=\"line\">\t\t\t\tByteArrayOutputStream array=writeZipOutputStream(list.toArray(<span class=\"keyword\">new</span> FileInputStream[<span class=\"number\">0</span>]),<span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a.txt\"</span>,<span class=\"string\">\"b.txt\"</span>,<span class=\"string\">\"c.txt\"</span>&#125;, <span class=\"string\">\"123456\"</span>);</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//写入文件</span></span><br><span class=\"line\">\t\t\t\tFile file=<span class=\"keyword\">new</span> File(<span class=\"string\">\"C:\\\\Users\\\\zk\\\\Desktop\\\\a.zip\"</span>);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (!file.exists()) &#123;</span><br><span class=\"line\">\t\t\t\tfile.createNewFile();</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\tDataOutputStream to=<span class=\"keyword\">new</span> DataOutputStream(<span class=\"keyword\">new</span> FileOutputStream(file));</span><br><span class=\"line\">\t\t\t\tto.write(array.toByteArray());</span><br><span class=\"line\">\t\t\t\tto.close();</span><br><span class=\"line\">\t\t\t\tarray.close();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t * 解压</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t */</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(b)&#123;</span><br><span class=\"line\">\t\t\t   <span class=\"comment\">//获取文件字节数组</span></span><br><span class=\"line\">\t\t\t\tFile file=<span class=\"keyword\">new</span> File(<span class=\"string\">\"C:\\\\Users\\\\zk\\\\Desktop\\\\Desktop.zip\"</span>);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">byte</span>[] data =<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[(<span class=\"keyword\">int</span>) file.length()];</span><br><span class=\"line\">\t\t\t\tFileInputStream fileInputStream=<span class=\"keyword\">new</span> FileInputStream(file);</span><br><span class=\"line\">\t\t\t\tfileInputStream.read(data);</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//解压文件获取文本内容</span></span><br><span class=\"line\">\t\t\t\tStringBuffer sb=readZip(data,<span class=\"string\">\"123456\"</span>);</span><br><span class=\"line\">\t\t\t\tfileInputStream.close();</span><br><span class=\"line\">\t\t\t\tSystem.out.println(sb);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * 压缩</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> inputStreams 输入流数组</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> fileName 文件名数组</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> password 密码</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@throws</span> IOException</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ByteArrayOutputStream <span class=\"title\">writeZipOutputStream</span><span class=\"params\">(InputStream [] inputStreams,String [] fileName,String password)</span> <span class=\"keyword\">throws</span> IOException</span>&#123;</span><br><span class=\"line\">\t\tZipOutputStream zos = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\tByteArrayOutputStream baos=<span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\tbaos=<span class=\"keyword\">new</span> ByteArrayOutputStream();</span><br><span class=\"line\">\t\t\tzos = <span class=\"keyword\">new</span> ZipOutputStream(<span class=\"keyword\">new</span> ZipEncryptOutputStream(baos, password));</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; inputStreams.length; i++) &#123;</span><br><span class=\"line\">\t\t        ZipEntry ze = <span class=\"keyword\">new</span> ZipEntry(fileName[i]);</span><br><span class=\"line\">\t\t        zos.putNextEntry(ze);</span><br><span class=\"line\">\t\t        InputStream is = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t        \tis = inputStreams[i];</span><br><span class=\"line\">\t\t\t        <span class=\"keyword\">int</span> b;</span><br><span class=\"line\">\t\t\t        <span class=\"keyword\">while</span> ((b = is.read()) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t\t            zos.write(b);</span><br><span class=\"line\">\t\t\t        &#125;</span><br><span class=\"line\">\t\t\t\t&#125; <span class=\"keyword\">finally</span>&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span>(is!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\t\t\t\tis.close();</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t    &#125;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">finally</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(zos!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\t\tzos.closeEntry();</span><br><span class=\"line\">\t\t\t\tzos.close();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> baos;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * 解压缩</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> data zip字节数组</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> password zip密码</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@throws</span> IOException</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> StringBuffer <span class=\"title\">readZip</span><span class=\"params\">(<span class=\"keyword\">byte</span>[] data,String password)</span> <span class=\"keyword\">throws</span> IOException  </span>&#123;</span><br><span class=\"line\">\t\tStringBuffer sb = <span class=\"keyword\">new</span> StringBuffer();</span><br><span class=\"line\">\t\tZipInputStream zin = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\tDataInputStream dis = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\tzin = <span class=\"keyword\">new</span> ZipInputStream(<span class=\"keyword\">new</span> ZipDecryptInputStream(<span class=\"keyword\">new</span> BufferedInputStream(<span class=\"keyword\">new</span> ByteArrayInputStream(data)), password));</span><br><span class=\"line\">\t\t\tdis = <span class=\"keyword\">new</span> DataInputStream(zin);<span class=\"comment\">//用ZIP输入流构建DataInputStream     </span></span><br><span class=\"line\">\t\t\tZipEntry ze;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> ((ze = zin.getNextEntry()) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (ze.isDirectory()) &#123;</span><br><span class=\"line\">\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">long</span> size = ze.getSize();</span><br><span class=\"line\">\t\t\t\t\tSystem.out.println(ze.getName());</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (size &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\t\tBufferedReader br = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">byte</span>[] content = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[(<span class=\"keyword\">int</span>) ze.getSize()];</span><br><span class=\"line\">\t\t\t\t\t\t\tdis.readFully(content);</span><br><span class=\"line\">\t\t\t\t\t\t\tbr = <span class=\"keyword\">new</span> BufferedReader(<span class=\"keyword\">new</span> InputStreamReader(<span class=\"keyword\">new</span> ByteArrayInputStream(content)));</span><br><span class=\"line\">\t\t\t\t\t\t\tString line;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">while</span> ((line = br.readLine()) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tsb.append(line).append(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t\t\t&#125;<span class=\"keyword\">finally</span>&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">if</span>(br!=<span class=\"keyword\">null</span>)</span><br><span class=\"line\">\t\t\t\t\t\t\t\tbr.close();</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">finally</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(zin!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\t\tzin.closeEntry();</span><br><span class=\"line\">\t\t\t\tzin.close();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(dis!=<span class=\"keyword\">null</span>)</span><br><span class=\"line\">\t\t\t\tdis.close();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> sb;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"压缩类ZipEncryptOutputStream-java\"><a href=\"#压缩类ZipEncryptOutputStream-java\" class=\"headerlink\" title=\"压缩类ZipEncryptOutputStream.java\"></a>压缩类ZipEncryptOutputStream.java</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.security.SecureRandom;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Arrays;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> com.zk.zip.ZipExpand.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Output stream that can be used to password-protect zip files.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;h3&gt;Example usage:&lt;/h3&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;Creating a password-protected zip file:&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipEncryptOutputStream zeos = new ZipEncryptOutputStream(new FileOutputStream(fileName), password);</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipOutputStream zos = new ZipOuputStream(zdis);</span></span><br><span class=\"line\"><span class=\"comment\"> *  ... create zip file using the standard JDK ZipOutputStream in zos variable ...</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;Converting a plain zip file to a password-protected zip file:&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *  FileInputStream src = new FileInputStream(srcFile);</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipEncryptOutputStream dest = new ZipEncryptOutputStream(new FileOutputStream(destFile), password);</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  // should wrap with try-catch-finally, do the close in finally</span></span><br><span class=\"line\"><span class=\"comment\"> *  int b;</span></span><br><span class=\"line\"><span class=\"comment\"> *  while ((b = src.read()) &gt; -1) &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *      dest.write(b);</span></span><br><span class=\"line\"><span class=\"comment\"> *  &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  src.close();</span></span><br><span class=\"line\"><span class=\"comment\"> *  dest.close();</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipEncryptOutputStream</span> <span class=\"keyword\">extends</span> <span class=\"title\">OutputStream</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> OutputStream delegate;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> keys[] = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> pwdKeys[] = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> copyBytes;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> skipBytes;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> State state = State.NEW_SECTION;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> State futureState;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Section section;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">byte</span>[] decryptHeader;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ArrayList&lt;<span class=\"keyword\">int</span>[][]&gt; crcAndSize = <span class=\"keyword\">new</span> ArrayList&lt;<span class=\"keyword\">int</span>[][]&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ArrayList&lt;Integer&gt; localHeaderOffset = <span class=\"keyword\">new</span> ArrayList&lt;Integer&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ArrayList&lt;<span class=\"keyword\">int</span>[]&gt; fileData;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[][] condition;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> fileIndex;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] buffer;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> bufOffset;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> fileSize;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> bytesWritten;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> centralRepoOffset;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> ROW_SIZE = <span class=\"number\">65536</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Convenience constructor taking password as a string.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> delegate Output stream to write the password-protected zip to.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> password Password to use for protecting the zip.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ZipEncryptOutputStream</span><span class=\"params\">(OutputStream delegate, String password)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>(delegate, password.toCharArray());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Safer version of the constructor. Takes password as a char array that can</span></span><br><span class=\"line\"><span class=\"comment\">     * be nulled right after calling this constructor instead of a string that may</span></span><br><span class=\"line\"><span class=\"comment\">     * stay visible on the heap for the duration of application run time.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> delegate Output stream to write the password-protected zip to.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> password Password to use for protecting the zip.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ZipEncryptOutputStream</span><span class=\"params\">(OutputStream delegate, <span class=\"keyword\">char</span>[] password)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.delegate = delegate;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">0</span>] = <span class=\"number\">305419896</span>;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">1</span>] = <span class=\"number\">591751049</span>;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">2</span>] = <span class=\"number\">878082192</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; password.length; i++) &#123;</span><br><span class=\"line\">            ZipExpand.updateKeys((<span class=\"keyword\">byte</span>) (password[i] &amp; <span class=\"number\">0xff</span>), pwdKeys);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">enum</span> State &#123;NEW_SECTION, SECTION_HEADER, FLAGS, REPO_OFFSET, CRC, FILE_HEADER_OFFSET,</span><br><span class=\"line\">        COMPRESSED_SIZE_READ, HEADER, DATA, FILE_BUFFERED, BUFFER, BUFFER_COPY, BUFFER_UNTIL, TAIL&#125;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">enum</span> Section &#123;LFH, CFH, ECD&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">write</span><span class=\"params\">(<span class=\"keyword\">int</span> b)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (skipBytes &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            skipBytes--;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (copyBytes == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (state) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> NEW_SECTION:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (b != <span class=\"number\">0x50</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Unexpected value read at offset \"</span> + bytesWritten + <span class=\"string\">\": \"</span> + b + <span class=\"string\">\" (expected: \"</span> + <span class=\"number\">0x50</span> + <span class=\"string\">\")\"</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    buffer(<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">4</span>], State.SECTION_HEADER, <span class=\"number\">0x50</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> SECTION_HEADER:</span><br><span class=\"line\">                    identifySectionHeader();</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> FLAGS:</span><br><span class=\"line\">                    copyBytes = <span class=\"number\">7</span>;</span><br><span class=\"line\">                    state = State.CRC;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (section == Section.LFH) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> ((b &amp; <span class=\"number\">1</span>) == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"ZIP already password protected.\"</span>);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> ((b &amp; <span class=\"number\">64</span>) == <span class=\"number\">64</span>) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Strong encryption used.\"</span>);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> ((b &amp; <span class=\"number\">8</span>) == <span class=\"number\">8</span>) &#123;</span><br><span class=\"line\">                            bufferUntil(State.FILE_BUFFERED, CFH_SIGNATURE, LFH_SIGNATURE);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    b = b &amp; <span class=\"number\">0xf7</span> | <span class=\"number\">1</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> CRC:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (section == Section.CFH) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">int</span>[][] cns = crcAndSize.get(fileIndex);</span><br><span class=\"line\">                        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">3</span>; j++) &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">                                writeToDelegate(cns[j][i]);</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        skipBytes = <span class=\"number\">11</span>;</span><br><span class=\"line\">                        copyBytes = <span class=\"number\">14</span>;</span><br><span class=\"line\">                        state = State.FILE_HEADER_OFFSET;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">int</span>[] cns = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">16</span>];</span><br><span class=\"line\">                        buffer(cns, State.COMPRESSED_SIZE_READ, b);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> FILE_HEADER_OFFSET:</span><br><span class=\"line\">                    writeAsBytes(localHeaderOffset.get(fileIndex));</span><br><span class=\"line\">                    fileIndex++;</span><br><span class=\"line\">                    skipBytes = <span class=\"number\">3</span>;</span><br><span class=\"line\">                    copyBytesUntil(State.SECTION_HEADER, CFH_SIGNATURE, ECD_SIGNATURE);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> COMPRESSED_SIZE_READ:</span><br><span class=\"line\">                    <span class=\"keyword\">int</span>[][] cns = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[][] &#123;</span><br><span class=\"line\">                        &#123;buffer[<span class=\"number\">0</span>], buffer[<span class=\"number\">1</span>], buffer[<span class=\"number\">2</span>], buffer[<span class=\"number\">3</span>]&#125;,</span><br><span class=\"line\">                        &#123;buffer[<span class=\"number\">4</span>], buffer[<span class=\"number\">5</span>], buffer[<span class=\"number\">6</span>], buffer[<span class=\"number\">7</span>]&#125;,</span><br><span class=\"line\">                        &#123;buffer[<span class=\"number\">8</span>], buffer[<span class=\"number\">9</span>], buffer[<span class=\"number\">10</span>], buffer[<span class=\"number\">11</span>]&#125;</span><br><span class=\"line\">                    &#125;;</span><br><span class=\"line\">                    adjustSize(cns[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                    crcAndSize.add(cns);</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">3</span>; j++) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">                            writeToDelegate(cns[j][i]);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    copyBytes = buffer[<span class=\"number\">12</span>] + buffer[<span class=\"number\">14</span>] + (buffer[<span class=\"number\">13</span>] + buffer[<span class=\"number\">15</span>]) * <span class=\"number\">256</span> - <span class=\"number\">1</span>;</span><br><span class=\"line\">                    state = State.HEADER;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (copyBytes &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"No file name stored in the zip file.\"</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> HEADER:</span><br><span class=\"line\">                    writeDecryptHeader();</span><br><span class=\"line\">                    fileSize = decode(crcAndSize.get(crcAndSize.size() - <span class=\"number\">1</span>)[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                    state = State.DATA;</span><br><span class=\"line\">                    <span class=\"comment\">// intentionally no break</span></span><br><span class=\"line\">                <span class=\"keyword\">case</span> DATA:</span><br><span class=\"line\">                    b = encrypt(b);</span><br><span class=\"line\">                    fileSize--;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (fileSize == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        state = State.NEW_SECTION;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> BUFFER:</span><br><span class=\"line\">                    buffer[bufOffset] = b;</span><br><span class=\"line\">                    bufOffset++;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (bufOffset == buffer.length) &#123;</span><br><span class=\"line\">                        state = futureState;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> BUFFER_COPY:</span><br><span class=\"line\">                    buffer[bufOffset] = b;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (checkCondition()) &#123;</span><br><span class=\"line\">                        bufOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">                        state = futureState;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> BUFFER_UNTIL:</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> col = fileSize % ROW_SIZE;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (col == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        fileData.add(<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[ROW_SIZE]);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">int</span>[] row = fileData.get(fileData.size() - <span class=\"number\">1</span>);</span><br><span class=\"line\">                    row[col] = b;</span><br><span class=\"line\">                    buffer[bufOffset] = b;</span><br><span class=\"line\">                    fileSize++;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (checkCondition()) &#123;</span><br><span class=\"line\">                        fileSize -= buffer.length;</span><br><span class=\"line\">                        state = futureState;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> FILE_BUFFERED:</span><br><span class=\"line\">                    row = fileData.get(<span class=\"number\">0</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> r = <span class=\"number\">0</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> pointer = <span class=\"number\">16</span> + row[<span class=\"number\">12</span>] + row[<span class=\"number\">14</span>] + (row[<span class=\"number\">13</span>] + row[<span class=\"number\">15</span>]) * <span class=\"number\">256</span>;</span><br><span class=\"line\">                    cns = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">3</span>][<span class=\"number\">4</span>];</span><br><span class=\"line\">                    readFromFileBuffer(fileSize - <span class=\"number\">12</span>, cns[<span class=\"number\">0</span>]);</span><br><span class=\"line\">                    readFromFileBuffer(fileSize - <span class=\"number\">8</span>, cns[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                    readFromFileBuffer(fileSize - <span class=\"number\">4</span>, cns[<span class=\"number\">2</span>]);</span><br><span class=\"line\">                    fileSize = decode(cns[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                    adjustSize(cns[<span class=\"number\">1</span>]);</span><br><span class=\"line\">                    crcAndSize.add(cns);</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">                        row[i] = cns[<span class=\"number\">0</span>][i];</span><br><span class=\"line\">                        row[i + <span class=\"number\">4</span>] = cns[<span class=\"number\">1</span>][i];</span><br><span class=\"line\">                        row[i + <span class=\"number\">8</span>] = cns[<span class=\"number\">2</span>][i];</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; pointer; i++) &#123;</span><br><span class=\"line\">                        writeToDelegate(row[i]);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    writeDecryptHeader();</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; fileSize; i++) &#123;</span><br><span class=\"line\">                        writeToDelegate(encrypt(row[pointer]));</span><br><span class=\"line\">                        pointer++;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (pointer == ROW_SIZE) &#123;</span><br><span class=\"line\">                            pointer = <span class=\"number\">0</span>;</span><br><span class=\"line\">                            r++;</span><br><span class=\"line\">                            row = fileData.get(r);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    fileData = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                    identifySectionHeader();</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> REPO_OFFSET:</span><br><span class=\"line\">                    writeAsBytes(centralRepoOffset);</span><br><span class=\"line\">                    skipBytes = <span class=\"number\">3</span>;</span><br><span class=\"line\">                    state = State.TAIL;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> TAIL:</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            copyBytes--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        writeToDelegate(b);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">writeToDelegate</span><span class=\"params\">(<span class=\"keyword\">int</span> b)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        delegate.write(b);</span><br><span class=\"line\">        bytesWritten++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">adjustSize</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> inc = DECRYPT_HEADER_SIZE;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">            values[i] = values[i] + inc;</span><br><span class=\"line\">            inc = values[i] &gt;&gt; <span class=\"number\">8</span>;</span><br><span class=\"line\">            values[i] &amp;= <span class=\"number\">0xff</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">decode</span><span class=\"params\">(<span class=\"keyword\">int</span>[] value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value[<span class=\"number\">0</span>] + (value[<span class=\"number\">1</span>] &lt;&lt; <span class=\"number\">8</span>) + (value[<span class=\"number\">2</span>] &lt;&lt; <span class=\"number\">16</span>) + (value[<span class=\"number\">3</span>] &lt;&lt; <span class=\"number\">24</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">writeAsBytes</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">            writeToDelegate(value &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">            value &gt;&gt;= <span class=\"number\">8</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">identifySectionHeader</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IllegalStateException, IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Arrays.equals(buffer, LFH_SIGNATURE)) &#123;</span><br><span class=\"line\">            section = Section.LFH;</span><br><span class=\"line\">            copyBytes = <span class=\"number\">1</span>;</span><br><span class=\"line\">            state = State.FLAGS;</span><br><span class=\"line\">            localHeaderOffset.add(bytesWritten);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (Arrays.equals(buffer, CFH_SIGNATURE)) &#123;</span><br><span class=\"line\">            section = Section.CFH;</span><br><span class=\"line\">            copyBytes = <span class=\"number\">3</span>;</span><br><span class=\"line\">            state = State.FLAGS;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (centralRepoOffset == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                centralRepoOffset = bytesWritten;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (Arrays.equals(buffer, ECD_SIGNATURE)) &#123;</span><br><span class=\"line\">            section = Section.ECD;</span><br><span class=\"line\">            copyBytes = <span class=\"number\">11</span>;</span><br><span class=\"line\">            state = State.REPO_OFFSET;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Unknown header: \"</span> + Arrays.asList(buffer).toString());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        flushBuffer();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">readFromFileBuffer</span><span class=\"params\">(<span class=\"keyword\">int</span> offset, <span class=\"keyword\">int</span>[] target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> r = offset / ROW_SIZE;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> c = offset % ROW_SIZE;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] row = fileData.get(r);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; target.length; i++) &#123;</span><br><span class=\"line\">            target[i] = row[c];</span><br><span class=\"line\">            c++;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (c == ROW_SIZE) &#123;</span><br><span class=\"line\">                c = <span class=\"number\">0</span>;</span><br><span class=\"line\">                r++;</span><br><span class=\"line\">                row = fileData.get(r);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">close</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.close();</span><br><span class=\"line\">        delegate.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initKeys</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.arraycopy(pwdKeys, <span class=\"number\">0</span>, keys, <span class=\"number\">0</span>, keys.length);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">updateKeys</span><span class=\"params\">(<span class=\"keyword\">byte</span> charAt)</span> </span>&#123;</span><br><span class=\"line\">        ZipExpand.updateKeys(charAt, keys);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">byte</span> <span class=\"title\">encryptByte</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> temp = keys[<span class=\"number\">2</span>] | <span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">byte</span>) ((temp * (temp ^ <span class=\"number\">1</span>)) &gt;&gt;&gt; <span class=\"number\">8</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">encrypt</span><span class=\"params\">(<span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> newB = (b ^ encryptByte()) &amp; <span class=\"number\">0xff</span>;</span><br><span class=\"line\">        updateKeys((<span class=\"keyword\">byte</span>) b);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newB;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">writeDecryptHeader</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        initKeys();</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] crc = crcAndSize.get(crcAndSize.size() - <span class=\"number\">1</span>)[<span class=\"number\">0</span>];</span><br><span class=\"line\">        SecureRandom random = <span class=\"keyword\">new</span> SecureRandom();</span><br><span class=\"line\">        decryptHeader = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[DECRYPT_HEADER_SIZE];</span><br><span class=\"line\">        random.nextBytes(decryptHeader);</span><br><span class=\"line\">        decryptHeader[DECRYPT_HEADER_SIZE - <span class=\"number\">2</span>] = (<span class=\"keyword\">byte</span>) crc[<span class=\"number\">2</span>];</span><br><span class=\"line\">        decryptHeader[DECRYPT_HEADER_SIZE - <span class=\"number\">1</span>] = (<span class=\"keyword\">byte</span>) crc[<span class=\"number\">3</span>];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; DECRYPT_HEADER_SIZE; i++) &#123;</span><br><span class=\"line\">            writeToDelegate(encrypt(decryptHeader[i]));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">buffer</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values, State state, <span class=\"keyword\">int</span>... knownValues)</span> </span>&#123;</span><br><span class=\"line\">        System.arraycopy(knownValues, <span class=\"number\">0</span>, values, <span class=\"number\">0</span>, knownValues.length);</span><br><span class=\"line\">        buffer = values;</span><br><span class=\"line\">        bufOffset = knownValues.length;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.state = State.BUFFER;</span><br><span class=\"line\">        futureState = state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">flushBuffer</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; bufOffset; i++) &#123;</span><br><span class=\"line\">            writeToDelegate(buffer[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">copyBytesUntil</span><span class=\"params\">(State state, <span class=\"keyword\">int</span>[]... condition)</span> </span>&#123;</span><br><span class=\"line\">        futureState = state;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.condition = condition;</span><br><span class=\"line\">        bufOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">        buffer = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[condition[<span class=\"number\">0</span>].length];</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.state = State.BUFFER_COPY;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">bufferUntil</span><span class=\"params\">(State state, <span class=\"keyword\">int</span>[]... condition)</span> </span>&#123;</span><br><span class=\"line\">        copyBytesUntil(state, condition);</span><br><span class=\"line\">        fileData = <span class=\"keyword\">new</span> ArrayList&lt;<span class=\"keyword\">int</span>[]&gt;();</span><br><span class=\"line\">        fileSize = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.state = State.BUFFER_UNTIL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">checkCondition</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> equals = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; condition.length; i++) &#123;</span><br><span class=\"line\">            equals = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt;= bufOffset; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (condition[i][j] != buffer[j]) &#123;</span><br><span class=\"line\">                    equals = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (equals) &#123;</span><br><span class=\"line\">                bufOffset++;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!equals) &#123;</span><br><span class=\"line\">            bufOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> equals &amp;&amp; (buffer.length == bufOffset);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>##解压缩类ZipDecryptInputStream.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> com.zk.zip.ZipExpand.DD_SIGNATURE;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> com.zk.zip.ZipExpand.DECRYPT_HEADER_SIZE;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> com.zk.zip.ZipExpand.LFH_SIGNATURE;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zk.zip.ZipExpand.Section;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.zk.zip.ZipExpand.State;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Input stream converting a password-protected zip to an unprotected zip.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;h3&gt;Example usage:&lt;/h3&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;Reading a password-protected zip from file:&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipDecryptInputStream zdis = new ZipDecryptInputStream(new FileInputStream(fileName), password);</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipInputStream zis = new ZipInputStream(zdis);</span></span><br><span class=\"line\"><span class=\"comment\"> *  ... read the zip file from zis - the standard JDK ZipInputStream ...</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;Converting a password-protected zip file to an unprotected zip file:&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *  ZipDecryptInputStream src = new ZipDecryptInputStream(new FileInputStream(srcFile), password);</span></span><br><span class=\"line\"><span class=\"comment\"> *  FileOutputStream dest = new FileOutputStream(destFile);</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  // should wrap with try-catch-finally, do the close in finally</span></span><br><span class=\"line\"><span class=\"comment\"> *  int b;</span></span><br><span class=\"line\"><span class=\"comment\"> *  while ((b = src.read()) &gt; -1) &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *      dest.write(b);</span></span><br><span class=\"line\"><span class=\"comment\"> *  &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  src.close();</span></span><br><span class=\"line\"><span class=\"comment\"> *  dest.close();</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/pre&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipDecryptInputStream</span> <span class=\"keyword\">extends</span> <span class=\"title\">InputStream</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> InputStream delegate;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> keys[] = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> pwdKeys[] = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> State state = State.SIGNATURE;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Section section;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> skipBytes;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> compressedSize;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> crc;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Creates a new instance of the stream.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> stream Input stream serving the password-protected zip file to be decrypted.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> password Password to be used to decrypt the password-protected zip file.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ZipDecryptInputStream</span><span class=\"params\">(InputStream stream, String password)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>(stream, password.toCharArray());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Safer constructor. Takes password as a char array that can be nulled right after</span></span><br><span class=\"line\"><span class=\"comment\">     * calling this constructor instead of a string that may be visible on the heap for</span></span><br><span class=\"line\"><span class=\"comment\">     * the duration of application run time.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> stream Input stream serving the password-protected zip file.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> password Password to use for decrypting the zip file.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ZipDecryptInputStream</span><span class=\"params\">(InputStream stream, <span class=\"keyword\">char</span>[] password)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.delegate = stream;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">0</span>] = <span class=\"number\">305419896</span>;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">1</span>] = <span class=\"number\">591751049</span>;</span><br><span class=\"line\">        pwdKeys[<span class=\"number\">2</span>] = <span class=\"number\">878082192</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; password.length; i++) &#123;</span><br><span class=\"line\">            ZipExpand.updateKeys((<span class=\"keyword\">byte</span>) (password[i] &amp; <span class=\"number\">0xff</span>), pwdKeys);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"incomplete-switch\"</span>)</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">read</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = delegateRead();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (skipBytes == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (state) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> SIGNATURE:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (!peekAheadEquals(LFH_SIGNATURE)) &#123;</span><br><span class=\"line\">                        state = State.TAIL;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        section = Section.FILE_HEADER;</span><br><span class=\"line\">                        skipBytes = <span class=\"number\">5</span>;</span><br><span class=\"line\">                        state = State.FLAGS;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> FLAGS:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ((result &amp; <span class=\"number\">1</span>) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"ZIP not password protected.\"</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ((result &amp; <span class=\"number\">64</span>) == <span class=\"number\">64</span>) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Strong encryption used.\"</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ((result &amp; <span class=\"number\">8</span>) == <span class=\"number\">8</span>) &#123;</span><br><span class=\"line\">                        compressedSize = -<span class=\"number\">1</span>;</span><br><span class=\"line\">                        state = State.FN_LENGTH;</span><br><span class=\"line\">                        skipBytes = <span class=\"number\">19</span>;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        state = State.CRC;</span><br><span class=\"line\">                        skipBytes = <span class=\"number\">10</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    result -= <span class=\"number\">1</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> CRC:</span><br><span class=\"line\">                    crc = result;</span><br><span class=\"line\">                    state = State.COMPRESSED_SIZE;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> COMPRESSED_SIZE:</span><br><span class=\"line\">                    <span class=\"keyword\">int</span>[] values = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\">                    peekAhead(values);</span><br><span class=\"line\">                    compressedSize = <span class=\"number\">0</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> valueInc = DECRYPT_HEADER_SIZE;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">                        compressedSize += values[i] &lt;&lt; (<span class=\"number\">8</span> * i);</span><br><span class=\"line\">                        values[i] -= valueInc;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (values[i] &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                            valueInc = <span class=\"number\">1</span>;</span><br><span class=\"line\">                            values[i] += <span class=\"number\">256</span>;</span><br><span class=\"line\">                        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                            valueInc = <span class=\"number\">0</span>;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    overrideBuffer(values);</span><br><span class=\"line\">                    result = values[<span class=\"number\">0</span>];</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (section == Section.DATA_DESCRIPTOR) &#123;</span><br><span class=\"line\">                        state = State.SIGNATURE;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        state = State.FN_LENGTH;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    skipBytes = <span class=\"number\">7</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> FN_LENGTH:</span><br><span class=\"line\">                    values = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\">                    peekAhead(values);</span><br><span class=\"line\">                    skipBytes = <span class=\"number\">3</span> + values[<span class=\"number\">0</span>] + values[<span class=\"number\">2</span>] + (values[<span class=\"number\">1</span>] + values[<span class=\"number\">3</span>]) * <span class=\"number\">256</span>;</span><br><span class=\"line\">                    state = State.HEADER;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> HEADER:</span><br><span class=\"line\">                    section = Section.FILE_DATA;</span><br><span class=\"line\">                    initKeys();</span><br><span class=\"line\">                    <span class=\"keyword\">byte</span> lastValue = <span class=\"number\">0</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; DECRYPT_HEADER_SIZE; i++) &#123;</span><br><span class=\"line\">                        lastValue = (<span class=\"keyword\">byte</span>) (result ^ decryptByte());</span><br><span class=\"line\">                        updateKeys(lastValue);</span><br><span class=\"line\">                        result = delegateRead();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ((lastValue &amp; <span class=\"number\">0xff</span>) != crc) &#123;</span><br><span class=\"line\"><span class=\"comment\">//                        throw new IllegalStateException(\"Wrong password!\");</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    compressedSize -= DECRYPT_HEADER_SIZE;</span><br><span class=\"line\">                    state = State.DATA;</span><br><span class=\"line\">                    <span class=\"comment\">// intentionally no break</span></span><br><span class=\"line\">                <span class=\"keyword\">case</span> DATA:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (compressedSize == -<span class=\"number\">1</span> &amp;&amp; peekAheadEquals(DD_SIGNATURE)) &#123;</span><br><span class=\"line\">                        section = Section.DATA_DESCRIPTOR;</span><br><span class=\"line\">                        skipBytes = <span class=\"number\">5</span>;</span><br><span class=\"line\">                        state = State.CRC;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        result = (result ^ decryptByte()) &amp; <span class=\"number\">0xff</span>;</span><br><span class=\"line\">                        updateKeys((<span class=\"keyword\">byte</span>) result);</span><br><span class=\"line\">                        compressedSize--;</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (compressedSize == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                            state = State.SIGNATURE;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> TAIL:</span><br><span class=\"line\">                    <span class=\"comment\">// do nothing</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            skipBytes--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> BUF_SIZE = <span class=\"number\">8</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> bufOffset = BUF_SIZE;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] buf = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[BUF_SIZE];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">delegateRead</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        bufOffset++;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (bufOffset &gt;= BUF_SIZE) &#123;</span><br><span class=\"line\">            fetchData(<span class=\"number\">0</span>);</span><br><span class=\"line\">            bufOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> buf[bufOffset];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">peekAheadEquals</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        prepareBuffer(values);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; values.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (buf[bufOffset + i] != values[i]) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">prepareBuffer</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (values.length &gt; (BUF_SIZE - bufOffset)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = bufOffset; i &lt; BUF_SIZE; i++) &#123;</span><br><span class=\"line\">                buf[i - bufOffset] = buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            fetchData(BUF_SIZE - bufOffset);</span><br><span class=\"line\">            bufOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">peekAhead</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        prepareBuffer(values);</span><br><span class=\"line\">        System.arraycopy(buf, bufOffset, values, <span class=\"number\">0</span>, values.length);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">overrideBuffer</span><span class=\"params\">(<span class=\"keyword\">int</span>[] values)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        prepareBuffer(values);</span><br><span class=\"line\">        System.arraycopy(values, <span class=\"number\">0</span>, buf, bufOffset, values.length);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">fetchData</span><span class=\"params\">(<span class=\"keyword\">int</span> offset)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = offset; i &lt; BUF_SIZE; i++) &#123;</span><br><span class=\"line\">            buf[i] = delegate.read();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (buf[i] == -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">close</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        delegate.close();</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initKeys</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.arraycopy(pwdKeys, <span class=\"number\">0</span>, keys, <span class=\"number\">0</span>, keys.length);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">updateKeys</span><span class=\"params\">(<span class=\"keyword\">byte</span> charAt)</span> </span>&#123;</span><br><span class=\"line\">        ZipExpand.updateKeys(charAt, keys);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">byte</span> <span class=\"title\">decryptByte</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> temp = keys[<span class=\"number\">2</span>] | <span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">byte</span>) ((temp * (temp ^ <span class=\"number\">1</span>)) &gt;&gt;&gt; <span class=\"number\">8</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>##解密工具类ZipExpand.java<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipExpand</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] CRC_TABLE = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">256</span>];</span><br><span class=\"line\">    <span class=\"comment\">// compute the table</span></span><br><span class=\"line\">    <span class=\"comment\">// (could also have it pre-computed - see http://snippets.dzone.com/tag/crc32)</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">256</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> r = i;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">8</span>; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ((r &amp; <span class=\"number\">1</span>) == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                    r = (r &gt;&gt;&gt; <span class=\"number\">1</span>) ^ <span class=\"number\">0xedb88320</span>;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    r &gt;&gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            CRC_TABLE[i] = r;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DECRYPT_HEADER_SIZE = <span class=\"number\">12</span>;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] CFH_SIGNATURE = &#123;<span class=\"number\">0x50</span>, <span class=\"number\">0x4b</span>, <span class=\"number\">0x01</span>, <span class=\"number\">0x02</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] LFH_SIGNATURE = &#123;<span class=\"number\">0x50</span>, <span class=\"number\">0x4b</span>, <span class=\"number\">0x03</span>, <span class=\"number\">0x04</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] ECD_SIGNATURE = &#123;<span class=\"number\">0x50</span>, <span class=\"number\">0x4b</span>, <span class=\"number\">0x05</span>, <span class=\"number\">0x06</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span>[] DD_SIGNATURE = &#123;<span class=\"number\">0x50</span>, <span class=\"number\">0x4b</span>, <span class=\"number\">0x07</span>, <span class=\"number\">0x08</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">updateKeys</span><span class=\"params\">(<span class=\"keyword\">byte</span> charAt, <span class=\"keyword\">int</span>[] keys)</span> </span>&#123;</span><br><span class=\"line\">        keys[<span class=\"number\">0</span>] = crc32(keys[<span class=\"number\">0</span>], charAt);</span><br><span class=\"line\">        keys[<span class=\"number\">1</span>] += keys[<span class=\"number\">0</span>] &amp; <span class=\"number\">0xff</span>;</span><br><span class=\"line\">        keys[<span class=\"number\">1</span>] = keys[<span class=\"number\">1</span>] * <span class=\"number\">134775813</span> + <span class=\"number\">1</span>;</span><br><span class=\"line\">        keys[<span class=\"number\">2</span>] = crc32(keys[<span class=\"number\">2</span>], (<span class=\"keyword\">byte</span>) (keys[<span class=\"number\">1</span>] &gt;&gt; <span class=\"number\">24</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">crc32</span><span class=\"params\">(<span class=\"keyword\">int</span> oldCrc, <span class=\"keyword\">byte</span> charAt)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ((oldCrc &gt;&gt;&gt; <span class=\"number\">8</span>) ^ CRC_TABLE[(oldCrc ^ charAt) &amp; <span class=\"number\">0xff</span>]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">enum</span> State &#123;</span><br><span class=\"line\">        SIGNATURE, FLAGS, COMPRESSED_SIZE, FN_LENGTH, EF_LENGTH, HEADER, DATA, TAIL, CRC</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">enum</span> Section &#123;</span><br><span class=\"line\">        FILE_HEADER, FILE_DATA, DATA_DESCRIPTOR</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.ByteArrayInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.ByteArrayOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.DataInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.DataOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStreamReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.zip.ZipEntry;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.zip.ZipInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.zip.ZipOutputStream;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipUtil</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">boolean</span> a=<span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">boolean</span> b=a==<span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t * 压缩</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t */</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(a)&#123;</span><br><span class=\"line\">\t\t\t   <span class=\"comment\">//读取文件流</span></span><br><span class=\"line\">\t\t\t\tList&lt;InputStream&gt; list=<span class=\"keyword\">new</span> ArrayList&lt;InputStream&gt;();</span><br><span class=\"line\">\t\t\t\tlist.add(<span class=\"keyword\">new</span> FileInputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"C:\\\\Users\\\\zk\\\\Desktop\\\\a.txt\"</span>)));</span><br><span class=\"line\">\t\t\t\tlist.add(<span class=\"keyword\">new</span> FileInputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"C:\\\\Users\\\\zk\\\\Desktop\\\\b.txt\"</span>)));</span><br><span class=\"line\">\t\t\t\tlist.add(<span class=\"keyword\">new</span> FileInputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"C:\\\\Users\\\\zk\\\\Desktop\\\\c.txt\"</span>)));</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//获取输出流</span></span><br><span class=\"line\">\t\t\t\tByteArrayOutputStream array=writeZipOutputStream(list.toArray(<span class=\"keyword\">new</span> FileInputStream[<span class=\"number\">0</span>]),<span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a.txt\"</span>,<span class=\"string\">\"b.txt\"</span>,<span class=\"string\">\"c.txt\"</span>&#125;, <span class=\"string\">\"123456\"</span>);</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//写入文件</span></span><br><span class=\"line\">\t\t\t\tFile file=<span class=\"keyword\">new</span> File(<span class=\"string\">\"C:\\\\Users\\\\zk\\\\Desktop\\\\a.zip\"</span>);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (!file.exists()) &#123;</span><br><span class=\"line\">\t\t\t\tfile.createNewFile();</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\tDataOutputStream to=<span class=\"keyword\">new</span> DataOutputStream(<span class=\"keyword\">new</span> FileOutputStream(file));</span><br><span class=\"line\">\t\t\t\tto.write(array.toByteArray());</span><br><span class=\"line\">\t\t\t\tto.close();</span><br><span class=\"line\">\t\t\t\tarray.close();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t * 解压</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t */</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(b)&#123;</span><br><span class=\"line\">\t\t\t   <span class=\"comment\">//获取文件字节数组</span></span><br><span class=\"line\">\t\t\t\tFile file=<span class=\"keyword\">new</span> File(<span class=\"string\">\"C:\\\\Users\\\\zk\\\\Desktop\\\\Desktop.zip\"</span>);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">byte</span>[] data =<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[(<span class=\"keyword\">int</span>) file.length()];</span><br><span class=\"line\">\t\t\t\tFileInputStream fileInputStream=<span class=\"keyword\">new</span> FileInputStream(file);</span><br><span class=\"line\">\t\t\t\tfileInputStream.read(data);</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//解压文件获取文本内容</span></span><br><span class=\"line\">\t\t\t\tStringBuffer sb=readZip(data,<span class=\"string\">\"123456\"</span>);</span><br><span class=\"line\">\t\t\t\tfileInputStream.close();</span><br><span class=\"line\">\t\t\t\tSystem.out.println(sb);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * 压缩</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> inputStreams 输入流数组</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> fileName 文件名数组</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> password 密码</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@throws</span> IOException</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ByteArrayOutputStream <span class=\"title\">writeZipOutputStream</span><span class=\"params\">(InputStream [] inputStreams,String [] fileName,String password)</span> <span class=\"keyword\">throws</span> IOException</span>&#123;</span><br><span class=\"line\">\t\tZipOutputStream zos = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\tByteArrayOutputStream baos=<span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\tbaos=<span class=\"keyword\">new</span> ByteArrayOutputStream();</span><br><span class=\"line\">\t\t\tzos = <span class=\"keyword\">new</span> ZipOutputStream(<span class=\"keyword\">new</span> ZipEncryptOutputStream(baos, password));</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; inputStreams.length; i++) &#123;</span><br><span class=\"line\">\t\t        ZipEntry ze = <span class=\"keyword\">new</span> ZipEntry(fileName[i]);</span><br><span class=\"line\">\t\t        zos.putNextEntry(ze);</span><br><span class=\"line\">\t\t        InputStream is = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t        \tis = inputStreams[i];</span><br><span class=\"line\">\t\t\t        <span class=\"keyword\">int</span> b;</span><br><span class=\"line\">\t\t\t        <span class=\"keyword\">while</span> ((b = is.read()) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t\t            zos.write(b);</span><br><span class=\"line\">\t\t\t        &#125;</span><br><span class=\"line\">\t\t\t\t&#125; <span class=\"keyword\">finally</span>&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span>(is!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\t\t\t\tis.close();</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t    &#125;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">finally</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(zos!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\t\tzos.closeEntry();</span><br><span class=\"line\">\t\t\t\tzos.close();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> baos;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * 解压缩</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> data zip字节数组</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> password zip密码</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@throws</span> IOException</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> StringBuffer <span class=\"title\">readZip</span><span class=\"params\">(<span class=\"keyword\">byte</span>[] data,String password)</span> <span class=\"keyword\">throws</span> IOException  </span>&#123;</span><br><span class=\"line\">\t\tStringBuffer sb = <span class=\"keyword\">new</span> StringBuffer();</span><br><span class=\"line\">\t\tZipInputStream zin = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\tDataInputStream dis = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\tzin = <span class=\"keyword\">new</span> ZipInputStream(<span class=\"keyword\">new</span> ZipDecryptInputStream(<span class=\"keyword\">new</span> BufferedInputStream(<span class=\"keyword\">new</span> ByteArrayInputStream(data)), password));</span><br><span class=\"line\">\t\t\tdis = <span class=\"keyword\">new</span> DataInputStream(zin);<span class=\"comment\">//用ZIP输入流构建DataInputStream     </span></span><br><span class=\"line\">\t\t\tZipEntry ze;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> ((ze = zin.getNextEntry()) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (ze.isDirectory()) &#123;</span><br><span class=\"line\">\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">long</span> size = ze.getSize();</span><br><span class=\"line\">\t\t\t\t\tSystem.out.println(ze.getName());</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (size &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\t\tBufferedReader br = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">byte</span>[] content = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[(<span class=\"keyword\">int</span>) ze.getSize()];</span><br><span class=\"line\">\t\t\t\t\t\t\tdis.readFully(content);</span><br><span class=\"line\">\t\t\t\t\t\t\tbr = <span class=\"keyword\">new</span> BufferedReader(<span class=\"keyword\">new</span> InputStreamReader(<span class=\"keyword\">new</span> ByteArrayInputStream(content)));</span><br><span class=\"line\">\t\t\t\t\t\t\tString line;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">while</span> ((line = br.readLine()) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tsb.append(line).append(<span class=\"string\">\"\\n\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t\t\t&#125;<span class=\"keyword\">finally</span>&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">if</span>(br!=<span class=\"keyword\">null</span>)</span><br><span class=\"line\">\t\t\t\t\t\t\t\tbr.close();</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">finally</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(zin!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\t\tzin.closeEntry();</span><br><span class=\"line\">\t\t\t\tzin.close();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(dis!=<span class=\"keyword\">null</span>)</span><br><span class=\"line\">\t\t\t\tdis.close();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> sb;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"eclipse安装插件慢","date":"2018-12-28T09:27:00.000Z","_content":"\n### 1. eclipse安装插件慢使用国内镜像\n```\n#1.企业贡献： \n搜狐开源镜像站：http://mirrors.sohu.com/ \n网易开源镜像站：http://mirrors.163.com/ \n首都在线科技股份有限公司：http://mirrors.yun-idc.com/ \n\n#2.大学教学： \n北京交通大学： http://mirror.bjtu.edu.cn (IPv4 only) \nhttp://mirror6.bjtu.edu.cn (IPv6 only) \nhttp://debian.bjtu.edu.cn(IPv4+IPv6) \n\n上海交通大学： \nhttp://ftp.sjtu.edu.cn/ (IPv4 only) \nhttp://ftp6.sjtu.edu.cn (IPv6 only) \n\n清华大学： \nhttp://mirrors.tuna.tsinghua.edu.cn/ (IPv4+IPv6) \nhttp://mirrors.6.tuna.tsinghua.edu.cn/ (IPv6 only) \nhttp://mirrors.4.tuna.tsinghua.edu.cn/ (IPv4 only) \n\n天津大学：http://mirror.tju.edu.cn/ \n浙江大学：http://mirrors.zju.edu.cn/ \n\n中国科学技术大学： \nhttp://mirrors.ustc.edu.cn/ (IPv4+IPv6) \nhttp://mirrors4.ustc.edu.cn/ \nhttp://mirrors6.ustc.edu.cn/ \n```\n\n### 2. 安装nginx\n```\n#nginx.conf\n\nserver {  \n    listen 80;  \n    server_name  download.eclipse.org;  \n    #charset koi8-r;  \n    #access_log  logs/host.access.log  main;  \n    location / {  \n        proxy_pass https://mirrors.ustc.edu.cn/eclipse/;  \n    }\n}\n```\n\n### 3. 修改host文件 \n```\n127.0.0.1  download.eclipse.org  \n```\n","source":"_posts/eclipse安装插件慢.md","raw":"title: eclipse安装插件慢\ntags:\n  - eclipse\n  - java\ncategories:\n  - eclipse\ndate: 2018-12-28 17:27:00\n---\n\n### 1. eclipse安装插件慢使用国内镜像\n```\n#1.企业贡献： \n搜狐开源镜像站：http://mirrors.sohu.com/ \n网易开源镜像站：http://mirrors.163.com/ \n首都在线科技股份有限公司：http://mirrors.yun-idc.com/ \n\n#2.大学教学： \n北京交通大学： http://mirror.bjtu.edu.cn (IPv4 only) \nhttp://mirror6.bjtu.edu.cn (IPv6 only) \nhttp://debian.bjtu.edu.cn(IPv4+IPv6) \n\n上海交通大学： \nhttp://ftp.sjtu.edu.cn/ (IPv4 only) \nhttp://ftp6.sjtu.edu.cn (IPv6 only) \n\n清华大学： \nhttp://mirrors.tuna.tsinghua.edu.cn/ (IPv4+IPv6) \nhttp://mirrors.6.tuna.tsinghua.edu.cn/ (IPv6 only) \nhttp://mirrors.4.tuna.tsinghua.edu.cn/ (IPv4 only) \n\n天津大学：http://mirror.tju.edu.cn/ \n浙江大学：http://mirrors.zju.edu.cn/ \n\n中国科学技术大学： \nhttp://mirrors.ustc.edu.cn/ (IPv4+IPv6) \nhttp://mirrors4.ustc.edu.cn/ \nhttp://mirrors6.ustc.edu.cn/ \n```\n\n### 2. 安装nginx\n```\n#nginx.conf\n\nserver {  \n    listen 80;  \n    server_name  download.eclipse.org;  \n    #charset koi8-r;  \n    #access_log  logs/host.access.log  main;  \n    location / {  \n        proxy_pass https://mirrors.ustc.edu.cn/eclipse/;  \n    }\n}\n```\n\n### 3. 修改host文件 \n```\n127.0.0.1  download.eclipse.org  \n```\n","slug":"eclipse安装插件慢","published":1,"updated":"2018-12-28T10:32:54.037Z","_id":"cjq7wc0mb0000ck5n6m4nqjtr","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"1-eclipse安装插件慢使用国内镜像\"><a href=\"#1-eclipse安装插件慢使用国内镜像\" class=\"headerlink\" title=\"1. eclipse安装插件慢使用国内镜像\"></a>1. eclipse安装插件慢使用国内镜像</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#1.企业贡献： </span><br><span class=\"line\">搜狐开源镜像站：http://mirrors.sohu.com/ </span><br><span class=\"line\">网易开源镜像站：http://mirrors.163.com/ </span><br><span class=\"line\">首都在线科技股份有限公司：http://mirrors.yun-idc.com/ </span><br><span class=\"line\"></span><br><span class=\"line\">#2.大学教学： </span><br><span class=\"line\">北京交通大学： http://mirror.bjtu.edu.cn (IPv4 only) </span><br><span class=\"line\">http://mirror6.bjtu.edu.cn (IPv6 only) </span><br><span class=\"line\">http://debian.bjtu.edu.cn(IPv4+IPv6) </span><br><span class=\"line\"></span><br><span class=\"line\">上海交通大学： </span><br><span class=\"line\">http://ftp.sjtu.edu.cn/ (IPv4 only) </span><br><span class=\"line\">http://ftp6.sjtu.edu.cn (IPv6 only) </span><br><span class=\"line\"></span><br><span class=\"line\">清华大学： </span><br><span class=\"line\">http://mirrors.tuna.tsinghua.edu.cn/ (IPv4+IPv6) </span><br><span class=\"line\">http://mirrors.6.tuna.tsinghua.edu.cn/ (IPv6 only) </span><br><span class=\"line\">http://mirrors.4.tuna.tsinghua.edu.cn/ (IPv4 only) </span><br><span class=\"line\"></span><br><span class=\"line\">天津大学：http://mirror.tju.edu.cn/ </span><br><span class=\"line\">浙江大学：http://mirrors.zju.edu.cn/ </span><br><span class=\"line\"></span><br><span class=\"line\">中国科学技术大学： </span><br><span class=\"line\">http://mirrors.ustc.edu.cn/ (IPv4+IPv6) </span><br><span class=\"line\">http://mirrors4.ustc.edu.cn/ </span><br><span class=\"line\">http://mirrors6.ustc.edu.cn/</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-安装nginx\"><a href=\"#2-安装nginx\" class=\"headerlink\" title=\"2. 安装nginx\"></a>2. 安装nginx</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#nginx.conf</span><br><span class=\"line\"></span><br><span class=\"line\">server &#123;  </span><br><span class=\"line\">    listen 80;  </span><br><span class=\"line\">    server_name  download.eclipse.org;  </span><br><span class=\"line\">    #charset koi8-r;  </span><br><span class=\"line\">    #access_log  logs/host.access.log  main;  </span><br><span class=\"line\">    location / &#123;  </span><br><span class=\"line\">        proxy_pass https://mirrors.ustc.edu.cn/eclipse/;  </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-修改host文件\"><a href=\"#3-修改host文件\" class=\"headerlink\" title=\"3. 修改host文件\"></a>3. 修改host文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1  download.eclipse.org</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"1-eclipse安装插件慢使用国内镜像\"><a href=\"#1-eclipse安装插件慢使用国内镜像\" class=\"headerlink\" title=\"1. eclipse安装插件慢使用国内镜像\"></a>1. eclipse安装插件慢使用国内镜像</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#1.企业贡献： </span><br><span class=\"line\">搜狐开源镜像站：http://mirrors.sohu.com/ </span><br><span class=\"line\">网易开源镜像站：http://mirrors.163.com/ </span><br><span class=\"line\">首都在线科技股份有限公司：http://mirrors.yun-idc.com/ </span><br><span class=\"line\"></span><br><span class=\"line\">#2.大学教学： </span><br><span class=\"line\">北京交通大学： http://mirror.bjtu.edu.cn (IPv4 only) </span><br><span class=\"line\">http://mirror6.bjtu.edu.cn (IPv6 only) </span><br><span class=\"line\">http://debian.bjtu.edu.cn(IPv4+IPv6) </span><br><span class=\"line\"></span><br><span class=\"line\">上海交通大学： </span><br><span class=\"line\">http://ftp.sjtu.edu.cn/ (IPv4 only) </span><br><span class=\"line\">http://ftp6.sjtu.edu.cn (IPv6 only) </span><br><span class=\"line\"></span><br><span class=\"line\">清华大学： </span><br><span class=\"line\">http://mirrors.tuna.tsinghua.edu.cn/ (IPv4+IPv6) </span><br><span class=\"line\">http://mirrors.6.tuna.tsinghua.edu.cn/ (IPv6 only) </span><br><span class=\"line\">http://mirrors.4.tuna.tsinghua.edu.cn/ (IPv4 only) </span><br><span class=\"line\"></span><br><span class=\"line\">天津大学：http://mirror.tju.edu.cn/ </span><br><span class=\"line\">浙江大学：http://mirrors.zju.edu.cn/ </span><br><span class=\"line\"></span><br><span class=\"line\">中国科学技术大学： </span><br><span class=\"line\">http://mirrors.ustc.edu.cn/ (IPv4+IPv6) </span><br><span class=\"line\">http://mirrors4.ustc.edu.cn/ </span><br><span class=\"line\">http://mirrors6.ustc.edu.cn/</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-安装nginx\"><a href=\"#2-安装nginx\" class=\"headerlink\" title=\"2. 安装nginx\"></a>2. 安装nginx</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#nginx.conf</span><br><span class=\"line\"></span><br><span class=\"line\">server &#123;  </span><br><span class=\"line\">    listen 80;  </span><br><span class=\"line\">    server_name  download.eclipse.org;  </span><br><span class=\"line\">    #charset koi8-r;  </span><br><span class=\"line\">    #access_log  logs/host.access.log  main;  </span><br><span class=\"line\">    location / &#123;  </span><br><span class=\"line\">        proxy_pass https://mirrors.ustc.edu.cn/eclipse/;  </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-修改host文件\"><a href=\"#3-修改host文件\" class=\"headerlink\" title=\"3. 修改host文件\"></a>3. 修改host文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1  download.eclipse.org</span><br></pre></td></tr></table></figure>\n"},{"title":"Google Chrome 用户数据（User Data）默认目录配置","author":"ZkName","date":"2019-02-18T04:26:00.000Z","_content":"\n### Google Chrome 用户数据（User Data）默认目录配置 ：\n1. 在你想要存放数据的盘符下创建文件夹，假设为\n```cmd\nE:\\Chrome\\User Data\n```\n2. 开始->附件->命令提示符（右键以管理员身份运行） \n\n3. 输入\n```cmd\nCD C:\\Users\\你的用户名\\AppData\\Local\\Google\\Chrome \n```\n\n4. 输入RMDIR /S “User Data”，提示是否删除输入Y \n```cmd\nRMDIR /S “ser Data”\n```\n\n5. 输入MKLINK /J \"User Data\" \"E:\\Chrome\\User Data\" \n```cmd\nMKLINK /J \"User Data\" \"E:\\Chrome\\User Data\" \n```\n\n6. 启动浏览器生效。\n","source":"_posts/google+chrome+User+Data默认目录配置.md","raw":"title: Google Chrome 用户数据（User Data）默认目录配置 \nauthor: ZkName\ntags:\n  - Google\n  - Chrome \ncategories: []\ndate: 2019-02-18 12:26:00\n---\n\n### Google Chrome 用户数据（User Data）默认目录配置 ：\n1. 在你想要存放数据的盘符下创建文件夹，假设为\n```cmd\nE:\\Chrome\\User Data\n```\n2. 开始->附件->命令提示符（右键以管理员身份运行） \n\n3. 输入\n```cmd\nCD C:\\Users\\你的用户名\\AppData\\Local\\Google\\Chrome \n```\n\n4. 输入RMDIR /S “User Data”，提示是否删除输入Y \n```cmd\nRMDIR /S “ser Data”\n```\n\n5. 输入MKLINK /J \"User Data\" \"E:\\Chrome\\User Data\" \n```cmd\nMKLINK /J \"User Data\" \"E:\\Chrome\\User Data\" \n```\n\n6. 启动浏览器生效。\n","slug":"google+chrome+User+Data默认目录配置","published":1,"updated":"2019-02-18T04:04:15.277Z","_id":"cjs9tdwv20000ugtwwm9is977","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"Google-Chrome-用户数据（User-Data）默认目录配置-：\"><a href=\"#Google-Chrome-用户数据（User-Data）默认目录配置-：\" class=\"headerlink\" title=\"Google Chrome 用户数据（User Data）默认目录配置 ：\"></a>Google Chrome 用户数据（User Data）默认目录配置 ：</h3><ol>\n<li><p>在你想要存放数据的盘符下创建文件夹，假设为</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">E:\\<span class=\"title\">Chrome</span>\\<span class=\"title\">User</span> <span class=\"title\">Data</span></span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开始-&gt;附件-&gt;命令提示符（右键以管理员身份运行） </p>\n</li>\n<li><p>输入</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">CD</span> C:\\Users\\你的用户名\\AppData\\Local\\Google\\Chrome</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>输入RMDIR /S “User Data”，提示是否删除输入Y </p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">RMDIR</span> /S “ser Data”</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>输入MKLINK /J “User Data” “E:\\Chrome\\User Data” </p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MKLINK /J \"User Data\" \"E:\\Chrome\\User Data\"</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动浏览器生效。</p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Google-Chrome-用户数据（User-Data）默认目录配置-：\"><a href=\"#Google-Chrome-用户数据（User-Data）默认目录配置-：\" class=\"headerlink\" title=\"Google Chrome 用户数据（User Data）默认目录配置 ：\"></a>Google Chrome 用户数据（User Data）默认目录配置 ：</h3><ol>\n<li><p>在你想要存放数据的盘符下创建文件夹，假设为</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">E:\\<span class=\"title\">Chrome</span>\\<span class=\"title\">User</span> <span class=\"title\">Data</span></span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开始-&gt;附件-&gt;命令提示符（右键以管理员身份运行） </p>\n</li>\n<li><p>输入</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">CD</span> C:\\Users\\你的用户名\\AppData\\Local\\Google\\Chrome</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>输入RMDIR /S “User Data”，提示是否删除输入Y </p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">RMDIR</span> /S “ser Data”</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>输入MKLINK /J “User Data” “E:\\Chrome\\User Data” </p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MKLINK /J \"User Data\" \"E:\\Chrome\\User Data\"</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动浏览器生效。</p>\n</li>\n</ol>\n"},{"title":"Jetty9配置说明","author":"ZkName","date":"2019-10-08T02:00:00.000Z","_content":"## Jetty9配置说明\n##### 在Jetty的根目录下执行以下命令\n```shell\njava -jar start.jar --add-to-start=jvm\n```\n1、 start.ini目录内增加\n\n```shell\n--module=deploy,http,jsp,jstl,websocket,ext,resources,console-capture,jvm\n\n```\n2、 修改配置文件start.d/jvm.ini\n\n```shell\n# --------------------------------------- \n# Module: jvm\n# A noop module that creates an ini template useful for\n# setting JVM arguments (eg -Xmx )\n# --------------------------------------- \n--module=jvm\n\n## JVM Configuration\n## If JVM args are include in an ini file then --exec is needed\n## to start a new JVM from start.jar with the extra args.\n##\n## If you wish to avoid an extra JVM running, place JVM args\n## on the normal command line and do not use --exec\n--exec\n-Xmx3072m\n-Xmn1024m\n# -XX:+UseConcMarkSweepGC\n# -XX:ParallelCMSThreads=2\n# -XX:+CMSClassUnloadingEnabled\n# -XX:+UseCMSCompactAtFullCollection\n# -XX:CMSInitiatingOccupancyFraction=80\n# -internal:gc\n# -XX:+PrintGCDateStamps\n# -XX:+PrintGCTimeStamps\n# -XX:+PrintGCDetails\n# -XX:+PrintTenuringDistribution\n# -XX:+PrintCommandLineFlags\n# -XX:+DisableExplicitGC\n```\n3、查询模块已安装模块\n```shell\njava -jar start.jar --list-config\n```","source":"_posts/Jetty9配置说明.md","raw":"title: Jetty9配置说明\nauthor: ZkName\ntags:\n  - jetty\n  - Ubuntu\n  - jetty9\ncategories: []\ndate: 2019-10-08 10:00:00\n---\n## Jetty9配置说明\n##### 在Jetty的根目录下执行以下命令\n```shell\njava -jar start.jar --add-to-start=jvm\n```\n1、 start.ini目录内增加\n\n```shell\n--module=deploy,http,jsp,jstl,websocket,ext,resources,console-capture,jvm\n\n```\n2、 修改配置文件start.d/jvm.ini\n\n```shell\n# --------------------------------------- \n# Module: jvm\n# A noop module that creates an ini template useful for\n# setting JVM arguments (eg -Xmx )\n# --------------------------------------- \n--module=jvm\n\n## JVM Configuration\n## If JVM args are include in an ini file then --exec is needed\n## to start a new JVM from start.jar with the extra args.\n##\n## If you wish to avoid an extra JVM running, place JVM args\n## on the normal command line and do not use --exec\n--exec\n-Xmx3072m\n-Xmn1024m\n# -XX:+UseConcMarkSweepGC\n# -XX:ParallelCMSThreads=2\n# -XX:+CMSClassUnloadingEnabled\n# -XX:+UseCMSCompactAtFullCollection\n# -XX:CMSInitiatingOccupancyFraction=80\n# -internal:gc\n# -XX:+PrintGCDateStamps\n# -XX:+PrintGCTimeStamps\n# -XX:+PrintGCDetails\n# -XX:+PrintTenuringDistribution\n# -XX:+PrintCommandLineFlags\n# -XX:+DisableExplicitGC\n```\n3、查询模块已安装模块\n```shell\njava -jar start.jar --list-config\n```","slug":"Jetty9配置说明","published":1,"updated":"2019-10-08T06:16:54.207Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck1hgd6sp0000mktw6ieafv88","content":"<h2 id=\"Jetty9配置说明\"><a href=\"#Jetty9配置说明\" class=\"headerlink\" title=\"Jetty9配置说明\"></a>Jetty9配置说明</h2><h5 id=\"在Jetty的根目录下执行以下命令\"><a href=\"#在Jetty的根目录下执行以下命令\" class=\"headerlink\" title=\"在Jetty的根目录下执行以下命令\"></a>在Jetty的根目录下执行以下命令</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar start.jar --add-to-start=jvm</span><br></pre></td></tr></table></figure>\n<p>1、 start.ini目录内增加</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--module=deploy,http,jsp,jstl,websocket,ext,resources,console-capture,jvm</span><br></pre></td></tr></table></figure>\n<p>2、 修改配置文件start.d/jvm.ini</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> --------------------------------------- </span><br><span class=\"line\"><span class=\"meta\">#</span> Module: jvm</span><br><span class=\"line\"><span class=\"meta\">#</span> A noop module that creates an ini template useful for</span><br><span class=\"line\"><span class=\"meta\">#</span> setting JVM arguments (eg -Xmx )</span><br><span class=\"line\"><span class=\"meta\">#</span> --------------------------------------- </span><br><span class=\"line\">--module=jvm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span># JVM Configuration</span><br><span class=\"line\"><span class=\"meta\">#</span># If JVM args are include in an ini file then --exec is needed</span><br><span class=\"line\"><span class=\"meta\">#</span># to start a new JVM from start.jar with the extra args.</span><br><span class=\"line\"><span class=\"meta\">#</span>#</span><br><span class=\"line\"><span class=\"meta\">#</span># If you wish to avoid an extra JVM running, place JVM args</span><br><span class=\"line\"><span class=\"meta\">#</span># on the normal command line and do not use --exec</span><br><span class=\"line\">--exec</span><br><span class=\"line\">-Xmx3072m</span><br><span class=\"line\">-Xmn1024m</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+UseConcMarkSweepGC</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:ParallelCMSThreads=2</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+CMSClassUnloadingEnabled</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+UseCMSCompactAtFullCollection</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:CMSInitiatingOccupancyFraction=80</span><br><span class=\"line\"><span class=\"meta\">#</span> -internal:gc</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+PrintGCDateStamps</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+PrintGCTimeStamps</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+PrintGCDetails</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+PrintTenuringDistribution</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+PrintCommandLineFlags</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+DisableExplicitGC</span><br></pre></td></tr></table></figure>\n<p>3、查询模块已安装模块<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar start.jar --list-config</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Jetty9配置说明\"><a href=\"#Jetty9配置说明\" class=\"headerlink\" title=\"Jetty9配置说明\"></a>Jetty9配置说明</h2><h5 id=\"在Jetty的根目录下执行以下命令\"><a href=\"#在Jetty的根目录下执行以下命令\" class=\"headerlink\" title=\"在Jetty的根目录下执行以下命令\"></a>在Jetty的根目录下执行以下命令</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar start.jar --add-to-start=jvm</span><br></pre></td></tr></table></figure>\n<p>1、 start.ini目录内增加</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--module=deploy,http,jsp,jstl,websocket,ext,resources,console-capture,jvm</span><br></pre></td></tr></table></figure>\n<p>2、 修改配置文件start.d/jvm.ini</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> --------------------------------------- </span><br><span class=\"line\"><span class=\"meta\">#</span> Module: jvm</span><br><span class=\"line\"><span class=\"meta\">#</span> A noop module that creates an ini template useful for</span><br><span class=\"line\"><span class=\"meta\">#</span> setting JVM arguments (eg -Xmx )</span><br><span class=\"line\"><span class=\"meta\">#</span> --------------------------------------- </span><br><span class=\"line\">--module=jvm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span># JVM Configuration</span><br><span class=\"line\"><span class=\"meta\">#</span># If JVM args are include in an ini file then --exec is needed</span><br><span class=\"line\"><span class=\"meta\">#</span># to start a new JVM from start.jar with the extra args.</span><br><span class=\"line\"><span class=\"meta\">#</span>#</span><br><span class=\"line\"><span class=\"meta\">#</span># If you wish to avoid an extra JVM running, place JVM args</span><br><span class=\"line\"><span class=\"meta\">#</span># on the normal command line and do not use --exec</span><br><span class=\"line\">--exec</span><br><span class=\"line\">-Xmx3072m</span><br><span class=\"line\">-Xmn1024m</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+UseConcMarkSweepGC</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:ParallelCMSThreads=2</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+CMSClassUnloadingEnabled</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+UseCMSCompactAtFullCollection</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:CMSInitiatingOccupancyFraction=80</span><br><span class=\"line\"><span class=\"meta\">#</span> -internal:gc</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+PrintGCDateStamps</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+PrintGCTimeStamps</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+PrintGCDetails</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+PrintTenuringDistribution</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+PrintCommandLineFlags</span><br><span class=\"line\"><span class=\"meta\">#</span> -XX:+DisableExplicitGC</span><br></pre></td></tr></table></figure>\n<p>3、查询模块已安装模块<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar start.jar --list-config</span><br></pre></td></tr></table></figure></p>\n"},{"title":"SoftEtherVPN 不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。","date":"2019-12-19T04:50:00.000Z","_content":"\n\n##### 静态路由表下发功能无法使用：\n\n不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。\n```\n源码\nsrc\\Cedar\\server.c\n删除 SiIsEnterpriseFunctionsRestrictedOnOpenSource 方法内容\n\nif (StrCmpi(region, \"JP\") == 0 || StrCmpi(region, \"CN\") == 0)\n{\n\t\tret = true;\n}\n\n重新编译\n```\n\n##### 我编译好的地址\n\n链接: <https://pan.baidu.com/s/195glDSOX7TEn6HhvwHH_Ow>\n提取码: 4pnu\n\n","source":"_posts/SoftEtherVPN不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。.md","raw":"title: SoftEtherVPN 不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。\ntags:\n  - VPM\ncategories:\n  - SoftEtherVPN\ndate: 2019-12-19 12:50:00\n---\n\n\n##### 静态路由表下发功能无法使用：\n\n不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。\n```\n源码\nsrc\\Cedar\\server.c\n删除 SiIsEnterpriseFunctionsRestrictedOnOpenSource 方法内容\n\nif (StrCmpi(region, \"JP\") == 0 || StrCmpi(region, \"CN\") == 0)\n{\n\t\tret = true;\n}\n\n重新编译\n```\n\n##### 我编译好的地址\n\n链接: <https://pan.baidu.com/s/195glDSOX7TEn6HhvwHH_Ow>\n提取码: 4pnu\n\n","slug":"SoftEtherVPN不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。","published":1,"updated":"2020-01-02T08:27:44.453Z","_id":"ck4ch9c6d0000f0twq1on7uki","comments":1,"layout":"post","photos":[],"link":"","content":"<h5 id=\"静态路由表下发功能无法使用：\"><a href=\"#静态路由表下发功能无法使用：\" class=\"headerlink\" title=\"静态路由表下发功能无法使用：\"></a>静态路由表下发功能无法使用：</h5><p>不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">源码</span><br><span class=\"line\">src\\Cedar\\server.c</span><br><span class=\"line\">删除 SiIsEnterpriseFunctionsRestrictedOnOpenSource 方法内容</span><br><span class=\"line\"></span><br><span class=\"line\">if (StrCmpi(region, &quot;JP&quot;) == 0 || StrCmpi(region, &quot;CN&quot;) == 0)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\tret = true;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">重新编译</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"我编译好的地址\"><a href=\"#我编译好的地址\" class=\"headerlink\" title=\"我编译好的地址\"></a>我编译好的地址</h5><p>链接: <a href=\"https://pan.baidu.com/s/195glDSOX7TEn6HhvwHH_Ow\" target=\"_blank\" rel=\"noopener\">https://pan.baidu.com/s/195glDSOX7TEn6HhvwHH_Ow</a><br>提取码: 4pnu</p>\n","site":{"data":{}},"excerpt":"","more":"<h5 id=\"静态路由表下发功能无法使用：\"><a href=\"#静态路由表下发功能无法使用：\" class=\"headerlink\" title=\"静态路由表下发功能无法使用：\"></a>静态路由表下发功能无法使用：</h5><p>不支持此功能。它尚未在 SoftEther VPN 的开源版本上实施。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">源码</span><br><span class=\"line\">src\\Cedar\\server.c</span><br><span class=\"line\">删除 SiIsEnterpriseFunctionsRestrictedOnOpenSource 方法内容</span><br><span class=\"line\"></span><br><span class=\"line\">if (StrCmpi(region, &quot;JP&quot;) == 0 || StrCmpi(region, &quot;CN&quot;) == 0)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\tret = true;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">重新编译</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"我编译好的地址\"><a href=\"#我编译好的地址\" class=\"headerlink\" title=\"我编译好的地址\"></a>我编译好的地址</h5><p>链接: <a href=\"https://pan.baidu.com/s/195glDSOX7TEn6HhvwHH_Ow\" target=\"_blank\" rel=\"noopener\">https://pan.baidu.com/s/195glDSOX7TEn6HhvwHH_Ow</a><br>提取码: 4pnu</p>\n"},{"title":"SecureCRT找回密码","date":"2020-01-06T04:50:00.000Z","_content":"\n###### SecureCRT 密码忘记了找了半天，在github上找到一个项目，实现新老版本的找回密码，分享一下。\n\n##### SecureCRT找回密码 python 文件 SecureCRTCipher.py：\n\n```\n#!/usr/bin/env python3\nimport os\nfrom Crypto.Hash import SHA256\nfrom Crypto.Cipher import AES, Blowfish\n\nclass SecureCRTCrypto:\n\n    def __init__(self):\n        '''\n        Initialize SecureCRTCrypto object.\n        '''\n        self.IV = b'\\x00' * Blowfish.block_size\n        self.Key1 = b'\\x24\\xA6\\x3D\\xDE\\x5B\\xD3\\xB3\\x82\\x9C\\x7E\\x06\\xF4\\x08\\x16\\xAA\\x07'\n        self.Key2 = b'\\x5F\\xB0\\x45\\xA2\\x94\\x17\\xD9\\x16\\xC6\\xC6\\xA2\\xFF\\x06\\x41\\x82\\xB7'\n\n    def Encrypt(self, Plaintext : str):\n        '''\n        Encrypt plaintext and return corresponding ciphertext.\n        Args:\n            Plaintext: A string that will be encrypted.\n        Returns:\n            Hexlified ciphertext string.\n        '''\n        plain_bytes = Plaintext.encode('utf-16-le')\n        plain_bytes += b'\\x00\\x00'\n        padded_plain_bytes = plain_bytes + os.urandom(Blowfish.block_size - len(plain_bytes) % Blowfish.block_size)\n\n        cipher1 = Blowfish.new(self.Key1, Blowfish.MODE_CBC, iv = self.IV)\n        cipher2 = Blowfish.new(self.Key2, Blowfish.MODE_CBC, iv = self.IV)\n        return cipher1.encrypt(os.urandom(4) + cipher2.encrypt(padded_plain_bytes) + os.urandom(4)).hex()\n\n    def Decrypt(self, Ciphertext : str):\n        '''\n        Decrypt ciphertext and return corresponding plaintext.\n        Args:\n            Ciphertext: A hex string that will be decrypted.\n        Returns:\n            Plaintext string.\n        '''\n\n        cipher1 = Blowfish.new(self.Key1, Blowfish.MODE_CBC, iv = self.IV)\n        cipher2 = Blowfish.new(self.Key2, Blowfish.MODE_CBC, iv = self.IV)\n        ciphered_bytes = bytes.fromhex(Ciphertext)\n        if len(ciphered_bytes) <= 8:\n            raise ValueError('Invalid Ciphertext.')\n        \n        padded_plain_bytes = cipher2.decrypt(cipher1.decrypt(ciphered_bytes)[4:-4])\n        \n        i = 0\n        for i in range(0, len(padded_plain_bytes), 2):\n            if padded_plain_bytes[i] == 0 and padded_plain_bytes[i + 1] == 0:\n                break\n        plain_bytes = padded_plain_bytes[0:i]\n\n        try:\n            return plain_bytes.decode('utf-16-le')\n        except UnicodeDecodeError:\n            raise(ValueError('Invalid Ciphertext.'))\n\nclass SecureCRTCryptoV2:\n\n    def __init__(self, ConfigPassphrase : str = ''):\n        '''\n        Initialize SecureCRTCryptoV2 object.\n        Args:\n            ConfigPassphrase: The config passphrase that SecureCRT uses. Leave it empty if config passphrase is not set.\n        '''\n        self.IV = b'\\x00' * AES.block_size\n        self.Key = SHA256.new(ConfigPassphrase.encode('utf-8')).digest()\n\n    def Encrypt(self, Plaintext : str):\n        '''\n        Encrypt plaintext and return corresponding ciphertext.\n        Args:\n            Plaintext: A string that will be encrypted.\n        Returns:\n            Hexlified ciphertext string.\n        '''\n        plain_bytes = Plaintext.encode('utf-8')\n        if len(plain_bytes) > 0xffffffff:\n            raise OverflowError('Plaintext is too long.')\n        \n        plain_bytes = \\\n            len(plain_bytes).to_bytes(4, 'little') + \\\n            plain_bytes + \\\n            SHA256.new(plain_bytes).digest()\n        padded_plain_bytes = \\\n            plain_bytes + \\\n            os.urandom(AES.block_size - len(plain_bytes) % AES.block_size)\n        cipher = AES.new(self.Key, AES.MODE_CBC, iv = self.IV)\n        return cipher.encrypt(padded_plain_bytes).hex()\n\n    def Decrypt(self, Ciphertext : str):\n        '''\n        Decrypt ciphertext and return corresponding plaintext.\n        Args:\n            Ciphertext: A hex string that will be decrypted.\n        Returns:\n            Plaintext string.\n        '''\n        cipher = AES.new(self.Key, AES.MODE_CBC, iv = self.IV)\n        padded_plain_bytes = cipher.decrypt(bytes.fromhex(Ciphertext))\n        \n        plain_bytes_length = int.from_bytes(padded_plain_bytes[0:4], 'little')\n        plain_bytes = padded_plain_bytes[4:4 + plain_bytes_length]\n        if len(plain_bytes) != plain_bytes_length:\n            raise ValueError('Invalid Ciphertext.')\n\n        plain_bytes_digest = padded_plain_bytes[4 + plain_bytes_length:4 + plain_bytes_length + SHA256.digest_size]\n        if len(plain_bytes_digest) != SHA256.digest_size:\n            raise ValueError('Invalid Ciphertext.')\n\n        if SHA256.new(plain_bytes).digest() != plain_bytes_digest:\n            raise ValueError('Invalid Ciphertext.')\n\n        return plain_bytes.decode('utf-8')\n\nif __name__ == '__main__':\n    import sys\n\n    def Help():\n        print('Usage:')\n        print('    SecureCRTCipher.py <enc|dec> [-v2] [-p ConfigPassphrase] <plaintext|ciphertext>')\n        print('')\n        print('    <enc|dec>              \"enc\" for encryption, \"dec\" for decryption.')\n        print('                           This parameter must be specified.')\n        print('')\n        print('    [-v2]                  Encrypt/Decrypt with \"Password V2\" algorithm.')\n        print('                           This parameter is optional.')\n        print('')\n        print('    [-p ConfigPassphrase]  The config passphrase that SecureCRT uses.')\n        print('                           This parameter is optional.')\n        print('')\n        print('    <plaintext|ciphertext> Plaintext string or ciphertext string.')\n        print('                           NOTICE: Ciphertext string must be a hex string.')\n        print('                           This parameter must be specified.')\n        print('')\n    \n    def EncryptionRoutine(UseV2 : bool, ConfigPassphrase : str, Plaintext : str):\n        try:\n            if UseV2:\n                print(SecureCRTCryptoV2(ConfigPassphrase).Encrypt(Plaintext))\n            else:\n                print(SecureCRTCrypto().Encrypt(Plaintext))\n            return True\n        except:\n            print('Error: Failed to encrypt.')\n            return False\n\n    def DecryptionRoutine(UseV2 : bool, ConfigPassphrase : str, Ciphertext : str):\n        try:\n            if UseV2:\n                print(SecureCRTCryptoV2(ConfigPassphrase).Decrypt(Ciphertext))\n            else:\n                print(SecureCRTCrypto().Decrypt(Ciphertext))\n            return True\n        except:\n            print('Error: Failed to decrypt.')\n            return False\n\n    def Main(argc : int, argv : list):\n        if 3 <= argc and argc <= 6:\n            bUseV2 = False\n            ConfigPassphrase = ''\n\n            if argv[1].lower() == 'enc':\n                bEncrypt = True\n            elif argv[1].lower() == 'dec':\n                bEncrypt = False\n            else:\n                Help()\n                return -1\n            \n            i = 2\n            while i < argc - 1:\n                if argv[i].lower() == '-v2':\n                    bUseV2 = True\n                    i += 1\n                elif argv[i].lower() == '-p' and i + 1 < argc - 1:\n                    ConfigPassphrase = argv[i + 1]\n                    i += 2\n                else:\n                    Help()\n                    return -1\n\n            if bUseV2 == False and len(ConfigPassphrase) != 0:\n                print('Error: ConfigPassphrase is not supported if \"-v2\" is not specified')\n                return -1\n\n            if bEncrypt:\n                return 0 if EncryptionRoutine(bUseV2, ConfigPassphrase, argv[-1]) else -1\n            else:\n                return 0 if DecryptionRoutine(bUseV2, ConfigPassphrase, argv[-1]) else -1\n        else:\n            Help()\n\n    exit(Main(len(sys.argv), sys.argv))\n\n```\n\n\n\n\n##### SecureCRT7版本之前使用方法：\n```\n...\n...\nS:\"Username\"=root\nD:\"[SSH2] Port\"=00000016\nS:\"Password\"=uc71bd1c86f3b804e42432f53247c50d9287f410c7e59166969acab69daa6eaadbe15c0c54c0e076e945a6d82f9e13df2\nD:\"Session Password Saved\"=00000001\n...\n...\n```\n\n```\npython SecureCRTCipher.py dec c71bd1c86f3b804e42432f53247c50d9287f410c7e59166969acab69daa6eaadbe15c0c54c0e076e945a6d82f9e13df2\n\nDoubleLabyrinth\n```\n##### SecureCRT7之后使用方法：\n```\nS:\"Username\"=root\nS:\"Password\"=\nS:\"Password V2\"=02:7b9f594a1f39bb36bbaa0d9688ee38b3d233c67b338e20e2113f2ba4d328b6fc8c804e3c02324b1eaad57a5b96ac1fc5cc1ae0ee2930e6af2e5e644a28ebe3fc\nS:\"Login Script V2\"=\n...\n...\n```\n```\npython SecureCRTCipher.py dec -v2 7b9f594a1f39bb36bbaa0d9688ee38b3d233c67b338e20e2113f2ba4d328b6fc8c804e3c02324b1eaad57a5b96ac1fc5cc1ae0ee2930e6af2e5e644a28ebe3fc\n\nDoubleLabyrinth\n```\n\n##### github 项目地址\n地址: <https://github.com/HyperSine/how-does-SecureCRT-encrypt-password>\n\n\n","source":"_posts/SecureCRT找回密码.md","raw":"title: SecureCRT找回密码\ntags:\n  - SSH\n  - SecureCRT\ncategories:\n  - SecureCRT\ndate: 2020-01-06 12:50:00\n---\n\n###### SecureCRT 密码忘记了找了半天，在github上找到一个项目，实现新老版本的找回密码，分享一下。\n\n##### SecureCRT找回密码 python 文件 SecureCRTCipher.py：\n\n```\n#!/usr/bin/env python3\nimport os\nfrom Crypto.Hash import SHA256\nfrom Crypto.Cipher import AES, Blowfish\n\nclass SecureCRTCrypto:\n\n    def __init__(self):\n        '''\n        Initialize SecureCRTCrypto object.\n        '''\n        self.IV = b'\\x00' * Blowfish.block_size\n        self.Key1 = b'\\x24\\xA6\\x3D\\xDE\\x5B\\xD3\\xB3\\x82\\x9C\\x7E\\x06\\xF4\\x08\\x16\\xAA\\x07'\n        self.Key2 = b'\\x5F\\xB0\\x45\\xA2\\x94\\x17\\xD9\\x16\\xC6\\xC6\\xA2\\xFF\\x06\\x41\\x82\\xB7'\n\n    def Encrypt(self, Plaintext : str):\n        '''\n        Encrypt plaintext and return corresponding ciphertext.\n        Args:\n            Plaintext: A string that will be encrypted.\n        Returns:\n            Hexlified ciphertext string.\n        '''\n        plain_bytes = Plaintext.encode('utf-16-le')\n        plain_bytes += b'\\x00\\x00'\n        padded_plain_bytes = plain_bytes + os.urandom(Blowfish.block_size - len(plain_bytes) % Blowfish.block_size)\n\n        cipher1 = Blowfish.new(self.Key1, Blowfish.MODE_CBC, iv = self.IV)\n        cipher2 = Blowfish.new(self.Key2, Blowfish.MODE_CBC, iv = self.IV)\n        return cipher1.encrypt(os.urandom(4) + cipher2.encrypt(padded_plain_bytes) + os.urandom(4)).hex()\n\n    def Decrypt(self, Ciphertext : str):\n        '''\n        Decrypt ciphertext and return corresponding plaintext.\n        Args:\n            Ciphertext: A hex string that will be decrypted.\n        Returns:\n            Plaintext string.\n        '''\n\n        cipher1 = Blowfish.new(self.Key1, Blowfish.MODE_CBC, iv = self.IV)\n        cipher2 = Blowfish.new(self.Key2, Blowfish.MODE_CBC, iv = self.IV)\n        ciphered_bytes = bytes.fromhex(Ciphertext)\n        if len(ciphered_bytes) <= 8:\n            raise ValueError('Invalid Ciphertext.')\n        \n        padded_plain_bytes = cipher2.decrypt(cipher1.decrypt(ciphered_bytes)[4:-4])\n        \n        i = 0\n        for i in range(0, len(padded_plain_bytes), 2):\n            if padded_plain_bytes[i] == 0 and padded_plain_bytes[i + 1] == 0:\n                break\n        plain_bytes = padded_plain_bytes[0:i]\n\n        try:\n            return plain_bytes.decode('utf-16-le')\n        except UnicodeDecodeError:\n            raise(ValueError('Invalid Ciphertext.'))\n\nclass SecureCRTCryptoV2:\n\n    def __init__(self, ConfigPassphrase : str = ''):\n        '''\n        Initialize SecureCRTCryptoV2 object.\n        Args:\n            ConfigPassphrase: The config passphrase that SecureCRT uses. Leave it empty if config passphrase is not set.\n        '''\n        self.IV = b'\\x00' * AES.block_size\n        self.Key = SHA256.new(ConfigPassphrase.encode('utf-8')).digest()\n\n    def Encrypt(self, Plaintext : str):\n        '''\n        Encrypt plaintext and return corresponding ciphertext.\n        Args:\n            Plaintext: A string that will be encrypted.\n        Returns:\n            Hexlified ciphertext string.\n        '''\n        plain_bytes = Plaintext.encode('utf-8')\n        if len(plain_bytes) > 0xffffffff:\n            raise OverflowError('Plaintext is too long.')\n        \n        plain_bytes = \\\n            len(plain_bytes).to_bytes(4, 'little') + \\\n            plain_bytes + \\\n            SHA256.new(plain_bytes).digest()\n        padded_plain_bytes = \\\n            plain_bytes + \\\n            os.urandom(AES.block_size - len(plain_bytes) % AES.block_size)\n        cipher = AES.new(self.Key, AES.MODE_CBC, iv = self.IV)\n        return cipher.encrypt(padded_plain_bytes).hex()\n\n    def Decrypt(self, Ciphertext : str):\n        '''\n        Decrypt ciphertext and return corresponding plaintext.\n        Args:\n            Ciphertext: A hex string that will be decrypted.\n        Returns:\n            Plaintext string.\n        '''\n        cipher = AES.new(self.Key, AES.MODE_CBC, iv = self.IV)\n        padded_plain_bytes = cipher.decrypt(bytes.fromhex(Ciphertext))\n        \n        plain_bytes_length = int.from_bytes(padded_plain_bytes[0:4], 'little')\n        plain_bytes = padded_plain_bytes[4:4 + plain_bytes_length]\n        if len(plain_bytes) != plain_bytes_length:\n            raise ValueError('Invalid Ciphertext.')\n\n        plain_bytes_digest = padded_plain_bytes[4 + plain_bytes_length:4 + plain_bytes_length + SHA256.digest_size]\n        if len(plain_bytes_digest) != SHA256.digest_size:\n            raise ValueError('Invalid Ciphertext.')\n\n        if SHA256.new(plain_bytes).digest() != plain_bytes_digest:\n            raise ValueError('Invalid Ciphertext.')\n\n        return plain_bytes.decode('utf-8')\n\nif __name__ == '__main__':\n    import sys\n\n    def Help():\n        print('Usage:')\n        print('    SecureCRTCipher.py <enc|dec> [-v2] [-p ConfigPassphrase] <plaintext|ciphertext>')\n        print('')\n        print('    <enc|dec>              \"enc\" for encryption, \"dec\" for decryption.')\n        print('                           This parameter must be specified.')\n        print('')\n        print('    [-v2]                  Encrypt/Decrypt with \"Password V2\" algorithm.')\n        print('                           This parameter is optional.')\n        print('')\n        print('    [-p ConfigPassphrase]  The config passphrase that SecureCRT uses.')\n        print('                           This parameter is optional.')\n        print('')\n        print('    <plaintext|ciphertext> Plaintext string or ciphertext string.')\n        print('                           NOTICE: Ciphertext string must be a hex string.')\n        print('                           This parameter must be specified.')\n        print('')\n    \n    def EncryptionRoutine(UseV2 : bool, ConfigPassphrase : str, Plaintext : str):\n        try:\n            if UseV2:\n                print(SecureCRTCryptoV2(ConfigPassphrase).Encrypt(Plaintext))\n            else:\n                print(SecureCRTCrypto().Encrypt(Plaintext))\n            return True\n        except:\n            print('Error: Failed to encrypt.')\n            return False\n\n    def DecryptionRoutine(UseV2 : bool, ConfigPassphrase : str, Ciphertext : str):\n        try:\n            if UseV2:\n                print(SecureCRTCryptoV2(ConfigPassphrase).Decrypt(Ciphertext))\n            else:\n                print(SecureCRTCrypto().Decrypt(Ciphertext))\n            return True\n        except:\n            print('Error: Failed to decrypt.')\n            return False\n\n    def Main(argc : int, argv : list):\n        if 3 <= argc and argc <= 6:\n            bUseV2 = False\n            ConfigPassphrase = ''\n\n            if argv[1].lower() == 'enc':\n                bEncrypt = True\n            elif argv[1].lower() == 'dec':\n                bEncrypt = False\n            else:\n                Help()\n                return -1\n            \n            i = 2\n            while i < argc - 1:\n                if argv[i].lower() == '-v2':\n                    bUseV2 = True\n                    i += 1\n                elif argv[i].lower() == '-p' and i + 1 < argc - 1:\n                    ConfigPassphrase = argv[i + 1]\n                    i += 2\n                else:\n                    Help()\n                    return -1\n\n            if bUseV2 == False and len(ConfigPassphrase) != 0:\n                print('Error: ConfigPassphrase is not supported if \"-v2\" is not specified')\n                return -1\n\n            if bEncrypt:\n                return 0 if EncryptionRoutine(bUseV2, ConfigPassphrase, argv[-1]) else -1\n            else:\n                return 0 if DecryptionRoutine(bUseV2, ConfigPassphrase, argv[-1]) else -1\n        else:\n            Help()\n\n    exit(Main(len(sys.argv), sys.argv))\n\n```\n\n\n\n\n##### SecureCRT7版本之前使用方法：\n```\n...\n...\nS:\"Username\"=root\nD:\"[SSH2] Port\"=00000016\nS:\"Password\"=uc71bd1c86f3b804e42432f53247c50d9287f410c7e59166969acab69daa6eaadbe15c0c54c0e076e945a6d82f9e13df2\nD:\"Session Password Saved\"=00000001\n...\n...\n```\n\n```\npython SecureCRTCipher.py dec c71bd1c86f3b804e42432f53247c50d9287f410c7e59166969acab69daa6eaadbe15c0c54c0e076e945a6d82f9e13df2\n\nDoubleLabyrinth\n```\n##### SecureCRT7之后使用方法：\n```\nS:\"Username\"=root\nS:\"Password\"=\nS:\"Password V2\"=02:7b9f594a1f39bb36bbaa0d9688ee38b3d233c67b338e20e2113f2ba4d328b6fc8c804e3c02324b1eaad57a5b96ac1fc5cc1ae0ee2930e6af2e5e644a28ebe3fc\nS:\"Login Script V2\"=\n...\n...\n```\n```\npython SecureCRTCipher.py dec -v2 7b9f594a1f39bb36bbaa0d9688ee38b3d233c67b338e20e2113f2ba4d328b6fc8c804e3c02324b1eaad57a5b96ac1fc5cc1ae0ee2930e6af2e5e644a28ebe3fc\n\nDoubleLabyrinth\n```\n\n##### github 项目地址\n地址: <https://github.com/HyperSine/how-does-SecureCRT-encrypt-password>\n\n\n","slug":"SecureCRT找回密码","published":1,"updated":"2020-01-07T01:48:21.541Z","_id":"ck52bfy6k00000gtw2lqwgmkp","comments":1,"layout":"post","photos":[],"link":"","content":"<h6 id=\"SecureCRT-密码忘记了找了半天，在github上找到一个项目，实现新老版本的找回密码，分享一下。\"><a href=\"#SecureCRT-密码忘记了找了半天，在github上找到一个项目，实现新老版本的找回密码，分享一下。\" class=\"headerlink\" title=\"SecureCRT 密码忘记了找了半天，在github上找到一个项目，实现新老版本的找回密码，分享一下。\"></a>SecureCRT 密码忘记了找了半天，在github上找到一个项目，实现新老版本的找回密码，分享一下。</h6><h5 id=\"SecureCRT找回密码-python-文件-SecureCRTCipher-py：\"><a href=\"#SecureCRT找回密码-python-文件-SecureCRTCipher-py：\" class=\"headerlink\" title=\"SecureCRT找回密码 python 文件 SecureCRTCipher.py：\"></a>SecureCRT找回密码 python 文件 SecureCRTCipher.py：</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/usr/bin/env python3</span><br><span class=\"line\">import os</span><br><span class=\"line\">from Crypto.Hash import SHA256</span><br><span class=\"line\">from Crypto.Cipher import AES, Blowfish</span><br><span class=\"line\"></span><br><span class=\"line\">class SecureCRTCrypto:</span><br><span class=\"line\"></span><br><span class=\"line\">    def __init__(self):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Initialize SecureCRTCrypto object.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        self.IV = b&apos;\\x00&apos; * Blowfish.block_size</span><br><span class=\"line\">        self.Key1 = b&apos;\\x24\\xA6\\x3D\\xDE\\x5B\\xD3\\xB3\\x82\\x9C\\x7E\\x06\\xF4\\x08\\x16\\xAA\\x07&apos;</span><br><span class=\"line\">        self.Key2 = b&apos;\\x5F\\xB0\\x45\\xA2\\x94\\x17\\xD9\\x16\\xC6\\xC6\\xA2\\xFF\\x06\\x41\\x82\\xB7&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">    def Encrypt(self, Plaintext : str):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Encrypt plaintext and return corresponding ciphertext.</span><br><span class=\"line\">        Args:</span><br><span class=\"line\">            Plaintext: A string that will be encrypted.</span><br><span class=\"line\">        Returns:</span><br><span class=\"line\">            Hexlified ciphertext string.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        plain_bytes = Plaintext.encode(&apos;utf-16-le&apos;)</span><br><span class=\"line\">        plain_bytes += b&apos;\\x00\\x00&apos;</span><br><span class=\"line\">        padded_plain_bytes = plain_bytes + os.urandom(Blowfish.block_size - len(plain_bytes) % Blowfish.block_size)</span><br><span class=\"line\"></span><br><span class=\"line\">        cipher1 = Blowfish.new(self.Key1, Blowfish.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        cipher2 = Blowfish.new(self.Key2, Blowfish.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        return cipher1.encrypt(os.urandom(4) + cipher2.encrypt(padded_plain_bytes) + os.urandom(4)).hex()</span><br><span class=\"line\"></span><br><span class=\"line\">    def Decrypt(self, Ciphertext : str):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Decrypt ciphertext and return corresponding plaintext.</span><br><span class=\"line\">        Args:</span><br><span class=\"line\">            Ciphertext: A hex string that will be decrypted.</span><br><span class=\"line\">        Returns:</span><br><span class=\"line\">            Plaintext string.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">        cipher1 = Blowfish.new(self.Key1, Blowfish.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        cipher2 = Blowfish.new(self.Key2, Blowfish.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        ciphered_bytes = bytes.fromhex(Ciphertext)</span><br><span class=\"line\">        if len(ciphered_bytes) &lt;= 8:</span><br><span class=\"line\">            raise ValueError(&apos;Invalid Ciphertext.&apos;)</span><br><span class=\"line\">        </span><br><span class=\"line\">        padded_plain_bytes = cipher2.decrypt(cipher1.decrypt(ciphered_bytes)[4:-4])</span><br><span class=\"line\">        </span><br><span class=\"line\">        i = 0</span><br><span class=\"line\">        for i in range(0, len(padded_plain_bytes), 2):</span><br><span class=\"line\">            if padded_plain_bytes[i] == 0 and padded_plain_bytes[i + 1] == 0:</span><br><span class=\"line\">                break</span><br><span class=\"line\">        plain_bytes = padded_plain_bytes[0:i]</span><br><span class=\"line\"></span><br><span class=\"line\">        try:</span><br><span class=\"line\">            return plain_bytes.decode(&apos;utf-16-le&apos;)</span><br><span class=\"line\">        except UnicodeDecodeError:</span><br><span class=\"line\">            raise(ValueError(&apos;Invalid Ciphertext.&apos;))</span><br><span class=\"line\"></span><br><span class=\"line\">class SecureCRTCryptoV2:</span><br><span class=\"line\"></span><br><span class=\"line\">    def __init__(self, ConfigPassphrase : str = &apos;&apos;):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Initialize SecureCRTCryptoV2 object.</span><br><span class=\"line\">        Args:</span><br><span class=\"line\">            ConfigPassphrase: The config passphrase that SecureCRT uses. Leave it empty if config passphrase is not set.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        self.IV = b&apos;\\x00&apos; * AES.block_size</span><br><span class=\"line\">        self.Key = SHA256.new(ConfigPassphrase.encode(&apos;utf-8&apos;)).digest()</span><br><span class=\"line\"></span><br><span class=\"line\">    def Encrypt(self, Plaintext : str):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Encrypt plaintext and return corresponding ciphertext.</span><br><span class=\"line\">        Args:</span><br><span class=\"line\">            Plaintext: A string that will be encrypted.</span><br><span class=\"line\">        Returns:</span><br><span class=\"line\">            Hexlified ciphertext string.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        plain_bytes = Plaintext.encode(&apos;utf-8&apos;)</span><br><span class=\"line\">        if len(plain_bytes) &gt; 0xffffffff:</span><br><span class=\"line\">            raise OverflowError(&apos;Plaintext is too long.&apos;)</span><br><span class=\"line\">        </span><br><span class=\"line\">        plain_bytes = \\</span><br><span class=\"line\">            len(plain_bytes).to_bytes(4, &apos;little&apos;) + \\</span><br><span class=\"line\">            plain_bytes + \\</span><br><span class=\"line\">            SHA256.new(plain_bytes).digest()</span><br><span class=\"line\">        padded_plain_bytes = \\</span><br><span class=\"line\">            plain_bytes + \\</span><br><span class=\"line\">            os.urandom(AES.block_size - len(plain_bytes) % AES.block_size)</span><br><span class=\"line\">        cipher = AES.new(self.Key, AES.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        return cipher.encrypt(padded_plain_bytes).hex()</span><br><span class=\"line\"></span><br><span class=\"line\">    def Decrypt(self, Ciphertext : str):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Decrypt ciphertext and return corresponding plaintext.</span><br><span class=\"line\">        Args:</span><br><span class=\"line\">            Ciphertext: A hex string that will be decrypted.</span><br><span class=\"line\">        Returns:</span><br><span class=\"line\">            Plaintext string.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        cipher = AES.new(self.Key, AES.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        padded_plain_bytes = cipher.decrypt(bytes.fromhex(Ciphertext))</span><br><span class=\"line\">        </span><br><span class=\"line\">        plain_bytes_length = int.from_bytes(padded_plain_bytes[0:4], &apos;little&apos;)</span><br><span class=\"line\">        plain_bytes = padded_plain_bytes[4:4 + plain_bytes_length]</span><br><span class=\"line\">        if len(plain_bytes) != plain_bytes_length:</span><br><span class=\"line\">            raise ValueError(&apos;Invalid Ciphertext.&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">        plain_bytes_digest = padded_plain_bytes[4 + plain_bytes_length:4 + plain_bytes_length + SHA256.digest_size]</span><br><span class=\"line\">        if len(plain_bytes_digest) != SHA256.digest_size:</span><br><span class=\"line\">            raise ValueError(&apos;Invalid Ciphertext.&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">        if SHA256.new(plain_bytes).digest() != plain_bytes_digest:</span><br><span class=\"line\">            raise ValueError(&apos;Invalid Ciphertext.&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">        return plain_bytes.decode(&apos;utf-8&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">if __name__ == &apos;__main__&apos;:</span><br><span class=\"line\">    import sys</span><br><span class=\"line\"></span><br><span class=\"line\">    def Help():</span><br><span class=\"line\">        print(&apos;Usage:&apos;)</span><br><span class=\"line\">        print(&apos;    SecureCRTCipher.py &lt;enc|dec&gt; [-v2] [-p ConfigPassphrase] &lt;plaintext|ciphertext&gt;&apos;)</span><br><span class=\"line\">        print(&apos;&apos;)</span><br><span class=\"line\">        print(&apos;    &lt;enc|dec&gt;              &quot;enc&quot; for encryption, &quot;dec&quot; for decryption.&apos;)</span><br><span class=\"line\">        print(&apos;                           This parameter must be specified.&apos;)</span><br><span class=\"line\">        print(&apos;&apos;)</span><br><span class=\"line\">        print(&apos;    [-v2]                  Encrypt/Decrypt with &quot;Password V2&quot; algorithm.&apos;)</span><br><span class=\"line\">        print(&apos;                           This parameter is optional.&apos;)</span><br><span class=\"line\">        print(&apos;&apos;)</span><br><span class=\"line\">        print(&apos;    [-p ConfigPassphrase]  The config passphrase that SecureCRT uses.&apos;)</span><br><span class=\"line\">        print(&apos;                           This parameter is optional.&apos;)</span><br><span class=\"line\">        print(&apos;&apos;)</span><br><span class=\"line\">        print(&apos;    &lt;plaintext|ciphertext&gt; Plaintext string or ciphertext string.&apos;)</span><br><span class=\"line\">        print(&apos;                           NOTICE: Ciphertext string must be a hex string.&apos;)</span><br><span class=\"line\">        print(&apos;                           This parameter must be specified.&apos;)</span><br><span class=\"line\">        print(&apos;&apos;)</span><br><span class=\"line\">    </span><br><span class=\"line\">    def EncryptionRoutine(UseV2 : bool, ConfigPassphrase : str, Plaintext : str):</span><br><span class=\"line\">        try:</span><br><span class=\"line\">            if UseV2:</span><br><span class=\"line\">                print(SecureCRTCryptoV2(ConfigPassphrase).Encrypt(Plaintext))</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                print(SecureCRTCrypto().Encrypt(Plaintext))</span><br><span class=\"line\">            return True</span><br><span class=\"line\">        except:</span><br><span class=\"line\">            print(&apos;Error: Failed to encrypt.&apos;)</span><br><span class=\"line\">            return False</span><br><span class=\"line\"></span><br><span class=\"line\">    def DecryptionRoutine(UseV2 : bool, ConfigPassphrase : str, Ciphertext : str):</span><br><span class=\"line\">        try:</span><br><span class=\"line\">            if UseV2:</span><br><span class=\"line\">                print(SecureCRTCryptoV2(ConfigPassphrase).Decrypt(Ciphertext))</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                print(SecureCRTCrypto().Decrypt(Ciphertext))</span><br><span class=\"line\">            return True</span><br><span class=\"line\">        except:</span><br><span class=\"line\">            print(&apos;Error: Failed to decrypt.&apos;)</span><br><span class=\"line\">            return False</span><br><span class=\"line\"></span><br><span class=\"line\">    def Main(argc : int, argv : list):</span><br><span class=\"line\">        if 3 &lt;= argc and argc &lt;= 6:</span><br><span class=\"line\">            bUseV2 = False</span><br><span class=\"line\">            ConfigPassphrase = &apos;&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">            if argv[1].lower() == &apos;enc&apos;:</span><br><span class=\"line\">                bEncrypt = True</span><br><span class=\"line\">            elif argv[1].lower() == &apos;dec&apos;:</span><br><span class=\"line\">                bEncrypt = False</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                Help()</span><br><span class=\"line\">                return -1</span><br><span class=\"line\">            </span><br><span class=\"line\">            i = 2</span><br><span class=\"line\">            while i &lt; argc - 1:</span><br><span class=\"line\">                if argv[i].lower() == &apos;-v2&apos;:</span><br><span class=\"line\">                    bUseV2 = True</span><br><span class=\"line\">                    i += 1</span><br><span class=\"line\">                elif argv[i].lower() == &apos;-p&apos; and i + 1 &lt; argc - 1:</span><br><span class=\"line\">                    ConfigPassphrase = argv[i + 1]</span><br><span class=\"line\">                    i += 2</span><br><span class=\"line\">                else:</span><br><span class=\"line\">                    Help()</span><br><span class=\"line\">                    return -1</span><br><span class=\"line\"></span><br><span class=\"line\">            if bUseV2 == False and len(ConfigPassphrase) != 0:</span><br><span class=\"line\">                print(&apos;Error: ConfigPassphrase is not supported if &quot;-v2&quot; is not specified&apos;)</span><br><span class=\"line\">                return -1</span><br><span class=\"line\"></span><br><span class=\"line\">            if bEncrypt:</span><br><span class=\"line\">                return 0 if EncryptionRoutine(bUseV2, ConfigPassphrase, argv[-1]) else -1</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                return 0 if DecryptionRoutine(bUseV2, ConfigPassphrase, argv[-1]) else -1</span><br><span class=\"line\">        else:</span><br><span class=\"line\">            Help()</span><br><span class=\"line\"></span><br><span class=\"line\">    exit(Main(len(sys.argv), sys.argv))</span><br></pre></td></tr></table></figure>\n<h5 id=\"SecureCRT7版本之前使用方法：\"><a href=\"#SecureCRT7版本之前使用方法：\" class=\"headerlink\" title=\"SecureCRT7版本之前使用方法：\"></a>SecureCRT7版本之前使用方法：</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\">S:&quot;Username&quot;=root</span><br><span class=\"line\">D:&quot;[SSH2] Port&quot;=00000016</span><br><span class=\"line\">S:&quot;Password&quot;=uc71bd1c86f3b804e42432f53247c50d9287f410c7e59166969acab69daa6eaadbe15c0c54c0e076e945a6d82f9e13df2</span><br><span class=\"line\">D:&quot;Session Password Saved&quot;=00000001</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python SecureCRTCipher.py dec c71bd1c86f3b804e42432f53247c50d9287f410c7e59166969acab69daa6eaadbe15c0c54c0e076e945a6d82f9e13df2</span><br><span class=\"line\"></span><br><span class=\"line\">DoubleLabyrinth</span><br></pre></td></tr></table></figure>\n<h5 id=\"SecureCRT7之后使用方法：\"><a href=\"#SecureCRT7之后使用方法：\" class=\"headerlink\" title=\"SecureCRT7之后使用方法：\"></a>SecureCRT7之后使用方法：</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">S:&quot;Username&quot;=root</span><br><span class=\"line\">S:&quot;Password&quot;=</span><br><span class=\"line\">S:&quot;Password V2&quot;=02:7b9f594a1f39bb36bbaa0d9688ee38b3d233c67b338e20e2113f2ba4d328b6fc8c804e3c02324b1eaad57a5b96ac1fc5cc1ae0ee2930e6af2e5e644a28ebe3fc</span><br><span class=\"line\">S:&quot;Login Script V2&quot;=</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python SecureCRTCipher.py dec -v2 7b9f594a1f39bb36bbaa0d9688ee38b3d233c67b338e20e2113f2ba4d328b6fc8c804e3c02324b1eaad57a5b96ac1fc5cc1ae0ee2930e6af2e5e644a28ebe3fc</span><br><span class=\"line\"></span><br><span class=\"line\">DoubleLabyrinth</span><br></pre></td></tr></table></figure>\n<h5 id=\"github-项目地址\"><a href=\"#github-项目地址\" class=\"headerlink\" title=\"github 项目地址\"></a>github 项目地址</h5><p>地址: <a href=\"https://github.com/HyperSine/how-does-SecureCRT-encrypt-password\" target=\"_blank\" rel=\"noopener\">https://github.com/HyperSine/how-does-SecureCRT-encrypt-password</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h6 id=\"SecureCRT-密码忘记了找了半天，在github上找到一个项目，实现新老版本的找回密码，分享一下。\"><a href=\"#SecureCRT-密码忘记了找了半天，在github上找到一个项目，实现新老版本的找回密码，分享一下。\" class=\"headerlink\" title=\"SecureCRT 密码忘记了找了半天，在github上找到一个项目，实现新老版本的找回密码，分享一下。\"></a>SecureCRT 密码忘记了找了半天，在github上找到一个项目，实现新老版本的找回密码，分享一下。</h6><h5 id=\"SecureCRT找回密码-python-文件-SecureCRTCipher-py：\"><a href=\"#SecureCRT找回密码-python-文件-SecureCRTCipher-py：\" class=\"headerlink\" title=\"SecureCRT找回密码 python 文件 SecureCRTCipher.py：\"></a>SecureCRT找回密码 python 文件 SecureCRTCipher.py：</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/usr/bin/env python3</span><br><span class=\"line\">import os</span><br><span class=\"line\">from Crypto.Hash import SHA256</span><br><span class=\"line\">from Crypto.Cipher import AES, Blowfish</span><br><span class=\"line\"></span><br><span class=\"line\">class SecureCRTCrypto:</span><br><span class=\"line\"></span><br><span class=\"line\">    def __init__(self):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Initialize SecureCRTCrypto object.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        self.IV = b&apos;\\x00&apos; * Blowfish.block_size</span><br><span class=\"line\">        self.Key1 = b&apos;\\x24\\xA6\\x3D\\xDE\\x5B\\xD3\\xB3\\x82\\x9C\\x7E\\x06\\xF4\\x08\\x16\\xAA\\x07&apos;</span><br><span class=\"line\">        self.Key2 = b&apos;\\x5F\\xB0\\x45\\xA2\\x94\\x17\\xD9\\x16\\xC6\\xC6\\xA2\\xFF\\x06\\x41\\x82\\xB7&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">    def Encrypt(self, Plaintext : str):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Encrypt plaintext and return corresponding ciphertext.</span><br><span class=\"line\">        Args:</span><br><span class=\"line\">            Plaintext: A string that will be encrypted.</span><br><span class=\"line\">        Returns:</span><br><span class=\"line\">            Hexlified ciphertext string.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        plain_bytes = Plaintext.encode(&apos;utf-16-le&apos;)</span><br><span class=\"line\">        plain_bytes += b&apos;\\x00\\x00&apos;</span><br><span class=\"line\">        padded_plain_bytes = plain_bytes + os.urandom(Blowfish.block_size - len(plain_bytes) % Blowfish.block_size)</span><br><span class=\"line\"></span><br><span class=\"line\">        cipher1 = Blowfish.new(self.Key1, Blowfish.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        cipher2 = Blowfish.new(self.Key2, Blowfish.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        return cipher1.encrypt(os.urandom(4) + cipher2.encrypt(padded_plain_bytes) + os.urandom(4)).hex()</span><br><span class=\"line\"></span><br><span class=\"line\">    def Decrypt(self, Ciphertext : str):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Decrypt ciphertext and return corresponding plaintext.</span><br><span class=\"line\">        Args:</span><br><span class=\"line\">            Ciphertext: A hex string that will be decrypted.</span><br><span class=\"line\">        Returns:</span><br><span class=\"line\">            Plaintext string.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">        cipher1 = Blowfish.new(self.Key1, Blowfish.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        cipher2 = Blowfish.new(self.Key2, Blowfish.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        ciphered_bytes = bytes.fromhex(Ciphertext)</span><br><span class=\"line\">        if len(ciphered_bytes) &lt;= 8:</span><br><span class=\"line\">            raise ValueError(&apos;Invalid Ciphertext.&apos;)</span><br><span class=\"line\">        </span><br><span class=\"line\">        padded_plain_bytes = cipher2.decrypt(cipher1.decrypt(ciphered_bytes)[4:-4])</span><br><span class=\"line\">        </span><br><span class=\"line\">        i = 0</span><br><span class=\"line\">        for i in range(0, len(padded_plain_bytes), 2):</span><br><span class=\"line\">            if padded_plain_bytes[i] == 0 and padded_plain_bytes[i + 1] == 0:</span><br><span class=\"line\">                break</span><br><span class=\"line\">        plain_bytes = padded_plain_bytes[0:i]</span><br><span class=\"line\"></span><br><span class=\"line\">        try:</span><br><span class=\"line\">            return plain_bytes.decode(&apos;utf-16-le&apos;)</span><br><span class=\"line\">        except UnicodeDecodeError:</span><br><span class=\"line\">            raise(ValueError(&apos;Invalid Ciphertext.&apos;))</span><br><span class=\"line\"></span><br><span class=\"line\">class SecureCRTCryptoV2:</span><br><span class=\"line\"></span><br><span class=\"line\">    def __init__(self, ConfigPassphrase : str = &apos;&apos;):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Initialize SecureCRTCryptoV2 object.</span><br><span class=\"line\">        Args:</span><br><span class=\"line\">            ConfigPassphrase: The config passphrase that SecureCRT uses. Leave it empty if config passphrase is not set.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        self.IV = b&apos;\\x00&apos; * AES.block_size</span><br><span class=\"line\">        self.Key = SHA256.new(ConfigPassphrase.encode(&apos;utf-8&apos;)).digest()</span><br><span class=\"line\"></span><br><span class=\"line\">    def Encrypt(self, Plaintext : str):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Encrypt plaintext and return corresponding ciphertext.</span><br><span class=\"line\">        Args:</span><br><span class=\"line\">            Plaintext: A string that will be encrypted.</span><br><span class=\"line\">        Returns:</span><br><span class=\"line\">            Hexlified ciphertext string.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        plain_bytes = Plaintext.encode(&apos;utf-8&apos;)</span><br><span class=\"line\">        if len(plain_bytes) &gt; 0xffffffff:</span><br><span class=\"line\">            raise OverflowError(&apos;Plaintext is too long.&apos;)</span><br><span class=\"line\">        </span><br><span class=\"line\">        plain_bytes = \\</span><br><span class=\"line\">            len(plain_bytes).to_bytes(4, &apos;little&apos;) + \\</span><br><span class=\"line\">            plain_bytes + \\</span><br><span class=\"line\">            SHA256.new(plain_bytes).digest()</span><br><span class=\"line\">        padded_plain_bytes = \\</span><br><span class=\"line\">            plain_bytes + \\</span><br><span class=\"line\">            os.urandom(AES.block_size - len(plain_bytes) % AES.block_size)</span><br><span class=\"line\">        cipher = AES.new(self.Key, AES.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        return cipher.encrypt(padded_plain_bytes).hex()</span><br><span class=\"line\"></span><br><span class=\"line\">    def Decrypt(self, Ciphertext : str):</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        Decrypt ciphertext and return corresponding plaintext.</span><br><span class=\"line\">        Args:</span><br><span class=\"line\">            Ciphertext: A hex string that will be decrypted.</span><br><span class=\"line\">        Returns:</span><br><span class=\"line\">            Plaintext string.</span><br><span class=\"line\">        &apos;&apos;&apos;</span><br><span class=\"line\">        cipher = AES.new(self.Key, AES.MODE_CBC, iv = self.IV)</span><br><span class=\"line\">        padded_plain_bytes = cipher.decrypt(bytes.fromhex(Ciphertext))</span><br><span class=\"line\">        </span><br><span class=\"line\">        plain_bytes_length = int.from_bytes(padded_plain_bytes[0:4], &apos;little&apos;)</span><br><span class=\"line\">        plain_bytes = padded_plain_bytes[4:4 + plain_bytes_length]</span><br><span class=\"line\">        if len(plain_bytes) != plain_bytes_length:</span><br><span class=\"line\">            raise ValueError(&apos;Invalid Ciphertext.&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">        plain_bytes_digest = padded_plain_bytes[4 + plain_bytes_length:4 + plain_bytes_length + SHA256.digest_size]</span><br><span class=\"line\">        if len(plain_bytes_digest) != SHA256.digest_size:</span><br><span class=\"line\">            raise ValueError(&apos;Invalid Ciphertext.&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">        if SHA256.new(plain_bytes).digest() != plain_bytes_digest:</span><br><span class=\"line\">            raise ValueError(&apos;Invalid Ciphertext.&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">        return plain_bytes.decode(&apos;utf-8&apos;)</span><br><span class=\"line\"></span><br><span class=\"line\">if __name__ == &apos;__main__&apos;:</span><br><span class=\"line\">    import sys</span><br><span class=\"line\"></span><br><span class=\"line\">    def Help():</span><br><span class=\"line\">        print(&apos;Usage:&apos;)</span><br><span class=\"line\">        print(&apos;    SecureCRTCipher.py &lt;enc|dec&gt; [-v2] [-p ConfigPassphrase] &lt;plaintext|ciphertext&gt;&apos;)</span><br><span class=\"line\">        print(&apos;&apos;)</span><br><span class=\"line\">        print(&apos;    &lt;enc|dec&gt;              &quot;enc&quot; for encryption, &quot;dec&quot; for decryption.&apos;)</span><br><span class=\"line\">        print(&apos;                           This parameter must be specified.&apos;)</span><br><span class=\"line\">        print(&apos;&apos;)</span><br><span class=\"line\">        print(&apos;    [-v2]                  Encrypt/Decrypt with &quot;Password V2&quot; algorithm.&apos;)</span><br><span class=\"line\">        print(&apos;                           This parameter is optional.&apos;)</span><br><span class=\"line\">        print(&apos;&apos;)</span><br><span class=\"line\">        print(&apos;    [-p ConfigPassphrase]  The config passphrase that SecureCRT uses.&apos;)</span><br><span class=\"line\">        print(&apos;                           This parameter is optional.&apos;)</span><br><span class=\"line\">        print(&apos;&apos;)</span><br><span class=\"line\">        print(&apos;    &lt;plaintext|ciphertext&gt; Plaintext string or ciphertext string.&apos;)</span><br><span class=\"line\">        print(&apos;                           NOTICE: Ciphertext string must be a hex string.&apos;)</span><br><span class=\"line\">        print(&apos;                           This parameter must be specified.&apos;)</span><br><span class=\"line\">        print(&apos;&apos;)</span><br><span class=\"line\">    </span><br><span class=\"line\">    def EncryptionRoutine(UseV2 : bool, ConfigPassphrase : str, Plaintext : str):</span><br><span class=\"line\">        try:</span><br><span class=\"line\">            if UseV2:</span><br><span class=\"line\">                print(SecureCRTCryptoV2(ConfigPassphrase).Encrypt(Plaintext))</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                print(SecureCRTCrypto().Encrypt(Plaintext))</span><br><span class=\"line\">            return True</span><br><span class=\"line\">        except:</span><br><span class=\"line\">            print(&apos;Error: Failed to encrypt.&apos;)</span><br><span class=\"line\">            return False</span><br><span class=\"line\"></span><br><span class=\"line\">    def DecryptionRoutine(UseV2 : bool, ConfigPassphrase : str, Ciphertext : str):</span><br><span class=\"line\">        try:</span><br><span class=\"line\">            if UseV2:</span><br><span class=\"line\">                print(SecureCRTCryptoV2(ConfigPassphrase).Decrypt(Ciphertext))</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                print(SecureCRTCrypto().Decrypt(Ciphertext))</span><br><span class=\"line\">            return True</span><br><span class=\"line\">        except:</span><br><span class=\"line\">            print(&apos;Error: Failed to decrypt.&apos;)</span><br><span class=\"line\">            return False</span><br><span class=\"line\"></span><br><span class=\"line\">    def Main(argc : int, argv : list):</span><br><span class=\"line\">        if 3 &lt;= argc and argc &lt;= 6:</span><br><span class=\"line\">            bUseV2 = False</span><br><span class=\"line\">            ConfigPassphrase = &apos;&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">            if argv[1].lower() == &apos;enc&apos;:</span><br><span class=\"line\">                bEncrypt = True</span><br><span class=\"line\">            elif argv[1].lower() == &apos;dec&apos;:</span><br><span class=\"line\">                bEncrypt = False</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                Help()</span><br><span class=\"line\">                return -1</span><br><span class=\"line\">            </span><br><span class=\"line\">            i = 2</span><br><span class=\"line\">            while i &lt; argc - 1:</span><br><span class=\"line\">                if argv[i].lower() == &apos;-v2&apos;:</span><br><span class=\"line\">                    bUseV2 = True</span><br><span class=\"line\">                    i += 1</span><br><span class=\"line\">                elif argv[i].lower() == &apos;-p&apos; and i + 1 &lt; argc - 1:</span><br><span class=\"line\">                    ConfigPassphrase = argv[i + 1]</span><br><span class=\"line\">                    i += 2</span><br><span class=\"line\">                else:</span><br><span class=\"line\">                    Help()</span><br><span class=\"line\">                    return -1</span><br><span class=\"line\"></span><br><span class=\"line\">            if bUseV2 == False and len(ConfigPassphrase) != 0:</span><br><span class=\"line\">                print(&apos;Error: ConfigPassphrase is not supported if &quot;-v2&quot; is not specified&apos;)</span><br><span class=\"line\">                return -1</span><br><span class=\"line\"></span><br><span class=\"line\">            if bEncrypt:</span><br><span class=\"line\">                return 0 if EncryptionRoutine(bUseV2, ConfigPassphrase, argv[-1]) else -1</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                return 0 if DecryptionRoutine(bUseV2, ConfigPassphrase, argv[-1]) else -1</span><br><span class=\"line\">        else:</span><br><span class=\"line\">            Help()</span><br><span class=\"line\"></span><br><span class=\"line\">    exit(Main(len(sys.argv), sys.argv))</span><br></pre></td></tr></table></figure>\n<h5 id=\"SecureCRT7版本之前使用方法：\"><a href=\"#SecureCRT7版本之前使用方法：\" class=\"headerlink\" title=\"SecureCRT7版本之前使用方法：\"></a>SecureCRT7版本之前使用方法：</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\">S:&quot;Username&quot;=root</span><br><span class=\"line\">D:&quot;[SSH2] Port&quot;=00000016</span><br><span class=\"line\">S:&quot;Password&quot;=uc71bd1c86f3b804e42432f53247c50d9287f410c7e59166969acab69daa6eaadbe15c0c54c0e076e945a6d82f9e13df2</span><br><span class=\"line\">D:&quot;Session Password Saved&quot;=00000001</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python SecureCRTCipher.py dec c71bd1c86f3b804e42432f53247c50d9287f410c7e59166969acab69daa6eaadbe15c0c54c0e076e945a6d82f9e13df2</span><br><span class=\"line\"></span><br><span class=\"line\">DoubleLabyrinth</span><br></pre></td></tr></table></figure>\n<h5 id=\"SecureCRT7之后使用方法：\"><a href=\"#SecureCRT7之后使用方法：\" class=\"headerlink\" title=\"SecureCRT7之后使用方法：\"></a>SecureCRT7之后使用方法：</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">S:&quot;Username&quot;=root</span><br><span class=\"line\">S:&quot;Password&quot;=</span><br><span class=\"line\">S:&quot;Password V2&quot;=02:7b9f594a1f39bb36bbaa0d9688ee38b3d233c67b338e20e2113f2ba4d328b6fc8c804e3c02324b1eaad57a5b96ac1fc5cc1ae0ee2930e6af2e5e644a28ebe3fc</span><br><span class=\"line\">S:&quot;Login Script V2&quot;=</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python SecureCRTCipher.py dec -v2 7b9f594a1f39bb36bbaa0d9688ee38b3d233c67b338e20e2113f2ba4d328b6fc8c804e3c02324b1eaad57a5b96ac1fc5cc1ae0ee2930e6af2e5e644a28ebe3fc</span><br><span class=\"line\"></span><br><span class=\"line\">DoubleLabyrinth</span><br></pre></td></tr></table></figure>\n<h5 id=\"github-项目地址\"><a href=\"#github-项目地址\" class=\"headerlink\" title=\"github 项目地址\"></a>github 项目地址</h5><p>地址: <a href=\"https://github.com/HyperSine/how-does-SecureCRT-encrypt-password\" target=\"_blank\" rel=\"noopener\">https://github.com/HyperSine/how-does-SecureCRT-encrypt-password</a></p>\n"},{"title":"deepin wine 安装QQ 微信","date":"2020-01-07T04:50:00.000Z","_content":"\n##### 添加仓库\n```\nwget -O- https://deepin-wine.i-m.dev/setup.sh | sh\n```\n##### 应用安装\n```\nsudo apt-get install deepin.com.qq.im\n```\n\n应用 | 包名\n:-: | :-:\nTIM | deepin.com.qq.office\nQQ | deepin.com.qq.im\nQQ轻聊版 | deepin.com.qq.im.light\n微信 | deepin.com.wechat\n百度网盘 | deepin.com.baidu.pan\n迅雷极速版 | deepin.com.thunderspeed\nWinRAR | deepin.cn.com.winrar\n\n\n##### github 项目地址\n地址: <https://github.com/zq1997/deepin-wine>\n\n\n","source":"_posts/deepin wine 安装QQ 微信.md","raw":"title: deepin wine 安装QQ 微信\ntags:\n  - deepin\n  - wine\n  - qq\n  - wechat\ncategories:\n  - deepin wine qq wechat\ndate: 2020-01-07 12:50:00\n---\n\n##### 添加仓库\n```\nwget -O- https://deepin-wine.i-m.dev/setup.sh | sh\n```\n##### 应用安装\n```\nsudo apt-get install deepin.com.qq.im\n```\n\n应用 | 包名\n:-: | :-:\nTIM | deepin.com.qq.office\nQQ | deepin.com.qq.im\nQQ轻聊版 | deepin.com.qq.im.light\n微信 | deepin.com.wechat\n百度网盘 | deepin.com.baidu.pan\n迅雷极速版 | deepin.com.thunderspeed\nWinRAR | deepin.cn.com.winrar\n\n\n##### github 项目地址\n地址: <https://github.com/zq1997/deepin-wine>\n\n\n","slug":"deepin wine 安装QQ 微信","published":1,"updated":"2020-01-07T01:56:33.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck53843fv0000jotws48kp2g2","content":"<h5 id=\"添加仓库\"><a href=\"#添加仓库\" class=\"headerlink\" title=\"添加仓库\"></a>添加仓库</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -O- https://deepin-wine.i-m.dev/setup.sh | sh</span><br></pre></td></tr></table></figure>\n<h5 id=\"应用安装\"><a href=\"#应用安装\" class=\"headerlink\" title=\"应用安装\"></a>应用安装</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install deepin.com.qq.im</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">应用</th>\n<th style=\"text-align:center\">包名</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">TIM</td>\n<td style=\"text-align:center\">deepin.com.qq.office</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">QQ</td>\n<td style=\"text-align:center\">deepin.com.qq.im</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">QQ轻聊版</td>\n<td style=\"text-align:center\">deepin.com.qq.im.light</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">微信</td>\n<td style=\"text-align:center\">deepin.com.wechat</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">百度网盘</td>\n<td style=\"text-align:center\">deepin.com.baidu.pan</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">迅雷极速版</td>\n<td style=\"text-align:center\">deepin.com.thunderspeed</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">WinRAR</td>\n<td style=\"text-align:center\">deepin.cn.com.winrar</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"github-项目地址\"><a href=\"#github-项目地址\" class=\"headerlink\" title=\"github 项目地址\"></a>github 项目地址</h5><p>地址: <a href=\"https://github.com/zq1997/deepin-wine\" target=\"_blank\" rel=\"noopener\">https://github.com/zq1997/deepin-wine</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h5 id=\"添加仓库\"><a href=\"#添加仓库\" class=\"headerlink\" title=\"添加仓库\"></a>添加仓库</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -O- https://deepin-wine.i-m.dev/setup.sh | sh</span><br></pre></td></tr></table></figure>\n<h5 id=\"应用安装\"><a href=\"#应用安装\" class=\"headerlink\" title=\"应用安装\"></a>应用安装</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install deepin.com.qq.im</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">应用</th>\n<th style=\"text-align:center\">包名</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">TIM</td>\n<td style=\"text-align:center\">deepin.com.qq.office</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">QQ</td>\n<td style=\"text-align:center\">deepin.com.qq.im</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">QQ轻聊版</td>\n<td style=\"text-align:center\">deepin.com.qq.im.light</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">微信</td>\n<td style=\"text-align:center\">deepin.com.wechat</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">百度网盘</td>\n<td style=\"text-align:center\">deepin.com.baidu.pan</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">迅雷极速版</td>\n<td style=\"text-align:center\">deepin.com.thunderspeed</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">WinRAR</td>\n<td style=\"text-align:center\">deepin.cn.com.winrar</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"github-项目地址\"><a href=\"#github-项目地址\" class=\"headerlink\" title=\"github 项目地址\"></a>github 项目地址</h5><p>地址: <a href=\"https://github.com/zq1997/deepin-wine\" target=\"_blank\" rel=\"noopener\">https://github.com/zq1997/deepin-wine</a></p>\n"},{"title":"github收藏项目","date":"2020-01-07T04:50:00.000Z","_content":"\n\n1. Linux-NetSpeed (bbr|bbrplus|lotserver)\n\t<https://github.com/chiakge/Linux-NetSpeed>\n2. v2rayL windows 客户端\n\t<https://github.com/jiangxufeng/v2rayL>\n3. Auto.js andorid 辅助工具\n    <https://github.com/SuperMonster003/Auto.js_Projects>\n4. my-chrome chrome 升级配置工具 \n\t<https://github.com/cnjackchen/my-chrome>\n5. qiandao.today 论坛签到程序\n\t<https://github.com/binux/qiandao>\n6. hosts 去广告\n\t<https://github.com/neoFelhz/neohosts>\n7. MyBookshelf andorid 开源追书神器\n\t<https://github.com/gedoor/MyBookshelf>\n\t<http://www.legado.top/MyBookshelf>\n\t<https://gedoor.github.io/MyBookshelf/bookSource.json>\n8. acme.sh 免费https证书申请\n    <https://github.com/Neilpang/acme.sh>\n9. albert linux 快速启动器\n\t<https://github.com/albertlauncher/albert>\n10. 基于vue+vant搭建h5通用架子\n\t<https://github.com/Ljhhhhhh/h5vue>\n","source":"_posts/github收藏项目.md","raw":"title: github收藏项目\ntags:\n  - github\ncategories:\n  - github\ndate: 2020-01-07 12:50:00\n---\n\n\n1. Linux-NetSpeed (bbr|bbrplus|lotserver)\n\t<https://github.com/chiakge/Linux-NetSpeed>\n2. v2rayL windows 客户端\n\t<https://github.com/jiangxufeng/v2rayL>\n3. Auto.js andorid 辅助工具\n    <https://github.com/SuperMonster003/Auto.js_Projects>\n4. my-chrome chrome 升级配置工具 \n\t<https://github.com/cnjackchen/my-chrome>\n5. qiandao.today 论坛签到程序\n\t<https://github.com/binux/qiandao>\n6. hosts 去广告\n\t<https://github.com/neoFelhz/neohosts>\n7. MyBookshelf andorid 开源追书神器\n\t<https://github.com/gedoor/MyBookshelf>\n\t<http://www.legado.top/MyBookshelf>\n\t<https://gedoor.github.io/MyBookshelf/bookSource.json>\n8. acme.sh 免费https证书申请\n    <https://github.com/Neilpang/acme.sh>\n9. albert linux 快速启动器\n\t<https://github.com/albertlauncher/albert>\n10. 基于vue+vant搭建h5通用架子\n\t<https://github.com/Ljhhhhhh/h5vue>\n","slug":"github收藏项目","published":1,"updated":"2020-03-30T06:50:57.189Z","_id":"ck539iicc0000g8tws028opi9","comments":1,"layout":"post","photos":[],"link":"","content":"<ol>\n<li>Linux-NetSpeed (bbr|bbrplus|lotserver)<br> <a href=\"https://github.com/chiakge/Linux-NetSpeed\" target=\"_blank\" rel=\"noopener\">https://github.com/chiakge/Linux-NetSpeed</a></li>\n<li>v2rayL windows 客户端<br> <a href=\"https://github.com/jiangxufeng/v2rayL\" target=\"_blank\" rel=\"noopener\">https://github.com/jiangxufeng/v2rayL</a></li>\n<li>Auto.js andorid 辅助工具<br> <a href=\"https://github.com/SuperMonster003/Auto.js_Projects\" target=\"_blank\" rel=\"noopener\">https://github.com/SuperMonster003/Auto.js_Projects</a></li>\n<li>my-chrome chrome 升级配置工具<br> <a href=\"https://github.com/cnjackchen/my-chrome\" target=\"_blank\" rel=\"noopener\">https://github.com/cnjackchen/my-chrome</a></li>\n<li>qiandao.today 论坛签到程序<br> <a href=\"https://github.com/binux/qiandao\" target=\"_blank\" rel=\"noopener\">https://github.com/binux/qiandao</a></li>\n<li>hosts 去广告<br> <a href=\"https://github.com/neoFelhz/neohosts\" target=\"_blank\" rel=\"noopener\">https://github.com/neoFelhz/neohosts</a></li>\n<li>MyBookshelf andorid 开源追书神器<br> <a href=\"https://github.com/gedoor/MyBookshelf\" target=\"_blank\" rel=\"noopener\">https://github.com/gedoor/MyBookshelf</a><br> <a href=\"http://www.legado.top/MyBookshelf\" target=\"_blank\" rel=\"noopener\">http://www.legado.top/MyBookshelf</a><br> <a href=\"https://gedoor.github.io/MyBookshelf/bookSource.json\" target=\"_blank\" rel=\"noopener\">https://gedoor.github.io/MyBookshelf/bookSource.json</a></li>\n<li>acme.sh 免费https证书申请<br> <a href=\"https://github.com/Neilpang/acme.sh\" target=\"_blank\" rel=\"noopener\">https://github.com/Neilpang/acme.sh</a></li>\n<li>albert linux 快速启动器<br> <a href=\"https://github.com/albertlauncher/albert\" target=\"_blank\" rel=\"noopener\">https://github.com/albertlauncher/albert</a></li>\n<li>基于vue+vant搭建h5通用架子<br><a href=\"https://github.com/Ljhhhhhh/h5vue\" target=\"_blank\" rel=\"noopener\">https://github.com/Ljhhhhhh/h5vue</a></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>Linux-NetSpeed (bbr|bbrplus|lotserver)<br> <a href=\"https://github.com/chiakge/Linux-NetSpeed\" target=\"_blank\" rel=\"noopener\">https://github.com/chiakge/Linux-NetSpeed</a></li>\n<li>v2rayL windows 客户端<br> <a href=\"https://github.com/jiangxufeng/v2rayL\" target=\"_blank\" rel=\"noopener\">https://github.com/jiangxufeng/v2rayL</a></li>\n<li>Auto.js andorid 辅助工具<br> <a href=\"https://github.com/SuperMonster003/Auto.js_Projects\" target=\"_blank\" rel=\"noopener\">https://github.com/SuperMonster003/Auto.js_Projects</a></li>\n<li>my-chrome chrome 升级配置工具<br> <a href=\"https://github.com/cnjackchen/my-chrome\" target=\"_blank\" rel=\"noopener\">https://github.com/cnjackchen/my-chrome</a></li>\n<li>qiandao.today 论坛签到程序<br> <a href=\"https://github.com/binux/qiandao\" target=\"_blank\" rel=\"noopener\">https://github.com/binux/qiandao</a></li>\n<li>hosts 去广告<br> <a href=\"https://github.com/neoFelhz/neohosts\" target=\"_blank\" rel=\"noopener\">https://github.com/neoFelhz/neohosts</a></li>\n<li>MyBookshelf andorid 开源追书神器<br> <a href=\"https://github.com/gedoor/MyBookshelf\" target=\"_blank\" rel=\"noopener\">https://github.com/gedoor/MyBookshelf</a><br> <a href=\"http://www.legado.top/MyBookshelf\" target=\"_blank\" rel=\"noopener\">http://www.legado.top/MyBookshelf</a><br> <a href=\"https://gedoor.github.io/MyBookshelf/bookSource.json\" target=\"_blank\" rel=\"noopener\">https://gedoor.github.io/MyBookshelf/bookSource.json</a></li>\n<li>acme.sh 免费https证书申请<br> <a href=\"https://github.com/Neilpang/acme.sh\" target=\"_blank\" rel=\"noopener\">https://github.com/Neilpang/acme.sh</a></li>\n<li>albert linux 快速启动器<br> <a href=\"https://github.com/albertlauncher/albert\" target=\"_blank\" rel=\"noopener\">https://github.com/albertlauncher/albert</a></li>\n<li>基于vue+vant搭建h5通用架子<br><a href=\"https://github.com/Ljhhhhhh/h5vue\" target=\"_blank\" rel=\"noopener\">https://github.com/Ljhhhhhh/h5vue</a></li>\n</ol>\n"},{"title":"Debian9安装vim和vim无法右键鼠标粘贴解决方法","date":"2020-01-08T04:50:00.000Z","_content":"\n\n##### 安装\n```\napt-get install vim\n```\n##### 修改vim配置文件\n```\nvi /usr/share/vim/vim80/defaults.vim\n```\n\n70行 set mouse=a 修改为 set mouse-=a\n\n```\nif has('mouse')\n  set mouse-=a\nendif\n```\n\n\n\n","source":"_posts/Debian9安装vim和vim无法右键鼠标粘贴解决方法.md","raw":"title: Debian9安装vim和vim无法右键鼠标粘贴解决方法\ntags:\n  - Debian\ncategories:\n  - Debian\ndate: 2020-01-08 12:50:00\n---\n\n\n##### 安装\n```\napt-get install vim\n```\n##### 修改vim配置文件\n```\nvi /usr/share/vim/vim80/defaults.vim\n```\n\n70行 set mouse=a 修改为 set mouse-=a\n\n```\nif has('mouse')\n  set mouse-=a\nendif\n```\n\n\n\n","slug":"Debian9安装vim和vim无法右键鼠标粘贴解决方法","published":1,"updated":"2020-01-08T04:28:46.693Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck54t03830000ggtw63wdw8t4","content":"<h5 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install vim</span><br></pre></td></tr></table></figure>\n<h5 id=\"修改vim配置文件\"><a href=\"#修改vim配置文件\" class=\"headerlink\" title=\"修改vim配置文件\"></a>修改vim配置文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /usr/share/vim/vim80/defaults.vim</span><br></pre></td></tr></table></figure>\n<p>70行 set mouse=a 修改为 set mouse-=a</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if has(&apos;mouse&apos;)</span><br><span class=\"line\">  set mouse-=a</span><br><span class=\"line\">endif</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h5 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install vim</span><br></pre></td></tr></table></figure>\n<h5 id=\"修改vim配置文件\"><a href=\"#修改vim配置文件\" class=\"headerlink\" title=\"修改vim配置文件\"></a>修改vim配置文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /usr/share/vim/vim80/defaults.vim</span><br></pre></td></tr></table></figure>\n<p>70行 set mouse=a 修改为 set mouse-=a</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if has(&apos;mouse&apos;)</span><br><span class=\"line\">  set mouse-=a</span><br><span class=\"line\">endif</span><br></pre></td></tr></table></figure>\n"},{"title":"ubuntu18.04搭建NTP服务器","author":"ZkName","date":"2020-03-20T08:25:00.000Z","_content":"\n#### 1、安装NTP\n```shell\napt-get install ntp\n```\n#### 2、配置文件/etc/ntp.conf\n```shell\nvim /etc/ntp.conf\n```\n##### 2、配置上层server\n\n```shell\n#这里常用的选项是prefer - 优先主机， iburst -当服务器不可用时将发包检测\nserver ntp1.aliyun.com prefer\nserver ntp2.aliyun.com iburst\nserver ntp3.aliyun.com iburst\nserver ntp4.aliyun.com iburst\nserver ntp5.aliyun.com iburst\n```\n```shell\n#允许这个网段的对时请求\nrestrict 192.168.0.0 mask 255.255.255.0 nomodify \n```\n\n##### 3、防火墙取消对123端口的限制\n```shell\niptables -t filter -A INPUT -p udp --destination-port 123 -j ACCEPT\n\n#或者\nsudo ufw allow 123/udp\n```\n\n##### 4、ntp 开机启动\n```shell\nsystemctl enable ntp\n```\n\n##### 5、查看状态\n```shell\nwatch ntpq -p\n\nEvery 2.0s: ntpq -p                                                                                             nacos: Fri Mar 20 17:00:21 2020\n\n     remote           refid      st t when poll reach   delay   offset  jitter\n==============================================================================\n*120.25.115.20   10.137.53.7      2 u   25   64   37   30.932   -7.778   4.707\n+tick.ntp.infoma .GPS.            1 u   21   64   37  280.022  -13.369   3.185\n-94.130.49.186 ( 195.13.23.5      3 u   15   64   37  246.228   -6.189  89.097\n+ntp1.ams1.nl.le 130.133.1.10     2 u   14   64   35  224.919   -7.378   6.993\n+ntp5.flashdance 194.58.202.148   2 u   22   64   37  264.122   -6.842   5.630\n\n```\n说明：\n```shell\nremote: 连接的远程NTP服务器；\nrefid: 提供时间同步的服务器IP；\nst: 远程服务器的层级别（stratum）。由于NTP是层型结构，有顶端的服务器、多层的Relay服务器、再到客户端。所以服务器级别从高到低可以设定为1-16。为了减缓负荷和网络堵塞，原则上应该避免直接连接到级别为1的服务器；\nwhen: 几秒钟前曾经做过时间同步更新的动作；\npoll: 本地主机和远程服务器多少时间进行一次同步(单位：s)；\nreach: 已经向上层NTP服务器要求更新的次数；\ndelay: 网络传输过程当中延迟的时间（单位：10^(-6)s，微秒）；\noffset: 时间补偿的结果（单位与：10^(-3)s，毫秒）；\njitter: Linux系统时间与BIOS硬件时间的差值（单位：10^(-6)s，微秒）。其绝对值越小，主机和对时服务器的时间就越接近；\n*: 远端的服务器已经被确认为主NTP Server，系统时间将由这台机器所提供；\n+: 作为辅助的NTP Server，与带有*号的服务器一起为我们提供同步服务. 当`*`号服务器不可用时，它就可以接管；\n-: 远程服务器被clustering algorithm认为是不合格的NTP Server；\nx: 远程服务器不可用；\n```\n\n","source":"_posts/Ubuntu搭建NTP服务器.md","raw":"title: ubuntu18.04搭建NTP服务器\nauthor: ZkName\ntags:\n  - Ubuntu\n  - NTP\ncategories: []\ndate: 2020-03-20 16:25:00\n---\n\n#### 1、安装NTP\n```shell\napt-get install ntp\n```\n#### 2、配置文件/etc/ntp.conf\n```shell\nvim /etc/ntp.conf\n```\n##### 2、配置上层server\n\n```shell\n#这里常用的选项是prefer - 优先主机， iburst -当服务器不可用时将发包检测\nserver ntp1.aliyun.com prefer\nserver ntp2.aliyun.com iburst\nserver ntp3.aliyun.com iburst\nserver ntp4.aliyun.com iburst\nserver ntp5.aliyun.com iburst\n```\n```shell\n#允许这个网段的对时请求\nrestrict 192.168.0.0 mask 255.255.255.0 nomodify \n```\n\n##### 3、防火墙取消对123端口的限制\n```shell\niptables -t filter -A INPUT -p udp --destination-port 123 -j ACCEPT\n\n#或者\nsudo ufw allow 123/udp\n```\n\n##### 4、ntp 开机启动\n```shell\nsystemctl enable ntp\n```\n\n##### 5、查看状态\n```shell\nwatch ntpq -p\n\nEvery 2.0s: ntpq -p                                                                                             nacos: Fri Mar 20 17:00:21 2020\n\n     remote           refid      st t when poll reach   delay   offset  jitter\n==============================================================================\n*120.25.115.20   10.137.53.7      2 u   25   64   37   30.932   -7.778   4.707\n+tick.ntp.infoma .GPS.            1 u   21   64   37  280.022  -13.369   3.185\n-94.130.49.186 ( 195.13.23.5      3 u   15   64   37  246.228   -6.189  89.097\n+ntp1.ams1.nl.le 130.133.1.10     2 u   14   64   35  224.919   -7.378   6.993\n+ntp5.flashdance 194.58.202.148   2 u   22   64   37  264.122   -6.842   5.630\n\n```\n说明：\n```shell\nremote: 连接的远程NTP服务器；\nrefid: 提供时间同步的服务器IP；\nst: 远程服务器的层级别（stratum）。由于NTP是层型结构，有顶端的服务器、多层的Relay服务器、再到客户端。所以服务器级别从高到低可以设定为1-16。为了减缓负荷和网络堵塞，原则上应该避免直接连接到级别为1的服务器；\nwhen: 几秒钟前曾经做过时间同步更新的动作；\npoll: 本地主机和远程服务器多少时间进行一次同步(单位：s)；\nreach: 已经向上层NTP服务器要求更新的次数；\ndelay: 网络传输过程当中延迟的时间（单位：10^(-6)s，微秒）；\noffset: 时间补偿的结果（单位与：10^(-3)s，毫秒）；\njitter: Linux系统时间与BIOS硬件时间的差值（单位：10^(-6)s，微秒）。其绝对值越小，主机和对时服务器的时间就越接近；\n*: 远端的服务器已经被确认为主NTP Server，系统时间将由这台机器所提供；\n+: 作为辅助的NTP Server，与带有*号的服务器一起为我们提供同步服务. 当`*`号服务器不可用时，它就可以接管；\n-: 远程服务器被clustering algorithm认为是不合格的NTP Server；\nx: 远程服务器不可用；\n```\n\n","slug":"Ubuntu搭建NTP服务器","published":1,"updated":"2020-04-02T07:49:49.029Z","_id":"ck7zyicm10000uotwnzqqfl83","comments":1,"layout":"post","photos":[],"link":"","content":"<h4 id=\"1、安装NTP\"><a href=\"#1、安装NTP\" class=\"headerlink\" title=\"1、安装NTP\"></a>1、安装NTP</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install ntp</span><br></pre></td></tr></table></figure>\n<h4 id=\"2、配置文件-etc-ntp-conf\"><a href=\"#2、配置文件-etc-ntp-conf\" class=\"headerlink\" title=\"2、配置文件/etc/ntp.conf\"></a>2、配置文件/etc/ntp.conf</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/ntp.conf</span><br></pre></td></tr></table></figure>\n<h5 id=\"2、配置上层server\"><a href=\"#2、配置上层server\" class=\"headerlink\" title=\"2、配置上层server\"></a>2、配置上层server</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>这里常用的选项是prefer - 优先主机， iburst -当服务器不可用时将发包检测</span><br><span class=\"line\">server ntp1.aliyun.com prefer</span><br><span class=\"line\">server ntp2.aliyun.com iburst</span><br><span class=\"line\">server ntp3.aliyun.com iburst</span><br><span class=\"line\">server ntp4.aliyun.com iburst</span><br><span class=\"line\">server ntp5.aliyun.com iburst</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>允许这个网段的对时请求</span><br><span class=\"line\">restrict 192.168.0.0 mask 255.255.255.0 nomodify</span><br></pre></td></tr></table></figure>\n<h5 id=\"3、防火墙取消对123端口的限制\"><a href=\"#3、防火墙取消对123端口的限制\" class=\"headerlink\" title=\"3、防火墙取消对123端口的限制\"></a>3、防火墙取消对123端口的限制</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -t filter -A INPUT -p udp --destination-port 123 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>或者</span><br><span class=\"line\">sudo ufw allow 123/udp</span><br></pre></td></tr></table></figure>\n<h5 id=\"4、ntp-开机启动\"><a href=\"#4、ntp-开机启动\" class=\"headerlink\" title=\"4、ntp 开机启动\"></a>4、ntp 开机启动</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable ntp</span><br></pre></td></tr></table></figure>\n<h5 id=\"5、查看状态\"><a href=\"#5、查看状态\" class=\"headerlink\" title=\"5、查看状态\"></a>5、查看状态</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">watch ntpq -p</span><br><span class=\"line\"></span><br><span class=\"line\">Every 2.0s: ntpq -p                                                                                             nacos: Fri Mar 20 17:00:21 2020</span><br><span class=\"line\"></span><br><span class=\"line\">     remote           refid      st t when poll reach   delay   offset  jitter</span><br><span class=\"line\">==============================================================================</span><br><span class=\"line\">*120.25.115.20   10.137.53.7      2 u   25   64   37   30.932   -7.778   4.707</span><br><span class=\"line\">+tick.ntp.infoma .GPS.            1 u   21   64   37  280.022  -13.369   3.185</span><br><span class=\"line\">-94.130.49.186 ( 195.13.23.5      3 u   15   64   37  246.228   -6.189  89.097</span><br><span class=\"line\">+ntp1.ams1.nl.le 130.133.1.10     2 u   14   64   35  224.919   -7.378   6.993</span><br><span class=\"line\">+ntp5.flashdance 194.58.202.148   2 u   22   64   37  264.122   -6.842   5.630</span><br></pre></td></tr></table></figure>\n<p>说明：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">remote: 连接的远程NTP服务器；</span><br><span class=\"line\">refid: 提供时间同步的服务器IP；</span><br><span class=\"line\">st: 远程服务器的层级别（stratum）。由于NTP是层型结构，有顶端的服务器、多层的Relay服务器、再到客户端。所以服务器级别从高到低可以设定为1-16。为了减缓负荷和网络堵塞，原则上应该避免直接连接到级别为1的服务器；</span><br><span class=\"line\">when: 几秒钟前曾经做过时间同步更新的动作；</span><br><span class=\"line\">poll: 本地主机和远程服务器多少时间进行一次同步(单位：s)；</span><br><span class=\"line\">reach: 已经向上层NTP服务器要求更新的次数；</span><br><span class=\"line\">delay: 网络传输过程当中延迟的时间（单位：10^(-6)s，微秒）；</span><br><span class=\"line\">offset: 时间补偿的结果（单位与：10^(-3)s，毫秒）；</span><br><span class=\"line\">jitter: Linux系统时间与BIOS硬件时间的差值（单位：10^(-6)s，微秒）。其绝对值越小，主机和对时服务器的时间就越接近；</span><br><span class=\"line\">*: 远端的服务器已经被确认为主NTP Server，系统时间将由这台机器所提供；</span><br><span class=\"line\">+: 作为辅助的NTP Server，与带有*号的服务器一起为我们提供同步服务. 当`*`号服务器不可用时，它就可以接管；</span><br><span class=\"line\">-: 远程服务器被clustering algorithm认为是不合格的NTP Server；</span><br><span class=\"line\">x: 远程服务器不可用；</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"1、安装NTP\"><a href=\"#1、安装NTP\" class=\"headerlink\" title=\"1、安装NTP\"></a>1、安装NTP</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install ntp</span><br></pre></td></tr></table></figure>\n<h4 id=\"2、配置文件-etc-ntp-conf\"><a href=\"#2、配置文件-etc-ntp-conf\" class=\"headerlink\" title=\"2、配置文件/etc/ntp.conf\"></a>2、配置文件/etc/ntp.conf</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/ntp.conf</span><br></pre></td></tr></table></figure>\n<h5 id=\"2、配置上层server\"><a href=\"#2、配置上层server\" class=\"headerlink\" title=\"2、配置上层server\"></a>2、配置上层server</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>这里常用的选项是prefer - 优先主机， iburst -当服务器不可用时将发包检测</span><br><span class=\"line\">server ntp1.aliyun.com prefer</span><br><span class=\"line\">server ntp2.aliyun.com iburst</span><br><span class=\"line\">server ntp3.aliyun.com iburst</span><br><span class=\"line\">server ntp4.aliyun.com iburst</span><br><span class=\"line\">server ntp5.aliyun.com iburst</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span>允许这个网段的对时请求</span><br><span class=\"line\">restrict 192.168.0.0 mask 255.255.255.0 nomodify</span><br></pre></td></tr></table></figure>\n<h5 id=\"3、防火墙取消对123端口的限制\"><a href=\"#3、防火墙取消对123端口的限制\" class=\"headerlink\" title=\"3、防火墙取消对123端口的限制\"></a>3、防火墙取消对123端口的限制</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -t filter -A INPUT -p udp --destination-port 123 -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>或者</span><br><span class=\"line\">sudo ufw allow 123/udp</span><br></pre></td></tr></table></figure>\n<h5 id=\"4、ntp-开机启动\"><a href=\"#4、ntp-开机启动\" class=\"headerlink\" title=\"4、ntp 开机启动\"></a>4、ntp 开机启动</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable ntp</span><br></pre></td></tr></table></figure>\n<h5 id=\"5、查看状态\"><a href=\"#5、查看状态\" class=\"headerlink\" title=\"5、查看状态\"></a>5、查看状态</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">watch ntpq -p</span><br><span class=\"line\"></span><br><span class=\"line\">Every 2.0s: ntpq -p                                                                                             nacos: Fri Mar 20 17:00:21 2020</span><br><span class=\"line\"></span><br><span class=\"line\">     remote           refid      st t when poll reach   delay   offset  jitter</span><br><span class=\"line\">==============================================================================</span><br><span class=\"line\">*120.25.115.20   10.137.53.7      2 u   25   64   37   30.932   -7.778   4.707</span><br><span class=\"line\">+tick.ntp.infoma .GPS.            1 u   21   64   37  280.022  -13.369   3.185</span><br><span class=\"line\">-94.130.49.186 ( 195.13.23.5      3 u   15   64   37  246.228   -6.189  89.097</span><br><span class=\"line\">+ntp1.ams1.nl.le 130.133.1.10     2 u   14   64   35  224.919   -7.378   6.993</span><br><span class=\"line\">+ntp5.flashdance 194.58.202.148   2 u   22   64   37  264.122   -6.842   5.630</span><br></pre></td></tr></table></figure>\n<p>说明：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">remote: 连接的远程NTP服务器；</span><br><span class=\"line\">refid: 提供时间同步的服务器IP；</span><br><span class=\"line\">st: 远程服务器的层级别（stratum）。由于NTP是层型结构，有顶端的服务器、多层的Relay服务器、再到客户端。所以服务器级别从高到低可以设定为1-16。为了减缓负荷和网络堵塞，原则上应该避免直接连接到级别为1的服务器；</span><br><span class=\"line\">when: 几秒钟前曾经做过时间同步更新的动作；</span><br><span class=\"line\">poll: 本地主机和远程服务器多少时间进行一次同步(单位：s)；</span><br><span class=\"line\">reach: 已经向上层NTP服务器要求更新的次数；</span><br><span class=\"line\">delay: 网络传输过程当中延迟的时间（单位：10^(-6)s，微秒）；</span><br><span class=\"line\">offset: 时间补偿的结果（单位与：10^(-3)s，毫秒）；</span><br><span class=\"line\">jitter: Linux系统时间与BIOS硬件时间的差值（单位：10^(-6)s，微秒）。其绝对值越小，主机和对时服务器的时间就越接近；</span><br><span class=\"line\">*: 远端的服务器已经被确认为主NTP Server，系统时间将由这台机器所提供；</span><br><span class=\"line\">+: 作为辅助的NTP Server，与带有*号的服务器一起为我们提供同步服务. 当`*`号服务器不可用时，它就可以接管；</span><br><span class=\"line\">-: 远程服务器被clustering algorithm认为是不合格的NTP Server；</span><br><span class=\"line\">x: 远程服务器不可用；</span><br></pre></td></tr></table></figure></p>\n"},{"title":"Ubuntu18.04开机启动脚本","author":"ZkName","date":"2020-04-02T07:25:00.000Z","_content":"\n```shell\nvi /lib/systemd/system/rc.local.service\n\n[Unit]\nDescription=/etc/rc.local Compatibility\nConditionFileIsExecutable=/etc/rc.local\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/etc/rc.local start\nTimeoutSec=0\nRemainAfterExit=yes\n\n\n```\n\n尾部添加内容\n```shell\n[Unit]\nDescription=/etc/rc.local Compatibility\nConditionFileIsExecutable=/etc/rc.local\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/etc/rc.local start\nTimeoutSec=0\nRemainAfterExit=yes\n\n\n[Install]  \nWantedBy=multi-user.target  \nAlias=rc-local.service\n```\n\n新建文件\n```shell\nvi /etc/rc.local \n```\n\n软链\n```shell\nln -s /lib/systemd/system/rc.local.service /etc/systemd/system/\n```\n","source":"_posts/Ubuntu18.04开机启动脚本.md","raw":"title: Ubuntu18.04开机启动脚本\nauthor: ZkName\ntags:\n  - Ubuntu\ncategories: []\ndate: 2020-04-02 15:25:00\n---\n\n```shell\nvi /lib/systemd/system/rc.local.service\n\n[Unit]\nDescription=/etc/rc.local Compatibility\nConditionFileIsExecutable=/etc/rc.local\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/etc/rc.local start\nTimeoutSec=0\nRemainAfterExit=yes\n\n\n```\n\n尾部添加内容\n```shell\n[Unit]\nDescription=/etc/rc.local Compatibility\nConditionFileIsExecutable=/etc/rc.local\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/etc/rc.local start\nTimeoutSec=0\nRemainAfterExit=yes\n\n\n[Install]  \nWantedBy=multi-user.target  \nAlias=rc-local.service\n```\n\n新建文件\n```shell\nvi /etc/rc.local \n```\n\n软链\n```shell\nln -s /lib/systemd/system/rc.local.service /etc/systemd/system/\n```\n","slug":"Ubuntu18.04开机启动脚本","published":1,"updated":"2020-04-02T07:50:20.482Z","_id":"ck8igjy2i0000gwtwbfk5fh5u","comments":1,"layout":"post","photos":[],"link":"","content":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /lib/systemd/system/rc.local.service</span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=/etc/rc.local Compatibility</span><br><span class=\"line\">ConditionFileIsExecutable=/etc/rc.local</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/etc/rc.local start</span><br><span class=\"line\">TimeoutSec=0</span><br><span class=\"line\">RemainAfterExit=yes</span><br></pre></td></tr></table></figure>\n<p>尾部添加内容<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=/etc/rc.local Compatibility</span><br><span class=\"line\">ConditionFileIsExecutable=/etc/rc.local</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/etc/rc.local start</span><br><span class=\"line\">TimeoutSec=0</span><br><span class=\"line\">RemainAfterExit=yes</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]  </span><br><span class=\"line\">WantedBy=multi-user.target  </span><br><span class=\"line\">Alias=rc-local.service</span><br></pre></td></tr></table></figure></p>\n<p>新建文件<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/rc.local</span><br></pre></td></tr></table></figure></p>\n<p>软链<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /lib/systemd/system/rc.local.service /etc/systemd/system/</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /lib/systemd/system/rc.local.service</span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=/etc/rc.local Compatibility</span><br><span class=\"line\">ConditionFileIsExecutable=/etc/rc.local</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/etc/rc.local start</span><br><span class=\"line\">TimeoutSec=0</span><br><span class=\"line\">RemainAfterExit=yes</span><br></pre></td></tr></table></figure>\n<p>尾部添加内容<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=/etc/rc.local Compatibility</span><br><span class=\"line\">ConditionFileIsExecutable=/etc/rc.local</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/etc/rc.local start</span><br><span class=\"line\">TimeoutSec=0</span><br><span class=\"line\">RemainAfterExit=yes</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]  </span><br><span class=\"line\">WantedBy=multi-user.target  </span><br><span class=\"line\">Alias=rc-local.service</span><br></pre></td></tr></table></figure></p>\n<p>新建文件<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/rc.local</span><br></pre></td></tr></table></figure></p>\n<p>软链<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /lib/systemd/system/rc.local.service /etc/systemd/system/</span><br></pre></td></tr></table></figure></p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cjpmdjso00005i85n9b73mrsu","category_id":"cjpmdjsnv0002i85n6qwivc2c","_id":"cjpmdjso4000ai85np4ntxkst"},{"post_id":"cjpmdjsnk0000i85ncbvlpo53","category_id":"cjpmdjsnv0002i85n6qwivc2c","_id":"cjpmdjso6000ei85n3vd6go6z"},{"post_id":"cjpmdjsns0001i85nc8xv7enu","category_id":"cjpmdjsnv0002i85n6qwivc2c","_id":"cjpmdjso6000fi85nwpzhxuf0"},{"post_id":"cjpmdjsnz0004i85nq530t17b","category_id":"cjpmdjsnv0002i85n6qwivc2c","_id":"cjpmdjso7000hi85nuz96cmmd"},{"post_id":"cjpmdjsoc000ii85n1q8ad8n0","category_id":"cjpmdjsnv0002i85n6qwivc2c","_id":"cjpmdjsoh000oi85n7hxa93p6"},{"post_id":"cjpmdjsod000ji85nqg2duvev","category_id":"cjpmdjsnv0002i85n6qwivc2c","_id":"cjpmdjsoj000ri85n0b6cr70p"},{"post_id":"cjpmdjsof000li85njwp64orb","category_id":"cjpmdjsnv0002i85n6qwivc2c","_id":"cjpmdjsom000ui85nnn43yc4x"},{"post_id":"cjpmdjsok000si85nuy16hjq5","category_id":"cjpmdjsoo000xi85ni60mvrlq","_id":"cjpmdjsou0017i85nu4reodtf"},{"post_id":"cjpmdjson000wi85nqm34d7pk","category_id":"cjpmdjsos0014i85nak9m7tx6","_id":"cjpmdjsov001bi85n696yczd6"},{"post_id":"cjpmdjsot0016i85nws1qgt00","category_id":"cjpmdjsou0018i85nzsrklzgf","_id":"cjpmdjsox001fi85nj59kll62"},{"post_id":"cjpmdjspf001zi85n0gcux2ct","category_id":"cjpmdjsou0018i85nzsrklzgf","_id":"cjpmdjspj0026i85nk9y6zrym"},{"post_id":"cjpmdjsph0022i85nx3pyl2z0","category_id":"cjpmdjsou0018i85nzsrklzgf","_id":"cjpmdjspm002ai85n159c6bbg"},{"post_id":"cjpmdjspj0025i85nyok9nc72","category_id":"cjpmdjsou0018i85nzsrklzgf","_id":"cjpmdjspo002fi85nczr7a6y6"},{"post_id":"cjpmdjspp002hi85nnfeh4jw7","category_id":"cjpmdjsoo000xi85ni60mvrlq","_id":"cjpmdjspu002qi85nbsiar165"},{"post_id":"cjpmdjspk0027i85nvfc87mtj","category_id":"cjpmdjspm002ci85nk524j6i0","_id":"cjpmdjspv002ti85nf3hnsd4s"},{"post_id":"cjpmdjspv002si85ng32tft9r","category_id":"cjpmdjsou0018i85nzsrklzgf","_id":"cjpmdjspz0031i85no21b2f1e"},{"post_id":"cjpmdjspq002ji85ndcd0akl0","category_id":"cjpmdjspt002oi85nj954ix2q","_id":"cjpmdjsq10035i85neiwdnidh"},{"post_id":"cjpmdjsq00034i85n4e5t24c0","category_id":"cjpmdjsou0018i85nzsrklzgf","_id":"cjpmdjsq4003bi85no3jgk19y"},{"post_id":"cjpmdjspw002vi85npziqwscu","category_id":"cjpmdjspy002zi85n1cgw7ena","_id":"cjpmdjsq6003fi85no5zw0mez"},{"post_id":"cjpmdjsq10036i85n7pvda101","category_id":"cjpmdjsou0018i85nzsrklzgf","_id":"cjpmdjsq7003ii85nhbiykldp"},{"post_id":"cjpmdjsq20038i85nw7dgld3p","category_id":"cjpmdjsq5003di85nofc1e2ms","_id":"cjpmdjsqa003ri85npxxc88hf"},{"post_id":"cjpmdjsq3003ai85n5tn49sc0","category_id":"cjpmdjsq8003mi85nj2kdea3m","_id":"cjpmdjsqf003xi85nqhp9418c"},{"post_id":"cjpmdjsq5003ei85nejepamuj","category_id":"cjpmdjsq8003mi85nj2kdea3m","_id":"cjpmdjsqg0042i85n6llml3ft"},{"post_id":"cjpmdjsq6003hi85ni6fgjj59","category_id":"cjpmdjsq8003mi85nj2kdea3m","_id":"cjpmdjsqh0046i85nkxdodugv"},{"post_id":"cjpmdjsq9003oi85nrsjm4c3i","category_id":"cjpmdjsqg0041i85ntxc581t0","_id":"cjpmdjsqi004ai85nzve5dwv3"},{"post_id":"cjpmdjsr4005fi85nvdmw39tf","category_id":"cjpmdjsq8003mi85nj2kdea3m","_id":"cjpmdjsr5005hi85n0re81yfi"},{"post_id":"cjq7wc0mb0000ck5n6m4nqjtr","category_id":"cjq7wc0mi0001ck5n8lohy3hy","_id":"cjq7wc0mr0004ck5n5eagnuln"},{"post_id":"ck4ch9c6d0000f0twq1on7uki","category_id":"ck4ch9c750001f0tw3pi0czcq","_id":"ck4ch9c7o0004f0tw1dftb2ib"},{"post_id":"ck52bfy6k00000gtw2lqwgmkp","category_id":"ck52bfy7a00010gtw8grg5tuc","_id":"ck52bfy8800040gtwilaaza5i"},{"post_id":"ck53843fv0000jotws48kp2g2","category_id":"ck53843g80001jotwfjgoznzn","_id":"ck53843gt0004jotwbjvubciz"},{"post_id":"ck539iicc0000g8tws028opi9","category_id":"ck539iicx0001g8twjjrmnvru","_id":"ck539iid80004g8twkseco83r"},{"post_id":"ck54t03830000ggtw63wdw8t4","category_id":"ck54t038n0001ggtwvlvjek89","_id":"ck54t03960004ggtw1fvvrbii"}],"PostTag":[{"post_id":"cjpmdjso00005i85n9b73mrsu","tag_id":"cjpmdjsny0003i85nz3dw115j","_id":"cjpmdjso40008i85n9a1o0bik"},{"post_id":"cjpmdjsnk0000i85ncbvlpo53","tag_id":"cjpmdjsny0003i85nz3dw115j","_id":"cjpmdjso40009i85njyw6pdct"},{"post_id":"cjpmdjsns0001i85nc8xv7enu","tag_id":"cjpmdjsny0003i85nz3dw115j","_id":"cjpmdjso6000di85nbdasn6y6"},{"post_id":"cjpmdjsnz0004i85nq530t17b","tag_id":"cjpmdjsny0003i85nz3dw115j","_id":"cjpmdjso7000gi85nvrydbl46"},{"post_id":"cjpmdjsoc000ii85n1q8ad8n0","tag_id":"cjpmdjsny0003i85nz3dw115j","_id":"cjpmdjsoe000ki85nifzuzae6"},{"post_id":"cjpmdjsof000li85njwp64orb","tag_id":"cjpmdjsny0003i85nz3dw115j","_id":"cjpmdjsoh000pi85nc104zu9p"},{"post_id":"cjpmdjsod000ji85nqg2duvev","tag_id":"cjpmdjsny0003i85nz3dw115j","_id":"cjpmdjson000vi85nmb0d161i"},{"post_id":"cjpmdjsod000ji85nqg2duvev","tag_id":"cjpmdjsog000mi85nbebq04fy","_id":"cjpmdjsop000yi85nusn51ws5"},{"post_id":"cjpmdjsog000ni85nk9k1c9c7","tag_id":"cjpmdjsom000ti85nughau9gn","_id":"cjpmdjsor0012i85n5j8cmfqo"},{"post_id":"cjpmdjsot0016i85nws1qgt00","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsou0019i85ng2kxw46p"},{"post_id":"cjpmdjsoi000qi85n9kft8ui9","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsow001di85nrdxx5ugb"},{"post_id":"cjpmdjsoi000qi85n9kft8ui9","tag_id":"cjpmdjsos0015i85nry5pf8tv","_id":"cjpmdjsox001ei85n2z7j8dn4"},{"post_id":"cjpmdjsoi000qi85n9kft8ui9","tag_id":"cjpmdjsov001ai85nyb6avofm","_id":"cjpmdjsox001hi85ns7wowpwz"},{"post_id":"cjpmdjsok000si85nuy16hjq5","tag_id":"cjpmdjsov001ci85nyjjpr7c2","_id":"cjpmdjsoy001ji85n545emmne"},{"post_id":"cjpmdjsok000si85nuy16hjq5","tag_id":"cjpmdjsox001gi85n6gaz270c","_id":"cjpmdjsoz001ki85njxhjyvra"},{"post_id":"cjpmdjson000wi85nqm34d7pk","tag_id":"cjpmdjsoy001ii85njamel0ea","_id":"cjpmdjsoz001mi85nckqbjkyf"},{"post_id":"cjpmdjsop000zi85n5a73fp4o","tag_id":"cjpmdjsos0015i85nry5pf8tv","_id":"cjpmdjsp0001pi85nxyaznlxj"},{"post_id":"cjpmdjsop000zi85n5a73fp4o","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsp1001qi85n80ccuxyu"},{"post_id":"cjpmdjsoq0011i85noubdp7eu","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsp1001ti85n3fv6zkvt"},{"post_id":"cjpmdjsoq0011i85noubdp7eu","tag_id":"cjpmdjsp0001oi85n6k2vjsgo","_id":"cjpmdjsp2001ui85nhcxz5xyk"},{"post_id":"cjpmdjsoq0011i85noubdp7eu","tag_id":"cjpmdjsp1001ri85nzqyeie3g","_id":"cjpmdjsp2001wi85n23ro38kg"},{"post_id":"cjpmdjsor0013i85n6rrgw3y1","tag_id":"cjpmdjsp1001si85noh8rgfqt","_id":"cjpmdjsp2001xi85nqcms4wei"},{"post_id":"cjpmdjsor0013i85n6rrgw3y1","tag_id":"cjpmdjsp2001vi85nanxzh696","_id":"cjpmdjsp2001yi85nfqqx76h5"},{"post_id":"cjpmdjspf001zi85n0gcux2ct","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsph0021i85n6dm2ibwk"},{"post_id":"cjpmdjspf001zi85n0gcux2ct","tag_id":"cjpmdjsog000mi85nbebq04fy","_id":"cjpmdjspi0024i85no5kim5dy"},{"post_id":"cjpmdjspj0025i85nyok9nc72","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjspl0028i85n0xeocrqk"},{"post_id":"cjpmdjspg0020i85nlrcnznz7","tag_id":"cjpmdjspi0023i85n9tfg6978","_id":"cjpmdjspn002di85nhen9y6wq"},{"post_id":"cjpmdjspg0020i85nlrcnznz7","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjspp002gi85nv741ztyp"},{"post_id":"cjpmdjsph0022i85nx3pyl2z0","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjspr002ki85n63jpnkug"},{"post_id":"cjpmdjsph0022i85nx3pyl2z0","tag_id":"cjpmdjspm002bi85nhnnhhrhg","_id":"cjpmdjsps002mi85nlovup8m5"},{"post_id":"cjpmdjspp002hi85nnfeh4jw7","tag_id":"cjpmdjsov001ci85nyjjpr7c2","_id":"cjpmdjspu002ri85n0qg04jh7"},{"post_id":"cjpmdjspk0027i85nvfc87mtj","tag_id":"cjpmdjspq002ii85n1wp2p0k8","_id":"cjpmdjspx002wi85nlkrni489"},{"post_id":"cjpmdjspk0027i85nvfc87mtj","tag_id":"cjpmdjspt002ni85n87y1btqo","_id":"cjpmdjspy002yi85nxksa8ud8"},{"post_id":"cjpmdjspl0029i85ny0ri5aot","tag_id":"cjpmdjspw002ui85ncx0ulec1","_id":"cjpmdjspz0033i85nn7v21f8q"},{"post_id":"cjpmdjsq10036i85n7pvda101","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsq30039i85nhg4ly3du"},{"post_id":"cjpmdjspn002ei85nd0zm4570","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsq6003gi85n9e054fjn"},{"post_id":"cjpmdjspn002ei85nd0zm4570","tag_id":"cjpmdjspz0032i85n8i4ow7es","_id":"cjpmdjsq7003ji85nmm38lzx3"},{"post_id":"cjpmdjspn002ei85nd0zm4570","tag_id":"cjpmdjsq20037i85nwxdnp7uj","_id":"cjpmdjsq9003ni85n8tpsq0sx"},{"post_id":"cjpmdjspq002ji85ndcd0akl0","tag_id":"cjpmdjsq5003ci85navqdw3ig","_id":"cjpmdjsqa003pi85nfdvxkw7s"},{"post_id":"cjpmdjsqc003ui85nbum54z60","tag_id":"cjpmdjsp0001oi85n6k2vjsgo","_id":"cjpmdjsqf003zi85nm1sckjc6"},{"post_id":"cjpmdjsqc003ui85nbum54z60","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsqg0040i85n7ieofude"},{"post_id":"cjpmdjspr002li85nzsi33tbm","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsqg0044i85nbawtm92y"},{"post_id":"cjpmdjspr002li85nzsi33tbm","tag_id":"cjpmdjsq7003ki85n1hhzglok","_id":"cjpmdjsqh0045i85n44ylhhtx"},{"post_id":"cjpmdjspr002li85nzsi33tbm","tag_id":"cjpmdjsqb003si85nro2o7b4u","_id":"cjpmdjsqh0047i85n2tgvr761"},{"post_id":"cjpmdjsqd003vi85nwx8q4u7h","tag_id":"cjpmdjsom000ti85nughau9gn","_id":"cjpmdjsqi0049i85njza6sr3t"},{"post_id":"cjpmdjspt002pi85ni3gnt1g4","tag_id":"cjpmdjsqf003yi85ntoz1bz8g","_id":"cjpmdjsqi004bi85nyedwkc1r"},{"post_id":"cjpmdjspt002pi85ni3gnt1g4","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsqj004di85nnced0727"},{"post_id":"cjpmdjspv002si85ng32tft9r","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsqj004ei85na1ys6th5"},{"post_id":"cjpmdjspv002si85ng32tft9r","tag_id":"cjpmdjsqg0043i85nmqeauoez","_id":"cjpmdjsqj004gi85npxsdjaev"},{"post_id":"cjpmdjspw002vi85npziqwscu","tag_id":"cjpmdjsqh0048i85njcrp4h5f","_id":"cjpmdjsqj004hi85ntj68esjd"},{"post_id":"cjpmdjspx002xi85nmo1z80lx","tag_id":"cjpmdjsp2001vi85nanxzh696","_id":"cjpmdjsqk004ji85n8dus3ju5"},{"post_id":"cjpmdjspx002xi85nmo1z80lx","tag_id":"cjpmdjsqi004ci85nsle514xg","_id":"cjpmdjsqk004ki85nag0tl2yc"},{"post_id":"cjpmdjspy0030i85nzbhy23es","tag_id":"cjpmdjsqj004fi85n9bis6emy","_id":"cjpmdjsql004mi85n3zlqi9mu"},{"post_id":"cjpmdjspy0030i85nzbhy23es","tag_id":"cjpmdjsqk004ii85n99lzhczr","_id":"cjpmdjsql004ni85n0m62x2j0"},{"post_id":"cjpmdjsq00034i85n4e5t24c0","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsql004pi85nekasngso"},{"post_id":"cjpmdjsq00034i85n4e5t24c0","tag_id":"cjpmdjsqk004li85nshog1u7o","_id":"cjpmdjsql004qi85nusxhv3t7"},{"post_id":"cjpmdjsq20038i85nw7dgld3p","tag_id":"cjpmdjsql004oi85np30d1zsl","_id":"cjpmdjsqm004ti85n0b8uhe8m"},{"post_id":"cjpmdjsq20038i85nw7dgld3p","tag_id":"cjpmdjsqm004ri85nsvp0qlgt","_id":"cjpmdjsqm004ui85nhi24di2v"},{"post_id":"cjpmdjsq3003ai85n5tn49sc0","tag_id":"cjpmdjsqm004si85n0mvjf386","_id":"cjpmdjsqo004xi85n305rrkjc"},{"post_id":"cjpmdjsq3003ai85n5tn49sc0","tag_id":"cjpmdjsqi004ci85nsle514xg","_id":"cjpmdjsqo004yi85ntin8gf4h"},{"post_id":"cjpmdjsq5003ei85nejepamuj","tag_id":"cjpmdjsqi004ci85nsle514xg","_id":"cjpmdjsqq0051i85nttkzg5tg"},{"post_id":"cjpmdjsq5003ei85nejepamuj","tag_id":"cjpmdjsqo004zi85noi88h16n","_id":"cjpmdjsqr0052i85n2bp8t14p"},{"post_id":"cjpmdjsq6003hi85ni6fgjj59","tag_id":"cjpmdjsqo0050i85ntzx0sahg","_id":"cjpmdjsqr0054i85nwvmbe9gs"},{"post_id":"cjpmdjsq8003li85n9iordqso","tag_id":"cjpmdjsqr0053i85nna6fxbg7","_id":"cjpmdjsqs0057i85nk1eno708"},{"post_id":"cjpmdjsq8003li85n9iordqso","tag_id":"cjpmdjsqr0055i85n2pd1yei4","_id":"cjpmdjsqs0058i85nejrwcz1s"},{"post_id":"cjpmdjsq8003li85n9iordqso","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"cjpmdjsqt005ai85nw4efimxa"},{"post_id":"cjpmdjsq9003oi85nrsjm4c3i","tag_id":"cjpmdjsqs0056i85ncg67fpc2","_id":"cjpmdjsqt005ci85nya4upagr"},{"post_id":"cjpmdjsq9003oi85nrsjm4c3i","tag_id":"cjpmdjsqs0059i85n4bp4lwsl","_id":"cjpmdjsqt005di85nl44ivadh"},{"post_id":"cjpmdjsqa003qi85nis2z4w7m","tag_id":"cjpmdjsqt005bi85ngp4y1l1i","_id":"cjpmdjsqu005ei85n2k4pg0ih"},{"post_id":"cjpmdjsr4005fi85nvdmw39tf","tag_id":"cjpmdjsqi004ci85nsle514xg","_id":"cjpmdjsr5005ii85nww2oyy6a"},{"post_id":"cjpmdjsr4005fi85nvdmw39tf","tag_id":"cjpmdjsr5005gi85nm6urzflr","_id":"cjpmdjsr6005ji85npnxigvr9"},{"post_id":"cjq7wc0mb0000ck5n6m4nqjtr","tag_id":"cjq7wc0mp0002ck5n0666v0no","_id":"cjq7wc0mr0005ck5nycg39hmd"},{"post_id":"cjq7wc0mb0000ck5n6m4nqjtr","tag_id":"cjq7wc0mq0003ck5npjdtp4uy","_id":"cjq7wc0mr0006ck5n62ux76zb"},{"post_id":"cjs9tdwv20000ugtwwm9is977","tag_id":"cjs9tdwvb0001ugtwf12au6b8","_id":"cjs9tdwvo0003ugtwpgknso57"},{"post_id":"cjs9tdwv20000ugtwwm9is977","tag_id":"cjs9tdwvn0002ugtw30hrf8p6","_id":"cjs9tdwvp0004ugtwslz75zgx"},{"post_id":"ck1hgd6sp0000mktw6ieafv88","tag_id":"ck1hgd6sv0001mktwoklndf4j","_id":"ck1hgd6t40003mktwkl0zsgh3"},{"post_id":"ck1hgd6sp0000mktw6ieafv88","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"ck1hgd6t50004mktw5fh3tc1b"},{"post_id":"ck1hgd6sp0000mktw6ieafv88","tag_id":"ck1hgd6t30002mktwj38qxoid","_id":"ck1hgd6t50005mktww1wbrrk4"},{"post_id":"ck4ch9c6d0000f0twq1on7uki","tag_id":"ck4ch9c7l0002f0twi9d5gmmu","_id":"ck4ch9c7o0003f0tw8nw2jmk8"},{"post_id":"ck52bfy6k00000gtw2lqwgmkp","tag_id":"ck52bfy8100020gtw0g9bh3px","_id":"ck52bfy8900050gtwpalgldvc"},{"post_id":"ck52bfy6k00000gtw2lqwgmkp","tag_id":"ck52bfy8600030gtwc78uss6k","_id":"ck52bfy8a00060gtwclt38kfs"},{"post_id":"ck53843fv0000jotws48kp2g2","tag_id":"ck53843gq0002jotweykmld87","_id":"ck53843gw0007jotwai9s01rx"},{"post_id":"ck53843fv0000jotws48kp2g2","tag_id":"ck53843gs0003jotwxfujaubo","_id":"ck53843gw0008jotwu9i5wrpo"},{"post_id":"ck53843fv0000jotws48kp2g2","tag_id":"ck53843gu0005jotwxart4q9l","_id":"ck53843gx0009jotwnvnhcq3d"},{"post_id":"ck53843fv0000jotws48kp2g2","tag_id":"ck53843gu0006jotwsqpx2c6v","_id":"ck53843gx000ajotwxhxgj091"},{"post_id":"ck539iicc0000g8tws028opi9","tag_id":"ck539iid50002g8tws9mgfgk2","_id":"ck539iid80003g8twrnb3eb9v"},{"post_id":"ck54t03830000ggtw63wdw8t4","tag_id":"ck54t03920002ggtwu14xc9ye","_id":"ck54t03950003ggtwkcntwvi9"},{"post_id":"ck7zyicm10000uotwnzqqfl83","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"ck7zyicmt0002uotwa0nvsagp"},{"post_id":"ck7zyicm10000uotwnzqqfl83","tag_id":"ck7zyicmf0001uotw6le7nzxx","_id":"ck7zyicmu0003uotwxv0w7i3t"},{"post_id":"ck8igjy2i0000gwtwbfk5fh5u","tag_id":"cjpmdjsoq0010i85n6zjimjko","_id":"ck8igjy310001gwtwunkoimtk"}],"Tag":[{"name":"Centos","_id":"cjpmdjsny0003i85nz3dw115j"},{"name":"JDK","_id":"cjpmdjsog000mi85nbebq04fy"},{"name":"Docker","_id":"cjpmdjsom000ti85nughau9gn"},{"name":"Ubuntu","_id":"cjpmdjsoq0010i85n6zjimjko"},{"name":"bbr","_id":"cjpmdjsos0015i85nry5pf8tv"},{"name":"搬瓦工","_id":"cjpmdjsov001ai85nyb6avofm"},{"name":"Eclipse","_id":"cjpmdjsov001ci85nyjjpr7c2"},{"name":"Maven","_id":"cjpmdjsox001gi85n6gaz270c"},{"name":"Clojure","_id":"cjpmdjsoy001ii85njamel0ea"},{"name":"shadowsocks","_id":"cjpmdjsp0001oi85n6k2vjsgo"},{"name":"ssr","_id":"cjpmdjsp1001ri85nzqyeie3g"},{"name":"SpringBoot","_id":"cjpmdjsp1001si85noh8rgfqt"},{"name":"Spring","_id":"cjpmdjsp2001vi85nanxzh696"},{"name":"nodejs","_id":"cjpmdjspi0023i85n9tfg6978"},{"name":"Crontab","_id":"cjpmdjspm002bi85nhnnhhrhg"},{"name":"注册码","_id":"cjpmdjspq002ii85n1wp2p0k8"},{"name":"MarkdownPad","_id":"cjpmdjspt002ni85n87y1btqo"},{"name":"Cygwin","_id":"cjpmdjspw002ui85ncx0ulec1"},{"name":"Nginx","_id":"cjpmdjspz0032i85n8i4ow7es"},{"name":"SSL","_id":"cjpmdjsq20037i85nwxdnp7uj"},{"name":"google voice","_id":"cjpmdjsq5003ci85navqdw3ig"},{"name":"SVN","_id":"cjpmdjsq7003ki85n1hhzglok"},{"name":"svn","_id":"cjpmdjsqb003si85nro2o7b4u"},{"name":"hexo","_id":"cjpmdjsqf003yi85ntoz1bz8g"},{"name":"Linux","_id":"cjpmdjsqg0043i85nmqeauoez"},{"name":"Mysql","_id":"cjpmdjsqh0048i85njcrp4h5f"},{"name":"Java","_id":"cjpmdjsqi004ci85nsle514xg"},{"name":"workflow","_id":"cjpmdjsqj004fi85n9bis6emy"},{"name":"ios","_id":"cjpmdjsqk004ii85n99lzhczr"},{"name":"DNSmasq","_id":"cjpmdjsqk004li85nshog1u7o"},{"name":"Git","_id":"cjpmdjsql004oi85np30d1zsl"},{"name":"Hexo","_id":"cjpmdjsqm004ri85nsvp0qlgt"},{"name":"Tomcat","_id":"cjpmdjsqm004si85n0mvjf386"},{"name":"Wechat","_id":"cjpmdjsqo004zi85noi88h16n"},{"name":"Hadoop","_id":"cjpmdjsqo0050i85ntzx0sahg"},{"name":"kcptun","_id":"cjpmdjsqr0053i85nna6fxbg7"},{"name":"xkcptun","_id":"cjpmdjsqr0055i85n2pd1yei4"},{"name":"  shadowsocks","_id":"cjpmdjsqs0056i85ncg67fpc2"},{"name":"极路由","_id":"cjpmdjsqs0059i85n4bp4lwsl"},{"name":"深度学习","_id":"cjpmdjsqt005bi85ngp4y1l1i"},{"name":"Zip","_id":"cjpmdjsr5005gi85nm6urzflr"},{"name":"eclipse","_id":"cjq7wc0mp0002ck5n0666v0no"},{"name":"java","_id":"cjq7wc0mq0003ck5npjdtp4uy"},{"name":"Google","_id":"cjs9tdwvb0001ugtwf12au6b8"},{"name":"Chrome","_id":"cjs9tdwvn0002ugtw30hrf8p6"},{"name":"jetty","_id":"ck1hgd6sv0001mktwoklndf4j"},{"name":"jetty9","_id":"ck1hgd6t30002mktwj38qxoid"},{"name":"VPM","_id":"ck4ch9c7l0002f0twi9d5gmmu"},{"name":"SSH","_id":"ck52bfy8100020gtw0g9bh3px"},{"name":"SecureCRT","_id":"ck52bfy8600030gtwc78uss6k"},{"name":"deepin","_id":"ck53843gq0002jotweykmld87"},{"name":"wine","_id":"ck53843gs0003jotwxfujaubo"},{"name":"qq","_id":"ck53843gu0005jotwxart4q9l"},{"name":"wechat","_id":"ck53843gu0006jotwsqpx2c6v"},{"name":"github","_id":"ck539iid50002g8tws9mgfgk2"},{"name":"Debian","_id":"ck54t03920002ggtwu14xc9ye"},{"name":"NTP","_id":"ck7zyicmf0001uotw6le7nzxx"}]}}